Index: app/src/main/java/com/example/agrimart/ui/Explore/CategoryFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.ui.Explore;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Product;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class CategoryFragment extends Fragment {\r\n    private String categoryName;\r\n\r\n    public CategoryFragment(String categoryName) {\r\n        this.categoryName = categoryName;\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_category, container, false);\r\n\r\n        RecyclerView recyclerView = view.findViewById(R.id.recyclerView);\r\n        recyclerView.setLayoutManager(new GridLayoutManager(getContext(), 2));\r\n\r\n        List<Product> products = new ArrayList<>();\r\n\r\n//        if (categoryName.equals(\"Rau củ quả\")) {\r\n//            products.add(new Product(R.drawable.vegetable, \"Cà chua\", \"20.000đ\"));\r\n//            products.add(new Product(R.drawable.vegetable, \"Cà rốt\", \"15.000đ\"));\r\n//            products.add(new Product(R.drawable.vegetable, \"Bí đỏ\", \"10.000đ\"));\r\n//        }\r\n//        else if (categoryName.equals(\"Trái cây\")) {\r\n//            products.add(new Product(R.drawable.apple, \"Dâu tây\", \"30.000đ\"));\r\n//            products.add(new Product(R.drawable.apple, \"Chuối\", \"10.000đ\"));\r\n//            products.add(new Product(R.drawable.apple, \"Cam\", \"20.000đ\"));\r\n//        }\r\n\r\n        ProductAdapter productAdapter = new ProductAdapter(products, product -> {\r\n        });\r\n        recyclerView.setAdapter(productAdapter);\r\n\r\n        return view;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/Explore/CategoryFragment.java b/app/src/main/java/com/example/agrimart/ui/Explore/CategoryFragment.java
--- a/app/src/main/java/com/example/agrimart/ui/Explore/CategoryFragment.java	(revision 4a0236d39795153d047fc8419efb40467083d307)
+++ b/app/src/main/java/com/example/agrimart/ui/Explore/CategoryFragment.java	(date 1730994894148)
@@ -1,5 +1,6 @@
 package com.example.agrimart.ui.Explore;
 
+import android.content.Intent;
 import android.os.Bundle;
 import android.view.LayoutInflater;
 import android.view.View;
@@ -8,46 +9,74 @@
 import androidx.annotation.NonNull;
 import androidx.annotation.Nullable;
 import androidx.fragment.app.Fragment;
+import androidx.lifecycle.ViewModelProvider;
 import androidx.recyclerview.widget.GridLayoutManager;
 import androidx.recyclerview.widget.RecyclerView;
+
 import com.example.agrimart.R;
+import com.example.agrimart.SpacesItemDecoration;
 import com.example.agrimart.adapter.ProductAdapter;
 import com.example.agrimart.data.model.Product;
+import com.example.agrimart.databinding.FragmentCategoryBinding;
+import com.example.agrimart.databinding.FragmentHomeBinding;
+import com.example.agrimart.ui.ProductPage.ProductDetailActivity;
+import com.example.agrimart.viewmodel.CategoryViewModel;
+
 import java.util.ArrayList;
 import java.util.List;
 
 public class CategoryFragment extends Fragment {
-    private String categoryName;
+    private String categoryID;
+    private CategoryViewModel viewModel;
+    private ProductAdapter productAdapter;
+    private FragmentCategoryBinding binding; // Sử dụng binding
 
-    public CategoryFragment(String categoryName) {
-        this.categoryName = categoryName;
+    public CategoryFragment(String categoryID) {
+        this.categoryID = categoryID;
     }
 
     @Nullable
     @Override
     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
-        View view = inflater.inflate(R.layout.fragment_category, container, false);
+        // Sử dụng ViewBinding
+        binding = FragmentCategoryBinding.inflate(inflater, container, false);
+        View view = binding.getRoot();
 
-        RecyclerView recyclerView = view.findViewById(R.id.recyclerView);
+        // Thiết lập RecyclerView
+        RecyclerView recyclerView = binding.recyclerViewCategory;
         recyclerView.setLayoutManager(new GridLayoutManager(getContext(), 2));
+        int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);
 
-        List<Product> products = new ArrayList<>();
+        // Khởi tạo adapter rỗng ban đầu
+        List<Product> prod = new ArrayList<>();
+        productAdapter = new ProductAdapter(prod, product -> {
+            try {
+                Intent intent = new Intent(getContext(), ProductDetailActivity.class);
+                intent.putExtra("product", product);
+                intent.putExtra("storeId", product.getStoreId());
+                startActivity(intent);
+            } catch (Exception e) {
 
-//        if (categoryName.equals("Rau củ quả")) {
-//            products.add(new Product(R.drawable.vegetable, "Cà chua", "20.000đ"));
-//            products.add(new Product(R.drawable.vegetable, "Cà rốt", "15.000đ"));
-//            products.add(new Product(R.drawable.vegetable, "Bí đỏ", "10.000đ"));
-//        }
-//        else if (categoryName.equals("Trái cây")) {
-//            products.add(new Product(R.drawable.apple, "Dâu tây", "30.000đ"));
-//            products.add(new Product(R.drawable.apple, "Chuối", "10.000đ"));
-//            products.add(new Product(R.drawable.apple, "Cam", "20.000đ"));
-//        }
-
-        ProductAdapter productAdapter = new ProductAdapter(products, product -> {
+            }
         });
         recyclerView.setAdapter(productAdapter);
 
+        // Khởi tạo ViewModel và lấy dữ liệu
+        viewModel = new ViewModelProvider(this).get(CategoryViewModel.class);
+        viewModel.getProductsByCategory(categoryID);  // Gọi phương thức lấy dữ liệu từ ViewModel
+
+        // Quan sát dữ liệu và cập nhật adapter
+        viewModel.products.observe(getViewLifecycleOwner(), products -> {
+            if (products != null) {
+                // Cập nhật adapter với dữ liệu mới
+                productAdapter.updateProducts(products);
+                // Thiết lập item decoration (căn lề, padding, ...)
+                recyclerView.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
+
+            }
+        });
+
+
         return view;
     }
-}
\ No newline at end of file
+}
Index: app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.example.agrimart.databinding.CategoryItemBinding;\r\nimport com.denzcoskun.imageslider.models.SlideModel;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class CategoryAdapter extends RecyclerView.Adapter<CategoryAdapter.MyViewHolder> {\r\n    private List<Category> categories;\r\n\r\n    private int selectedPosition = -1;\r\n    public Category category;\r\n    public CategoryAdapter(List<Category> categories) {\r\n        this.categories = categories;\r\n    }\r\n\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        CategoryItemBinding binding = CategoryItemBinding.inflate(LayoutInflater.from(parent.getContext()), parent, false);\r\n        return new MyViewHolder(binding);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        holder.bindData(categories.get(position));\r\n\r\n        if (holder.getAdapterPosition() == selectedPosition) {\r\n            holder.binding.getRoot().setBackgroundResource(android.R.color.holo_green_light);\r\n        } else {\r\n            holder.binding.getRoot().setBackgroundResource(android.R.color.transparent);\r\n        }\r\n\r\n        holder.binding.getRoot().setOnClickListener(v -> {\r\n            category = categories.get(holder.getAdapterPosition());\r\n            int prePos=selectedPosition;\r\n            selectedPosition=holder.getAdapterPosition();\r\n            notifyItemChanged(prePos);\r\n            notifyItemChanged(holder.getAdapterPosition());\r\n\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return categories.size();\r\n    }\r\n\r\n    public static class MyViewHolder extends RecyclerView.ViewHolder {\r\n        CategoryItemBinding binding;\r\n\r\n        public MyViewHolder(@NonNull CategoryItemBinding binding) {\r\n            super(binding.getRoot());\r\n            this.binding = binding;\r\n        }\r\n\r\n        public void bindData(Category category) {\r\n            Glide.with(binding.getRoot())\r\n                    .load(category.getImg())\r\n                    .into(binding.imgCate);\r\n\r\n            binding.tvName.setText(category.getName());\r\n        }\r\n    }\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java b/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java
--- a/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java	(revision 4a0236d39795153d047fc8419efb40467083d307)
+++ b/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java	(date 1730994894147)
@@ -7,23 +7,26 @@
 import androidx.recyclerview.widget.RecyclerView;
 
 import com.bumptech.glide.Glide;
-import com.example.agrimart.R;
 import com.example.agrimart.data.model.Category;
 import com.example.agrimart.databinding.CategoryItemBinding;
-import com.denzcoskun.imageslider.models.SlideModel;
 
-import java.util.ArrayList;
 import java.util.List;
 
 public class CategoryAdapter extends RecyclerView.Adapter<CategoryAdapter.MyViewHolder> {
     private List<Category> categories;
-
     private int selectedPosition = -1;
     public Category category;
+    private OnCategoryClickListener listener;
+
+
     public CategoryAdapter(List<Category> categories) {
         this.categories = categories;
     }
 
+    public CategoryAdapter(List<Category> categories, OnCategoryClickListener listener) {
+        this.categories = categories;
+        this.listener = listener;
+    }
 
     @NonNull
     @Override
@@ -49,6 +52,9 @@
             notifyItemChanged(prePos);
             notifyItemChanged(holder.getAdapterPosition());
 
+            if (listener != null) {
+                listener.onCategoryClick(category);
+            }
         });
     }
 
@@ -73,5 +79,9 @@
             binding.tvName.setText(category.getName());
         }
     }
+
+    public interface OnCategoryClickListener {
+        void onCategoryClick(Category category);
+    }
 }
 
Index: app/src/main/java/com/example/agrimart/ui/Explore/ExploreFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.ui.Explore;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.MenuInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageButton;\r\nimport android.widget.PopupMenu;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.viewpager2.widget.ViewPager2;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.adapter.ViewPagerAdapter;\r\nimport com.example.agrimart.databinding.FragmentExploreBinding;\r\nimport com.example.agrimart.viewmodel.ExploreFragmentViewModel;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.android.material.tabs.TabLayoutMediator;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class ExploreFragment extends Fragment {\r\n    private TabLayout tabLayout;\r\n    private ViewPager2 viewPager;\r\n    private ViewPagerAdapter viewPagerAdapter;\r\n    private ImageButton filterIcon;\r\n    private FragmentExploreBinding binding;\r\n    private ExploreFragmentViewModel viewModel;\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        binding= DataBindingUtil.inflate(inflater,R.layout.fragment_explore,container,false);\r\n        viewModel=new ViewModelProvider(this).get(ExploreFragmentViewModel.class);\r\n        binding.setViewmodel(viewModel);\r\n        View view = binding.getRoot();\r\n\r\n        tabLayout = view.findViewById(R.id.tabLayout);\r\n        viewPager = view.findViewById(R.id.viewPager);\r\n        filterIcon = view.findViewById(R.id.filter_icon);\r\n\r\n        binding.setViewmodel(viewModel);\r\n        viewModel.getData();\r\n\r\n\r\n        viewModel.categories.observe(getViewLifecycleOwner(), categories -> {\r\n            Log.d(\"khanhmfemf\", \"onCreateView: \" + categories.size());\r\n            List<Fragment> fragments = new ArrayList<>();\r\n            List<String> titles = new ArrayList<>();\r\n            for (int i = 0; i < categories.size(); i++) {\r\n                fragments.add(new CategoryFragment(categories.get(i).getName()));\r\n                titles.add(categories.get(i).getName());\r\n            }\r\n            viewPagerAdapter = new ViewPagerAdapter(requireActivity(), fragments, titles);\r\n            viewPager.setAdapter(viewPagerAdapter);\r\n            Log.d(\"khanhmfemf\", \"hi: \" + viewPager.getAdapter().getItemCount());\r\n            new TabLayoutMediator(tabLayout,viewPager,(tab,pos)->{\r\n                tab.setText(titles.get(pos));\r\n                Log.d(\"khanhmfemf\", \"onCreateView: \" + tab.getTabLabelVisibility());\r\n\r\n            }).attach();\r\n            new TabLayoutMediator(tabLayout, viewPager, (tab, position) -> tab.setText(titles.get(position))).attach();\r\n\r\n            filterIcon.setOnClickListener(v -> showFilterMenu(v));\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n    private void showFilterMenu(View v) {\r\n        PopupMenu popup = new PopupMenu(getContext(), v);\r\n        MenuInflater inflater = popup.getMenuInflater();\r\n        inflater.inflate(R.menu.filter_menu, popup.getMenu());\r\n        //popup.setOnMenuItemClickListener(this::onFilterItemSelected);\r\n        popup.show();\r\n    }\r\n\r\n//    private boolean onFilterItemSelected(MenuItem item) {\r\n//        int itemId = item.getItemId();\r\n//        if (itemId == R.id.filter_option1)\r\n//            return true;\r\n//        } else if (itemId == R.id.filter_option2) {\r\n//            return true;\r\n//        } else if (itemId == R.id.filter_option3) {\r\n//            return true;\r\n//        } else if (itemId == R.id.filter_option4) {\r\n//            return true;\r\n//        } else {\r\n//            return false;\r\n//        }\r\n//    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/Explore/ExploreFragment.java b/app/src/main/java/com/example/agrimart/ui/Explore/ExploreFragment.java
--- a/app/src/main/java/com/example/agrimart/ui/Explore/ExploreFragment.java	(revision 4a0236d39795153d047fc8419efb40467083d307)
+++ b/app/src/main/java/com/example/agrimart/ui/Explore/ExploreFragment.java	(date 1730994894149)
@@ -29,15 +29,23 @@
 public class ExploreFragment extends Fragment {
     private TabLayout tabLayout;
     private ViewPager2 viewPager;
-    private ViewPagerAdapter viewPagerAdapter;
     private ImageButton filterIcon;
     private FragmentExploreBinding binding;
     private ExploreFragmentViewModel viewModel;
+    private String categoryID;
+
+    public ExploreFragment(String categoryID) {
+        this.categoryID = categoryID;
+    }
+    public ExploreFragment() {
+
+    }
+
     @Nullable
     @Override
     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
-        binding= DataBindingUtil.inflate(inflater,R.layout.fragment_explore,container,false);
-        viewModel=new ViewModelProvider(this).get(ExploreFragmentViewModel.class);
+        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_explore, container, false);
+        viewModel = new ViewModelProvider(this).get(ExploreFragmentViewModel.class);
         binding.setViewmodel(viewModel);
         View view = binding.getRoot();
 
@@ -45,29 +53,40 @@
         viewPager = view.findViewById(R.id.viewPager);
         filterIcon = view.findViewById(R.id.filter_icon);
 
-        binding.setViewmodel(viewModel);
         viewModel.getData();
 
-
         viewModel.categories.observe(getViewLifecycleOwner(), categories -> {
-            Log.d("khanhmfemf", "onCreateView: " + categories.size());
             List<Fragment> fragments = new ArrayList<>();
             List<String> titles = new ArrayList<>();
+            int selectedCategoryIndex = -1; // Lưu chỉ số category được chọn (nếu có)
+
+            // Kiểm tra nếu có categoryID và chọn category tương ứng
+            if (categoryID != null && !categoryID.isEmpty()) {
+                for (int i = 0; i < categories.size(); i++) {
+                    if (categories.get(i).getId().equals(categoryID)) {
+                        selectedCategoryIndex = i;  // Ghi nhận chỉ số category được chọn
+                        break;
+                    }
+                }
+            }
+
+            // Thêm các fragment cho tất cả các category vào ViewPager
             for (int i = 0; i < categories.size(); i++) {
-                fragments.add(new CategoryFragment(categories.get(i).getName()));
+                fragments.add(new CategoryFragment(categories.get(i).getId()));
                 titles.add(categories.get(i).getName());
             }
-            viewPagerAdapter = new ViewPagerAdapter(requireActivity(), fragments, titles);
+
+            ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(requireActivity(), fragments, titles);
             viewPager.setAdapter(viewPagerAdapter);
-            Log.d("khanhmfemf", "hi: " + viewPager.getAdapter().getItemCount());
-            new TabLayoutMediator(tabLayout,viewPager,(tab,pos)->{
-                tab.setText(titles.get(pos));
-                Log.d("khanhmfemf", "onCreateView: " + tab.getTabLabelVisibility());
 
-            }).attach();
-            new TabLayoutMediator(tabLayout, viewPager, (tab, position) -> tab.setText(titles.get(position))).attach();
+            // Nếu có categoryID, chọn tab tương ứng
+            if (selectedCategoryIndex != -1) {
+                viewPager.setCurrentItem(selectedCategoryIndex);  // Chọn category tương ứng trong ViewPager
+            }
 
-            filterIcon.setOnClickListener(v -> showFilterMenu(v));
+            new TabLayoutMediator(tabLayout, viewPager, (tab, pos) -> tab.setText(titles.get(pos))).attach();
+
+            filterIcon.setOnClickListener(this::showFilterMenu);
         });
 
         return view;
@@ -77,22 +96,6 @@
         PopupMenu popup = new PopupMenu(getContext(), v);
         MenuInflater inflater = popup.getMenuInflater();
         inflater.inflate(R.menu.filter_menu, popup.getMenu());
-        //popup.setOnMenuItemClickListener(this::onFilterItemSelected);
         popup.show();
     }
-
-//    private boolean onFilterItemSelected(MenuItem item) {
-//        int itemId = item.getItemId();
-//        if (itemId == R.id.filter_option1)
-//            return true;
-//        } else if (itemId == R.id.filter_option2) {
-//            return true;
-//        } else if (itemId == R.id.filter_option3) {
-//            return true;
-//        } else if (itemId == R.id.filter_option4) {
-//            return true;
-//        } else {
-//            return false;
-//        }
-//    }
-}
\ No newline at end of file
+}
Index: app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.ui.Homepage;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.SpacesItemDecoration;\r\nimport com.example.agrimart.adapter.CategoryAdapter;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.FragmentHomeBinding;\r\nimport com.example.agrimart.ui.ProductPage.ProductDetailActivity;\r\nimport com.example.agrimart.viewmodel.HomeFragmentViewModel;\r\n\r\nimport java.util.List;\r\n\r\npublic class HomeFragment extends Fragment {\r\n    private static final String TAG = \"HomeFragment\";\r\n    ImageButton btnSearch;\r\n    TextView search;\r\n    HomeFragmentViewModel viewModel;\r\n    FragmentHomeBinding binding;\r\n\r\n    public HomeFragment() {\r\n\r\n    }\r\n\r\n    public static HomeFragment newInstance() {\r\n        return new HomeFragment();\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_home, container, false);\r\n        viewModel = new ViewModelProvider(this).get(HomeFragmentViewModel.class);\r\n\r\n        int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);\r\n        binding.setViewmodel(viewModel);\r\n        View view = binding.getRoot();\r\n\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\r\n            Window window = getActivity().getWindow();\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n        }\r\n\r\n        viewModel.getData();\r\n        viewModel.getProducts();\r\n\r\n        viewModel.categories.observe(getViewLifecycleOwner(), categories -> {\r\n            if (categories != null) {\r\n                CategoryAdapter categoryAdapter = new CategoryAdapter(categories);\r\n                binding.rvCategories.setAdapter(categoryAdapter);\r\n                binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));\r\n                Log.d(TAG, \"Categories loaded: \" + categories.size());\r\n            }\r\n        });\r\n\r\n        viewModel.products.observe(getViewLifecycleOwner(), products -> {\r\n            if (products != null) {\r\n                ProductAdapter productAdapter = new ProductAdapter(products, product -> {\r\n                    try {\r\n                        Intent intent = new Intent(getContext(), ProductDetailActivity.class);\r\n                        intent.putExtra(\"product\", product);\r\n                        intent.putExtra(\"storeId\", product.getStoreId());\r\n                        startActivity(intent);\r\n                    } catch (Exception e) {\r\n\r\n                    }\r\n                });\r\n                binding.rvProducts.setLayoutManager(new GridLayoutManager(getContext(), 2));\r\n                binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));\r\n                binding.rvProducts.setAdapter(productAdapter);\r\n            }\r\n        });\r\n\r\n        addControls(view);\r\n        addEvents();\r\n\r\n        return view;\r\n    }\r\n\r\n    private void addEvents() {\r\n        btnSearch.setOnClickListener(v -> {\r\n            Intent intent = new Intent(getActivity(), SearchActivity.class);\r\n            getActivity().startActivity(intent);\r\n        });\r\n\r\n        search.setOnClickListener(v -> {\r\n            Intent intent = new Intent(getContext(), SearchActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n\r\n    private void addControls(View view) {\r\n        btnSearch = view.findViewById(R.id.search_icon);\r\n        search = view.findViewById(R.id.search_input);\r\n    }\r\n\r\n    private void loadFragment(Fragment fragment) {\r\n        getActivity().getSupportFragmentManager().beginTransaction()\r\n                .replace(R.id.fragment_container, fragment)\r\n                .commit();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
--- a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	(revision 4a0236d39795153d047fc8419efb40467083d307)
+++ b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	(date 1730994894150)
@@ -24,8 +24,11 @@
 import com.example.agrimart.adapter.ProductAdapter;
 import com.example.agrimart.data.model.Product;
 import com.example.agrimart.databinding.FragmentHomeBinding;
+import com.example.agrimart.ui.Explore.CategoryFragment;
+import com.example.agrimart.ui.Explore.ExploreFragment;
 import com.example.agrimart.ui.ProductPage.ProductDetailActivity;
 import com.example.agrimart.viewmodel.HomeFragmentViewModel;
+import com.google.android.material.bottomnavigation.BottomNavigationView;
 
 import java.util.List;
 
@@ -58,6 +61,7 @@
         binding.setViewmodel(viewModel);
         View view = binding.getRoot();
 
+
         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
             Window window = getActivity().getWindow();
             window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);
@@ -69,13 +73,27 @@
 
         viewModel.categories.observe(getViewLifecycleOwner(), categories -> {
             if (categories != null) {
-                CategoryAdapter categoryAdapter = new CategoryAdapter(categories);
+                CategoryAdapter categoryAdapter = new CategoryAdapter(categories, category -> {
+                    ExploreFragment newFragment = new ExploreFragment(category.getId());
+                    // Thay đổi mục đã chọn trong BottomNavigationView
+                    BottomNavigationView bottomNavigationView = getActivity().findViewById(R.id.bottomNavigation);
+                    if (bottomNavigationView != null) {
+                        bottomNavigationView.setSelectedItemId(R.id.category); // Chọn mục category
+                    }
+                    loadFragment(newFragment);
+                });
+
+
+
                 binding.rvCategories.setAdapter(categoryAdapter);
                 binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));
                 Log.d(TAG, "Categories loaded: " + categories.size());
             }
         });
 
+
+
+
         viewModel.products.observe(getViewLifecycleOwner(), products -> {
             if (products != null) {
                 ProductAdapter productAdapter = new ProductAdapter(products, product -> {
@@ -122,4 +140,6 @@
                 .replace(R.id.fragment_container, fragment)
                 .commit();
     }
+    
+    
 }
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_31_2024_5_40_PM__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_10_31_2024_5_40_PM__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_10_31_2024_5_40_PM__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_10_31_2024_5_40_PM__Changes_.xml	(revision 4a0236d39795153d047fc8419efb40467083d307)
+++ /dev/null	(revision 4a0236d39795153d047fc8419efb40467083d307)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_10_31_2024_5_40_PM_[Changes]" date="1730371233365" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_10_31_2024_5_40_PM_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 10/31/2024 5:40 PM [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_31_2024_5_40_PM_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_10_31_2024_5_40_PM_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_10_31_2024_5_40_PM_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_10_31_2024_5_40_PM_[Changes]/shelved.patch	(revision 4a0236d39795153d047fc8419efb40467083d307)
+++ /dev/null	(revision 4a0236d39795153d047fc8419efb40467083d307)
@@ -1,74 +0,0 @@
-Index: app/src/main/java/com/example/agrimart/ui/MainActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui;\r\n\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.view.MenuItem;\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.ui.Account.SignInActivity;\r\nimport com.example.agrimart.ui.Cart.CartFragment;\r\nimport com.example.agrimart.ui.Explore.ExploreFragment;\r\nimport com.example.agrimart.ui.Homepage.HomeFragment;\r\nimport com.example.agrimart.ui.MyProfile.MyProfileFragment;\r\nimport com.example.agrimart.ui.Notification.NotificationFragment;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private SharedPreferences sharedPreferences;\r\n    private FirebaseAuth mAuth;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_main);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, 0);\r\n            return insets;\r\n        });\r\n\r\n        sharedPreferences = getSharedPreferences(\"user_prefs\", MODE_PRIVATE);\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n        if (sharedPreferences.getBoolean(\"is_logged_in\", false)) {\r\n            FirebaseUser currentUser = mAuth.getCurrentUser();\r\n            if (currentUser != null) {\r\n                navigateToHome();\r\n            } else {\r\n                clearLoginState();\r\n                navigateToLogin();\r\n            }\r\n        } else {\r\n            navigateToLogin();\r\n        }\r\n\r\n        BottomNavigationView bottomNavigationView = findViewById(R.id.bottomNavigation);\r\n        bottomNavigationView.setOnNavigationItemSelectedListener(this::onNavigationItemSelected);\r\n\r\n        if (savedInstanceState == null) {\r\n            loadFragment(new HomeFragment());\r\n            bottomNavigationView.setSelectedItemId(R.id.home);\r\n        }\r\n    }\r\n\r\n    private void navigateToHome() {\r\n        loadFragment(new HomeFragment());\r\n    }\r\n\r\n    private void navigateToLogin() {\r\n        Intent intent = new Intent(MainActivity.this, SignInActivity.class);\r\n        startActivity(intent);\r\n        finish();\r\n    }\r\n\r\n    private void clearLoginState() {\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.clear();\r\n        editor.apply();\r\n    }\r\n\r\n    private void loadFragment(Fragment fragment) {\r\n        getSupportFragmentManager().beginTransaction()\r\n                .replace(R.id.fragment_container, fragment)\r\n                .commit();\r\n    }\r\n\r\n    private boolean onNavigationItemSelected(MenuItem item) {\r\n        Fragment selectedFragment = null;\r\n\r\n        if (item.getItemId() == R.id.home) {\r\n            selectedFragment = new HomeFragment();\r\n        } else if (item.getItemId() == R.id.category) {\r\n            selectedFragment = new ExploreFragment();\r\n        } else if (item.getItemId() == R.id.notification) {\r\n            selectedFragment = new NotificationFragment();\r\n        } else if (item.getItemId() == R.id.profile) {\r\n            selectedFragment = new MyProfileFragment();\r\n        } else if (item.getItemId() == R.id.cart) {\r\n            selectedFragment = new CartFragment();\r\n        } else {\r\n            return false;\r\n        }\r\n\r\n        if (selectedFragment != null) {\r\n            loadFragment(selectedFragment);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private void fetchUserRoleAndSave(FirebaseUser user) {\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        DocumentReference docRef = db.collection(\"users\").document(user.getUid());\r\n        docRef.get().addOnSuccessListener(documentSnapshot -> {\r\n            if (documentSnapshot.exists()) {\r\n                String role = documentSnapshot.getString(\"role\");\r\n                if (role != null) {\r\n                    saveUserToSharedPreferences(role);\r\n                }\r\n            }\r\n        }).addOnFailureListener(e -> {\r\n        });\r\n    }\r\n\r\n    private void saveUserToSharedPreferences(String role) {\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putString(\"user_role\", role);\r\n        editor.apply();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/MainActivity.java b/app/src/main/java/com/example/agrimart/ui/MainActivity.java
---- a/app/src/main/java/com/example/agrimart/ui/MainActivity.java	(revision 7d3aa20bc2e7e5aae54d5632d52dbfbf992eab32)
-+++ b/app/src/main/java/com/example/agrimart/ui/MainActivity.java	(date 1730214606727)
-@@ -109,7 +109,7 @@
-         return true;
-     }
- 
--    private void fetchUserRoleAndSave(FirebaseUser user) {
-+    private void getUserRole(FirebaseUser user) {
-         FirebaseFirestore db = FirebaseFirestore.getInstance();
-         DocumentReference docRef = db.collection("users").document(user.getUid());
-         docRef.get().addOnSuccessListener(documentSnapshot -> {
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_10_10_2024_8_08_PM_[Changes]/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_10_10_2024_8_08_PM_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_10_10_2024_8_08_PM_[Changes]/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_10_10_2024_8_08_PM_[Changes]/shelved.patch	(revision 7d3aa20bc2e7e5aae54d5632d52dbfbf992eab32)
-+++ /dev/null	(revision 7d3aa20bc2e7e5aae54d5632d52dbfbf992eab32)
-@@ -1,19 +0,0 @@
--Index: app/src/main/res/layout/activity_my_account.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/main\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.MyProfile.MyAccount.MyAccountActivity\">\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        tools:ignore=\"MissingConstraints\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:paddingStart=\"12dp\"\r\n            android:paddingEnd=\"12dp\"\r\n            android:paddingTop=\"10dp\"\r\n            android:paddingBottom=\"10dp\"\r\n            android:background=\"@color/white\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/btn_back\"\r\n                android:layout_width=\"30dp\"\r\n                android:layout_height=\"35dp\"\r\n                android:src=\"@drawable/ic_left\"\r\n                android:scaleType=\"fitCenter\"\r\n                android:layout_marginStart=\"5dp\"\r\n                android:layout_gravity=\"center_vertical\"\r\n                android:background=\"@color/white\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView1\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"35dp\"\r\n                android:layout_weight=\"1\"\r\n                android:gravity=\"start\"\r\n                android:layout_marginStart=\"15dp\"\r\n                android:text=\"Tài khoản &amp; Bảo mật\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"11pt\" />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"10dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/my_account\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/my_profile_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"2\"\r\n                android:text=\"Hồ sơ của tôi\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/my_profile_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/my_user_name\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_name\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Tên người dùng\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_name_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_marginEnd=\"40dp\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"longct29\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/my_phone_number\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/my_phone_number_text1\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Điện thoại\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/my_phone_number_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"******67\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/my_phone_number_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/my_email\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/email\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Email\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/email_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_marginEnd=\"40dp\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"h*******3@gmail.com\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/change_password\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/change_password_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"2\"\r\n                android:text=\"Đổi mật khẩu\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/change_password_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n\r\n    </LinearLayout>\r\n</androidx.constraintlayout.widget.ConstraintLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_my_account.xml b/app/src/main/res/layout/activity_my_account.xml
----- a/app/src/main/res/layout/activity_my_account.xml	(revision e6a9b6b41875c4569f90198b5ecf86dc201f8d56)
--+++ b/app/src/main/res/layout/activity_my_account.xml	(date 1728565246639)
--@@ -107,7 +107,7 @@
--                 android:gravity="end"
--                 android:layout_marginEnd="40dp"
--                 android:layout_weight="1"
---                android:text="longct29"
--+                android:text="Hoàng Huy Long"
--                 android:textColor="@color/black"
--                 android:textSize="8pt" />
-- 
-Index: .idea/deploymentTargetSelector.xml
-===================================================================
-diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
-deleted file mode 100644
---- a/.idea/deploymentTargetSelector.xml	(revision 7d3aa20bc2e7e5aae54d5632d52dbfbf992eab32)
-+++ /dev/null	(revision 7d3aa20bc2e7e5aae54d5632d52dbfbf992eab32)
-@@ -1,21 +0,0 @@
--<?xml version="1.0" encoding="UTF-8"?>
--<project version="4">
--  <component name="deploymentTargetSelector">
--    <selectionStates>
--      <SelectionState runConfigName="MainActivity">
--        <option name="selectionMode" value="DROPDOWN" />
--        <DropdownSelection timestamp="2024-10-09T20:41:46.498408300Z">
--          <Target type="DEFAULT_BOOT">
--            <handle>
--              <DeviceId pluginId="LocalEmulator" identifier="path=C:\Users\leqkh\.android\avd\Pixel_8_Pro_API_34.avd" />
--            </handle>
--          </Target>
--        </DropdownSelection>
--        <DialogSelection />
--      </SelectionState>
--      <SelectionState runConfigName="SignInActivity">
--        <option name="selectionMode" value="DROPDOWN" />
--      </SelectionState>
--    </selectionStates>
--  </component>
--</project>
-\ No newline at end of file
Index: app/src/main/res/layout/fragment_category.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\">\r\n\r\n    <androidx.recyclerview.widget.RecyclerView\r\n        android:id=\"@+id/recyclerView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:padding=\"8dp\"\r\n        android:clipToPadding=\"false\" />\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_category.xml b/app/src/main/res/layout/fragment_category.xml
--- a/app/src/main/res/layout/fragment_category.xml	(revision 4a0236d39795153d047fc8419efb40467083d307)
+++ b/app/src/main/res/layout/fragment_category.xml	(date 1730994894151)
@@ -4,9 +4,11 @@
     android:orientation="vertical">
 
     <androidx.recyclerview.widget.RecyclerView
-        android:id="@+id/recyclerView"
+        android:id="@+id/recyclerViewCategory"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
-        android:padding="8dp"
-        android:clipToPadding="false" />
+        android:padding="2dp"
+        android:clipToPadding="false" >
+
+    </androidx.recyclerview.widget.RecyclerView>
 </LinearLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/viewmodel/CategoryViewModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/viewmodel/CategoryViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/CategoryViewModel.java
new file mode 100644
--- /dev/null	(date 1730994894150)
+++ b/app/src/main/java/com/example/agrimart/viewmodel/CategoryViewModel.java	(date 1730994894150)
@@ -0,0 +1,57 @@
+package com.example.agrimart.viewmodel;
+
+import android.util.Log;
+
+import androidx.lifecycle.MutableLiveData;
+import androidx.lifecycle.ViewModel;
+
+import com.example.agrimart.data.model.Product;
+import com.google.firebase.firestore.FirebaseFirestore;
+import com.google.firebase.firestore.Query;
+
+import java.util.List;
+
+public class CategoryViewModel extends ViewModel {
+    public MutableLiveData<List<Product>> products;
+    FirebaseFirestore db = FirebaseFirestore.getInstance();
+
+    public CategoryViewModel(){
+        products = new MutableLiveData<>();
+    }
+
+    public void getProducts() {
+        db.collection("products")
+                .orderBy("product_id")
+                .get()
+                .addOnCompleteListener(task -> {
+                    if (task.isSuccessful()) {
+                        List<Product> productList = task.getResult().toObjects(Product.class);
+                        products.setValue(productList);
+                    } else {
+                        Log.e("HomeFragmentViewModel", "Error getting products: ", task.getException());
+                    }
+                });
+    }
+
+    public void getProductsByCategory(String categoryID) {
+        db.collection("products")
+                .whereEqualTo("category_id", categoryID)
+                .get()
+                .addOnCompleteListener(task -> {
+                    if (task.isSuccessful()) {
+                        // Lấy danh sách sản phẩm từ Firestore
+                        List<Product> productList = task.getResult().toObjects(Product.class);
+
+                        // Kiểm tra log để đảm bảo dữ liệu được lấy thành công
+                        Log.d("CategoryViewModel", "Products fetched: " + productList.size());
+
+                        // Cập nhật giá trị vào LiveData
+                        products.setValue(productList);
+                    } else {
+                        // Nếu có lỗi, log lỗi
+                        Log.e("CategoryViewModel", "Error getting products: ", task.getException());
+                    }
+                });
+    }
+
+}
Index: app/src/main/res/layout/fragment_explore.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<layout>\r\n    <data>\r\n        <variable\r\n            name=\"viewmodel\"\r\n            type=\"com.example.agrimart.viewmodel.ExploreFragmentViewModel\" />\r\n    </data>\r\n\r\n    <RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n        xmlns:tools=\"http://schemas.android.com/tools\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        tools:context=\".ui.Explore.ExploreFragment\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:id=\"@+id/header\"\r\n            android:background=\"@color/green\"\r\n            android:orientation=\"horizontal\"\r\n            android:padding=\"16dp\">\r\n\r\n            <androidx.cardview.widget.CardView\r\n                android:id=\"@+id/search_card\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_weight=\"1\"\r\n                app:cardCornerRadius=\"8dp\"\r\n                app:cardElevation=\"4dp\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"horizontal\"\r\n                    android:padding=\"8dp\"\r\n                    android:id=\"@+id/search_bar\">\r\n\r\n                    <ImageButton\r\n                        android:id=\"@+id/search_icon\"\r\n                        android:layout_width=\"24dp\"\r\n                        android:layout_height=\"24dp\"\r\n                        android:src=\"@drawable/ic_search\"\r\n                        android:tint=\"@color/black\"\r\n                        android:layout_gravity=\"center_vertical\"\r\n                        android:layout_marginEnd=\"8dp\"\r\n                        android:background=\"@color/white\"/>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/search_input\"\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_weight=\"1\"\r\n                        android:hint=\"@string/search\"\r\n                        android:background=\"@null\"\r\n                        android:padding=\"8dp\"\r\n                        android:textColor=\"@android:color/black\"\r\n                        android:textColorHint=\"@android:color/darker_gray\" />\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/filter_icon\"\r\n                android:layout_width=\"32dp\"\r\n                android:layout_height=\"32dp\"\r\n                android:layout_gravity=\"center_vertical\"\r\n                android:layout_marginStart=\"10dp\"\r\n                android:layout_marginEnd=\"4dp\"\r\n                android:background=\"@color/green\"\r\n                android:src=\"@drawable/filter\"\r\n                android:tint=\"@color/black\" />\r\n\r\n        </LinearLayout>\r\n\r\n        <com.google.android.material.tabs.TabLayout\r\n            android:id=\"@+id/tabLayout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"30dp\"\r\n            android:layout_below=\"@id/header\"\r\n            android:paddingStart=\"5dp\"\r\n            android:paddingEnd=\"5dp\"\r\n            android:layout_marginTop=\"10dp\"\r\n            android:layout_marginStart=\"10dp\"\r\n            android:layout_marginEnd=\"10dp\"\r\n            app:tabMode=\"scrollable\"\r\n            app:tabGravity=\"fill\"\r\n            app:tabIndicatorGravity=\"center\"\r\n            app:tabBackground=\"@drawable/tab_background\"\r\n            app:tabIndicator=\"@null\"\r\n            app:tabTextColor=\"@color/black\"\r\n            app:tabSelectedTextColor=\"@color/white\"\r\n            app:tabSelectedTextAppearance=\"@color/transparent\"\r\n            app:tabTextAppearance=\"@style/TabTextAppearance\"\r\n            app:tabRippleColor=\"@null\" />\r\n\r\n\r\n        <androidx.viewpager2.widget.ViewPager2\r\n            android:id=\"@+id/viewPager\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_below=\"@id/tabLayout\"/>\r\n    </RelativeLayout>\r\n</layout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_explore.xml b/app/src/main/res/layout/fragment_explore.xml
--- a/app/src/main/res/layout/fragment_explore.xml	(revision 4a0236d39795153d047fc8419efb40467083d307)
+++ b/app/src/main/res/layout/fragment_explore.xml	(date 1730994894152)
@@ -1,14 +1,16 @@
 <?xml version="1.0" encoding="utf-8"?>
-<layout>
+<layout xmlns:tools="http://schemas.android.com/tools"
+    xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto">
+
     <data>
+
         <variable
             name="viewmodel"
             type="com.example.agrimart.viewmodel.ExploreFragmentViewModel" />
     </data>
 
-    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-        xmlns:app="http://schemas.android.com/apk/res-auto"
-        xmlns:tools="http://schemas.android.com/tools"
+    <RelativeLayout
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         tools:context=".ui.Explore.ExploreFragment">
@@ -41,10 +43,10 @@
                         android:layout_width="24dp"
                         android:layout_height="24dp"
                         android:src="@drawable/ic_search"
-                        android:tint="@color/black"
                         android:layout_gravity="center_vertical"
                         android:layout_marginEnd="8dp"
-                        android:background="@color/white"/>
+                        android:background="@color/white"
+                        app:tint="@color/black" />
 
                     <TextView
                         android:id="@+id/search_input"
@@ -68,7 +70,7 @@
                 android:layout_marginEnd="4dp"
                 android:background="@color/green"
                 android:src="@drawable/filter"
-                android:tint="@color/black" />
+                app:tint="@color/black" />
 
         </LinearLayout>
 
@@ -77,7 +79,6 @@
             android:layout_width="match_parent"
             android:layout_height="30dp"
             android:layout_below="@id/header"
-            android:paddingStart="5dp"
             android:paddingEnd="5dp"
             android:layout_marginTop="10dp"
             android:layout_marginStart="10dp"
@@ -91,13 +92,16 @@
             app:tabSelectedTextColor="@color/white"
             app:tabSelectedTextAppearance="@color/transparent"
             app:tabTextAppearance="@style/TabTextAppearance"
-            app:tabRippleColor="@null" />
+            app:tabRippleColor="@null"
+            tools:ignore="RtlSymmetry" />
 
 
         <androidx.viewpager2.widget.ViewPager2
             android:id="@+id/viewPager"
             android:layout_width="match_parent"
             android:layout_height="match_parent"
-            android:layout_below="@id/tabLayout"/>
+            android:layout_below="@id/tabLayout"
+            android:layout_marginTop="0dp" />
+
     </RelativeLayout>
 </layout>
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.ItemProductBinding;\r\n\r\nimport java.text.NumberFormat;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\npublic class ProductAdapter extends RecyclerView.Adapter<ProductAdapter.MyViewHolder> {\r\n    private List<Product> products;\r\n    private OnItemClickListener listener;\r\n\r\n    public ProductAdapter(List<Product> products, OnItemClickListener listener) {\r\n        this.products = products;\r\n        this.listener = listener;\r\n    }\r\n\r\n    public interface OnItemClickListener {\r\n        void onItemClick(Product product);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        ItemProductBinding binding = ItemProductBinding.inflate(LayoutInflater.from(parent.getContext()), parent, false);\r\n        return new MyViewHolder(binding);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        Product product = products.get(position);\r\n        holder.bindData(product);\r\n        holder.itemView.setOnClickListener(v -> listener.onItemClick(product));\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return products.size();\r\n    }\r\n\r\n    public static class MyViewHolder extends RecyclerView.ViewHolder {\r\n        private final ItemProductBinding binding;\r\n\r\n        public MyViewHolder(@NonNull ItemProductBinding binding) {\r\n            super(binding.getRoot());\r\n            this.binding = binding;\r\n        }\r\n\r\n        public void bindData(Product product) {\r\n            binding.tvName.setText(product.getName());\r\n\r\n            NumberFormat format = NumberFormat.getCurrencyInstance(new Locale(\"vi\", \"VN\"));\r\n            binding.tvPrice.setText(format.format(product.getPrice()));\r\n\r\n            if (product.getImages() != null && !product.getImages().isEmpty()) {\r\n                Glide.with(binding.getRoot().getContext())\r\n                        .load(product.getImages().get(0))\r\n                        .into(binding.imgPro);\r\n            } else if (product.getImages() != null) {\r\n                Glide.with(binding.getRoot().getContext())\r\n                        .load(product.getImages())\r\n                        .into(binding.imgPro);\r\n            }\r\n\r\n            binding.executePendingBindings();\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java b/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java
--- a/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java	(revision 4a0236d39795153d047fc8419efb40467083d307)
+++ b/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java	(date 1730994894148)
@@ -46,6 +46,11 @@
         return products.size();
     }
 
+    public void updateProducts(List<Product> newProducts) {
+        this.products = newProducts;
+        notifyDataSetChanged();
+    }
+
     public static class MyViewHolder extends RecyclerView.ViewHolder {
         private final ItemProductBinding binding;
 
Index: app/src/main/res/layout/item_product.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n\r\n    <data>\r\n        <variable\r\n            name=\"product\"\r\n            type=\"com.example.agrimart.data.model.Product\" />\r\n    </data>\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"173dp\"\r\n        android:background=\"@drawable/bg_product\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"5dp\"\r\n        android:layout_marginTop=\"5dp\">\r\n\r\n        <FrameLayout\r\n            android:id=\"@+id/frame_layout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"124dp\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imgPro\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"139dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:scaleType=\"centerCrop\"\r\n                android:src=\"@drawable/banana\" />\r\n        </FrameLayout>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvName\"\r\n            android:layout_width=\"129dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/frame_layout\"\r\n            android:layout_marginTop=\"12dp\"\r\n            android:textSize=\"16sp\"\r\n            android:textColor=\"#333333\"\r\n            android:letterSpacing=\"0.01\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:ellipsize=\"end\"\r\n            android:maxLines=\"1\"\r\n            android:textStyle=\"bold\"/>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvPrice\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/tvName\"\r\n            android:textSize=\"18sp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:textColor=\"#F44336\"\r\n            android:fontFamily=\"@font/gabarito\"\r\n            android:letterSpacing=\"0.01\"/>\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/imageButton\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@color/transparent\"\r\n            android:layout_below=\"@id/tvName\"\r\n            android:layout_alignParentEnd=\"true\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginEnd=\"16dp\"\r\n            android:layout_marginBottom=\"10dp\"\r\n            app:srcCompat=\"@drawable/ic_plus_1\" />\r\n\r\n    </RelativeLayout>\r\n</layout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/item_product.xml b/app/src/main/res/layout/item_product.xml
--- a/app/src/main/res/layout/item_product.xml	(revision 4a0236d39795153d047fc8419efb40467083d307)
+++ b/app/src/main/res/layout/item_product.xml	(date 1730994894153)
@@ -9,7 +9,7 @@
     </data>
 
     <RelativeLayout
-        android:layout_width="173dp"
+        android:layout_width="190dp"
         android:background="@drawable/bg_product"
         android:layout_height="wrap_content"
         android:layout_marginStart="5dp"
