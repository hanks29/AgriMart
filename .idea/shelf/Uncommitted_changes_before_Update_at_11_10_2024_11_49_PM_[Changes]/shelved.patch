Index: app/src/main/java/com/example/agrimart/data/model/Store.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.data.model;\r\n\r\nimport java.util.List;\r\n\r\npublic class Store {\r\n    private String id;\r\n    private String name;\r\n    private String avatarUrl;\r\n    private String street;\r\n    private String ward;\r\n    private String district;\r\n    private String city;\r\n    private String phoneNumber;\r\n    private String userId;\r\n    private List<Product> products;\r\n\r\n    public Store() {\r\n    }\r\n\r\n    public Store(String id, String name, String avatarUrl, String street, String ward, String district, String city, String phoneNumber) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.avatarUrl = avatarUrl;\r\n        this.street = street;\r\n        this.ward = ward;\r\n        this.district = district;\r\n        this.city = city;\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n\r\n    // Getters and setters for all fields\r\n    public String getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(String id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getAvatarUrl() {\r\n        return avatarUrl;\r\n    }\r\n\r\n    public void setAvatarUrl(String avatarUrl) {\r\n        this.avatarUrl = avatarUrl;\r\n    }\r\n\r\n    public String getStreet() {\r\n        return street;\r\n    }\r\n\r\n    public void setStreet(String street) {\r\n        this.street = street;\r\n    }\r\n\r\n    public String getWard() {\r\n        return ward;\r\n    }\r\n\r\n    public void setWard(String ward) {\r\n        this.ward = ward;\r\n    }\r\n\r\n    public String getDistrict() {\r\n        return district;\r\n    }\r\n\r\n    public void setDistrict(String district) {\r\n        this.district = district;\r\n    }\r\n\r\n    public String getCity() {\r\n        return city;\r\n    }\r\n\r\n    public void setCity(String city) {\r\n        this.city = city;\r\n    }\r\n\r\n    public String getPhoneNumber() {\r\n        return phoneNumber;\r\n    }\r\n\r\n    public void setPhoneNumber(String phoneNumber) {\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n\r\n    public String getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public void setUserId(String userId) {\r\n        this.userId = userId;\r\n    }\r\n\r\n    public List<Product> getProducts() {\r\n        return products;\r\n    }\r\n\r\n    public void setProducts(List<Product> products) {\r\n        this.products = products;\r\n    }\r\n\r\n    public String getFullAddress() {\r\n        return street + \", \" + ward + \", \" + district + \", \" + city;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/data/model/Store.java b/app/src/main/java/com/example/agrimart/data/model/Store.java
--- a/app/src/main/java/com/example/agrimart/data/model/Store.java	(revision 6c06cc6d4b5c05fe0e2dc4ab0e437df3c4ba74ed)
+++ b/app/src/main/java/com/example/agrimart/data/model/Store.java	(date 1731256723527)
@@ -4,8 +4,8 @@
 
 public class Store {
     private String id;
-    private String name;
-    private String avatarUrl;
+    private String store_name;
+    private String store_avatar;
     private String street;
     private String ward;
     private String district;
@@ -19,8 +19,8 @@
 
     public Store(String id, String name, String avatarUrl, String street, String ward, String district, String city, String phoneNumber) {
         this.id = id;
-        this.name = name;
-        this.avatarUrl = avatarUrl;
+        this.store_name = name;
+        this.store_avatar = avatarUrl;
         this.street = street;
         this.ward = ward;
         this.district = district;
@@ -38,19 +38,19 @@
     }
 
     public String getName() {
-        return name;
+        return store_name;
     }
 
     public void setName(String name) {
-        this.name = name;
+        this.store_name = name;
     }
 
     public String getAvatarUrl() {
-        return avatarUrl;
+        return store_avatar;
     }
 
     public void setAvatarUrl(String avatarUrl) {
-        this.avatarUrl = avatarUrl;
+        this.store_avatar = avatarUrl;
     }
 
     public String getStreet() {
Index: app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.viewmodel;\r\n\r\nimport com.example.agrimart.data.model.StoreCart;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class CartFragmentViewModel {\r\n    private final FirebaseAuth auth;\r\n    private final FirebaseFirestore firestore;\r\n\r\n    // Constructor\r\n    public CartFragmentViewModel() {\r\n        this.auth = FirebaseAuth.getInstance();\r\n        this.firestore = FirebaseFirestore.getInstance();\r\n    }\r\n\r\n    // Hàm để lấy danh sách các StoreCart theo userId\r\n    public void getStoreCartsByUserId( final OnDataFetchedListener listener) {\r\n        String userId = auth.getCurrentUser().getUid();\r\n\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId) // Tìm các StoreCart có userId trùng với tham số\r\n                .get() // Lấy dữ liệu\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        List<StoreCart> storeCartList = new ArrayList<>();\r\n                        for (DocumentSnapshot document : task.getResult()) {\r\n                            StoreCart storeCart = document.toObject(StoreCart.class);\r\n                            if (storeCart != null) {\r\n                                storeCartList.add(storeCart);\r\n                            }\r\n                        }\r\n                        // Gọi callback để trả về dữ liệu\r\n                        listener.onDataFetched(storeCartList);\r\n                    } else {\r\n                        listener.onError(\"Failed to fetch data: \" + task.getException().getMessage());\r\n                    }\r\n                });\r\n    }\r\n\r\n    // Listener để callback khi lấy dữ liệu xong\r\n    public interface OnDataFetchedListener {\r\n        void onDataFetched(List<StoreCart> storeCarts);\r\n        void onError(String errorMessage);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java
--- a/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java	(revision 6c06cc6d4b5c05fe0e2dc4ab0e437df3c4ba74ed)
+++ b/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java	(date 1731257327954)
@@ -1,9 +1,10 @@
 package com.example.agrimart.viewmodel;
 
-import com.example.agrimart.data.model.StoreCart;
+import com.example.agrimart.data.model.Product;
+import com.example.agrimart.data.model.Cart;
+import com.example.agrimart.data.model.Store;
 import com.google.firebase.auth.FirebaseAuth;
 import com.google.firebase.firestore.FirebaseFirestore;
-import com.google.firebase.firestore.Query;
 import com.google.firebase.firestore.DocumentSnapshot;
 
 import java.util.ArrayList;
@@ -20,7 +21,7 @@
     }
 
     // Hàm để lấy danh sách các StoreCart theo userId
-    public void getStoreCartsByUserId( final OnDataFetchedListener listener) {
+    public void getStoreCartsByUserId(final OnDataFetchedListener listener) {
         String userId = auth.getCurrentUser().getUid();
 
         firestore.collection("cart")
@@ -28,24 +29,86 @@
                 .get() // Lấy dữ liệu
                 .addOnCompleteListener(task -> {
                     if (task.isSuccessful()) {
-                        List<StoreCart> storeCartList = new ArrayList<>();
+                        List<Cart> storeCartList = new ArrayList<>();
                         for (DocumentSnapshot document : task.getResult()) {
-                            StoreCart storeCart = document.toObject(StoreCart.class);
+                            Cart storeCart = document.toObject(Cart.class);
                             if (storeCart != null) {
                                 storeCartList.add(storeCart);
                             }
                         }
-                        // Gọi callback để trả về dữ liệu
-                        listener.onDataFetched(storeCartList);
+                        // Sau khi lấy danh sách StoreCart, tiếp tục truy vấn thông tin sản phẩm tương ứng
+                        fetchProductDetailsAndStore(storeCartList, listener);
                     } else {
                         listener.onError("Failed to fetch data: " + task.getException().getMessage());
                     }
                 });
     }
 
+    // Hàm để lấy thông tin sản phẩm từ productId
+    private void fetchProductDetailsAndStore(List<Cart> storeCartList, final OnDataFetchedListener listener) {
+        List<Cart> updatedStoreCartList = new ArrayList<>();
+        int[] remainingRequests = {storeCartList.size()}; // Đếm số yêu cầu cần xử lý
+
+        for (Cart storeCart : storeCartList) {
+            // Bắt đầu lấy thông tin sản phẩm cho từng storeCart
+            List<Product> products = new ArrayList<>();
+            List<String> productIds = storeCart.getProductIds();
+
+            for (String productId : productIds) {
+                firestore.collection("products")
+                        .document(productId)
+                        .get()
+                        .addOnCompleteListener(productTask -> {
+                            if (productTask.isSuccessful()) {
+                                DocumentSnapshot productDoc = productTask.getResult();
+                                if (productDoc.exists()) {
+                                    Product product = productDoc.toObject(Product.class);
+                                    if (product != null) {
+                                        products.add(product); // Thêm sản phẩm vào danh sách
+                                    }
+                                }
+                            } else {
+                                listener.onError("Failed to fetch product: " + productTask.getException().getMessage());
+                            }
+
+                            // Khi đã hoàn thành việc lấy sản phẩm, tiếp tục lấy Store nếu sản phẩm đủ
+                            if (products.size() == productIds.size()) {
+                                storeCart.setProduct(products); // Cập nhật sản phẩm vào storeCart
+
+                                // Lấy thông tin store dựa trên storeId
+                                firestore.collection("users")
+                                        .document("hwLQHydEyPX0Wuk6kIR4l5hhW1e2")
+                                        .get()
+                                        .addOnCompleteListener(userTask -> {
+                                            if (userTask.isSuccessful()) {
+                                                DocumentSnapshot storeDoc = userTask.getResult();
+                                                if (storeDoc.exists()) {
+                                                    Store store = storeDoc.toObject(Store.class);
+                                                    if (store != null) {
+                                                        storeCart.setStore(store); // Cập nhật Store vào storeCart
+                                                    }
+                                                }
+                                            } else {
+                                                listener.onError("Failed to fetch store: " + userTask.getException().getMessage());
+                                            }
+
+                                            // Giảm đếm và kiểm tra nếu đã hoàn thành tất cả yêu cầu
+                                            remainingRequests[0]--;
+                                            if (remainingRequests[0] == 0) {
+                                                listener.onDataFetched(updatedStoreCartList);
+                                            }
+                                        });
+                            }
+                        });
+            }
+            updatedStoreCartList.add(storeCart); // Thêm storeCart vào danh sách cập nhật
+        }
+    }
+
+
     // Listener để callback khi lấy dữ liệu xong
     public interface OnDataFetchedListener {
-        void onDataFetched(List<StoreCart> storeCarts);
+        void onDataFetched(List<Cart> storeCarts);
         void onError(String errorMessage);
     }
 }
Index: app/src/main/java/com/example/agrimart/adapter/StoreCartAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.data.model.StoreCart;\r\n\r\nimport java.util.List;\r\n\r\npublic class StoreCartAdapter extends RecyclerView.Adapter<StoreCartAdapter.StoreCartViewHolder> {\r\n\r\n    private List<StoreCart> storeCartList;\r\n\r\n    public StoreCartAdapter(List<StoreCart> storeCartList) {\r\n        this.storeCartList = storeCartList;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public StoreCartViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext())\r\n                .inflate(R.layout.item_cart_store, parent, false);\r\n        return new StoreCartViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull StoreCartViewHolder holder, int position) {\r\n        StoreCart storeCart = storeCartList.get(position);\r\n        holder.tvStoreName.setText(storeCart.getStoreId());\r\n\r\n        // Cài đặt RecyclerView con cho danh sách sản phẩm\r\n        ProductCartAdapter productAdapter = new ProductCartAdapter((storeCart.getProducts()));\r\n        holder.rvProducts.setAdapter(productAdapter);\r\n        holder.rvProducts.setLayoutManager(new LinearLayoutManager(holder.itemView.getContext()));\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return storeCartList.size();\r\n    }\r\n\r\n    static class StoreCartViewHolder extends RecyclerView.ViewHolder {\r\n        TextView tvStoreName;\r\n        RecyclerView rvProducts;\r\n\r\n        public StoreCartViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            tvStoreName = itemView.findViewById(R.id.tv_store_name);\r\n            rvProducts = itemView.findViewById(R.id.rv_products);\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/adapter/StoreCartAdapter.java b/app/src/main/java/com/example/agrimart/adapter/StoreCartAdapter.java
--- a/app/src/main/java/com/example/agrimart/adapter/StoreCartAdapter.java	(revision 6c06cc6d4b5c05fe0e2dc4ab0e437df3c4ba74ed)
+++ b/app/src/main/java/com/example/agrimart/adapter/StoreCartAdapter.java	(date 1731254209703)
@@ -10,15 +10,16 @@
 import androidx.recyclerview.widget.RecyclerView;
 
 import com.example.agrimart.R;
-import com.example.agrimart.data.model.StoreCart;
+import com.example.agrimart.data.model.Cart;
+import com.example.agrimart.data.model.Product;
 
 import java.util.List;
 
 public class StoreCartAdapter extends RecyclerView.Adapter<StoreCartAdapter.StoreCartViewHolder> {
 
-    private List<StoreCart> storeCartList;
+    private List<Cart> storeCartList;
 
-    public StoreCartAdapter(List<StoreCart> storeCartList) {
+    public StoreCartAdapter(List<Cart> storeCartList) {
         this.storeCartList = storeCartList;
     }
 
@@ -32,11 +33,12 @@
 
     @Override
     public void onBindViewHolder(@NonNull StoreCartViewHolder holder, int position) {
-        StoreCart storeCart = storeCartList.get(position);
-        holder.tvStoreName.setText(storeCart.getStoreId());
+        Cart storeCart = storeCartList.get(position);
+        holder.tvStoreName.setText(storeCart.getStore().getName());
 
         // Cài đặt RecyclerView con cho danh sách sản phẩm
-        ProductCartAdapter productAdapter = new ProductCartAdapter((storeCart.getProducts()));
+        List<Product> products = storeCart.getProducts(); // Giả sử `getProducts()` trả về danh sách sản phẩm
+        ProductCartAdapter productAdapter = new ProductCartAdapter(products);
         holder.rvProducts.setAdapter(productAdapter);
         holder.rvProducts.setLayoutManager(new LinearLayoutManager(holder.itemView.getContext()));
     }
Index: app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.data.model.ProductCart;\r\n\r\nimport java.util.List;\r\n\r\npublic class ProductCartAdapter extends RecyclerView.Adapter<ProductCartAdapter.ProductViewHolder> {\r\n\r\n    private List<ProductCart> productList;\r\n\r\n    public ProductCartAdapter(List<ProductCart> productList) {\r\n        this.productList = productList;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ProductViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext())\r\n                .inflate(R.layout.item_cart_product, parent, false);\r\n        return new ProductViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ProductViewHolder holder, int position) {\r\n        ProductCart product = productList.get(position);\r\n        holder.tvProductName.setText(product.getName());\r\n        holder.tvPrice.setText(String.format(\"%,.2f đ\", product.getPrice()));\r\n\r\n        // Set thêm các giá trị khác nếu có\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return productList.size();\r\n    }\r\n\r\n    static class ProductViewHolder extends RecyclerView.ViewHolder {\r\n        TextView tvProductName, tvPrice;\r\n\r\n        public ProductViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            tvProductName = itemView.findViewById(R.id.tv_product_name);\r\n            tvPrice = itemView.findViewById(R.id.price);\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java b/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java
--- a/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java	(revision 6c06cc6d4b5c05fe0e2dc4ab0e437df3c4ba74ed)
+++ b/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java	(date 1731254193259)
@@ -10,15 +10,15 @@
 
 import com.example.agrimart.R;
 import com.example.agrimart.data.model.Product;
-import com.example.agrimart.data.model.ProductCart;
+
 
 import java.util.List;
 
 public class ProductCartAdapter extends RecyclerView.Adapter<ProductCartAdapter.ProductViewHolder> {
 
-    private List<ProductCart> productList;
+    private List<Product> productList;
 
-    public ProductCartAdapter(List<ProductCart> productList) {
+    public ProductCartAdapter(List<Product> productList) {
         this.productList = productList;
     }
 
@@ -32,7 +32,7 @@
 
     @Override
     public void onBindViewHolder(@NonNull ProductViewHolder holder, int position) {
-        ProductCart product = productList.get(position);
+        Product product = productList.get(position);
         holder.tvProductName.setText(product.getName());
         holder.tvPrice.setText(String.format("%,.2f đ", product.getPrice()));
 
Index: app/src/main/java/com/example/agrimart/data/model/StoreCart.java
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/data/model/StoreCart.java b/app/src/main/java/com/example/agrimart/data/model/StoreCart.java
deleted file mode 100644
--- a/app/src/main/java/com/example/agrimart/data/model/StoreCart.java	(revision 6c06cc6d4b5c05fe0e2dc4ab0e437df3c4ba74ed)
+++ /dev/null	(revision 6c06cc6d4b5c05fe0e2dc4ab0e437df3c4ba74ed)
@@ -1,31 +0,0 @@
-package com.example.agrimart.data.model;
-
-import java.util.List;
-
-public class StoreCart {
-    private String storeId;
-    private String updatedAt;
-    private String userId;
-    private List<ProductCart> products;
-
-    public StoreCart() {
-        // Constructor rỗng
-    }
-
-    public StoreCart(String storeId, String updatedAt, String userId, List<ProductCart> products) {
-        this.storeId = storeId;
-        this.updatedAt = updatedAt;
-        this.userId = userId;
-        this.products = products;
-    }
-
-    // Getter và Setter
-    public String getStoreId() { return storeId; }
-    public void setStoreId(String storeId) { this.storeId = storeId; }
-    public String getUpdatedAt() { return updatedAt; }
-    public void setUpdatedAt(String updatedAt) { this.updatedAt = updatedAt; }
-    public String getUserId() { return userId; }
-    public void setUserId(String userId) { this.userId = userId; }
-    public List<ProductCart> getProducts() { return products; }
-    public void setProducts(List<ProductCart> products) { this.products = products; }
-}
Index: app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.ui.Cart;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.adapter.StoreCartAdapter;\r\nimport com.example.agrimart.data.model.StoreCart;\r\nimport com.example.agrimart.viewmodel.CartFragmentViewModel;\r\n\r\nimport java.util.List;\r\n\r\npublic class CartFragment extends Fragment {\r\n    private RecyclerView rvCarts;\r\n    private StoreCartAdapter storeCartAdapter;\r\n    private CartFragmentViewModel viewModel;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_cart, container, false);\r\n\r\n        // Cập nhật màu status bar\r\n        if (getActivity() != null) {\r\n            getActivity().getWindow().setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n        }\r\n\r\n        // Khởi tạo RecyclerView\r\n        rvCarts = view.findViewById(R.id.rv_cart);\r\n        rvCarts.setLayoutManager(new LinearLayoutManager(requireActivity()));\r\n\r\n        // Khởi tạo ViewModel\r\n        viewModel = new CartFragmentViewModel();\r\n\r\n\r\n\r\n        // Lấy dữ liệu từ Firestore và cập nhật RecyclerView\r\n        viewModel.getStoreCartsByUserId(new CartFragmentViewModel.OnDataFetchedListener() {\r\n            @Override\r\n            public void onDataFetched(List<StoreCart> storeCarts) {\r\n                // Cập nhật RecyclerView với danh sách StoreCart\r\n                storeCartAdapter = new StoreCartAdapter(storeCarts);\r\n                rvCarts.setAdapter(storeCartAdapter);\r\n            }\r\n\r\n            @Override\r\n            public void onError(String errorMessage) {\r\n                // Xử lý lỗi nếu không lấy được dữ liệu\r\n                Toast.makeText(getContext(), errorMessage, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java b/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java
--- a/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java	(revision 6c06cc6d4b5c05fe0e2dc4ab0e437df3c4ba74ed)
+++ b/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java	(date 1731252314958)
@@ -13,7 +13,7 @@
 
 import com.example.agrimart.R;
 import com.example.agrimart.adapter.StoreCartAdapter;
-import com.example.agrimart.data.model.StoreCart;
+import com.example.agrimart.data.model.Cart;
 import com.example.agrimart.viewmodel.CartFragmentViewModel;
 
 import java.util.List;
@@ -45,7 +45,7 @@
         // Lấy dữ liệu từ Firestore và cập nhật RecyclerView
         viewModel.getStoreCartsByUserId(new CartFragmentViewModel.OnDataFetchedListener() {
             @Override
-            public void onDataFetched(List<StoreCart> storeCarts) {
+            public void onDataFetched(List<Cart> storeCarts) {
                 // Cập nhật RecyclerView với danh sách StoreCart
                 storeCartAdapter = new StoreCartAdapter(storeCarts);
                 rvCarts.setAdapter(storeCartAdapter);
Index: app/src/main/java/com/example/agrimart/data/model/Cart.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/data/model/Cart.java b/app/src/main/java/com/example/agrimart/data/model/Cart.java
new file mode 100644
--- /dev/null	(date 1731255208237)
+++ b/app/src/main/java/com/example/agrimart/data/model/Cart.java	(date 1731255208237)
@@ -0,0 +1,76 @@
+package com.example.agrimart.data.model;
+
+import java.util.ArrayList;
+import java.util.List;
+
+public class Cart {
+    private List<Product> products;
+    private String storeId;
+    private Store store;
+    private String updated_at;
+    private String userId;
+
+    // Hàm thêm sản phẩm vào StoreCart
+    public void addProduct(Product product) {
+        if (products == null) {
+            products = new ArrayList<>();
+        }
+        products.add(product);
+    }
+
+    public List<String> getProductIds() {
+        List<String> productIds = new ArrayList<>();
+        if (products != null) {
+            for (Product product : products) {
+                productIds.add(product.getProductId());
+            }
+        }
+        return productIds;
+    }
+
+
+    public void setProduct(List<Product> product) {
+
+        this.products = product;
+    }
+
+    public List<Product> getProducts() {
+        if (products == null)
+        {
+            products = new ArrayList<>();
+        }
+        return products;
+    }
+
+    public String getStoreId() {
+        return storeId;
+    }
+
+    public void setStoreId(String storeId) {
+        this.storeId = storeId;
+    }
+
+    public String getUpdated_at() {
+        return updated_at;
+    }
+
+    public void setUpdated_at(String updated_at) {
+        this.updated_at = updated_at;
+    }
+
+    public String getUserId() {
+        return userId;
+    }
+
+    public void setUserId(String userId) {
+        this.userId = userId;
+    }
+
+    public Store getStore() {
+        return store;
+    }
+
+    public void setStore(Store store) {
+        this.store = store;
+    }
+}
Index: app/src/main/res/layout/fragment_cart.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/main1\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/white\"\r\n    tools:context=\"com.example.agrimart.ui.Cart.CartFragment\">\r\n\r\n    <RelativeLayout\r\n        android:id=\"@+id/header\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:background=\"@color/green\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_title\"\r\n            android:layout_width=\"126dp\"\r\n            android:layout_height=\"40dp\"\r\n            android:layout_gravity=\"center\"\r\n            android:layout_marginStart=\"145dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginEnd=\"140dp\"\r\n            android:layout_marginBottom=\"8dp\"\r\n            android:gravity=\"center\"\r\n            android:text=\"GIỎ HÀNG\"\r\n            android:textSize=\"18sp\"\r\n            android:textStyle=\"bold\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/btn_delete\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_alignParentEnd=\"true\"\r\n            android:layout_centerVertical=\"true\"\r\n            android:layout_marginEnd=\"16dp\"\r\n            android:background=\"@android:color/transparent\"\r\n            android:contentDescription=\"Remove Product\"\r\n            android:src=\"@drawable/delete\" />\r\n    </RelativeLayout>\r\n\r\n    <FrameLayout\r\n        android:id=\"@+id/container\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_below=\"@+id/header\"\r\n        android:layout_above=\"@+id/footer\">\r\n\r\n        <androidx.cardview.widget.CardView\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_margin=\"10dp\"\r\n            app:cardCornerRadius=\"8dp\"\r\n            app:cardElevation=\"4dp\"\r\n            app:cardBackgroundColor=\"@android:color/white\">\r\n\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:id=\"@+id/rv_cart\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"514dp\"\r\n                android:layout_marginTop=\"10dp\" />\r\n        </androidx.cardview.widget.CardView>\r\n    </FrameLayout>\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_above=\"@id/footer\">\r\n        <TextView\r\n            android:id=\"@+id/tv_total_price\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"Tổng tiền: 0đ\"\r\n            android:textSize=\"18sp\"\r\n            android:textStyle=\"bold\"\r\n            android:layout_margin=\"16dp\"/>\r\n    </RelativeLayout>\r\n\r\n    <RelativeLayout\r\n        android:id=\"@+id/footer\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentBottom=\"true\">\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_checkout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"60dp\"\r\n            android:layout_marginStart=\"48dp\"\r\n            android:layout_marginEnd=\"48dp\"\r\n            android:backgroundTint=\"@color/green\"\r\n            app:cornerRadius=\"24dp\"\r\n            android:text=\"Thanh toán\"/>\r\n    </RelativeLayout>\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_cart.xml b/app/src/main/res/layout/fragment_cart.xml
--- a/app/src/main/res/layout/fragment_cart.xml	(revision 6c06cc6d4b5c05fe0e2dc4ab0e437df3c4ba74ed)
+++ b/app/src/main/res/layout/fragment_cart.xml	(date 1731255718225)
@@ -51,7 +51,7 @@
 
         <androidx.cardview.widget.CardView
             android:layout_width="match_parent"
-            android:layout_height="wrap_content"
+            android:layout_height="match_parent"
             android:layout_margin="10dp"
             app:cardCornerRadius="8dp"
             app:cardElevation="4dp"
