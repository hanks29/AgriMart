Index: app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.ui.Cart;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.adapter.StoreCartAdapter;\r\nimport com.example.agrimart.data.model.Cart;\r\nimport com.example.agrimart.viewmodel.CartFragmentViewModel;\r\n\r\nimport java.util.List;\r\n\r\npublic class CartFragment extends Fragment {\r\n    private RecyclerView rvCarts;\r\n    private StoreCartAdapter storeCartAdapter;\r\n    private CartFragmentViewModel viewModel;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_cart, container, false);\r\n\r\n        // Cập nhật màu status bar\r\n        if (getActivity() != null) {\r\n            getActivity().getWindow().setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n        }\r\n\r\n        // Khởi tạo RecyclerView\r\n        rvCarts = view.findViewById(R.id.rv_cart);\r\n        rvCarts.setLayoutManager(new LinearLayoutManager(requireActivity()));\r\n\r\n        // Khởi tạo ViewModel\r\n        viewModel = new CartFragmentViewModel();\r\n\r\n\r\n\r\n        // Lấy dữ liệu từ Firestore và cập nhật RecyclerView\r\n        viewModel.getStoreCartsByUserId(new CartFragmentViewModel.OnDataFetchedListener() {\r\n            @Override\r\n            public void onDataFetched(List<Cart> storeCarts) {\r\n                // Cập nhật RecyclerView với danh sách StoreCart\r\n                storeCartAdapter = new StoreCartAdapter(storeCarts);\r\n                rvCarts.setAdapter(storeCartAdapter);\r\n            }\r\n\r\n            @Override\r\n            public void onError(String errorMessage) {\r\n                // Xử lý lỗi nếu không lấy được dữ liệu\r\n                Toast.makeText(getContext(), errorMessage, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java b/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java
--- a/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
+++ b/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java	(date 1731470593311)
@@ -1,6 +1,7 @@
 package com.example.agrimart.ui.Cart;
 
 import android.os.Bundle;
+import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
@@ -42,13 +43,13 @@
 
 
 
-        // Lấy dữ liệu từ Firestore và cập nhật RecyclerView
         viewModel.getStoreCartsByUserId(new CartFragmentViewModel.OnDataFetchedListener() {
             @Override
             public void onDataFetched(List<Cart> storeCarts) {
                 // Cập nhật RecyclerView với danh sách StoreCart
                 storeCartAdapter = new StoreCartAdapter(storeCarts);
                 rvCarts.setAdapter(storeCartAdapter);
+
             }
 
             @Override
@@ -58,6 +59,8 @@
             }
         });
 
+
+
         return view;
     }
 }
Index: app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.viewmodel;\r\n\r\nimport android.util.Log;\r\n\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.data.model.Cart;\r\nimport com.example.agrimart.data.model.ProductCart;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.WriteBatch;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\n\r\npublic class CartFragmentViewModel extends ViewModel {\r\n    private final FirebaseAuth auth;\r\n    private final FirebaseFirestore firestore;\r\n    private String userId;\r\n\r\n    // Constructor\r\n    public CartFragmentViewModel() {\r\n        this.auth = FirebaseAuth.getInstance();\r\n        this.firestore = FirebaseFirestore.getInstance();\r\n    }\r\n\r\n    // Hàm để lấy danh sách các StoreCart theo userId, sắp xếp theo ngày\r\n    public void getStoreCartsByUserId(final OnDataFetchedListener listener) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId) // Tìm các StoreCart có userId trùng với tham số\r\n                .orderBy(\"updatedAt\", Query.Direction.DESCENDING) // Sắp xếp theo updatedAt giảm dần\r\n                .get() // Lấy dữ liệu\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        List<Cart> storeCartList = new ArrayList<>();\r\n                        for (DocumentSnapshot document : task.getResult()) {\r\n                            Cart storeCart = document.toObject(Cart.class);\r\n                            if (storeCart != null) {\r\n                                storeCartList.add(storeCart);\r\n                            }\r\n                        }\r\n                        // Sau khi lấy danh sách StoreCart, tiếp tục truy vấn thông tin sản phẩm tương ứng\r\n                        fetchProductDetailsAndStore(storeCartList, listener);\r\n                    } else {\r\n                        Log.e(\"CartFragmentViewModel\", \"Failed to fetch data:\" + task.getException().getMessage());\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    // Hàm để lấy thông tin sản phẩm từ productId\r\n    private void fetchProductDetailsAndStore(List<Cart> storeCartList, final OnDataFetchedListener listener) {\r\n        List<Cart> updatedStoreCartList = new ArrayList<>();\r\n        int[] remainingRequests = {storeCartList.size()}; // Đếm số yêu cầu cần xử lý\r\n\r\n        for (Cart storeCart : storeCartList) {\r\n            List<Product> products = storeCart.getProducts(); // Lấy danh sách sản phẩm hiện có trong storeCart\r\n            int[] productRequests = {products.size()}; // Đếm yêu cầu lấy thông tin cho từng sản phẩm\r\n\r\n            for (Product product : products) {\r\n                firestore.collection(\"products\")\r\n                        .document(product.getProduct_id())\r\n                        .get()\r\n                        .addOnCompleteListener(productTask -> {\r\n                            if (productTask.isSuccessful()) {\r\n                                DocumentSnapshot productDoc = productTask.getResult();\r\n                                if (productDoc.exists()) {\r\n                                    // Cập nhật thông tin trực tiếp vào đối tượng Product hiện có\r\n                                    product.setName(productDoc.getString(\"name\"));\r\n                                    product.setPrice(productDoc.getDouble(\"price\"));\r\n                                    product.setImages((List<String>) productDoc.get(\"images\"));\r\n                                }\r\n                            } else {\r\n                                listener.onError(\"Lấy thông tin sản phẩm thất bại: \" + productTask.getException().getMessage());\r\n                            }\r\n\r\n                            // Kiểm tra nếu tất cả sản phẩm đã được xử lý\r\n                            productRequests[0]--;\r\n                            if (productRequests[0] == 0) {\r\n                                // Khi tất cả sản phẩm đã được lấy, tiến hành lấy thông tin cửa hàng\r\n                                firestore.collection(\"users\")  // Collection \"users\" chứa thông tin cửa hàng\r\n                                        .document(storeCart.getStoreId())\r\n                                        .get()\r\n                                        .addOnCompleteListener(userTask -> {\r\n                                            if (userTask.isSuccessful()) {\r\n                                                DocumentSnapshot storeDoc = userTask.getResult();\r\n                                                if (storeDoc.exists()) {\r\n                                                    storeCart.setStore_name(storeDoc.getString(\"store_name\"));\r\n                                                }\r\n                                            } else {\r\n                                                listener.onError(\"Lấy thông tin cửa hàng thất bại: \" + userTask.getException().getMessage());\r\n                                            }\r\n\r\n                                            // Thêm storeCart đã cập nhật vào danh sách kết quả\r\n                                            updatedStoreCartList.add(storeCart);\r\n\r\n                                            // Giảm đếm remainingRequests và kiểm tra nếu tất cả storeCart đã hoàn thành\r\n                                            remainingRequests[0]--;\r\n                                            if (remainingRequests[0] == 0) {\r\n                                                listener.onDataFetched(updatedStoreCartList);\r\n                                            }\r\n                                        });\r\n                            }\r\n                        });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public void updateProductQuantityInFirebase(String productId, int newQuantity) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful() && !task.getResult().isEmpty()) {\r\n                        DocumentSnapshot document = task.getResult().getDocuments().get(0);\r\n                        Cart storeCart = document.toObject(Cart.class);\r\n\r\n                        if (storeCart != null) {\r\n                            List<ProductCart> updatedProductList = new ArrayList<>();\r\n                            boolean productFound = false;\r\n\r\n                            for (Product product : storeCart.getProducts()) {\r\n                                int quantity = product.getProduct_id().equals(productId) ? newQuantity : product.getQuantity();\r\n                                updatedProductList.add(new ProductCart(product.getProduct_id(), quantity));\r\n\r\n                                if (product.getProduct_id().equals(productId)) {\r\n                                    productFound = true;\r\n                                }\r\n                            }\r\n\r\n                            if (productFound) {\r\n                                storeCart.setProductCart(updatedProductList);\r\n\r\n                                firestore.collection(\"cart\")\r\n                                        .document(document.getId())\r\n                                        .update(\"products\", storeCart.getProductCart())\r\n                                        .addOnSuccessListener(aVoid -> Log.d(\"Firebase\", \"Giỏ hàng đã được cập nhật.\"))\r\n                                        .addOnFailureListener(e -> Log.e(\"Firebase\", \"Lỗi khi cập nhật giỏ hàng: \" + e.getMessage()));\r\n                            } else {\r\n                                Log.e(\"Firebase\", \"Không tìm thấy sản phẩm trong giỏ hàng.\");\r\n                            }\r\n                        }\r\n                    } else {\r\n                        Log.e(\"Firebase\", \"Không tìm thấy giỏ hàng hoặc có lỗi xảy ra: \" + (task.getException() != null ? task.getException().getMessage() : \"\"));\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n\r\n    public void addProductToCart(String storeId, Product productToAdd) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        // Query the user's cart based on userId and storeId\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .whereEqualTo(\"storeId\", storeId)\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        if (!task.getResult().isEmpty()) {\r\n                            // Retrieve the existing cart if available\r\n                            DocumentSnapshot document = task.getResult().getDocuments().get(0);\r\n                            Cart storeCart = document.toObject(Cart.class);\r\n\r\n                            if (storeCart != null) {\r\n                                List<Product> products = storeCart.getProducts();\r\n                                List<ProductCart> productCarts = new ArrayList<>();\r\n\r\n                                if (products == null) {\r\n                                    products = new ArrayList<>(); // Initialize if null\r\n                                }\r\n\r\n                                // Check if the product already exists in the cart\r\n                                boolean productExists = false;\r\n                                for (Product product : products) {\r\n                                    ProductCart pro = new ProductCart();\r\n                                    pro.setProduct_id(product.getProduct_id());\r\n                                    pro.setQuantity(product.getQuantity());\r\n                                    if (product.getProduct_id().equals(productToAdd.getProduct_id())) {\r\n                                        productExists = true;\r\n                                        pro.setQuantity(product.getQuantity() + 1);\r\n                                    }\r\n                                    productCarts.add(pro);\r\n                                }\r\n\r\n                                // If the product doesn't exist, add it as a new product\r\n                                if (!productExists) {\r\n                                    ProductCart pro = new ProductCart();\r\n                                    pro.setProduct_id(productToAdd.getProduct_id());\r\n                                    pro.setQuantity(1);\r\n                                    productCarts.add(pro);\r\n                                }\r\n\r\n                                storeCart.setProduct(products); // Update the cart with the new product list\r\n                                String updatedAt = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.getDefault()).format(new Date());\r\n                                storeCart.setUpdatedAt(updatedAt); // Update the timestamp\r\n\r\n                                // Update Firestore\r\n                                firestore.collection(\"cart\")\r\n                                        .document(document.getId())\r\n                                        .update(\r\n                                                \"products\", productCarts,\r\n                                                \"updatedAt\", updatedAt\r\n                                        )\r\n                                        .addOnSuccessListener(aVoid -> Log.d(\"Firebase\", \"Product has been added to the cart.\"))\r\n                                        .addOnFailureListener(e -> Log.e(\"Firebase\", \"Error adding product to cart: \" + e.getMessage()));\r\n                            }\r\n                        } else {\r\n                            // Define a new cart\r\n                            Map<String, Object> newCart = new HashMap<>();\r\n                            newCart.put(\"userId\", userId);\r\n                            newCart.put(\"storeId\", storeId);\r\n                            String updatedAt = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.getDefault()).format(new Date());\r\n                            newCart.put(\"updatedAt\", updatedAt);\r\n\r\n                            // Create the initial list of products\r\n                            List<Map<String, Object>> productCarts = new ArrayList<>();\r\n                            Map<String, Object> productData = new HashMap<>();\r\n                            productData.put(\"product_id\", productToAdd.getProduct_id());\r\n                            productData.put(\"quantity\", 1);\r\n                            productCarts.add(productData);\r\n                            newCart.put(\"products\", productCarts);\r\n\r\n                            // Add the new cart to Firestore\r\n                            firestore.collection(\"cart\")\r\n                                    .add(newCart)\r\n                                    .addOnSuccessListener(documentReference -> Log.d(\"Firebase\", \"New cart has been created.\"))\r\n                                    .addOnFailureListener(e -> Log.e(\"Firebase\", \"Error creating new cart: \" + e.getMessage()));\r\n                        }\r\n                    } else {\r\n                        Log.e(\"Firebase\", \"Error retrieving cart: \" + task.getException());\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    // Listener để callback khi lấy dữ liệu xong\r\n    public interface OnDataFetchedListener {\r\n        void onDataFetched(List<Cart> storeCarts);\r\n\r\n        void onError(String errorMessage);\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java
--- a/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
+++ b/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java	(date 1731470889891)
@@ -11,7 +11,6 @@
 import com.google.firebase.firestore.FirebaseFirestore;
 import com.google.firebase.firestore.DocumentSnapshot;
 import com.google.firebase.firestore.Query;
-import com.google.firebase.firestore.WriteBatch;
 
 import java.text.SimpleDateFormat;
 import java.util.ArrayList;
@@ -20,6 +19,7 @@
 import java.util.List;
 import java.util.Locale;
 import java.util.Map;
+import java.util.concurrent.atomic.AtomicInteger;
 
 public class CartFragmentViewModel extends ViewModel {
     private final FirebaseAuth auth;
@@ -37,9 +37,9 @@
         userId = auth.getCurrentUser().getUid();
 
         firestore.collection("cart")
-                .whereEqualTo("userId", userId) // Tìm các StoreCart có userId trùng với tham số
-                .orderBy("updatedAt", Query.Direction.DESCENDING) // Sắp xếp theo updatedAt giảm dần
-                .get() // Lấy dữ liệu
+                .whereEqualTo("userId", userId)
+                .orderBy("updatedAt", Query.Direction.DESCENDING)
+                .get()
                 .addOnCompleteListener(task -> {
                     if (task.isSuccessful()) {
                         List<Cart> storeCartList = new ArrayList<>();
@@ -47,9 +47,10 @@
                             Cart storeCart = document.toObject(Cart.class);
                             if (storeCart != null) {
                                 storeCartList.add(storeCart);
+
                             }
                         }
-                        // Sau khi lấy danh sách StoreCart, tiếp tục truy vấn thông tin sản phẩm tương ứng
+
                         fetchProductDetailsAndStore(storeCartList, listener);
                     } else {
                         Log.e("CartFragmentViewModel", "Failed to fetch data:" + task.getException().getMessage());
@@ -58,14 +59,16 @@
     }
 
 
+
     // Hàm để lấy thông tin sản phẩm từ productId
+
     private void fetchProductDetailsAndStore(List<Cart> storeCartList, final OnDataFetchedListener listener) {
         List<Cart> updatedStoreCartList = new ArrayList<>();
-        int[] remainingRequests = {storeCartList.size()}; // Đếm số yêu cầu cần xử lý
+        AtomicInteger remainingRequests = new AtomicInteger(storeCartList.size());  // Use AtomicInteger to handle concurrency
 
         for (Cart storeCart : storeCartList) {
-            List<Product> products = storeCart.getProducts(); // Lấy danh sách sản phẩm hiện có trong storeCart
-            int[] productRequests = {products.size()}; // Đếm yêu cầu lấy thông tin cho từng sản phẩm
+            List<Product> products = storeCart.getProducts();
+            AtomicInteger productRequests = new AtomicInteger(products.size());  // Track product requests
 
             for (Product product : products) {
                 firestore.collection("products")
@@ -75,20 +78,18 @@
                             if (productTask.isSuccessful()) {
                                 DocumentSnapshot productDoc = productTask.getResult();
                                 if (productDoc.exists()) {
-                                    // Cập nhật thông tin trực tiếp vào đối tượng Product hiện có
                                     product.setName(productDoc.getString("name"));
                                     product.setPrice(productDoc.getDouble("price"));
                                     product.setImages((List<String>) productDoc.get("images"));
+                                    product.setStoreId(productDoc.getString("storeId"));
                                 }
                             } else {
                                 listener.onError("Lấy thông tin sản phẩm thất bại: " + productTask.getException().getMessage());
                             }
 
-                            // Kiểm tra nếu tất cả sản phẩm đã được xử lý
-                            productRequests[0]--;
-                            if (productRequests[0] == 0) {
-                                // Khi tất cả sản phẩm đã được lấy, tiến hành lấy thông tin cửa hàng
-                                firestore.collection("users")  // Collection "users" chứa thông tin cửa hàng
+                            // Decrement product request counter
+                            if (productRequests.decrementAndGet() == 0) {
+                                firestore.collection("users")
                                         .document(storeCart.getStoreId())
                                         .get()
                                         .addOnCompleteListener(userTask -> {
@@ -101,12 +102,10 @@
                                                 listener.onError("Lấy thông tin cửa hàng thất bại: " + userTask.getException().getMessage());
                                             }
 
-                                            // Thêm storeCart đã cập nhật vào danh sách kết quả
                                             updatedStoreCartList.add(storeCart);
 
-                                            // Giảm đếm remainingRequests và kiểm tra nếu tất cả storeCart đã hoàn thành
-                                            remainingRequests[0]--;
-                                            if (remainingRequests[0] == 0) {
+                                            // Decrement the remaining request counter
+                                            if (remainingRequests.decrementAndGet() == 0) {
                                                 listener.onDataFetched(updatedStoreCartList);
                                             }
                                         });
@@ -117,11 +116,14 @@
     }
 
 
-    public void updateProductQuantityInFirebase(String productId, int newQuantity) {
+
+
+    public void updateProductQuantityInFirebase(String productId, String storeId, int newQuantity) {
         userId = auth.getCurrentUser().getUid();
 
         firestore.collection("cart")
                 .whereEqualTo("userId", userId)
+                .whereEqualTo("storeId", storeId)
                 .get()
                 .addOnCompleteListener(task -> {
                     if (task.isSuccessful() && !task.getResult().isEmpty()) {
Index: app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.adapter;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.lifecycle.ViewModel;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.data.model.Cart;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.viewmodel.CartFragmentViewModel;\r\nimport com.google.android.material.imageview.ShapeableImageView;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.List;\r\n\r\npublic class ProductCartAdapter extends RecyclerView.Adapter<ProductCartAdapter.ProductViewHolder> {\r\n\r\n    private List<Product> productList;\r\n\r\n    public ProductCartAdapter(List<Product> productList) {\r\n        this.productList = productList;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ProductViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext())\r\n                .inflate(R.layout.item_cart_product, parent, false);\r\n        return new ProductViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ProductViewHolder holder, int position) {\r\n        Product product = productList.get(position);\r\n        holder.tvProductName.setText(product.getName());\r\n        holder.quantity.setText(String.valueOf(product.getQuantity()));\r\n        holder.tvPrice.setText(String.format(\"%,.0f đ\", product.getPrice()));\r\n        CartFragmentViewModel viewModel = new CartFragmentViewModel();\r\n\r\n        Glide.with(holder.itemView.getContext())\r\n                .load(product.getImages().get(0))\r\n                .placeholder(R.drawable.placeholder_image)\r\n                .error(R.drawable.error_image)\r\n                .into(holder.img_product);\r\n\r\n        // Xử lý khi bấm nút giảm số lượng\r\n        holder.btn_decrease.setOnClickListener(v -> {\r\n            if (product.getQuantity() > 1) { // Đảm bảo số lượng không giảm dưới 1\r\n                product.setQuantity(product.getQuantity() - 1);\r\n                holder.quantity.setText(String.valueOf(product.getQuantity())); // Cập nhật hiển thị số lượng\r\n                viewModel.updateProductQuantityInFirebase(product.getProduct_id(), product.getQuantity());\r\n            }\r\n        });\r\n\r\n        // Xử lý khi bấm nút tăng số lượng\r\n        holder.btn_increase.setOnClickListener(v -> {\r\n            product.setQuantity(product.getQuantity() + 1);\r\n            holder.quantity.setText(String.valueOf(product.getQuantity())); // Cập nhật hiển thị số lượng\r\n            viewModel.updateProductQuantityInFirebase(product.getProduct_id(), product.getQuantity());\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return productList.size();\r\n    }\r\n\r\n    static class ProductViewHolder extends RecyclerView.ViewHolder {\r\n        TextView tvProductName, tvPrice, quantity;\r\n        ShapeableImageView img_product;\r\n        ImageView btn_decrease, btn_increase;\r\n\r\n        public ProductViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            tvProductName = itemView.findViewById(R.id.tv_product_name);\r\n            tvPrice = itemView.findViewById(R.id.price);\r\n            img_product = itemView.findViewById(R.id.img_product);\r\n            quantity = itemView.findViewById(R.id.cart_quantity_product);\r\n            btn_decrease = itemView.findViewById(R.id.btn_decrease);\r\n            btn_increase = itemView.findViewById(R.id.btn_increase);\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java b/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java
--- a/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
+++ b/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java	(date 1731424512970)
@@ -57,7 +57,7 @@
             if (product.getQuantity() > 1) { // Đảm bảo số lượng không giảm dưới 1
                 product.setQuantity(product.getQuantity() - 1);
                 holder.quantity.setText(String.valueOf(product.getQuantity())); // Cập nhật hiển thị số lượng
-                viewModel.updateProductQuantityInFirebase(product.getProduct_id(), product.getQuantity());
+                viewModel.updateProductQuantityInFirebase(product.getProduct_id(), product.getStoreId() ,product.getQuantity());
             }
         });
 
@@ -65,7 +65,7 @@
         holder.btn_increase.setOnClickListener(v -> {
             product.setQuantity(product.getQuantity() + 1);
             holder.quantity.setText(String.valueOf(product.getQuantity())); // Cập nhật hiển thị số lượng
-            viewModel.updateProductQuantityInFirebase(product.getProduct_id(), product.getQuantity());
+            viewModel.updateProductQuantityInFirebase(product.getProduct_id(),product.getStoreId(), product.getQuantity());
         });
     }
 
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
+++ /dev/null	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1" date="1730802371626" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/5/2024 5:25 PM [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
+++ /dev/null	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
@@ -1,1295 +0,0 @@
-Index: app/src/main/java/com/example/agrimart/data/model/Product.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.data.model;\r\n\r\npublic class Product {\r\n    private String image;\r\n    private String name;\r\n    private double price;\r\n    private String active;\r\n\r\n    public Product() {\r\n    }\r\n\r\n    public Product(String image, String name, double price) {\r\n        this.image = image;\r\n        this.name = name;\r\n        this.price = price;\r\n    }\r\n\r\n    public Product(String image, String name, double price, String active) {\r\n        this.image = image;\r\n        this.name = name;\r\n        this.price = price;\r\n        this.active = active;\r\n    }\r\n\r\n    public String getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image) {\r\n        this.image = image;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    public String getActive() {\r\n        return active;\r\n    }\r\n\r\n    public void setActive(String active) {\r\n        this.active = active;\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/data/model/Product.java b/app/src/main/java/com/example/agrimart/data/model/Product.java
---- a/app/src/main/java/com/example/agrimart/data/model/Product.java	
-+++ b/app/src/main/java/com/example/agrimart/data/model/Product.java	
-@@ -1,33 +1,57 @@
- package com.example.agrimart.data.model;
- 
--public class Product {
--    private String image;
-+import java.io.Serializable;
-+import java.util.Collections;
-+import java.util.List;
-+
-+public class Product implements Serializable {
-+    private String productId;
-     private String name;
-     private double price;
-     private String active;
-+    private String category;
-+    private String description;
-+    private int height;
-+    private List<String> images;
-+    private int length;
-+    private int quantity;
-+    private String storeId;
-+    private int weight;
-+    private int width;
-+    private int soldQuantity;
- 
-     public Product() {
-     }
- 
--    public Product(String image, String name, double price) {
--        this.image = image;
-+    public Product(String productId, String name, double price, String active, String category, String description, int height, List<String> images, int length, int quantity, String storeId, int weight, int width, int soldQuantity) {
-+        this.productId = productId;
-         this.name = name;
-         this.price = price;
-+        this.active = active;
-+        this.category = category;
-+        this.description = description;
-+        this.height = height;
-+        this.images = images;
-+        this.length = length;
-+        this.quantity = quantity;
-+        this.storeId = storeId;
-+        this.weight = weight;
-+        this.width = width;
-+        this.soldQuantity = soldQuantity;
-     }
- 
--    public Product(String image, String name, double price, String active) {
--        this.image = image;
-+    public Product(String imageUrl, String name, double price) {
-+        this.images = Collections.singletonList(imageUrl);
-         this.name = name;
-         this.price = price;
--        this.active = active;
-     }
- 
--    public String getImage() {
--        return image;
-+    public String getProductId() {
-+        return productId;
-     }
- 
--    public void setImage(String image) {
--        this.image = image;
-+    public void setProductId(String productId) {
-+        this.productId = productId;
-     }
- 
-     public String getName() {
-@@ -53,4 +77,84 @@
-     public void setActive(String active) {
-         this.active = active;
-     }
-+
-+    public String getCategory() {
-+        return category;
-+    }
-+
-+    public void setCategory(String category) {
-+        this.category = category;
-+    }
-+
-+    public String getDescription() {
-+        return description;
-+    }
-+
-+    public void setDescription(String description) {
-+        this.description = description;
-+    }
-+
-+    public int getHeight() {
-+        return height;
-+    }
-+
-+    public void setHeight(int height) {
-+        this.height = height;
-+    }
-+
-+    public List<String> getImages() {
-+        return images;
-+    }
-+
-+    public void setImages(List<String> images) {
-+        this.images = images;
-+    }
-+
-+    public int getLength() {
-+        return length;
-+    }
-+
-+    public void setLength(int length) {
-+        this.length = length;
-+    }
-+
-+    public int getQuantity() {
-+        return quantity;
-+    }
-+
-+    public void setQuantity(int quantity) {
-+        this.quantity = quantity;
-+    }
-+
-+    public String getStoreId() {
-+        return storeId;
-+    }
-+
-+    public void setStoreId(String storeId) {
-+        this.storeId = storeId;
-+    }
-+
-+    public int getWeight() {
-+        return weight;
-+    }
-+
-+    public void setWeight(int weight) {
-+        this.weight = weight;
-+    }
-+
-+    public int getWidth() {
-+        return width;
-+    }
-+
-+    public void setWidth(int width) {
-+        this.width = width;
-+    }
-+
-+    public int getSoldQuantity() {
-+        return soldQuantity;
-+    }
-+
-+    public void setSoldQuantity(int soldQuantity) {
-+        this.soldQuantity = soldQuantity;
-+    }
- }
-\ No newline at end of file
-Index: app/src/main/res/layout/item_product.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n\r\n    <data>\r\n        <variable\r\n            name=\"product\"\r\n            type=\"com.example.agrimart.data.model.Product\" />\r\n    </data>\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"173dp\"\r\n        android:background=\"@drawable/bg_product\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"5dp\"\r\n        android:layout_marginTop=\"5dp\">\r\n\r\n        <FrameLayout\r\n            android:id=\"@+id/frame_layout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"124dp\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imgPro\"\r\n                android:layout_width=\"99dp\"\r\n                android:layout_height=\"79dp\"\r\n                android:scaleType=\"centerCrop\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/banana\" />\r\n        </FrameLayout>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvName\"\r\n            android:layout_width=\"129dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/frame_layout\"\r\n            android:layout_marginTop=\"12dp\"\r\n            android:textSize=\"16sp\"\r\n            android:textColor=\"#333333\"\r\n            android:letterSpacing=\"0.01\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:ellipsize=\"end\"\r\n            android:maxLines=\"1\"\r\n            android:textStyle=\"bold\"/>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvPrice\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/tvName\"\r\n            android:textSize=\"18sp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:textColor=\"#F44336\"\r\n            android:fontFamily=\"@font/gabarito\"\r\n            android:letterSpacing=\"0.01\"/>\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/imageButton\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@color/transparent\"\r\n            android:layout_below=\"@id/tvName\"\r\n            android:layout_alignParentEnd=\"true\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginEnd=\"16dp\"\r\n            android:layout_marginBottom=\"10dp\"\r\n            app:srcCompat=\"@drawable/ic_plus_1\" />\r\n\r\n    </RelativeLayout>\r\n</layout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/item_product.xml b/app/src/main/res/layout/item_product.xml
---- a/app/src/main/res/layout/item_product.xml	
-+++ b/app/src/main/res/layout/item_product.xml	
-@@ -22,10 +22,10 @@
- 
-             <ImageView
-                 android:id="@+id/imgPro"
--                android:layout_width="99dp"
--                android:layout_height="79dp"
--                android:scaleType="centerCrop"
-+                android:layout_width="match_parent"
-+                android:layout_height="139dp"
-                 android:layout_gravity="center"
-+                android:scaleType="centerCrop"
-                 android:src="@drawable/banana" />
-         </FrameLayout>
- 
-Index: app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.Store;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.data.model.ProductRequest;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class StoreActivity extends AppCompatActivity {\r\n\r\n    private ImageView storeAvatar;\r\n    private TextView storeName, storeRating, storeAddress;\r\n    private RecyclerView rvProducts;\r\n    private ProductAdapter productAdapter;\r\n    private List<Product> productList;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_store);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.LOLLIPOP) {\r\n            Window window = getWindow();\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.setStatusBarColor(ContextCompat.getColor(this, R.color.green));\r\n        }\r\n\r\n        storeAvatar = findViewById(R.id.store_avatar);\r\n        storeName = findViewById(R.id.store_name);\r\n        storeRating = findViewById(R.id.store_rating);\r\n        storeAddress = findViewById(R.id.store_address);\r\n        rvProducts = findViewById(R.id.rvProducts);\r\n\r\n\r\n        productList = new ArrayList<>();\r\n\r\n\r\n        productAdapter = new ProductAdapter(productList, product -> {\r\n\r\n        });\r\n        rvProducts.setLayoutManager(new GridLayoutManager(this, 2));\r\n        rvProducts.setAdapter(productAdapter);\r\n        loadData();\r\n    }\r\n    private void loadData() {\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        if (user != null) {\r\n            String uid = user.getUid();\r\n\r\n            FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n            db.collection(\"products\")\r\n                    .whereEqualTo(\"storeId\", uid)\r\n                    .get()\r\n                    .addOnCompleteListener(task -> {\r\n                        if (task.isSuccessful()) {\r\n\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                ProductRequest product = document.toObject(ProductRequest.class);\r\n                                productList.add(\r\n                                        new Product(\r\n                                                product.getImageUrls().isEmpty() ? \"https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/notfound.jpg?alt=media&token=40e61714-5a10-4352-918c-7e5e2643a1fe\" : product.getImageUrls().get(0),\r\n                                                product.getName(),\r\n                                                product.getPrice()\r\n                                        )\r\n                                );\r\n                            }\r\n                            productAdapter.notifyDataSetChanged();\r\n                        }\r\n                    });\r\n\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java b/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java
---- a/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java	
-+++ b/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java	
-@@ -3,9 +3,9 @@
- import android.os.Bundle;
- import android.view.Window;
- import android.view.WindowManager;
-+import android.widget.ImageButton;
- import android.widget.ImageView;
- import android.widget.TextView;
--
- import androidx.activity.EdgeToEdge;
- import androidx.appcompat.app.AppCompatActivity;
- import androidx.core.content.ContextCompat;
-@@ -14,16 +14,14 @@
- import androidx.core.view.WindowInsetsCompat;
- import androidx.recyclerview.widget.GridLayoutManager;
- import androidx.recyclerview.widget.RecyclerView;
--
-+import com.bumptech.glide.Glide;
- import com.example.agrimart.R;
- import com.example.agrimart.adapter.ProductAdapter;
- import com.example.agrimart.data.model.Product;
- import com.example.agrimart.data.model.ProductRequest;
--import com.google.firebase.auth.FirebaseAuth;
--import com.google.firebase.auth.FirebaseUser;
-+import com.example.agrimart.data.model.User;
- import com.google.firebase.firestore.FirebaseFirestore;
- import com.google.firebase.firestore.QueryDocumentSnapshot;
--
- import java.util.ArrayList;
- import java.util.List;
- 
-@@ -40,6 +38,14 @@
-         super.onCreate(savedInstanceState);
-         EdgeToEdge.enable(this);
-         setContentView(R.layout.activity_store);
-+        setupWindowInsets();
-+
-+        initializeViews();
-+        setupRecyclerView();
-+        loadStoreData();
-+    }
-+
-+    private void setupWindowInsets() {
-         ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {
-             Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());
-             v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);
-@@ -51,50 +57,84 @@
-             window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);
-             window.setStatusBarColor(ContextCompat.getColor(this, R.color.green));
-         }
-+    }
- 
-+    private void initializeViews() {
-         storeAvatar = findViewById(R.id.store_avatar);
-         storeName = findViewById(R.id.store_name);
-         storeRating = findViewById(R.id.store_rating);
-         storeAddress = findViewById(R.id.store_address);
-         rvProducts = findViewById(R.id.rvProducts);
-+    }
- 
--
-+    private void setupRecyclerView() {
-         productList = new ArrayList<>();
--
--
-         productAdapter = new ProductAdapter(productList, product -> {
--
-+            // Xử lý khi nhấn vào sản phẩm (nếu cần)
-         });
-         rvProducts.setLayoutManager(new GridLayoutManager(this, 2));
-         rvProducts.setAdapter(productAdapter);
--        loadData();
-+    }
-+
-+    private void loadStoreData() {
-+        String storeId = getIntent().getStringExtra("storeId");
-+        if (storeId != null) {
-+            loadStoreInfo(storeId);
-+            loadProducts(storeId);
-+        }
-+    }
-+
-+    private void loadStoreInfo(String storeId) {
-+        FirebaseFirestore db = FirebaseFirestore.getInstance();
-+        db.collection("users")
-+                .document(storeId)
-+                .get()
-+                .addOnSuccessListener(documentSnapshot -> {
-+                    User store = documentSnapshot.toObject(User.class);
-+                    if (store != null) {
-+                        updateStoreInfo(store);
-+                    } else {
-+                        showError("Thông tin cửa hàng không hợp lệ.");
-+                    }
-+                })
-+                .addOnFailureListener(e -> {
-+                    showError("Không thể tải thông tin cửa hàng.");
-+                });
-+    }
-+
-+    private void updateStoreInfo(User store) {
-+        storeName.setText(store.getStoreName());
-+        storeAddress.setText(store.getStoreAddress() != null ? store.getStoreAddress().getStreet() : "Địa chỉ không khả dụng");
-+        Glide.with(this)
-+                .load(store.getStoreImage() != null && !store.getStoreImage().isEmpty() ? store.getStoreImage() : R.drawable.user)
-+                .placeholder(R.drawable.user)
-+                .error(R.drawable.user)
-+                .into(storeAvatar);
-     }
--    private void loadData() {
--        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();
--        if (user != null) {
--            String uid = user.getUid();
- 
--            FirebaseFirestore db = FirebaseFirestore.getInstance();
--            db.collection("products")
--                    .whereEqualTo("storeId", uid)
--                    .get()
--                    .addOnCompleteListener(task -> {
--                        if (task.isSuccessful()) {
--
--                            for (QueryDocumentSnapshot document : task.getResult()) {
--                                ProductRequest product = document.toObject(ProductRequest.class);
--                                productList.add(
--                                        new Product(
--                                                product.getImageUrls().isEmpty() ? "https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/notfound.jpg?alt=media&token=40e61714-5a10-4352-918c-7e5e2643a1fe" : product.getImageUrls().get(0),
--                                                product.getName(),
--                                                product.getPrice()
--                                        )
--                                );
--                            }
--                            productAdapter.notifyDataSetChanged();
--                        }
--                    });
-+    private void loadProducts(String storeId) {
-+        FirebaseFirestore db = FirebaseFirestore.getInstance();
-+        db.collection("products")
-+                .whereEqualTo("storeId", storeId)
-+                .get()
-+                .addOnSuccessListener(queryDocumentSnapshots -> {
-+                    for (QueryDocumentSnapshot document : queryDocumentSnapshots) {
-+                        ProductRequest productRequest = document.toObject(ProductRequest.class);
-+                        String imageUrl = productRequest.getImageUrls().isEmpty()
-+                                ? "https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/notfound.jpg?alt=media&token=40e61714-5a10-4352-918c-7e5e2643a1fe"
-+                                : productRequest.getImageUrls().get(0);
-+                        productList.add(new Product(imageUrl, productRequest.getName(), productRequest.getPrice()));
-+                    }
-+                    productAdapter.notifyDataSetChanged();
-+                })
-+                .addOnFailureListener(e -> {
-+                    showError("Không thể tải sản phẩm.");
-+                });
-+    }
- 
--        }
--    }
--}
-\ No newline at end of file
-+    private void showError(String message) {
-+        storeName.setText(message);
-+        storeAddress.setText("");
-+        storeAvatar.setImageResource(R.drawable.user);
-+    }
-+}
-Index: app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.ItemProductBinding;\r\n\r\nimport java.util.List;\r\n\r\npublic class ProductAdapter extends RecyclerView.Adapter<ProductAdapter.MyViewHolder> {\r\n    private List<Product> products;\r\n    private OnItemClickListener listener;\r\n\r\n    public ProductAdapter(List<Product> products, OnItemClickListener listener) {\r\n        this.products = products;\r\n        this.listener = listener;\r\n    }\r\n\r\n    public interface OnItemClickListener {\r\n        void onItemClick(Product product);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        ItemProductBinding binding = ItemProductBinding.inflate(LayoutInflater.from(parent.getContext()), parent, false);\r\n        return new MyViewHolder(binding);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        Product product = products.get(position);\r\n        holder.bindData(product);\r\n        holder.itemView.setOnClickListener(v -> listener.onItemClick(product));\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return products.size();\r\n    }\r\n\r\n    public static class MyViewHolder extends RecyclerView.ViewHolder {\r\n        private final ItemProductBinding binding;\r\n\r\n        public MyViewHolder(@NonNull ItemProductBinding binding) {\r\n            super(binding.getRoot());\r\n            this.binding = binding;\r\n        }\r\n\r\n        public void bindData(Product product) {\r\n            binding.tvName.setText(product.getName());\r\n            binding.tvPrice.setText(String.valueOf(product.getPrice()));\r\n            Glide.with(binding.getRoot().getContext())\r\n                    .load(product.getImage())\r\n                    .into(binding.imgPro);\r\n            binding.executePendingBindings();\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java b/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java
---- a/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java	
-+++ b/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java	
-@@ -10,7 +10,9 @@
- import com.example.agrimart.data.model.Product;
- import com.example.agrimart.databinding.ItemProductBinding;
- 
-+import java.text.NumberFormat;
- import java.util.List;
-+import java.util.Locale;
- 
- public class ProductAdapter extends RecyclerView.Adapter<ProductAdapter.MyViewHolder> {
-     private List<Product> products;
-@@ -54,10 +56,20 @@
- 
-         public void bindData(Product product) {
-             binding.tvName.setText(product.getName());
--            binding.tvPrice.setText(String.valueOf(product.getPrice()));
--            Glide.with(binding.getRoot().getContext())
--                    .load(product.getImage())
--                    .into(binding.imgPro);
-+
-+            NumberFormat format = NumberFormat.getCurrencyInstance(new Locale("vi", "VN"));
-+            binding.tvPrice.setText(format.format(product.getPrice()));
-+
-+            if (product.getImages() != null && !product.getImages().isEmpty()) {
-+                Glide.with(binding.getRoot().getContext())
-+                        .load(product.getImages().get(0))
-+                        .into(binding.imgPro);
-+            } else if (product.getImages() != null) {
-+                Glide.with(binding.getRoot().getContext())
-+                        .load(product.getImages())
-+                        .into(binding.imgPro);
-+            }
-+
-             binding.executePendingBindings();
-         }
-     }
-Index: app/src/main/res/layout/activity_product_detail.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/main1\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.ProductPage.ProductDetailActivity\">\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:id=\"@+id/header\">\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/btn_back\"\r\n            android:layout_width=\"32dp\"\r\n            android:layout_height=\"32dp\"\r\n            android:layout_marginStart=\"24dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginBottom=\"8dp\"\r\n            android:background=\"@color/background_light\"\r\n            android:src=\"@drawable/chevron_left\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.0\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"\r\n            tools:ignore=\"MissingConstraints\"\r\n            android:backgroundTint=\"@color/white\"/>\r\n    </RelativeLayout>\r\n\r\n    <ScrollView\r\n        android:id=\"@+id/scrollView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"4dp\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/header\"\r\n        tools:layout_editor_absoluteX=\"0dp\"\r\n        android:layout_below=\"@id/header\"\r\n        android:scrollbars=\"none\"\r\n        android:layout_above=\"@id/footer\">\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/product_detail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n            <com.denzcoskun.imageslider.ImageSlider\r\n                android:id=\"@+id/product_image\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"250dp\"\r\n                android:background=\"@null\"\r\n                app:iss_auto_cycle=\"true\"\r\n                app:iss_period=\"1000\"\r\n                app:iss_title_background=\"@color/transparent\"/>\r\n\r\n            <TextView\r\n                android:id=\"@+id/product_name\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:layout_marginBottom=\"8dp\"\r\n                android:text=\"@string/product_name\"\r\n                android:layout_below=\"@+id/product_image\"\r\n                android:fontFamily=\"@font/gabarito\"\r\n                android:textSize=\"20sp\"\r\n                android:textAllCaps=\"true\"\r\n                android:textColor=\"@color/black\"/>\r\n\r\n            <TextView\r\n                android:id=\"@+id/product_price\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"24dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:layout_marginBottom=\"8dp\"\r\n                android:text=\"@string/price\"\r\n                android:layout_below=\"@+id/product_name\"\r\n                android:fontFamily=\"@font/gabarito\"\r\n                android:textSize=\"24sp\"\r\n                android:textColor=\"@android:color/holo_red_dark\"/>\r\n\r\n            <TextView\r\n                android:id=\"@+id/address\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"24dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:layout_marginBottom=\"16dp\"\r\n                android:text=\"@string/address\"\r\n                android:layout_below=\"@+id/product_price\"\r\n                android:fontFamily=\"@font/circular_std\"\r\n                android:textSize=\"16sp\"\r\n                android:drawableStart=\"@drawable/location\"/>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/quantity\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/address\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginBottom=\"10dp\">\r\n                <TextView\r\n                    android:id=\"@+id/btn_decrease\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"-\"\r\n                    android:textColor=\"#9E9E9E\"\r\n                    android:textSize=\"24sp\"\r\n                    android:padding=\"8dp\"\r\n                    android:gravity=\"center\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/tv_quantity\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_marginStart=\"8dp\"\r\n                    android:layout_marginEnd=\"8dp\"\r\n                    android:layout_marginBottom=\"8dp\"\r\n                    android:gravity=\"center\"\r\n                    android:text=\"1\"\r\n                    android:textSize=\"18sp\"\r\n                    android:textColor=\"#212121\"\r\n                    android:fontFamily=\"@font/gabarito\"\r\n                    android:background=\"@drawable/round_border\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/btn_increase\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"+\"\r\n                    android:textColor=\"#4CAF50\"\r\n                    android:textSize=\"24sp\"\r\n                    android:padding=\"8dp\"\r\n                    android:gravity=\"center\"/>\r\n            </LinearLayout>\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/product_description\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/quantity\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginEnd=\"16dp\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:text=\"@string/description\"\r\n                    android:textSize=\"16sp\"\r\n                    android:fontFamily=\"@font/gabarito\"\r\n                    android:id=\"@+id/description_title\"\r\n                    android:textColor=\"@color/black\"/>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:id=\"@+id/description\"\r\n                    android:layout_below=\"@+id/description_title\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginEnd=\"16dp\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:textSize=\"13sp\"\r\n                    android:text=\"@string/descriptions\"\r\n                    android:maxLines=\"3\"\r\n                    android:ellipsize=\"end\"/>\r\n\r\n                <ImageButton\r\n                    android:id=\"@+id/btn_expand\"\r\n                    android:layout_width=\"32dp\"\r\n                    android:layout_height=\"32dp\"\r\n                    android:layout_below=\"@+id/description\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:src=\"@drawable/down\"\r\n                    android:background=\"@color/transparent\"/>\r\n            </RelativeLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/shop_info\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/product_description\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <androidx.cardview.widget.CardView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_margin=\"8dp\"\r\n                    android:background=\"@color/background_light\"\r\n                    app:cardElevation=\"0dp\">\r\n\r\n                    <LinearLayout\r\n                        android:id=\"@+id/store\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:orientation=\"horizontal\"\r\n                        android:padding=\"16dp\">\r\n\r\n                        <de.hdodenhof.circleimageview.CircleImageView\r\n                            android:id=\"@+id/shop_avatar\"\r\n                            android:layout_width=\"40dp\"\r\n                            android:layout_height=\"40dp\"\r\n                            android:src=\"@drawable/user\"\r\n                            app:civ_border_width=\"2dp\"\r\n                            app:civ_border_color=\"#FF000000\"\r\n                            android:layout_marginEnd=\"16dp\"/>\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/shop_name\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Tên người bán\"\r\n                            android:textSize=\"16sp\"\r\n                            android:textStyle=\"bold\"\r\n                            android:textColor=\"#000000\"/>\r\n                    </LinearLayout>\r\n                </androidx.cardview.widget.CardView>\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/rating\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/shop_info\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:orientation=\"horizontal\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_gravity=\"center\"\r\n                    android:textSize=\"16sp\"\r\n                    android:text=\"Đánh giá sản phẩm\"\r\n                    android:fontFamily=\"@font/gabarito\"\r\n                    android:id=\"@+id/quantity_title\"\r\n                    android:textColor=\"@color/black\"/>\r\n\r\n                <RatingBar\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:rating=\"4.5\"\r\n                    style=\"?android:attr/ratingBarStyleIndicator\"\r\n                    android:progressTint=\"#FFCC01\"\r\n                    android:id=\"@+id/totalRating\"\r\n                    android:layout_marginStart=\"40dp\"/>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/reviews\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/rating\">\r\n\r\n                <de.hdodenhof.circleimageview.CircleImageView\r\n                    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n                    android:id=\"@+id/user_avatar\"\r\n                    android:layout_width=\"40dp\"\r\n                    android:layout_height=\"40dp\"\r\n                    android:src=\"@drawable/user\"\r\n                    app:civ_border_width=\"2dp\"\r\n                    app:civ_border_color=\"#FF000000\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginTop=\"16dp\"/>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\"\r\n                    android:layout_weight=\"1\"\r\n                    android:padding=\"10dp\"\r\n                    android:id=\"@+id/user_rv\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/user_name\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"User name\"\r\n                        android:textStyle=\"bold\"\r\n                        android:textSize=\"16sp\"\r\n                        android:textColor=\"#000000\" />\r\n\r\n                    <RatingBar\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:rating=\"3\"\r\n                        style=\"?android:attr/ratingBarStyleIndicator\"\r\n                        android:progressTint=\"#FFCC01\"\r\n                        android:id=\"@+id/userRating\"/>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/user_review\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"4dp\"\r\n                        android:text=\"@string/user_review\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textColor=\"#616161\" />\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_below=\"@id/reviews\"/>\r\n\r\n        </RelativeLayout>\r\n    </ScrollView>\r\n\r\n    <RelativeLayout\r\n        android:id=\"@+id/footer\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentBottom=\"true\">\r\n\r\n        <Button\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"60dp\"\r\n            android:layout_marginStart=\"48dp\"\r\n            android:layout_marginEnd=\"48dp\"\r\n            android:backgroundTint=\"@color/green\"\r\n            app:cornerRadius=\"24dp\"\r\n            android:text=\"@string/add_cart\"/>\r\n    </RelativeLayout>\r\n</RelativeLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_product_detail.xml b/app/src/main/res/layout/activity_product_detail.xml
---- a/app/src/main/res/layout/activity_product_detail.xml	
-+++ b/app/src/main/res/layout/activity_product_detail.xml	
-@@ -5,26 +5,23 @@
-     android:id="@+id/main1"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
-+    android:padding="16dp"
-     tools:context=".ui.ProductPage.ProductDetailActivity">
-+
-     <RelativeLayout
-+        android:id="@+id/header"
-         android:layout_width="match_parent"
-         android:layout_height="wrap_content"
--        android:id="@+id/header">
-+        android:padding="8dp">
- 
-         <ImageButton
-             android:id="@+id/btn_back"
-             android:layout_width="32dp"
-             android:layout_height="32dp"
--            android:layout_marginStart="24dp"
--            android:layout_marginTop="16dp"
--            android:layout_marginBottom="8dp"
-+            android:layout_marginStart="8dp"
-+            android:layout_marginTop="8dp"
-             android:background="@color/background_light"
-             android:src="@drawable/chevron_left"
--            app:layout_constraintEnd_toEndOf="parent"
--            app:layout_constraintHorizontal_bias="0.0"
--            app:layout_constraintStart_toStartOf="parent"
--            app:layout_constraintTop_toTopOf="parent"
--            tools:ignore="MissingConstraints"
-             android:backgroundTint="@color/white"/>
-     </RelativeLayout>
- 
-@@ -32,12 +29,9 @@
-         android:id="@+id/scrollView"
-         android:layout_width="match_parent"
-         android:layout_height="wrap_content"
--        android:layout_marginTop="4dp"
--        app:layout_constraintTop_toBottomOf="@+id/header"
--        tools:layout_editor_absoluteX="0dp"
-         android:layout_below="@id/header"
--        android:scrollbars="none"
--        android:layout_above="@id/footer">
-+        android:layout_above="@id/footer"
-+        android:scrollbars="none">
- 
-         <RelativeLayout
-             android:id="@+id/product_detail"
-@@ -53,14 +47,26 @@
-                 app:iss_period="1000"
-                 app:iss_title_background="@color/transparent"/>
- 
-+            <TextView
-+                android:id="@+id/product_price"
-+                android:layout_width="wrap_content"
-+                android:layout_height="wrap_content"
-+                android:layout_marginStart="16dp"
-+                android:layout_marginEnd="16dp"
-+                android:layout_marginBottom="8dp"
-+                android:text="@string/price"
-+                android:layout_below="@+id/product_name"
-+                android:fontFamily="@font/gabarito"
-+                android:textSize="28sp"
-+                android:textColor="@android:color/holo_red_dark"/>
-+
-             <TextView
-                 android:id="@+id/product_name"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:layout_marginTop="10dp"
-+                android:layout_marginTop="15dp"
-                 android:layout_marginStart="16dp"
--                android:layout_marginEnd="24dp"
--                android:layout_marginBottom="8dp"
-+                android:layout_marginEnd="16dp"
-                 android:text="@string/product_name"
-                 android:layout_below="@+id/product_image"
-                 android:fontFamily="@font/gabarito"
-@@ -68,25 +74,12 @@
-                 android:textAllCaps="true"
-                 android:textColor="@color/black"/>
- 
--            <TextView
--                android:id="@+id/product_price"
--                android:layout_width="wrap_content"
--                android:layout_height="wrap_content"
--                android:layout_marginStart="24dp"
--                android:layout_marginEnd="24dp"
--                android:layout_marginBottom="8dp"
--                android:text="@string/price"
--                android:layout_below="@+id/product_name"
--                android:fontFamily="@font/gabarito"
--                android:textSize="24sp"
--                android:textColor="@android:color/holo_red_dark"/>
--
-             <TextView
-                 android:id="@+id/address"
-                 android:layout_width="wrap_content"
-                 android:layout_height="wrap_content"
--                android:layout_marginStart="24dp"
--                android:layout_marginEnd="24dp"
-+                android:layout_marginStart="16dp"
-+                android:layout_marginEnd="16dp"
-                 android:layout_marginBottom="16dp"
-                 android:text="@string/address"
-                 android:layout_below="@+id/product_price"
-@@ -100,7 +93,9 @@
-                 android:layout_height="wrap_content"
-                 android:layout_below="@+id/address"
-                 android:layout_marginStart="16dp"
--                android:layout_marginBottom="10dp">
-+                android:layout_marginBottom="10dp"
-+                android:orientation="horizontal">
-+
-                 <TextView
-                     android:id="@+id/btn_decrease"
-                     android:layout_width="30dp"
-@@ -143,26 +138,26 @@
-                 android:layout_below="@+id/quantity">
- 
-                 <TextView
-+                    android:id="@+id/description_title"
-                     android:layout_width="match_parent"
-                     android:layout_height="wrap_content"
--                    android:layout_marginStart="16dp"
-+                    android:layout_marginStart="15dp"
-                     android:layout_marginEnd="16dp"
-                     android:layout_marginTop="8dp"
-                     android:text="@string/description"
--                    android:textSize="16sp"
-+                    android:textSize="17sp"
-                     android:fontFamily="@font/gabarito"
--                    android:id="@+id/description_title"
-                     android:textColor="@color/black"/>
- 
-                 <TextView
-+                    android:id="@+id/description"
-                     android:layout_width="match_parent"
-                     android:layout_height="wrap_content"
--                    android:id="@+id/description"
-                     android:layout_below="@+id/description_title"
-                     android:layout_marginStart="16dp"
-                     android:layout_marginEnd="16dp"
-                     android:layout_marginTop="8dp"
--                    android:textSize="13sp"
-+                    android:textSize="15sp"
-                     android:text="@string/descriptions"
-                     android:maxLines="3"
-                     android:ellipsize="end"/>
-@@ -183,7 +178,9 @@
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
-                 android:layout_below="@+id/product_description"
-+                android:layout_margin="8dp"
-                 android:layout_marginTop="24dp"
-+                android:background="@color/transparent"
-                 android:orientation="vertical">
- 
-                 <androidx.cardview.widget.CardView
-@@ -197,29 +194,27 @@
-                         android:id="@+id/store"
-                         android:layout_width="match_parent"
-                         android:layout_height="wrap_content"
--                        android:orientation="horizontal"
--                        android:padding="16dp">
-+                        android:orientation="horizontal">
- 
-                         <de.hdodenhof.circleimageview.CircleImageView
--                            android:id="@+id/shop_avatar"
--                            android:layout_width="40dp"
--                            android:layout_height="40dp"
-+                            android:id="@+id/store_img"
-+                            android:layout_width="50dp"
-+                            android:layout_height="50dp"
-+                            android:layout_marginEnd="16dp"
-                             android:src="@drawable/user"
--                            app:civ_border_width="2dp"
-                             app:civ_border_color="#FF000000"
--                            android:layout_marginEnd="16dp"/>
-+                            app:civ_border_width="2dp" />
- 
-                         <TextView
--                            android:id="@+id/shop_name"
-+                            android:id="@+id/store_name"
-                             android:layout_width="wrap_content"
-                             android:layout_height="wrap_content"
-                             android:text="Tên người bán"
--                            android:textSize="16sp"
--                            android:textStyle="bold"
--                            android:textColor="#000000"/>
-+                            android:textColor="#000000"
-+                            android:textSize="20sp"
-+                            android:textStyle="bold" />
-                     </LinearLayout>
-                 </androidx.cardview.widget.CardView>
--
-             </LinearLayout>
- 
-             <LinearLayout
-@@ -228,8 +223,11 @@
-                 android:layout_height="wrap_content"
-                 android:layout_below="@+id/shop_info"
-                 android:layout_marginTop="24dp"
--                android:orientation="horizontal">
-+                android:orientation="horizontal"
-+                android:padding="8dp">
-+
-                 <TextView
-+                    android:id="@+id/quantity_title"
-                     android:layout_width="wrap_content"
-                     android:layout_height="wrap_content"
-                     android:layout_marginStart="16dp"
-@@ -237,16 +235,15 @@
-                     android:textSize="16sp"
-                     android:text="Đánh giá sản phẩm"
-                     android:fontFamily="@font/gabarito"
--                    android:id="@+id/quantity_title"
-                     android:textColor="@color/black"/>
- 
-                 <RatingBar
-+                    android:id="@+id/totalRating"
-                     android:layout_width="wrap_content"
-                     android:layout_height="wrap_content"
-                     android:rating="4.5"
-                     style="?android:attr/ratingBarStyleIndicator"
-                     android:progressTint="#FFCC01"
--                    android:id="@+id/totalRating"
-                     android:layout_marginStart="40dp"/>
-             </LinearLayout>
- 
-@@ -254,10 +251,10 @@
-                 android:id="@+id/reviews"
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--                android:layout_below="@+id/rating">
-+                android:layout_below="@+id/rating"
-+                android:padding="8dp">
- 
-                 <de.hdodenhof.circleimageview.CircleImageView
--                    xmlns:app="http://schemas.android.com/apk/res-auto"
-                     android:id="@+id/user_avatar"
-                     android:layout_width="40dp"
-                     android:layout_height="40dp"
-@@ -268,12 +265,12 @@
-                     android:layout_marginTop="16dp"/>
- 
-                 <LinearLayout
-+                    android:id="@+id/user_rv"
-                     android:layout_width="0dp"
-                     android:layout_height="wrap_content"
-                     android:orientation="vertical"
-                     android:layout_weight="1"
--                    android:padding="10dp"
--                    android:id="@+id/user_rv">
-+                    android:padding="10dp">
- 
-                     <TextView
-                         android:id="@+id/user_name"
-@@ -285,12 +282,12 @@
-                         android:textColor="#000000" />
- 
-                     <RatingBar
-+                        android:id="@+id/userRating"
-                         android:layout_width="wrap_content"
-                         android:layout_height="wrap_content"
-                         android:rating="3"
-                         style="?android:attr/ratingBarStyleIndicator"
--                        android:progressTint="#FFCC01"
--                        android:id="@+id/userRating"/>
-+                        android:progressTint="#FFCC01"/>
- 
-                     <TextView
-                         android:id="@+id/user_review"
-@@ -302,12 +299,12 @@
-                         android:textColor="#616161" />
-                 </LinearLayout>
-             </LinearLayout>
-+
-             <androidx.recyclerview.widget.RecyclerView
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
-                 android:layout_marginTop="16dp"
-                 android:layout_below="@id/reviews"/>
--
-         </RelativeLayout>
-     </ScrollView>
- 
-@@ -315,7 +312,8 @@
-         android:id="@+id/footer"
-         android:layout_width="match_parent"
-         android:layout_height="wrap_content"
--        android:layout_alignParentBottom="true">
-+        android:layout_alignParentBottom="true"
-+        android:padding="16dp">
- 
-         <Button
-             android:layout_width="match_parent"
-Index: app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.Homepage;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.SpacesItemDecoration;\r\nimport com.example.agrimart.adapter.CategoryAdapter;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.FragmentHomeBinding;\r\nimport com.example.agrimart.ui.ProductPage.ProductDetailActivity;\r\nimport com.example.agrimart.viewmodel.HomeFragmentViewModel;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class HomeFragment extends Fragment {\r\n    ImageButton btnSearch;\r\n    TextView search;\r\n    HomeFragmentViewModel viewModel;\r\n    FragmentHomeBinding binding;\r\n\r\n    public HomeFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    public static HomeFragment newInstance() {\r\n        return new HomeFragment();\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        binding=DataBindingUtil.inflate(inflater,R.layout.fragment_home,container,false);\r\n        viewModel=new ViewModelProvider(this).get(HomeFragmentViewModel.class);\r\n\r\n        int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);\r\n        binding.setViewmodel(viewModel);\r\n        View view = binding.getRoot();\r\n\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\r\n            Window window = getActivity().getWindow();\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n        }\r\n\r\n//        if (getActivity() != null) {\r\n//            getActivity().getWindow().setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n//        }\r\n        viewModel.getData();\r\n        viewModel.categories.observe(getViewLifecycleOwner(), categories -> {\r\n            if (categories != null) {\r\n                CategoryAdapter categoryAdapter = new CategoryAdapter(categories);\r\n                binding.rvCategories.setAdapter(categoryAdapter);\r\n                binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));\r\n                Log.d(\"duy1\", \"onCreateView: \" + categories.size());\r\n            }\r\n        });\r\n\r\n\r\n        List<Product> products = new ArrayList<>();\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n\r\n        ProductAdapter productAdapter = new ProductAdapter(products, product -> {\r\n            Intent intent = new Intent(getContext(), ProductDetailActivity.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        binding.rvProducts.setLayoutManager(new GridLayoutManager(getContext(), 2));\r\n        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));\r\n        binding.rvProducts.setAdapter(productAdapter);\r\n\r\n        addControls(view);\r\n        addEvents();\r\n\r\n        return view;\r\n    }\r\n\r\n    private void addEvents() {\r\n        btnSearch.setOnClickListener(View -> {\r\n            Intent intent=new Intent(getActivity(), SearchActivity.class);\r\n            getActivity().startActivity(intent);\r\n        });\r\n\r\n        search.setOnClickListener(View -> {\r\n            Intent intent=new Intent(getContext(), SearchActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n\r\n    private void addControls(View view) {\r\n        btnSearch = view.findViewById(R.id.search_icon);\r\n        search = view.findViewById(R.id.search_input);\r\n    }\r\n\r\n    private void loadFragment(Fragment fragment) {\r\n        getActivity().getSupportFragmentManager().beginTransaction()\r\n                .replace(R.id.fragment_container, fragment)\r\n                .commit();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
---- a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	
-+++ b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	
-@@ -3,15 +3,12 @@
- import android.content.Intent;
- import android.os.Build;
- import android.os.Bundle;
--
- import androidx.annotation.NonNull;
- import androidx.core.content.ContextCompat;
- import androidx.databinding.DataBindingUtil;
- import androidx.fragment.app.Fragment;
- import androidx.lifecycle.ViewModelProvider;
- import androidx.recyclerview.widget.GridLayoutManager;
--import androidx.recyclerview.widget.RecyclerView;
--
- import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
-@@ -25,23 +22,22 @@
- import com.example.agrimart.SpacesItemDecoration;
- import com.example.agrimart.adapter.CategoryAdapter;
- import com.example.agrimart.adapter.ProductAdapter;
--import com.example.agrimart.data.model.Category;
- import com.example.agrimart.data.model.Product;
- import com.example.agrimart.databinding.FragmentHomeBinding;
- import com.example.agrimart.ui.ProductPage.ProductDetailActivity;
- import com.example.agrimart.viewmodel.HomeFragmentViewModel;
- 
--import java.util.ArrayList;
- import java.util.List;
- 
- public class HomeFragment extends Fragment {
-+    private static final String TAG = "HomeFragment";
-     ImageButton btnSearch;
-     TextView search;
-     HomeFragmentViewModel viewModel;
-     FragmentHomeBinding binding;
- 
-     public HomeFragment() {
--        // Required empty public constructor
-+
-     }
- 
-     public static HomeFragment newInstance() {
-@@ -54,10 +50,9 @@
-     }
- 
-     @Override
--    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
--                             Bundle savedInstanceState) {
--        binding=DataBindingUtil.inflate(inflater,R.layout.fragment_home,container,false);
--        viewModel=new ViewModelProvider(this).get(HomeFragmentViewModel.class);
-+    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
-+        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_home, container, false);
-+        viewModel = new ViewModelProvider(this).get(HomeFragmentViewModel.class);
- 
-         int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);
-         binding.setViewmodel(viewModel);
-@@ -69,36 +64,35 @@
-             window.setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));
-         }
- 
--//        if (getActivity() != null) {
--//            getActivity().getWindow().setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));
--//        }
-         viewModel.getData();
-+        viewModel.getProducts();
-+
-         viewModel.categories.observe(getViewLifecycleOwner(), categories -> {
-             if (categories != null) {
-                 CategoryAdapter categoryAdapter = new CategoryAdapter(categories);
-                 binding.rvCategories.setAdapter(categoryAdapter);
-                 binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));
--                Log.d("duy1", "onCreateView: " + categories.size());
-+                Log.d(TAG, "Categories loaded: " + categories.size());
-             }
-         });
- 
--
--        List<Product> products = new ArrayList<>();
--//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
--//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
--//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
--//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
--//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
--//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
--
--        ProductAdapter productAdapter = new ProductAdapter(products, product -> {
--            Intent intent = new Intent(getContext(), ProductDetailActivity.class);
--            startActivity(intent);
--        });
-+        viewModel.products.observe(getViewLifecycleOwner(), products -> {
-+            if (products != null) {
-+                ProductAdapter productAdapter = new ProductAdapter(products, product -> {
-+                    try {
-+                        Intent intent = new Intent(getContext(), ProductDetailActivity.class);
-+                        intent.putExtra("product", product);
-+                        intent.putExtra("storeId", product.getStoreId());
-+                        startActivity(intent);
-+                    } catch (Exception e) {
- 
--        binding.rvProducts.setLayoutManager(new GridLayoutManager(getContext(), 2));
--        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
--        binding.rvProducts.setAdapter(productAdapter);
-+                    }
-+                });
-+                binding.rvProducts.setLayoutManager(new GridLayoutManager(getContext(), 2));
-+                binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
-+                binding.rvProducts.setAdapter(productAdapter);
-+            }
-+        });
- 
-         addControls(view);
-         addEvents();
-@@ -107,13 +101,13 @@
-     }
- 
-     private void addEvents() {
--        btnSearch.setOnClickListener(View -> {
--            Intent intent=new Intent(getActivity(), SearchActivity.class);
-+        btnSearch.setOnClickListener(v -> {
-+            Intent intent = new Intent(getActivity(), SearchActivity.class);
-             getActivity().startActivity(intent);
-         });
- 
--        search.setOnClickListener(View -> {
--            Intent intent=new Intent(getContext(), SearchActivity.class);
-+        search.setOnClickListener(v -> {
-+            Intent intent = new Intent(getContext(), SearchActivity.class);
-             startActivity(intent);
-         });
-     }
-Index: app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.ProductPage;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.ImageButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\n\r\nimport com.denzcoskun.imageslider.ImageSlider;\r\nimport com.denzcoskun.imageslider.constants.ScaleTypes;\r\nimport com.denzcoskun.imageslider.models.SlideModel;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.ui.Store.StoreActivity;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class ProductDetailActivity extends AppCompatActivity {\r\n    ImageButton btn_back, btnExpand;\r\n    TextView description;\r\n    boolean isExpanded = false;\r\n    LinearLayout store;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_product_detail);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        description = findViewById(R.id.description);\r\n        btnExpand = findViewById(R.id.btn_expand);\r\n\r\n        btn_back = findViewById(R.id.btn_back);\r\n        btn_back.setOnClickListener(v -> finish());\r\n        store = findViewById(R.id.store);\r\n\r\n        ArrayList<SlideModel> imgList = new ArrayList<>();\r\n        imgList.add(new SlideModel(R.drawable.banana, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.apple, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.banana, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.apple, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.banana, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.apple, \"\", ScaleTypes.FIT));\r\n\r\n        ImageSlider imageSlider = findViewById(R.id.product_image);\r\n        imageSlider.setImageList(imgList, ScaleTypes.FIT);\r\n\r\n        btnExpand.setOnClickListener(v -> {\r\n            if (isExpanded) {\r\n                description.setMaxLines(3);\r\n                btnExpand.setImageResource(R.drawable.down);\r\n            } else {\r\n                description.setMaxLines(Integer.MAX_VALUE);\r\n                btnExpand.setImageResource(R.drawable.arrowhead_up);\r\n            }\r\n            isExpanded = !isExpanded;\r\n        });\r\n\r\n        store.setOnClickListener(v -> {\r\n            Intent intent = new Intent(ProductDetailActivity.this, StoreActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java b/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java
---- a/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java	
-+++ b/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java	
-@@ -3,28 +3,40 @@
- import android.content.Intent;
- import android.os.Bundle;
- import android.widget.ImageButton;
-+import android.widget.ImageView;
- import android.widget.LinearLayout;
- import android.widget.TextView;
- 
- import androidx.activity.EdgeToEdge;
-+import androidx.annotation.NonNull;
- import androidx.appcompat.app.AppCompatActivity;
- import androidx.core.graphics.Insets;
- import androidx.core.view.ViewCompat;
- import androidx.core.view.WindowInsetsCompat;
-+import androidx.lifecycle.Observer;
-+import androidx.lifecycle.ViewModelProvider;
- 
-+import com.bumptech.glide.Glide;
- import com.denzcoskun.imageslider.ImageSlider;
- import com.denzcoskun.imageslider.constants.ScaleTypes;
- import com.denzcoskun.imageslider.models.SlideModel;
- import com.example.agrimart.R;
-+import com.example.agrimart.data.model.Product;
-+import com.example.agrimart.data.model.Store;
- import com.example.agrimart.ui.Store.StoreActivity;
-+import com.example.agrimart.viewmodel.ProductDetailViewModel;
-+
- 
- import java.util.ArrayList;
- 
- public class ProductDetailActivity extends AppCompatActivity {
--    ImageButton btn_back, btnExpand;
--    TextView description;
--    boolean isExpanded = false;
--    LinearLayout store;
-+    private static final String TAG = "ProductDetailActivity";
-+    private ImageButton btn_back, btnExpand;
-+    private TextView description, productName, productPrice, storeName, storeAddress, storePhoneNumber;
-+    private ImageView storeAvatar;
-+    private boolean isExpanded = false;
-+    private LinearLayout store;
-+    private ProductDetailViewModel viewModel;
- 
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-@@ -37,24 +49,51 @@
-             return insets;
-         });
- 
-+        viewModel = new ViewModelProvider(this).get(ProductDetailViewModel.class);
-+
-         description = findViewById(R.id.description);
-+        productName = findViewById(R.id.product_name);
-+        productPrice = findViewById(R.id.product_price);
-         btnExpand = findViewById(R.id.btn_expand);
--
-         btn_back = findViewById(R.id.btn_back);
--        btn_back.setOnClickListener(v -> finish());
-         store = findViewById(R.id.store);
-+        storeName = findViewById(R.id.store_name);
-+        storeAddress = findViewById(R.id.address);
-+        storeAvatar = findViewById(R.id.store_img);
-+
-+        btn_back.setOnClickListener(v -> finish());
-+
-+        Intent intent = getIntent();
-+        Product product = (Product) intent.getSerializableExtra("product");
-+
-+        if (product != null) {
-+            productName.setText(product.getName());
-+            productPrice.setText(String.format("%,.0f đ", product.getPrice()));
-+            description.setText(product.getDescription());
- 
--        ArrayList<SlideModel> imgList = new ArrayList<>();
--        imgList.add(new SlideModel(R.drawable.banana, "", ScaleTypes.FIT));
--        imgList.add(new SlideModel(R.drawable.apple, "", ScaleTypes.FIT));
--        imgList.add(new SlideModel(R.drawable.banana, "", ScaleTypes.FIT));
--        imgList.add(new SlideModel(R.drawable.apple, "", ScaleTypes.FIT));
--        imgList.add(new SlideModel(R.drawable.banana, "", ScaleTypes.FIT));
--        imgList.add(new SlideModel(R.drawable.apple, "", ScaleTypes.FIT));
--
--        ImageSlider imageSlider = findViewById(R.id.product_image);
--        imageSlider.setImageList(imgList, ScaleTypes.FIT);
-+            ArrayList<SlideModel> imgList = new ArrayList<>();
-+            if (product.getImages() != null) {
-+                for (String url : product.getImages()) {
-+                    imgList.add(new SlideModel(url, "", ScaleTypes.FIT));
-+                }
-+            }
-+            ImageSlider imageSlider = findViewById(R.id.product_image);
-+            imageSlider.setImageList(imgList, ScaleTypes.FIT);
- 
-+            viewModel.loadStoreInfo(product.getStoreId());
-+        }
-+
-+        viewModel.getStoreInfo().observe(this, new Observer<Store>() {
-+            @Override
-+            public void onChanged(Store storeInfo) {
-+                if (storeInfo != null) {
-+                    storeName.setText(storeInfo.getName());
-+                    storeAddress.setText(storeInfo.getFullAddress());
-+                    Glide.with(ProductDetailActivity.this).load(storeInfo.getAvatarUrl()).into(storeAvatar);
-+                }
-+            }
-+        });
-+
-         btnExpand.setOnClickListener(v -> {
-             if (isExpanded) {
-                 description.setMaxLines(3);
-@@ -67,8 +106,9 @@
-         });
- 
-         store.setOnClickListener(v -> {
--            Intent intent = new Intent(ProductDetailActivity.this, StoreActivity.class);
--            startActivity(intent);
-+            Intent storeIntent = new Intent(ProductDetailActivity.this, StoreActivity.class);
-+            storeIntent.putExtra("storeId", product.getStoreId());
-+            startActivity(storeIntent);
-         });
-     }
--}
-\ No newline at end of file
-+}
-Index: app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.viewmodel;\r\n\r\nimport android.util.Log;\r\n\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.List;\r\n\r\npublic class HomeFragmentViewModel extends ViewModel {\r\n    public MutableLiveData<List<Category>> categories;\r\n\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    public HomeFragmentViewModel() {\r\n        categories = new MutableLiveData<>();\r\n    }\r\n\r\n    public void getData(){\r\n        db.collection(\"categories\")\r\n                .orderBy(\"id\")\r\n                .get().addOnCompleteListener(task -> {\r\n            if (task.isSuccessful()) {\r\n                List<Category> categoryList = task.getResult().toObjects(Category.class);\r\n                categories.setValue(categoryList);\r\n            } else {\r\n                Log.e(\"HomeFragmentViewModel\", \"Error getting documents: \", task.getException());\r\n            }\r\n        });\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java
---- a/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java	
-+++ b/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java	
-@@ -6,28 +6,47 @@
- import androidx.lifecycle.ViewModel;
- 
- import com.example.agrimart.data.model.Category;
-+import com.example.agrimart.data.model.Product;
- import com.google.firebase.firestore.FirebaseFirestore;
- 
- import java.util.List;
- 
- public class HomeFragmentViewModel extends ViewModel {
-     public MutableLiveData<List<Category>> categories;
-+    public MutableLiveData<List<Product>> products;
- 
-     FirebaseFirestore db = FirebaseFirestore.getInstance();
-+
-     public HomeFragmentViewModel() {
-         categories = new MutableLiveData<>();
-+        products = new MutableLiveData<>();
-     }
- 
--    public void getData(){
-+    public void getData() {
-         db.collection("categories")
-                 .orderBy("id")
--                .get().addOnCompleteListener(task -> {
--            if (task.isSuccessful()) {
--                List<Category> categoryList = task.getResult().toObjects(Category.class);
--                categories.setValue(categoryList);
--            } else {
--                Log.e("HomeFragmentViewModel", "Error getting documents: ", task.getException());
--            }
--        });
-+                .get()
-+                .addOnCompleteListener(task -> {
-+                    if (task.isSuccessful()) {
-+                        List<Category> categoryList = task.getResult().toObjects(Category.class);
-+                        categories.setValue(categoryList);
-+                    } else {
-+                        Log.e("HomeFragmentViewModel", "Error getting categories: ", task.getException());
-+                    }
-+                });
-+    }
-+
-+    public void getProducts() {
-+        db.collection("products")
-+                .orderBy("product_id")
-+                .get()
-+                .addOnCompleteListener(task -> {
-+                    if (task.isSuccessful()) {
-+                        List<Product> productList = task.getResult().toObjects(Product.class);
-+                        products.setValue(productList);
-+                    } else {
-+                        Log.e("HomeFragmentViewModel", "Error getting products: ", task.getException());
-+                    }
-+                });
-     }
--}
-\ No newline at end of file
-+}
-Index: app/src/main/java/com/example/agrimart/data/model/User.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.data.model;\r\n\r\nimport com.google.gson.annotations.SerializedName;\r\nimport java.io.Serializable;\r\nimport java.util.Date;\r\n\r\npublic class User implements Serializable {\r\n    @SerializedName(\"userId\")\r\n    private String userId;\r\n    @SerializedName(\"role\")\r\n    private String role;\r\n    @SerializedName(\"fullName\")\r\n    private String fullName;\r\n    @SerializedName(\"email\")\r\n    private String email;\r\n    @SerializedName(\"phoneNumber\")\r\n    private String phoneNumber;\r\n    @SerializedName(\"password\")\r\n    private String password;\r\n    @SerializedName(\"address\")\r\n    private Address address;\r\n    @SerializedName(\"storeName\")\r\n    private String storeName;\r\n    @SerializedName(\"storeAddress\")\r\n    private Address storeAddress;\r\n    @SerializedName(\"storeImage\")\r\n    private String storeImage;\r\n    @SerializedName(\"storeRating\")\r\n    private double storeRating;\r\n    @SerializedName(\"paymentAccount\")\r\n    private PaymentAccount paymentAccount;\r\n    @SerializedName(\"createdAt\")\r\n    private Date createdAt;\r\n    @SerializedName(\"updatedAt\")\r\n    private Date updatedAt;\r\n\r\n    public User(String userId, String role, String fullName, String email, String phoneNumber, String password, Address address, String storeName, Address storeAddress, String storeImage, double storeRating, PaymentAccount paymentAccount, Date createdAt, Date updatedAt) {\r\n        this.userId = userId;\r\n        this.role = role;\r\n        this.fullName = fullName;\r\n        this.email = email;\r\n        this.phoneNumber = phoneNumber;\r\n        this.password = password;\r\n        this.address = address;\r\n        this.storeName = storeName;\r\n        this.storeAddress = storeAddress;\r\n        this.storeImage = storeImage;\r\n        this.storeRating = storeRating;\r\n        this.paymentAccount = paymentAccount;\r\n        this.createdAt = createdAt;\r\n        this.updatedAt = updatedAt;\r\n    }\r\n\r\n    public String getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public void setUserId(String userId) {\r\n        this.userId = userId;\r\n    }\r\n\r\n    public String getRole() {\r\n        return role;\r\n    }\r\n\r\n    public void setRole(String role) {\r\n        this.role = role;\r\n    }\r\n\r\n    public String getFullName() {\r\n        return fullName;\r\n    }\r\n\r\n    public void setFullName(String fullName) {\r\n        this.fullName = fullName;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getPhoneNumber() {\r\n        return phoneNumber;\r\n    }\r\n\r\n    public void setPhoneNumber(String phoneNumber) {\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    public Address getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(Address address) {\r\n        this.address = address;\r\n    }\r\n\r\n    public String getStoreName() {\r\n        return storeName;\r\n    }\r\n\r\n    public void setStoreName(String storeName) {\r\n        this.storeName = storeName;\r\n    }\r\n\r\n    public Address getStoreAddress() {\r\n        return storeAddress;\r\n    }\r\n\r\n    public void setStoreAddress(Address storeAddress) {\r\n        this.storeAddress = storeAddress;\r\n    }\r\n\r\n    public String getStoreImage() {\r\n        return storeImage;\r\n    }\r\n\r\n    public void setStoreImage(String storeImage) {\r\n        this.storeImage = storeImage;\r\n    }\r\n\r\n    public double getStoreRating() {\r\n        return storeRating;\r\n    }\r\n\r\n    public void setStoreRating(double storeRating) {\r\n        this.storeRating = storeRating;\r\n    }\r\n\r\n    public PaymentAccount getPaymentAccount() {\r\n        return paymentAccount;\r\n    }\r\n\r\n    public void setPaymentAccount(PaymentAccount paymentAccount) {\r\n        this.paymentAccount = paymentAccount;\r\n    }\r\n\r\n    public Date getCreatedAt() {\r\n        return createdAt;\r\n    }\r\n\r\n    public void setCreatedAt(Date createdAt) {\r\n        this.createdAt = createdAt;\r\n    }\r\n\r\n    public Date getUpdatedAt() {\r\n        return updatedAt;\r\n    }\r\n\r\n    public void setUpdatedAt(Date updatedAt) {\r\n        this.updatedAt = updatedAt;\r\n    }\r\n\r\n//    public static class Address {\r\n//        @SerializedName(\"street\")\r\n//        private String street;\r\n//        @SerializedName(\"district\")\r\n//        private String district;\r\n//        @SerializedName(\"city\")\r\n//        private String city;\r\n//\r\n//        // Constructors, getters, and setters...\r\n//    }\r\n\r\n    public static class PaymentAccount {\r\n        @SerializedName(\"accountNumber\")\r\n        private String accountNumber;\r\n        @SerializedName(\"bankName\")\r\n        private String bankName;\r\n        @SerializedName(\"branchName\")\r\n        private String branchName;\r\n\r\n        // Constructors, getters, and setters...\r\n    }\r\n\r\n    // Getters and setters for User class fields\r\n    // ...\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/data/model/User.java b/app/src/main/java/com/example/agrimart/data/model/User.java
---- a/app/src/main/java/com/example/agrimart/data/model/User.java	
-+++ b/app/src/main/java/com/example/agrimart/data/model/User.java	
-@@ -1,3 +1,4 @@
-+// User.java
- package com.example.agrimart.data.model;
- 
- import com.google.gson.annotations.SerializedName;
-@@ -34,6 +35,10 @@
-     @SerializedName("updatedAt")
-     private Date updatedAt;
- 
-+    // No-argument constructor
-+    public User() {
-+    }
-+
-     public User(String userId, String role, String fullName, String email, String phoneNumber, String password, Address address, String storeName, Address storeAddress, String storeImage, double storeRating, PaymentAccount paymentAccount, Date createdAt, Date updatedAt) {
-         this.userId = userId;
-         this.role = role;
-@@ -163,16 +168,49 @@
-         this.updatedAt = updatedAt;
-     }
- 
--//    public static class Address {
--//        @SerializedName("street")
--//        private String street;
--//        @SerializedName("district")
--//        private String district;
--//        @SerializedName("city")
--//        private String city;
--//
--//        // Constructors, getters, and setters...
--//    }
-+    public static class Address {
-+        @SerializedName("street")
-+        private String street;
-+        @SerializedName("district")
-+        private String district;
-+        @SerializedName("city")
-+        private String city;
-+
-+        public Address() {
-+        }
-+
-+        public Address(String street, String district, String city) {
-+            this.street = street;
-+            this.district = district;
-+            this.city = city;
-+        }
-+
-+        // Getters and setters...
-+
-+        public String getStreet() {
-+            return street;
-+        }
-+
-+        public void setStreet(String street) {
-+            this.street = street;
-+        }
-+
-+        public String getDistrict() {
-+            return district;
-+        }
-+
-+        public void setDistrict(String district) {
-+            this.district = district;
-+        }
-+
-+        public String getCity() {
-+            return city;
-+        }
-+
-+        public void setCity(String city) {
-+            this.city = city;
-+        }
-+    }
- 
-     public static class PaymentAccount {
-         @SerializedName("accountNumber")
-@@ -182,9 +220,15 @@
-         @SerializedName("branchName")
-         private String branchName;
- 
--        // Constructors, getters, and setters...
--    }
-+        public PaymentAccount() {
-+        }
-+
-+        public PaymentAccount(String accountNumber, String bankName, String branchName) {
-+            this.accountNumber = accountNumber;
-+            this.bankName = bankName;
-+            this.branchName = branchName;
-+        }
- 
--    // Getters and setters for User class fields
--    // ...
-+        // Getters and setters...
-+    }
- }
-\ No newline at end of file
-Index: app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java
-new file mode 100644
---- /dev/null	
-+++ b/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java	
-@@ -0,0 +1,56 @@
-+package com.example.agrimart.viewmodel;
-+
-+import androidx.lifecycle.LiveData;
-+import androidx.lifecycle.MutableLiveData;
-+import androidx.lifecycle.ViewModel;
-+
-+import com.example.agrimart.data.model.Store;
-+import com.google.firebase.firestore.DocumentSnapshot;
-+import com.google.firebase.firestore.FirebaseFirestore;
-+import com.google.firebase.firestore.ListenerRegistration;
-+
-+public class ProductDetailViewModel extends ViewModel {
-+    private final FirebaseFirestore db;
-+    private ListenerRegistration storeListener;
-+    private final MutableLiveData<Store> storeInfo = new MutableLiveData<>();
-+
-+    public ProductDetailViewModel() {
-+        db = FirebaseFirestore.getInstance();
-+    }
-+
-+    public LiveData<Store> getStoreInfo() {
-+        return storeInfo;
-+    }
-+
-+    public void loadStoreInfo(String storeId) {
-+        if (storeListener != null) {
-+            storeListener.remove();
-+        }
-+
-+        storeListener = db.collection("users").document(storeId)
-+                .addSnapshotListener((snapshot, e) -> {
-+                    if (e != null || snapshot == null || !snapshot.exists()) {
-+                        return;
-+                    }
-+                    String name = snapshot.getString("store_name");
-+                    String avatarUrl = snapshot.getString("userImage");
-+                    String street = snapshot.getString("store_address.street");
-+                    String ward = snapshot.getString("store_address.ward");
-+                    String district = snapshot.getString("store_address.district");
-+                    String city = snapshot.getString("store_address.city");
-+                    String phoneNumber = snapshot.getString("store_phone_number");
-+
-+                    Store info = new Store(name, avatarUrl, street, ward, district, city, phoneNumber);
-+                    storeInfo.setValue(info);
-+                });
-+    }
-+
-+    @Override
-+    protected void onCleared() {
-+        super.onCleared();
-+        if (storeListener != null) {
-+            storeListener.remove();
-+        }
-+    }
-+
-+}
-Index: app/src/main/java/com/example/agrimart/data/model/Store.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/data/model/Store.java b/app/src/main/java/com/example/agrimart/data/model/Store.java
-new file mode 100644
---- /dev/null	
-+++ b/app/src/main/java/com/example/agrimart/data/model/Store.java	
-@@ -0,0 +1,37 @@
-+package com.example.agrimart.data.model;
-+
-+public class Store {
-+    private final String name;
-+    private final String avatarUrl;
-+    private final String street;
-+    private final String ward;
-+    private final String district;
-+    private final String city;
-+    private final String phoneNumber;
-+
-+    public Store(String name, String avatarUrl, String street, String ward, String district, String city, String phoneNumber) {
-+        this.name = name;
-+        this.avatarUrl = avatarUrl;
-+        this.street = street;
-+        this.ward = ward;
-+        this.district = district;
-+        this.city = city;
-+        this.phoneNumber = phoneNumber;
-+    }
-+
-+    public String getName() {
-+        return name;
-+    }
-+
-+    public String getAvatarUrl() {
-+        return avatarUrl;
-+    }
-+
-+    public String getFullAddress() {
-+        return street + ", " + ward + ", " + district + ", " + city;
-+    }
-+
-+    public String getPhoneNumber() {
-+        return phoneNumber;
-+    }
-+}
-Index: app/src/main/java/com/example/agrimart/data/model/Address.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.data.model;\r\n\r\nimport com.google.gson.annotations.SerializedName;\r\n\r\npublic class Address {\r\n    @SerializedName(\"default\")\r\n    private boolean isDefault;\r\n    @SerializedName(\"detailedAddress\")\r\n    private String detailedAddress;\r\n    @SerializedName(\"name\")\r\n    private String name;\r\n    @SerializedName(\"phone\")\r\n    private String phone;\r\n    @SerializedName(\"street\")\r\n    private String street;\r\n\r\n    public String getAddressId() {\r\n        return this.AddressId;\r\n    }\r\n\r\n    public void setAddressId(String AddressId) {\r\n        this.AddressId = AddressId;\r\n    }\r\n\r\n    @SerializedName(\"AddressId\")\r\n    private String AddressId;\r\n    public Address() {\r\n\r\n    }\r\n    // Constructor\r\n    public Address(String AddressId,String name, String phone, String street, String detailedAddress, boolean isDefault) {\r\n        this.name = name;\r\n        this.phone = phone;\r\n        this.street = street;\r\n        this.detailedAddress = detailedAddress;\r\n        this.isDefault = isDefault;\r\n        this.AddressId = AddressId;\r\n    }\r\n\r\n    // Getters and Setters\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getPhone() {\r\n        return phone;\r\n    }\r\n\r\n    public void setPhone(String phone) {\r\n        this.phone = phone;\r\n    }\r\n\r\n    public String getStreet() {\r\n        return street;\r\n    }\r\n\r\n    public void setStreet(String street) {\r\n        this.street = street;\r\n    }\r\n\r\n    public String getDetailedAddress() {\r\n        return detailedAddress;\r\n    }\r\n\r\n    public void setDetailedAddress(String detailedAddress) {\r\n        this.detailedAddress = detailedAddress;\r\n    }\r\n\r\n    public boolean isDefault() {\r\n        return isDefault;\r\n    }\r\n\r\n    public void setDefault(boolean aDefault) {\r\n        isDefault = aDefault;\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/data/model/Address.java b/app/src/main/java/com/example/agrimart/data/model/Address.java
---- a/app/src/main/java/com/example/agrimart/data/model/Address.java	
-+++ b/app/src/main/java/com/example/agrimart/data/model/Address.java	
-@@ -27,7 +27,7 @@
-     public Address() {
- 
-     }
--    // Constructor
-+
-     public Address(String AddressId,String name, String phone, String street, String detailedAddress, boolean isDefault) {
-         this.name = name;
-         this.phone = phone;
Index: app/src/main/java/com/example/agrimart/data/model/Product.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.data.model;\r\n\r\nimport com.google.firebase.firestore.PropertyName;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class Product implements Serializable {\r\n\r\n    private String product_id;\r\n    private String name;\r\n    private double price;\r\n\r\n    @PropertyName(\"status\")\r\n    private String active;\r\n\r\n    @PropertyName(\"category_id\")\r\n    private String category;\r\n    private String description;\r\n    private int height;\r\n    private List<String> images;\r\n    private int length;\r\n    private int quantity;\r\n    private String storeId;\r\n    private int weight;\r\n    private int width;\r\n    private int soldQuantity;\r\n    private String created_at;\r\n\r\n\r\n    public Product() {\r\n    }\r\n\r\n    public Product(String name, double price, List<String> images) {\r\n        this.name = name;\r\n        this.price = price;\r\n        this.images = images;\r\n    }\r\n\r\n    public Product(String product_id, String name, double price, String active, String category, String description, int height, List<String> images, int length, int quantity, String storeId, int weight, int width, int soldQuantity) {\r\n        this.product_id = product_id;\r\n        this.name = name;\r\n        this.price = price;\r\n        this.active = active;\r\n        this.category = category;\r\n        this.description = description;\r\n        this.height = height;\r\n        this.images = images;\r\n        this.length = length;\r\n        this.quantity = quantity;\r\n        this.storeId = storeId;\r\n        this.weight = weight;\r\n        this.width = width;\r\n        this.soldQuantity = soldQuantity;\r\n    }\r\n\r\n    public String getCreated_at() {\r\n        return created_at;\r\n    }\r\n\r\n    public void setCreated_at(String created_at) {\r\n        this.created_at = created_at;\r\n    }\r\n\r\n    public String getProduct_id() {\r\n        return product_id;\r\n    }\r\n\r\n    public void setProduct_id(String product_id) {\r\n        this.product_id = product_id;\r\n    }\r\n\r\n\r\n    public static class Address {\r\n        private String city;\r\n        private String district;\r\n        private String street;\r\n        private String ward;\r\n\r\n        public String getCity() {\r\n            return city;\r\n        }\r\n\r\n        public void setCity(String city) {\r\n            this.city = city;\r\n        }\r\n\r\n        public String getDistrict() {\r\n            return district;\r\n        }\r\n\r\n        public void setDistrict(String district) {\r\n            this.district = district;\r\n        }\r\n\r\n        public String getStreet() {\r\n            return street;\r\n        }\r\n\r\n        public void setStreet(String street) {\r\n            this.street = street;\r\n        }\r\n\r\n        public String getWard() {\r\n            return ward;\r\n        }\r\n\r\n        public void setWard(String ward) {\r\n            this.ward = ward;\r\n        }\r\n    }\r\n\r\n    public Product(String imageUrl, String name, double price) {\r\n        this.images = Collections.singletonList(imageUrl);\r\n        this.name = name;\r\n        this.price = price;\r\n    }\r\n\r\n\r\n\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    @PropertyName(\"status\")\r\n    public String getActive() {\r\n        return active;\r\n    }\r\n\r\n    @PropertyName(\"status\")\r\n    public void setActive(String active) {\r\n        this.active = active;\r\n    }\r\n\r\n    @PropertyName(\"category_id\")\r\n    public String getCategory() {\r\n        return category;\r\n    }\r\n\r\n    @PropertyName(\"category_id\")\r\n    public void setCategory(String category) {\r\n        this.category = category;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public int getHeight() {\r\n        return height;\r\n    }\r\n\r\n    public void setHeight(int height) {\r\n        this.height = height;\r\n    }\r\n\r\n    public List<String> getImages() {\r\n        return images;\r\n    }\r\n\r\n    public void setImages(List<String> images) {\r\n        this.images = images;\r\n    }\r\n\r\n    public int getLength() {\r\n        return length;\r\n    }\r\n\r\n    public void setLength(int length) {\r\n        this.length = length;\r\n    }\r\n\r\n    public int getQuantity() {\r\n        return quantity;\r\n    }\r\n\r\n    public void setQuantity(int quantity) {\r\n        this.quantity = quantity;\r\n    }\r\n\r\n    public String getStoreId() {\r\n        return storeId;\r\n    }\r\n\r\n    public void setStoreId(String storeId) {\r\n        this.storeId = storeId;\r\n    }\r\n\r\n    public int getWeight() {\r\n        return weight;\r\n    }\r\n\r\n    public void setWeight(int weight) {\r\n        this.weight = weight;\r\n    }\r\n\r\n    public int getWidth() {\r\n        return width;\r\n    }\r\n\r\n    public void setWidth(int width) {\r\n        this.width = width;\r\n    }\r\n\r\n    public int getSoldQuantity() {\r\n        return soldQuantity;\r\n    }\r\n\r\n    public void setSoldQuantity(int soldQuantity) {\r\n        this.soldQuantity = soldQuantity;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/data/model/Product.java b/app/src/main/java/com/example/agrimart/data/model/Product.java
--- a/app/src/main/java/com/example/agrimart/data/model/Product.java	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
+++ b/app/src/main/java/com/example/agrimart/data/model/Product.java	(date 1731425506949)
@@ -11,10 +11,8 @@
     private String product_id;
     private String name;
     private double price;
-
     @PropertyName("status")
     private String active;
-
     @PropertyName("category_id")
     private String category;
     private String description;
