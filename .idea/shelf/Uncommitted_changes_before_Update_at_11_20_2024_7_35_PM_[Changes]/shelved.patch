Index: app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/PurchasedOrdersActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.ui.MyProfile.PurchasedOrders;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log; // Thêm import cho Log\r\nimport android.widget.ImageButton;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.adapter.PurchasedOrdersPagerAdapter;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.android.material.tabs.TabLayoutMediator;\r\nimport androidx.viewpager2.widget.ViewPager2;\r\n\r\npublic class PurchasedOrdersActivity extends AppCompatActivity {\r\n    private static final String TAG = \"PurchasedOrdersActivity\"; // Thêm hằng số TAG cho log\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_purchased_orders);\r\n        EdgeToEdge.enable(this);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        // Khởi tạo TabLayout và ViewPager2\r\n        TabLayout tabLayout = findViewById(R.id.tab_layout);\r\n        ViewPager2 viewPager = findViewById(R.id.view_pager);\r\n        ImageButton btn_back = findViewById(R.id.btn_back);\r\n\r\n\r\n        // Tạo adapter cho ViewPager2\r\n        PurchasedOrdersPagerAdapter pagerAdapter = new PurchasedOrdersPagerAdapter(this);\r\n        viewPager.setAdapter(pagerAdapter);\r\n\r\n        // Kết nối TabLayout với ViewPager2 thông qua TabLayoutMediator\r\n        new TabLayoutMediator(tabLayout, viewPager, (tab, position) -> {\r\n            switch (position) {\r\n                case 0:\r\n                    tab.setText(\"Chờ xác nhận\");\r\n                    break;\r\n                case 1:\r\n                    tab.setText(\"Chờ lấy hàng\");\r\n                    break;\r\n                case 2:\r\n                    tab.setText(\"Chờ giao hàng\");\r\n                    break;\r\n                case 3:\r\n                    tab.setText(\"Đã giao\");\r\n                    break;\r\n                case 4:\r\n                    tab.setText(\"Đã hủy\");\r\n                    break;\r\n                case 5:\r\n                    tab.setText(\"Trả hàng\");\r\n                    break;\r\n            }\r\n        }).attach();\r\n\r\n        // Lấy giá trị tab được chọn từ Intent\r\n        int selectedTab = getIntent().getIntExtra(\"selectedTab\", 0);\r\n\r\n        // Ghi log giá trị selectedTab\r\n        Log.d(TAG, \"Selected tab: \" + selectedTab);\r\n\r\n        // Sử dụng post để đảm bảo giao diện đã sẵn sàng trước khi chuyển tab\r\n        viewPager.post(() -> {\r\n            if (selectedTab >= 0 && selectedTab < viewPager.getAdapter().getItemCount()) {\r\n                viewPager.setCurrentItem(selectedTab, false);\r\n                Log.d(TAG, \"Navigated to tab: \" + selectedTab);\r\n            } else {\r\n                Log.d(TAG, \"Invalid tab index: \" + selectedTab);\r\n            }\r\n        });\r\n\r\n        btn_back.setOnClickListener(v -> onBackPressed());\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/PurchasedOrdersActivity.java b/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/PurchasedOrdersActivity.java
--- a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/PurchasedOrdersActivity.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ b/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/PurchasedOrdersActivity.java	(date 1732095331786)
@@ -1,7 +1,6 @@
 package com.example.agrimart.ui.MyProfile.PurchasedOrders;
 
 import android.os.Bundle;
-import android.util.Log; // Thêm import cho Log
 import android.widget.ImageButton;
 
 import androidx.activity.EdgeToEdge;
@@ -10,11 +9,17 @@
 import androidx.core.view.ViewCompat;
 import androidx.core.view.WindowInsetsCompat;
 import com.example.agrimart.R;
-import com.example.agrimart.adapter.PurchasedOrdersPagerAdapter;
+import com.example.agrimart.adapter.ViewPagerAdapter;
 import com.google.android.material.tabs.TabLayout;
 import com.google.android.material.tabs.TabLayoutMediator;
+
+import androidx.fragment.app.Fragment;
 import androidx.viewpager2.widget.ViewPager2;
 
+import java.util.ArrayList;
+import java.util.Arrays;
+import java.util.List;
+
 public class PurchasedOrdersActivity extends AppCompatActivity {
     private static final String TAG = "PurchasedOrdersActivity"; // Thêm hằng số TAG cho log
 
@@ -35,50 +40,26 @@
         ViewPager2 viewPager = findViewById(R.id.view_pager);
         ImageButton btn_back = findViewById(R.id.btn_back);
 
+        //------------------------------------------------------------------------------------------
+        List<Fragment> fragments = new ArrayList<>();
+        List<String> titles = Arrays.asList("Chờ xác nhận", "Chờ giao hàng", "Đang giao", "Đã giao", "Đã hủy");
+        List<String> statuses = Arrays.asList("Pending", "Approved", "Delivering", "Delivered", "Cancel");
 
-        // Tạo adapter cho ViewPager2
-        PurchasedOrdersPagerAdapter pagerAdapter = new PurchasedOrdersPagerAdapter(this);
-        viewPager.setAdapter(pagerAdapter);
+        int selectedCategoryIndex = -1;
 
-        // Kết nối TabLayout với ViewPager2 thông qua TabLayoutMediator
-        new TabLayoutMediator(tabLayout, viewPager, (tab, position) -> {
-            switch (position) {
-                case 0:
-                    tab.setText("Chờ xác nhận");
-                    break;
-                case 1:
-                    tab.setText("Chờ lấy hàng");
-                    break;
-                case 2:
-                    tab.setText("Chờ giao hàng");
-                    break;
-                case 3:
-                    tab.setText("Đã giao");
-                    break;
-                case 4:
-                    tab.setText("Đã hủy");
-                    break;
-                case 5:
-                    tab.setText("Trả hàng");
-                    break;
-            }
-        }).attach();
+        for (int i = 0; i < statuses.size(); i++) {
+            fragments.add(new OrderStatusFragment(statuses.get(i)));
+        }
+
+        ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(this, fragments, titles);
+        viewPager.setAdapter(viewPagerAdapter);
 
-        // Lấy giá trị tab được chọn từ Intent
-        int selectedTab = getIntent().getIntExtra("selectedTab", 0);
 
-        // Ghi log giá trị selectedTab
-        Log.d(TAG, "Selected tab: " + selectedTab);
+        new TabLayoutMediator(tabLayout, viewPager, (tab, pos) -> tab.setText(titles.get(pos))).attach();
 
-        // Sử dụng post để đảm bảo giao diện đã sẵn sàng trước khi chuyển tab
-        viewPager.post(() -> {
-            if (selectedTab >= 0 && selectedTab < viewPager.getAdapter().getItemCount()) {
-                viewPager.setCurrentItem(selectedTab, false);
-                Log.d(TAG, "Navigated to tab: " + selectedTab);
-            } else {
-                Log.d(TAG, "Invalid tab index: " + selectedTab);
-            }
-        });
+
+
+
 
         btn_back.setOnClickListener(v -> onBackPressed());
     }
Index: app/src/main/java/com/example/agrimart/viewmodel/CategoryViewModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.viewmodel;\r\n\r\nimport android.util.Log;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.text.ParseException;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.Comparator;\r\nimport java.util.Date;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\npublic class CategoryViewModel extends ViewModel {\r\n    private FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    public MutableLiveData<List<Product>> products = new MutableLiveData<>();\r\n    public MutableLiveData<String> sortOrder = new MutableLiveData<>();\r\n\r\n\r\n    public void setSortOrder(String sortOrder) {\r\n        this.sortOrder.setValue(sortOrder);  // Đảm bảo việc thay đổi giá trị trong ViewModel\r\n        Log.e(\"CategoryViewModel\", \"Co truyen vao \"+ sortOrder);\r\n    }\r\n\r\n    public void getProductsByCategory(String categoryID) {\r\n        db.collection(\"products\")\r\n                .whereEqualTo(\"category_id\", categoryID)\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        List<Product> productList = task.getResult().toObjects(Product.class);\r\n                        products.setValue(productList);\r\n                        applySort();\r\n                    } else {\r\n                        Log.e(\"CategoryViewModel\", \"Error getting products: \", task.getException());\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void applySort() {\r\n        if (products.getValue() != null && sortOrder.getValue() != null) {\r\n            List<Product> sortedList = new ArrayList<>(products.getValue());\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd\", Locale.getDefault());\r\n\r\n            switch (sortOrder.getValue()) {\r\n                case \"lowest_price\":\r\n                    Collections.sort(sortedList, Comparator.comparing(Product::getPrice));\r\n                    Log.d(\"CategoryViewModel\", \"Sorted by lowest_price\");\r\n                    break;\r\n\r\n                case \"highest_price\":\r\n                    Collections.sort(sortedList, (a, b) -> Double.compare(b.getPrice(), a.getPrice()));\r\n                    Log.d(\"CategoryViewModel\", \"Sorted by highest_price\");\r\n                    break;\r\n\r\n                case \"latest\":\r\n                    Collections.sort(sortedList, (a, b) -> {\r\n                        try {\r\n                            Date dateA = dateFormat.parse(a.getCreated_at());\r\n                            Date dateB = dateFormat.parse(b.getCreated_at());\r\n                            return dateB.compareTo(dateA); // Latest first\r\n                        } catch (ParseException e) {\r\n                            e.printStackTrace();\r\n                            return 0;\r\n                        }\r\n                    });\r\n                    Log.d(\"CategoryViewModel\", \"Sorted by latest\");\r\n                    break;\r\n\r\n                case \"oldest\":\r\n                    Collections.sort(sortedList, (a, b) -> {\r\n                        try {\r\n                            Date dateA = dateFormat.parse(a.getCreated_at());\r\n                            Date dateB = dateFormat.parse(b.getCreated_at());\r\n                            return dateA.compareTo(dateB); // Oldest first\r\n                        } catch (ParseException e) {\r\n                            e.printStackTrace();\r\n                            return 0;\r\n                        }\r\n                    });\r\n                    Log.d(\"CategoryViewModel\", \"Sorted by oldest\");\r\n                    break;\r\n            }\r\n            products.setValue(sortedList);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/viewmodel/CategoryViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/CategoryViewModel.java
--- a/app/src/main/java/com/example/agrimart/viewmodel/CategoryViewModel.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ b/app/src/main/java/com/example/agrimart/viewmodel/CategoryViewModel.java	(date 1732098661853)
@@ -27,7 +27,6 @@
 
     public void setSortOrder(String sortOrder) {
         this.sortOrder.setValue(sortOrder);  // Đảm bảo việc thay đổi giá trị trong ViewModel
-        Log.e("CategoryViewModel", "Co truyen vao "+ sortOrder);
     }
 
     public void getProductsByCategory(String categoryID) {
Index: app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/CancelledFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/CancelledFragment.java b/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/OrderStatusFragment.java
rename from app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/CancelledFragment.java
rename to app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/OrderStatusFragment.java
--- a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/CancelledFragment.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ b/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/OrderStatusFragment.java	(date 1732105097329)
@@ -1,59 +1,44 @@
 package com.example.agrimart.ui.MyProfile.PurchasedOrders;
 
 import android.os.Bundle;
-
 import androidx.fragment.app.Fragment;
+import androidx.lifecycle.ViewModelProvider;
+import androidx.recyclerview.widget.DividerItemDecoration;
+import androidx.recyclerview.widget.LinearLayoutManager;
+import androidx.recyclerview.widget.RecyclerView;
 
+import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
+import android.widget.TextView;
 
 import com.example.agrimart.R;
+import com.example.agrimart.adapter.OrderStoreAdapter;
+import com.example.agrimart.data.model.Order;
+import com.example.agrimart.viewmodel.OrderStatusFragmentViewModel;
 
-/**
- * A simple {@link Fragment} subclass.
- * Use the {@link CancelledFragment#newInstance} factory method to
- * create an instance of this fragment.
- */
-public class CancelledFragment extends Fragment {
+import java.util.ArrayList;
+import java.util.List;
 
-    // TODO: Rename parameter arguments, choose names that match
-    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-    private static final String ARG_PARAM1 = "param1";
-    private static final String ARG_PARAM2 = "param2";
+public class OrderStatusFragment extends Fragment {
+    private OrderStatusFragmentViewModel viewModel;
+    private String status;
+    private TextView text;
+    private OrderStoreAdapter orderStoreAdapter;
+    RecyclerView recyclerView;
 
-    // TODO: Rename and change types of parameters
-    private String mParam1;
-    private String mParam2;
-
-    public CancelledFragment() {
+    public OrderStatusFragment(String status) {
         // Required empty public constructor
+        this.status = status;
     }
 
-    /**
-     * Use this factory method to create a new instance of
-     * this fragment using the provided parameters.
-     *
-     * @param param1 Parameter 1.
-     * @param param2 Parameter 2.
-     * @return A new instance of fragment CancelledFragment.
-     */
-    // TODO: Rename and change types and number of parameters
-    public static CancelledFragment newInstance(String param1, String param2) {
-        CancelledFragment fragment = new CancelledFragment();
-        Bundle args = new Bundle();
-        args.putString(ARG_PARAM1, param1);
-        args.putString(ARG_PARAM2, param2);
-        fragment.setArguments(args);
-        return fragment;
-    }
 
     @Override
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         if (getArguments() != null) {
-            mParam1 = getArguments().getString(ARG_PARAM1);
-            mParam2 = getArguments().getString(ARG_PARAM2);
+            status = getArguments().getString("status");
         }
     }
 
@@ -61,6 +46,40 @@
     public View onCreateView(LayoutInflater inflater, ViewGroup container,
                              Bundle savedInstanceState) {
         // Inflate the layout for this fragment
-        return inflater.inflate(R.layout.fragment_cancelled, container, false);
+        View view = inflater.inflate(R.layout.fragment_order_status, container, false);
+
+
+
+        addControl(view);
+
+
+
+        return view;
     }
-}
\ No newline at end of file
+
+    private void addControl(View view) {
+
+        recyclerView = view.findViewById(R.id.recyclerViewOrders);
+
+        // Thiết lập RecyclerView
+        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));
+        recyclerView.addItemDecoration(new DividerItemDecoration(getContext(), DividerItemDecoration.VERTICAL));
+
+        // Khởi tạo ViewModel
+        viewModel = new ViewModelProvider(this).get(OrderStatusFragmentViewModel.class);
+
+        // Khởi tạo Adapter
+        orderStoreAdapter = new OrderStoreAdapter(new ArrayList<>());
+        recyclerView.setAdapter(orderStoreAdapter);
+
+        viewModel.getData(status);
+        Log.d("OrderStatusFragment", "Setting up observer...");
+        viewModel.getOrders().observe(getViewLifecycleOwner(), orders -> {
+            Log.d("OrderStatusFragment", "Orders received: " + (orders != null ? orders.size() : "No data"));
+            orderStoreAdapter.updateOrders(orders);
+        });
+        Log.d("OrderStatusFragment", "Observer setup complete.");
+
+
+    }
+}
Index: app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.viewmodel;\r\n\r\nimport android.util.Log;\r\n\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.data.model.Cart;\r\nimport com.example.agrimart.data.model.ProductCart;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.FieldValue;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.Query;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\npublic class CartFragmentViewModel extends ViewModel {\r\n    private final FirebaseAuth auth;\r\n    private final FirebaseFirestore firestore;\r\n    private String userId;\r\n    private List<Cart> storeCartList = new ArrayList<>();\r\n\r\n    // Constructor\r\n    public CartFragmentViewModel() {\r\n        this.auth = FirebaseAuth.getInstance();\r\n        this.firestore = FirebaseFirestore.getInstance();\r\n    }\r\n\r\n    // Hàm để lấy danh sách các StoreCart theo userId, sắp xếp theo ngày\r\n    public void getStoreCartsByUserId(final OnDataFetchedListener listener) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .orderBy(\"updatedAt\", Query.Direction.DESCENDING)\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        List<Cart> storeCartList = new ArrayList<>();\r\n                        for (DocumentSnapshot document : task.getResult()) {\r\n                            Cart storeCart = document.toObject(Cart.class);\r\n                            if (storeCart != null) {\r\n                                storeCartList.add(storeCart);\r\n\r\n                            }\r\n                        }\r\n\r\n                        fetchProductDetailsAndStore(storeCartList, listener);\r\n                    } else {\r\n                        Log.e(\"CartFragmentViewModel\", \"Failed to fetch data:\" + task.getException().getMessage());\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n\r\n    // Hàm để lấy thông tin sản phẩm từ productId\r\n\r\n    private void fetchProductDetailsAndStore(List<Cart> storeCartList, final OnDataFetchedListener listener) {\r\n        // Khởi tạo danh sách với kích thước bằng storeCartList để đảm bảo thứ tự\r\n        List<Cart> updatedStoreCartList = new ArrayList<>(storeCartList.size());\r\n        for (int i = 0; i < storeCartList.size(); i++) {\r\n            updatedStoreCartList.add(i, null); // Đảm bảo mỗi vị trí trong danh sách là null trước khi cập nhật\r\n        }\r\n\r\n        AtomicInteger remainingRequests = new AtomicInteger(storeCartList.size());  // Đếm số lượng yêu cầu còn lại\r\n\r\n        for (int i = 0; i < storeCartList.size(); i++) {\r\n            Cart storeCart = storeCartList.get(i);\r\n            List<Product> products = storeCart.getProducts();\r\n            AtomicInteger productRequests = new AtomicInteger(products.size());  // Đếm số lượng yêu cầu cho từng sản phẩm\r\n\r\n            for (Product product : products) {\r\n                int finalI = i;\r\n                firestore.collection(\"products\")\r\n                        .document(product.getProduct_id())\r\n                        .get()\r\n                        .addOnCompleteListener(productTask -> {\r\n                            if (productTask.isSuccessful()) {\r\n                                DocumentSnapshot productDoc = productTask.getResult();\r\n                                if (productDoc.exists()) {\r\n                                    product.setName(productDoc.getString(\"name\"));\r\n                                    product.setPrice(productDoc.getDouble(\"price\"));\r\n                                    product.setImages((List<String>) productDoc.get(\"images\"));\r\n                                    product.setStoreId(productDoc.getString(\"storeId\"));\r\n                                    product.setUnit(productDoc.getString(\"unit\"));\r\n                                }\r\n                            } else {\r\n                                listener.onError(\"Lấy thông tin sản phẩm thất bại: \" + productTask.getException().getMessage());\r\n                            }\r\n\r\n                            // Sau khi tất cả sản phẩm của giỏ hàng đã được cập nhật\r\n                            if (productRequests.decrementAndGet() == 0) {\r\n                                firestore.collection(\"users\")\r\n                                        .document(storeCart.getStoreId())\r\n                                        .get()\r\n                                        .addOnCompleteListener(userTask -> {\r\n                                            if (userTask.isSuccessful()) {\r\n                                                DocumentSnapshot storeDoc = userTask.getResult();\r\n                                                if (storeDoc.exists()) {\r\n                                                    storeCart.setStore_name(storeDoc.getString(\"store_name\"));\r\n                                                }\r\n                                            } else {\r\n                                                listener.onError(\"Lấy thông tin cửa hàng thất bại: \" + userTask.getException().getMessage());\r\n                                            }\r\n\r\n                                            // Đặt storeCart đã được cập nhật vào đúng vị trí\r\n                                            updatedStoreCartList.set(finalI, storeCart);\r\n\r\n                                            // Sau khi tất cả các yêu cầu đã hoàn thành\r\n                                            if (remainingRequests.decrementAndGet() == 0) {\r\n                                                listener.onDataFetched(updatedStoreCartList); // Gọi listener khi tất cả dữ liệu đã được lấy về\r\n                                            }\r\n                                        });\r\n                            }\r\n                        });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    public void updateProductQuantityInFirebase(String productId, String storeId, int newQuantity) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .whereEqualTo(\"storeId\", storeId)\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful() && !task.getResult().isEmpty()) {\r\n                        DocumentSnapshot document = task.getResult().getDocuments().get(0);\r\n                        Cart storeCart = document.toObject(Cart.class);\r\n\r\n                        if (storeCart != null) {\r\n                            List<ProductCart> updatedProductList = new ArrayList<>();\r\n                            boolean productFound = false;\r\n\r\n                            for (Product product : storeCart.getProducts()) {\r\n                                int quantity = product.getProduct_id().equals(productId) ? newQuantity : product.getQuantity();\r\n                                updatedProductList.add(new ProductCart(product.getProduct_id(), quantity));\r\n\r\n                                if (product.getProduct_id().equals(productId)) {\r\n                                    productFound = true;\r\n                                }\r\n                            }\r\n\r\n                            if (productFound) {\r\n                                storeCart.setProductCart(updatedProductList);\r\n\r\n                                firestore.collection(\"cart\")\r\n                                        .document(document.getId())\r\n                                        .update(\"products\", storeCart.getProductCart())\r\n                                        .addOnSuccessListener(aVoid -> Log.d(\"Firebase\", \"Giỏ hàng đã được cập nhật.\"))\r\n                                        .addOnFailureListener(e -> Log.e(\"Firebase\", \"Lỗi khi cập nhật giỏ hàng: \" + e.getMessage()));\r\n                            } else {\r\n                                Log.e(\"Firebase\", \"Không tìm thấy sản phẩm trong giỏ hàng.\");\r\n                            }\r\n                        }\r\n                    } else {\r\n                        Log.e(\"Firebase\", \"Không tìm thấy giỏ hàng hoặc có lỗi xảy ra: \" + (task.getException() != null ? task.getException().getMessage() : \"\"));\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n\r\n    public void addProductToCart(String storeId, Product productToAdd, int quantity) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        // Query the user's cart based on userId and storeId\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .whereEqualTo(\"storeId\", storeId)\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        if (!task.getResult().isEmpty()) {\r\n                            // Retrieve the existing cart if available\r\n                            DocumentSnapshot document = task.getResult().getDocuments().get(0);\r\n                            Cart storeCart = document.toObject(Cart.class);\r\n\r\n                            if (storeCart != null) {\r\n                                List<Product> products = storeCart.getProducts();\r\n                                List<ProductCart> productCarts = new ArrayList<>();\r\n\r\n                                if (products == null) {\r\n                                    products = new ArrayList<>(); // Initialize if null\r\n                                }\r\n\r\n                                // Check if the product already exists in the cart\r\n                                boolean productExists = false;\r\n                                for (Product product : products) {\r\n                                    ProductCart pro = new ProductCart();\r\n                                    pro.setProduct_id(product.getProduct_id());\r\n                                    pro.setQuantity(product.getQuantity());\r\n                                    if (product.getProduct_id().equals(productToAdd.getProduct_id())) {\r\n                                        productExists = true;\r\n                                        pro.setQuantity(product.getQuantity() + quantity);\r\n                                    }\r\n                                    productCarts.add(pro);\r\n                                }\r\n\r\n                                // If the product doesn't exist, add it as a new product\r\n                                if (!productExists) {\r\n                                    ProductCart pro = new ProductCart();\r\n                                    pro.setProduct_id(productToAdd.getProduct_id());\r\n                                    pro.setQuantity(quantity);\r\n                                    productCarts.add(pro);\r\n                                }\r\n\r\n                                storeCart.setProduct(products); // Update the cart with the new product list\r\n                                String updatedAt = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.getDefault()).format(new Date());\r\n                                storeCart.setUpdatedAt(updatedAt); // Update the timestamp\r\n\r\n                                // Update Firestore\r\n                                firestore.collection(\"cart\")\r\n                                        .document(document.getId())\r\n                                        .update(\r\n                                                \"products\", productCarts,\r\n                                                \"updatedAt\", updatedAt\r\n                                        )\r\n                                        .addOnSuccessListener(aVoid -> Log.d(\"Firebase\", \"Product has been added to the cart.\"))\r\n                                        .addOnFailureListener(e -> Log.e(\"Firebase\", \"Error adding product to cart: \" + e.getMessage()));\r\n                            }\r\n                        } else {\r\n                            // Define a new cart\r\n                            Map<String, Object> newCart = new HashMap<>();\r\n                            newCart.put(\"userId\", userId);\r\n                            newCart.put(\"storeId\", storeId);\r\n                            String updatedAt = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.getDefault()).format(new Date());\r\n                            newCart.put(\"updatedAt\", updatedAt);\r\n                            newCart.put(\"checked\", false);\r\n\r\n                            // Create the initial list of products\r\n                            List<Map<String, Object>> productCarts = new ArrayList<>();\r\n                            Map<String, Object> productData = new HashMap<>();\r\n                            productData.put(\"product_id\", productToAdd.getProduct_id());\r\n                            productData.put(\"quantity\", quantity);\r\n                            productCarts.add(productData);\r\n                            newCart.put(\"products\", productCarts);\r\n\r\n                            // Add the new cart to Firestore\r\n                            firestore.collection(\"cart\")\r\n                                    .add(newCart)\r\n                                    .addOnSuccessListener(documentReference -> Log.d(\"Firebase\", \"New cart has been created.\"))\r\n                                    .addOnFailureListener(e -> Log.e(\"Firebase\", \"Error creating new cart: \" + e.getMessage()));\r\n                        }\r\n                    } else {\r\n                        Log.e(\"Firebase\", \"Error retrieving cart: \" + task.getException());\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void updateProductCheckedStatusInFirebase(String productId, String storeId, boolean isChecked) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        // Tạo Map để lưu trạng thái vào Firestore\r\n        Map<String, Object> updates = new HashMap<>();\r\n        updates.put(\"checked\", isChecked);\r\n\r\n        // Truy vấn giỏ hàng theo userId và storeId\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .whereEqualTo(\"storeId\", storeId)\r\n                .get()  // Lấy tất cả các tài liệu phù hợp\r\n                .addOnSuccessListener(querySnapshot -> {\r\n                    if (!querySnapshot.isEmpty()) {\r\n                        // Nếu có tài liệu giỏ hàng phù hợp, tiến hành cập nhật\r\n                        DocumentSnapshot cartDoc = querySnapshot.getDocuments().get(0);\r\n                        // Lấy mảng sản phẩm trong giỏ hàng\r\n                        List<Map<String, Object>> products = (List<Map<String, Object>>) cartDoc.get(\"products\");\r\n\r\n                        // Kiểm tra và cập nhật sản phẩm trong mảng\r\n                        for (Map<String, Object> product : products) {\r\n                            if (product.get(\"product_id\").equals(productId)) {\r\n                                // Cập nhật trạng thái của sản phẩm trong mảng\r\n                                product.put(\"checked\", isChecked);\r\n                                break; // Dừng lại sau khi cập nhật sản phẩm\r\n                            }\r\n                        }\r\n\r\n                        // Cập nhật lại toàn bộ mảng products\r\n                        Map<String, Object> updatedCart = new HashMap<>();\r\n                        updatedCart.put(\"products\", products);\r\n\r\n                        // Cập nhật lại tài liệu giỏ hàng\r\n                        firestore.collection(\"cart\")\r\n                                .document(cartDoc.getId())  // Lấy ID của tài liệu cart phù hợp\r\n                                .update(updatedCart)\r\n                                .addOnSuccessListener(aVoid -> {\r\n                                    Log.d(\"Cart\", \"Trạng thái checkbox đã được cập nhật\");\r\n                                    // Làm mới dữ liệu UI sau khi cập nhật\r\n                                })\r\n                                .addOnFailureListener(e -> Log.e(\"Cart\", \"Lỗi khi cập nhật trạng thái checkbox\", e));\r\n                    } else {\r\n                        // Không tìm thấy tài liệu giỏ hàng phù hợp\r\n                        Log.e(\"Cart\", \"Không tìm thấy giỏ hàng của người dùng với storeId \" + storeId);\r\n                    }\r\n                })\r\n                .addOnFailureListener(e -> Log.e(\"Cart\", \"Lỗi khi truy vấn Firestore\", e));\r\n    }\r\n\r\n\r\n    public void updateStoreCheckedStatusInFirebase(String storeId, boolean isChecked) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        // Tạo Map để lưu trạng thái vào Firestore\r\n        Map<String, Object> updates = new HashMap<>();\r\n        updates.put(\"checked\", isChecked);  // Thêm trường 'checked' vào tài liệu giỏ hàng\r\n\r\n        // Truy vấn giỏ hàng theo userId và storeId\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .whereEqualTo(\"storeId\", storeId)\r\n                .get()  // Lấy tất cả các tài liệu phù hợp\r\n                .addOnSuccessListener(querySnapshot -> {\r\n                    if (!querySnapshot.isEmpty()) {\r\n                        // Duyệt qua tất cả các tài liệu giỏ hàng\r\n                        for (DocumentSnapshot cartDoc : querySnapshot.getDocuments()) {\r\n                            // Lấy mảng sản phẩm trong giỏ hàng\r\n                            List<Map<String, Object>> products = (List<Map<String, Object>>) cartDoc.get(\"products\");\r\n\r\n                            if (products != null) {\r\n                                // Cập nhật trạng thái checked cho tất cả sản phẩm trong giỏ hàng\r\n                                for (Map<String, Object> product : products) {\r\n                                    product.put(\"checked\", isChecked);\r\n                                }\r\n\r\n                                // Cập nhật lại toàn bộ mảng products\r\n                                Map<String, Object> updatedCart = new HashMap<>();\r\n                                updatedCart.put(\"products\", products);\r\n                                updatedCart.put(\"checked\", isChecked);  // Thêm trường checked vào giỏ hàng\r\n\r\n                                // Cập nhật lại tài liệu giỏ hàng\r\n                                firestore.collection(\"cart\")\r\n                                        .document(cartDoc.getId())  // Lấy ID của tài liệu cart phù hợp\r\n                                        .update(updatedCart)\r\n                                        .addOnSuccessListener(aVoid -> Log.d(\"Cart\", \"Trạng thái checkbox đã được cập nhật 1\"))\r\n                                        .addOnFailureListener(e -> Log.e(\"Cart\", \"Lỗi khi cập nhật trạng thái checkbox\", e));\r\n                            }\r\n                        }\r\n                    } else {\r\n                        // Không tìm thấy tài liệu giỏ hàng phù hợp\r\n                        Log.e(\"Cart\", \"Không tìm thấy giỏ hàng của người dùng với storeId \" + storeId);\r\n                    }\r\n                })\r\n                .addOnFailureListener(e -> Log.e(\"Cart\", \"Lỗi khi truy vấn Firestore\", e));\r\n    }\r\n\r\n    public void onlyUpdateStoreCheckedStatusInFirebase(String storeId, boolean isChecked) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        // Tạo Map để lưu trạng thái vào Firestore\r\n        Map<String, Object> updates = new HashMap<>();\r\n        updates.put(\"checked\", isChecked);  // Thêm trường 'checked' vào tài liệu giỏ hàng\r\n\r\n        // Truy vấn giỏ hàng theo userId và storeId\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .whereEqualTo(\"storeId\", storeId)\r\n                .get()  // Lấy tất cả các tài liệu phù hợp\r\n                .addOnSuccessListener(querySnapshot -> {\r\n                    if (!querySnapshot.isEmpty()) {\r\n                        // Duyệt qua tất cả các tài liệu giỏ hàng\r\n                        for (DocumentSnapshot cartDoc : querySnapshot.getDocuments()) {\r\n                            // Lấy mảng sản phẩm trong giỏ hàng\r\n                            List<Map<String, Object>> products = (List<Map<String, Object>>) cartDoc.get(\"products\");\r\n\r\n                            if (products != null) {\r\n\r\n                                // Cập nhật lại toàn bộ mảng products\r\n                                Map<String, Object> updatedCart = new HashMap<>();\r\n                                //updatedCart.put(\"products\", products);\r\n                                updatedCart.put(\"checked\", isChecked);  // Thêm trường checked vào giỏ hàng\r\n\r\n                                // Cập nhật lại tài liệu giỏ hàng\r\n                                firestore.collection(\"cart\")\r\n                                        .document(cartDoc.getId())  // Lấy ID của tài liệu cart phù hợp\r\n                                        .update(updatedCart)\r\n                                        .addOnSuccessListener(aVoid -> Log.d(\"Cart\", \"Trạng thái checkbox đã được cập nhật 1\"))\r\n                                        .addOnFailureListener(e -> Log.e(\"Cart\", \"Lỗi khi cập nhật trạng thái checkbox\", e));\r\n                            }\r\n                        }\r\n                    } else {\r\n                        // Không tìm thấy tài liệu giỏ hàng phù hợp\r\n                        Log.e(\"Cart\", \"Không tìm thấy giỏ hàng của người dùng với storeId \" + storeId);\r\n                    }\r\n                })\r\n                .addOnFailureListener(e -> Log.e(\"Cart\", \"Lỗi khi truy vấn Firestore\", e));\r\n    }\r\n\r\n    public void removeCheckedProductsOrCart(OnDeleteCompletedListener listener) {\r\n        String userId = auth.getCurrentUser().getUid();\r\n\r\n        // Truy vấn tất cả giỏ hàng của người dùng\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .get()\r\n                .addOnSuccessListener(querySnapshot -> {\r\n                    if (!querySnapshot.isEmpty()) {\r\n                        // Duyệt qua tất cả các giỏ hàng của người dùng\r\n                        for (DocumentSnapshot cartDoc : querySnapshot.getDocuments()) {\r\n                            List<Map<String, Object>> products = (List<Map<String, Object>>) cartDoc.get(\"products\");\r\n\r\n                            boolean allChecked = true;  // Biến kiểm tra tất cả sản phẩm có checked = true hay không\r\n\r\n                            // Kiểm tra các sản phẩm có checked = true không\r\n                            for (Map<String, Object> product : products) {\r\n                                if (product.get(\"checked\") == null || !(boolean) product.get(\"checked\")) {\r\n                                    allChecked = false;  // Nếu có sản phẩm không được chọn, set allChecked = false\r\n                                    break;\r\n                                }\r\n                            }\r\n\r\n                            if (allChecked) {\r\n                                // Nếu tất cả sản phẩm đều được chọn (checked = true), xóa giỏ hàng\r\n                                firestore.collection(\"cart\")\r\n                                        .document(cartDoc.getId())\r\n                                        .delete()\r\n                                        .addOnSuccessListener(aVoid -> {\r\n                                            Log.d(\"Cart\", \"Giỏ hàng đã bị xóa vì tất cả sản phẩm đều được chọn.\");\r\n                                            // Gọi callback khi việc xóa hoàn tất\r\n                                            listener.onDeleteCompleted();\r\n                                        })\r\n                                        .addOnFailureListener(e -> Log.e(\"Cart\", \"Lỗi khi xóa giỏ hàng\", e));\r\n                            } else {\r\n                                // Nếu không phải tất cả sản phẩm đều được chọn, chỉ xóa những sản phẩm được chọn\r\n                                List<Map<String, Object>> updatedProducts = new ArrayList<>();\r\n\r\n                                // Giữ lại những sản phẩm chưa được chọn (checked = false)\r\n                                for (Map<String, Object> product : products) {\r\n                                    if (product.get(\"checked\") == null || !(boolean) product.get(\"checked\")) {\r\n                                        updatedProducts.add(product);  // Giữ lại sản phẩm không được chọn\r\n                                    }\r\n                                }\r\n\r\n                                // Cập nhật lại giỏ hàng với các sản phẩm chưa được chọn\r\n                                Map<String, Object> updatedCart = new HashMap<>();\r\n                                updatedCart.put(\"products\", updatedProducts);\r\n\r\n                                firestore.collection(\"cart\")\r\n                                        .document(cartDoc.getId())\r\n                                        .update(updatedCart)\r\n                                        .addOnSuccessListener(aVoid -> {\r\n                                            Log.d(\"Cart\", \"Các sản phẩm được chọn đã được xóa khỏi giỏ hàng.\");\r\n                                            // Gọi callback khi việc xóa hoàn tất\r\n                                            listener.onDeleteCompleted();\r\n                                        })\r\n                                        .addOnFailureListener(e -> Log.e(\"Cart\", \"Lỗi khi xóa sản phẩm khỏi giỏ hàng\", e));\r\n                            }\r\n                        }\r\n                    } else {\r\n                        // Nếu không có giỏ hàng cho người dùng\r\n                        Log.e(\"Cart\", \"Không tìm thấy giỏ hàng của người dùng.\");\r\n                    }\r\n                })\r\n                .addOnFailureListener(e -> Log.e(\"Cart\", \"Lỗi khi truy vấn Firestore\", e));\r\n    }\r\n\r\n\r\n    public interface OnDeleteCompletedListener {\r\n        void onDeleteCompleted();\r\n    }\r\n\r\n\r\n    // Listener để callback khi lấy dữ liệu xong\r\n    public interface OnDataFetchedListener {\r\n        void onDataFetched(List<Cart> storeCarts);\r\n\r\n        void onError(String errorMessage);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java
--- a/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ b/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java	(date 1732075731822)
@@ -15,6 +15,7 @@
 
 import java.text.SimpleDateFormat;
 import java.util.ArrayList;
+import java.util.Collections;
 import java.util.Date;
 import java.util.HashMap;
 import java.util.List;
@@ -47,18 +48,24 @@
                         List<Cart> storeCartList = new ArrayList<>();
                         for (DocumentSnapshot document : task.getResult()) {
                             Cart storeCart = document.toObject(Cart.class);
-                            if (storeCart != null) {
+                            if (storeCart != null && storeCart.getProducts() != null && !storeCart.getProducts().isEmpty()) {
+                                // Chỉ thêm giỏ hàng nếu danh sách products không rỗng
                                 storeCartList.add(storeCart);
-
                             }
                         }
 
-                        fetchProductDetailsAndStore(storeCartList, listener);
+                        if (!storeCartList.isEmpty()) {
+                            fetchProductDetailsAndStore(storeCartList, listener);
+                        } else {
+                            listener.onDataFetched(Collections.emptyList()); // Trả về danh sách rỗng nếu không có giỏ hàng hợp lệ
+                        }
                     } else {
                         Log.e("CartFragmentViewModel", "Failed to fetch data:" + task.getException().getMessage());
+                        listener.onError("Lỗi khi lấy dữ liệu: " + task.getException().getMessage());
                     }
                 });
     }
+
 
 
 
Index: app/src/main/res/layout/fragment_deliverey.xml
===================================================================
diff --git a/app/src/main/res/layout/fragment_deliverey.xml b/app/src/main/res/layout/fragment_deliverey.xml
deleted file mode 100644
--- a/app/src/main/res/layout/fragment_deliverey.xml	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,14 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent"
-    tools:context=".ui.MyProfile.PurchasedOrders.WaitingDelivereyFragment">
-
-    <!-- TODO: Update blank fragment layout -->
-    <TextView
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:text="@string/hello_blank_fragment" />
-
-</FrameLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingGoodsFragment.java
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingGoodsFragment.java b/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingGoodsFragment.java
deleted file mode 100644
--- a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingGoodsFragment.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,66 +0,0 @@
-package com.example.agrimart.ui.MyProfile.PurchasedOrders;
-
-import android.os.Bundle;
-
-import androidx.fragment.app.Fragment;
-
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-
-import com.example.agrimart.R;
-
-/**
- * A simple {@link Fragment} subclass.
- * Use the {@link WaitingGoodsFragment#newInstance} factory method to
- * create an instance of this fragment.
- */
-public class WaitingGoodsFragment extends Fragment {
-
-    // TODO: Rename parameter arguments, choose names that match
-    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-    private static final String ARG_PARAM1 = "param1";
-    private static final String ARG_PARAM2 = "param2";
-
-    // TODO: Rename and change types of parameters
-    private String mParam1;
-    private String mParam2;
-
-    public WaitingGoodsFragment() {
-        // Required empty public constructor
-    }
-
-    /**
-     * Use this factory method to create a new instance of
-     * this fragment using the provided parameters.
-     *
-     * @param param1 Parameter 1.
-     * @param param2 Parameter 2.
-     * @return A new instance of fragment WaitingFragment.
-     */
-    // TODO: Rename and change types and number of parameters
-    public static WaitingGoodsFragment newInstance(String param1, String param2) {
-        WaitingGoodsFragment fragment = new WaitingGoodsFragment();
-        Bundle args = new Bundle();
-        args.putString(ARG_PARAM1, param1);
-        args.putString(ARG_PARAM2, param2);
-        fragment.setArguments(args);
-        return fragment;
-    }
-
-    @Override
-    public void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-        if (getArguments() != null) {
-            mParam1 = getArguments().getString(ARG_PARAM1);
-            mParam2 = getArguments().getString(ARG_PARAM2);
-        }
-    }
-
-    @Override
-    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                             Bundle savedInstanceState) {
-        // Inflate the layout for this fragment
-        return inflater.inflate(R.layout.fragment_waiting, container, false);
-    }
-}
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/adapter/PurchasedOrdersPagerAdapter.java
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/adapter/PurchasedOrdersPagerAdapter.java b/app/src/main/java/com/example/agrimart/adapter/PurchasedOrdersPagerAdapter.java
deleted file mode 100644
--- a/app/src/main/java/com/example/agrimart/adapter/PurchasedOrdersPagerAdapter.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,48 +0,0 @@
-package com.example.agrimart.adapter;
-
-import androidx.annotation.NonNull;
-import androidx.fragment.app.Fragment;
-import androidx.fragment.app.FragmentActivity;
-import androidx.viewpager2.adapter.FragmentStateAdapter;
-
-import com.example.agrimart.ui.MyProfile.PurchasedOrders.CancelledFragment;
-import com.example.agrimart.ui.MyProfile.PurchasedOrders.WaitingConfirmFragment;
-import com.example.agrimart.ui.MyProfile.PurchasedOrders.DeliveredFragment;
-import com.example.agrimart.ui.MyProfile.PurchasedOrders.WaitingDelivereyFragment;
-import com.example.agrimart.ui.MyProfile.PurchasedOrders.ReturnFragment;
-import com.example.agrimart.ui.MyProfile.PurchasedOrders.WaitingGoodsFragment;
-
-public class PurchasedOrdersPagerAdapter extends FragmentStateAdapter {
-
-    public PurchasedOrdersPagerAdapter(@NonNull FragmentActivity fragmentActivity) {
-        super(fragmentActivity);
-    }
-
-    @NonNull
-    @Override
-    public Fragment createFragment(int position) {
-        switch (position) {
-            case 0:
-                return new WaitingConfirmFragment();
-            case 1:
-                return new WaitingGoodsFragment();
-            case 2:
-                return new WaitingDelivereyFragment();
-            case 3:
-                return new DeliveredFragment();
-            case 4:
-                return new CancelledFragment();
-            case 5:
-                return new ReturnFragment();
-
-            // Thêm các case cho các tab khác nếu cần
-            default:
-                return new WaitingConfirmFragment();
-        }
-    }
-
-    @Override
-    public int getItemCount() {
-        return 6; // Số lượng tab
-    }
-}
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_11_AM_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_11_AM_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_11_AM_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_11_AM_[Changes]/shelved.patch	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,1645 +0,0 @@
-Index: app/src/main/java/com/example/agrimart/ui/MyProfile/MyAccount/MyAccountActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.MyProfile.MyAccount;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Typeface;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.view.Gravity;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.widget.CalendarView;\r\nimport android.widget.DatePicker;\r\nimport android.widget.FrameLayout;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.bumptech.glide.request.RequestOptions;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.viewmodel.MyAccountViewModel;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.UserInfo;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.yalantis.ucrop.UCrop;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.Calendar;\r\n\r\npublic class MyAccountActivity extends AppCompatActivity {\r\n\r\n    TextView user_name_text, my_phone_number_text, email_text, user_sex_text, user_date_birth_text;\r\n    ImageButton btn_back;\r\n    ImageView user_image;\r\n    FrameLayout btn_account_img;\r\n    private static final int PICK_IMAGE_REQUEST = 1;\r\n    LinearLayout myUserSex, myUserDateBirth, myUserName, changePassword, myPhoneNumber;\r\n    String[] genderOptions = {\"Nam\", \"Nữ\", \"Khác\"};\r\n    private static final int EDIT_USER_REQUEST_CODE = 1;\r\n    private static final int EDIT_NUMBER_PHONE_REQUEST_CODE = 10;\r\n    private MyAccountViewModel viewModel;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_my_account);\r\n\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        addControl();\r\n\r\n\r\n\r\n        addLoadData();\r\n\r\n        addEvent();\r\n    }\r\n\r\n    void addControl() {\r\n        user_name_text = findViewById(R.id.user_name_text);\r\n        my_phone_number_text = findViewById(R.id.my_phone_number_text);\r\n        email_text = findViewById(R.id.email_text);\r\n        user_date_birth_text = findViewById(R.id.user_date_birth_text);\r\n        user_sex_text = findViewById(R.id.user_sex_text);\r\n        btn_back = findViewById(R.id.btn_back);\r\n        user_image = findViewById(R.id.user_image);\r\n        btn_account_img = findViewById(R.id.fl_my_account_img);\r\n        myUserSex = findViewById(R.id.my_user_sex);\r\n        myUserDateBirth = findViewById(R.id.my_user_date_birth);\r\n        myUserName = findViewById(R.id.my_user_name);\r\n        changePassword = findViewById(R.id.change_password);\r\n        myPhoneNumber = findViewById(R.id.my_phone_number);\r\n        viewModel = new ViewModelProvider(this).get(MyAccountViewModel.class);\r\n    }\r\n\r\n    void addLoadData()\r\n    {\r\n        // lấy thông tin user\r\n        viewModel.getUser().observe(this, user -> {\r\n\r\n            if (user != null) {\r\n                user_name_text.setText(user.getFullName());\r\n                my_phone_number_text.setText(user.getPhoneNumber());\r\n                email_text.setText(user.getEmail());\r\n                user_sex_text.setText(user.getSex());\r\n                user_date_birth_text.setText(user.getBirthDate());\r\n                viewModel.loadImage(MyAccountActivity.this, user_image);\r\n\r\n            }\r\n        });\r\n\r\n        // kiểm tra đăng nhập\r\n        viewModel.getIsChangePassword().observe(this, isChangePassword -> {\r\n            if(isChangePassword)\r\n            {\r\n                changePassword.setVisibility(View.GONE);\r\n            }\r\n        });\r\n    }\r\n\r\n    void addEvent() {\r\n        btn_back.setOnClickListener(v -> back());\r\n        btn_account_img.setOnClickListener(v -> openImageChooser()); // cập nhật ảnh user\r\n        myUserSex.setOnClickListener(v -> openGenderOptions()); // cập nhật giới tính\r\n        myUserDateBirth.setOnClickListener(v -> openDatePicker());\r\n        myUserName.setOnClickListener(v -> openEditUser());\r\n        changePassword.setOnClickListener(v -> openVerifyAccount());\r\n        myPhoneNumber.setOnClickListener(v -> openEditNumberPhone());\r\n    }\r\n\r\n    void openEditNumberPhone()\r\n    {\r\n        Intent intent = new Intent(MyAccountActivity.this, EditNumberPhoneActivity.class);\r\n        startActivityForResult(intent, EDIT_NUMBER_PHONE_REQUEST_CODE);\r\n    }\r\n\r\n    void back()\r\n    {\r\n        setResult(RESULT_OK); // Đặt kết quả trả về\r\n        finish();\r\n    }\r\n\r\n\r\n    private void openVerifyAccount()\r\n    {\r\n        Intent intent = new Intent(MyAccountActivity.this, VerifyWithPasswordActivity.class);\r\n        startActivity(intent);\r\n    }\r\n\r\n    private void openEditUser()\r\n    {\r\n        Intent intent = new Intent(MyAccountActivity.this, EditUserNameActivity.class);\r\n        startActivityForResult(intent, EDIT_USER_REQUEST_CODE);\r\n    }\r\n\r\n    private void openDatePicker() {\r\n        // Tạo AlertDialog\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n\r\n        // Inflate layout tùy chỉnh\r\n        LayoutInflater inflater = getLayoutInflater();\r\n        View dialogView = inflater.inflate(R.layout.dialog_calendar, null);\r\n        DatePicker datePicker = dialogView.findViewById(R.id.datePicker);\r\n\r\n        // Đặt ngày cho DatePicker\r\n        final Calendar calendar = Calendar.getInstance();\r\n        datePicker.init(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH), null);\r\n\r\n        builder.setView(dialogView)\r\n                .setPositiveButton(\"Hoàn thành\", (dialog, which) -> {\r\n                    // Lấy ngày đã chọn\r\n                    int day = datePicker.getDayOfMonth();\r\n                    int month = datePicker.getMonth() + 1; // Month is 0-based\r\n                    int year = datePicker.getYear();\r\n                    String selectedDate = day + \"/\" + month + \"/\" + year;\r\n\r\n                    // Cập nhật TextView với ngày đã chọn\r\n                    user_date_birth_text.setText(selectedDate);\r\n                    viewModel.saveBirthDateToFirestore(selectedDate);\r\n                })\r\n                .setNegativeButton(\"Hủy\", (dialog, which) -> dialog.dismiss());\r\n\r\n        // Giới hạn ngày phải bé hơn hoặc bằng ngày hiện hành\r\n        datePicker.setMaxDate(calendar.getTimeInMillis());\r\n\r\n        // Hiển thị AlertDialog\r\n        builder.show();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    private void openGenderOptions() {\r\n        // Tạo một TextView cho tiêu đề và tùy chỉnh nó\r\n        TextView title = new TextView(this);\r\n        title.setText(\"Giới tính\");\r\n        title.setPadding(0, 30, 0, 30); // Khoảng cách trên và dưới\r\n        title.setGravity(Gravity.CENTER); // Căn giữa\r\n        title.setTextSize(20); // Kích thước chữ\r\n        title.setTypeface(null, Typeface.BOLD); // Đặt kiểu chữ đậm nếu cần\r\n\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n        builder.setCustomTitle(title); // Đặt tiêu đề tùy chỉnh\r\n\r\n        // Kiểm tra nếu genderOptions không null\r\n        if (genderOptions != null) {\r\n            // Thiết lập danh sách tùy chọn\r\n            builder.setItems(genderOptions, (dialog, which) -> {\r\n                user_sex_text.setText(genderOptions[which]);\r\n                // Gọi phương thức trong ViewModel để lưu giới tính\r\n                viewModel.saveGenderToFirestore(genderOptions[which]);\r\n            });\r\n        } else {\r\n            Toast.makeText(this, \"Không có tùy chọn giới tính\", Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n        // Hiển thị dialog\r\n        builder.show();\r\n    }\r\n\r\n\r\n    private void openImageChooser() {\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        startActivityForResult(Intent.createChooser(intent, \"Select Picture\"), PICK_IMAGE_REQUEST);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == EDIT_NUMBER_PHONE_REQUEST_CODE && resultCode == RESULT_OK) {\r\n            viewModel.loadUserInfo(); // Gọi phương thức để tải lại thông tin người dùng\r\n        }\r\n        // Kiểm tra nếu kết quả trả về từ EditUserActivity\r\n        if (requestCode == EDIT_USER_REQUEST_CODE && resultCode == RESULT_OK) {\r\n            viewModel.loadUserInfo(); // Gọi phương thức để tải lại thông tin người dùng\r\n        }\r\n\r\n        if (requestCode == PICK_IMAGE_REQUEST && resultCode == RESULT_OK && data != null && data.getData() != null) {\r\n            Uri imageUri = data.getData();\r\n\r\n            // Crop ảnh trước khi tải lên\r\n            Uri destinationUri = Uri.fromFile(new File(getCacheDir(), \"cropped_image.jpg\"));\r\n            UCrop.of(imageUri, destinationUri)\r\n                    .withAspectRatio(1, 1) // Tỉ lệ khung hình 1:1\r\n                    .withMaxResultSize(512, 512) // Kích thước tối đa\r\n                    .start(this);\r\n        }\r\n\r\n        if (requestCode == UCrop.REQUEST_CROP) {\r\n            final int resultCodeCrop = resultCode;\r\n            final Intent resultData = data;\r\n            if (resultCodeCrop == RESULT_OK) {\r\n                Uri croppedImageUri = UCrop.getOutput(resultData);\r\n\r\n                // Tải ảnh đã crop lên Firebase\r\n                viewModel.uploadImageToFirebase(MyAccountActivity.this, croppedImageUri, new MyAccountViewModel.ImageUploadCallback() {\r\n                    @Override\r\n                    public void onSuccess(String imageUrl) {\r\n                        // Gọi loadUserInfo và loadImage sau khi ảnh đã được tải lên thành công\r\n                        viewModel.loadUserInfo();\r\n                        viewModel.loadImage(MyAccountActivity.this, user_image);\r\n                    }\r\n\r\n                    @Override\r\n                    public void onFailure() {\r\n                        Toast.makeText(MyAccountActivity.this, \"Error uploading image\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n            } else if (resultCodeCrop == UCrop.RESULT_ERROR) {\r\n                Toast.makeText(this, \"Error cropping image\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAccount/MyAccountActivity.java b/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAccount/MyAccountActivity.java
---- a/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAccount/MyAccountActivity.java	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-+++ b/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAccount/MyAccountActivity.java	(date 1731393515891)
-@@ -22,6 +22,7 @@
- import androidx.activity.EdgeToEdge;
- import androidx.appcompat.app.AlertDialog;
- import androidx.appcompat.app.AppCompatActivity;
-+import androidx.appcompat.widget.Toolbar;
- import androidx.core.graphics.Insets;
- import androidx.core.view.ViewCompat;
- import androidx.core.view.WindowInsetsCompat;
-@@ -48,7 +49,7 @@
- public class MyAccountActivity extends AppCompatActivity {
- 
-     TextView user_name_text, my_phone_number_text, email_text, user_sex_text, user_date_birth_text;
--    ImageButton btn_back;
-+    //ImageButton btn_back;
-     ImageView user_image;
-     FrameLayout btn_account_img;
-     private static final int PICK_IMAGE_REQUEST = 1;
-@@ -57,6 +58,7 @@
-     private static final int EDIT_USER_REQUEST_CODE = 1;
-     private static final int EDIT_NUMBER_PHONE_REQUEST_CODE = 10;
-     private MyAccountViewModel viewModel;
-+    private Toolbar toolbar;
- 
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-@@ -85,7 +87,8 @@
-         email_text = findViewById(R.id.email_text);
-         user_date_birth_text = findViewById(R.id.user_date_birth_text);
-         user_sex_text = findViewById(R.id.user_sex_text);
--        btn_back = findViewById(R.id.btn_back);
-+        //btn_back = findViewById(R.id.btn_back);
-+        toolbar = findViewById(R.id.header_toolbar);
-         user_image = findViewById(R.id.user_image);
-         btn_account_img = findViewById(R.id.fl_my_account_img);
-         myUserSex = findViewById(R.id.my_user_sex);
-@@ -122,7 +125,8 @@
-     }
- 
-     void addEvent() {
--        btn_back.setOnClickListener(v -> back());
-+        //btn_back.setOnClickListener(v -> back());
-+        toolbar.setNavigationOnClickListener(v -> back());
-         btn_account_img.setOnClickListener(v -> openImageChooser()); // cập nhật ảnh user
-         myUserSex.setOnClickListener(v -> openGenderOptions()); // cập nhật giới tính
-         myUserDateBirth.setOnClickListener(v -> openDatePicker());
-Index: app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.viewmodel;\r\n\r\nimport android.util.Log;\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.data.model.Store;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.text.Normalizer;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class SearchViewModel extends ViewModel {\r\n\r\n    private MutableLiveData<List<Product>> filteredProducts = new MutableLiveData<>(new ArrayList<>());\r\n    private List<Product> originalProductList = new ArrayList<>();\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n    public LiveData<List<Product>> getFilteredProducts() {\r\n        return filteredProducts;\r\n    }\r\n\r\n    public void searchProductsByName(String query) {\r\n        db.collection(\"products\")\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        List<Product> products = task.getResult().toObjects(Product.class);\r\n                        List<Product> filteredList = new ArrayList<>();\r\n                        List<Product> remainingList = new ArrayList<>();\r\n\r\n                        for (Product product : products) {\r\n                            if (product.getName() != null) {\r\n                                String productName = product.getName().toLowerCase();\r\n                                String lowerCaseQuery = query.toLowerCase();\r\n                                if (productName.startsWith(lowerCaseQuery)) {\r\n                                    filteredList.add(product);\r\n                                } else if (productName.contains(lowerCaseQuery)) {\r\n                                    remainingList.add(product);\r\n                                }\r\n                            }\r\n                        }\r\n                        filteredList.addAll(remainingList);\r\n                        originalProductList = new ArrayList<>(filteredList);\r\n                        filteredProducts.setValue(filteredList);\r\n                    } else {\r\n                        filteredProducts.setValue(new ArrayList<>());\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void searchProductsByCategory(String categoryId) {\r\n        db.collection(\"products\")\r\n                .whereEqualTo(\"category_id\", categoryId)\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        List<Product> products = task.getResult().toObjects(Product.class);\r\n                        originalProductList = new ArrayList<>(products);\r\n                        filteredProducts.setValue(products);\r\n                    } else {\r\n                        filteredProducts.setValue(new ArrayList<>());\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void searchProductsByStoreName(String storeName) {\r\n        db.collection(\"users\")\r\n                .whereEqualTo(\"store_name\", storeName)\r\n                .get()\r\n                .addOnCompleteListener(storeTask -> {\r\n                    if (storeTask.isSuccessful() && !storeTask.getResult().isEmpty()) {\r\n                        String storeId = storeTask.getResult().getDocuments().get(0).getId();\r\n                        db.collection(\"products\")\r\n                                .whereEqualTo(\"storeId\", storeId)\r\n                                .get()\r\n                                .addOnCompleteListener(productTask -> {\r\n                                    if (productTask.isSuccessful()) {\r\n                                        List<Product> products = productTask.getResult().toObjects(Product.class);\r\n                                        originalProductList = new ArrayList<>(products);\r\n                                        filteredProducts.setValue(products);\r\n                                    } else {\r\n                                        filteredProducts.setValue(new ArrayList<>());\r\n                                    }\r\n                                });\r\n                    } else {\r\n                        filteredProducts.setValue(new ArrayList<>());\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void sortProducts(String sortBy) {\r\n        List<Product> currentProducts = filteredProducts.getValue() != null ? new ArrayList<>(filteredProducts.getValue()) : new ArrayList<>();\r\n\r\n        switch (sortBy) {\r\n            case \"Liên quan nhất\":\r\n                currentProducts = new ArrayList<>(originalProductList);\r\n                break;\r\n            case \"Mới nhất\":\r\n                Collections.sort(currentProducts, (p1, p2) -> p2.getCreated_at().compareTo(p1.getCreated_at()));\r\n                break;\r\n            case \"Cũ nhất\":\r\n                Collections.sort(currentProducts, (p1, p2) -> p1.getCreated_at().compareTo(p2.getCreated_at()));\r\n                break;\r\n            case \"Giá cao nhất\":\r\n                Collections.sort(currentProducts, (p1, p2) -> Double.compare(p2.getPrice(), p1.getPrice()));\r\n                break;\r\n            case \"Giá thấp nhất\":\r\n                Collections.sort(currentProducts, (p1, p2) -> Double.compare(p1.getPrice(), p2.getPrice()));\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        filteredProducts.setValue(currentProducts);\r\n    }\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java
---- a/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-+++ b/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java	(date 1731396078369)
-@@ -7,11 +7,8 @@
- import androidx.lifecycle.ViewModel;
- 
- import com.example.agrimart.data.model.Product;
--import com.example.agrimart.data.model.Store;
--import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.FirebaseFirestore;
- 
--import java.text.Normalizer;
- import java.util.ArrayList;
- import java.util.Collections;
- import java.util.List;
-@@ -36,7 +33,7 @@
-                         List<Product> remainingList = new ArrayList<>();
- 
-                         for (Product product : products) {
--                            if (product.getName() != null) {
-+                            if (product.getName() != null && "available".equals(product.getActive())) {
-                                 String productName = product.getName().toLowerCase();
-                                 String lowerCaseQuery = query.toLowerCase();
-                                 if (productName.startsWith(lowerCaseQuery)) {
-@@ -62,8 +59,14 @@
-                 .addOnCompleteListener(task -> {
-                     if (task.isSuccessful()) {
-                         List<Product> products = task.getResult().toObjects(Product.class);
--                        originalProductList = new ArrayList<>(products);
--                        filteredProducts.setValue(products);
-+                        List<Product> availableProducts = new ArrayList<>();
-+                        for (Product product : products) {
-+                            if ("available".equals(product.getActive())) {
-+                                availableProducts.add(product);
-+                            }
-+                        }
-+                        originalProductList = new ArrayList<>(availableProducts);
-+                        filteredProducts.setValue(availableProducts);
-                     } else {
-                         filteredProducts.setValue(new ArrayList<>());
-                     }
-@@ -83,8 +86,14 @@
-                                 .addOnCompleteListener(productTask -> {
-                                     if (productTask.isSuccessful()) {
-                                         List<Product> products = productTask.getResult().toObjects(Product.class);
--                                        originalProductList = new ArrayList<>(products);
--                                        filteredProducts.setValue(products);
-+                                        List<Product> availableProducts = new ArrayList<>();
-+                                        for (Product product : products) {
-+                                            if ("available".equals(product.getActive())) {
-+                                                availableProducts.add(product);
-+                                            }
-+                                        }
-+                                        originalProductList = new ArrayList<>(availableProducts);
-+                                        filteredProducts.setValue(availableProducts);
-                                     } else {
-                                         filteredProducts.setValue(new ArrayList<>());
-                                     }
-@@ -121,4 +130,4 @@
-         filteredProducts.setValue(currentProducts);
-     }
- 
--}
-+}
-\ No newline at end of file
-Index: app/src/main/res/layout/activity_my_account.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/main\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.MyProfile.MyAccount.MyAccountActivity\">\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        tools:ignore=\"MissingConstraints\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:paddingStart=\"12dp\"\r\n            android:paddingEnd=\"12dp\"\r\n            android:paddingTop=\"10dp\"\r\n            android:paddingBottom=\"10dp\"\r\n            android:background=\"@color/white\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/btn_back\"\r\n                android:layout_width=\"30dp\"\r\n                android:layout_height=\"35dp\"\r\n                android:src=\"@drawable/ic_left\"\r\n                android:scaleType=\"fitCenter\"\r\n                android:layout_marginStart=\"5dp\"\r\n                android:layout_gravity=\"center_vertical\"\r\n                android:background=\"@color/white\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView1\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"35dp\"\r\n                android:layout_weight=\"1\"\r\n                android:gravity=\"start\"\r\n                android:layout_marginStart=\"15dp\"\r\n                android:text=\"Tài khoản &amp; Bảo mật\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"11pt\" />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"5dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/ll_my_account\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"140dp\"\r\n            android:background=\"@color/green\"\r\n            android:gravity=\"center_vertical\"\r\n            android:orientation=\"vertical\"\r\n            android:padding=\"16dp\">\r\n\r\n            <FrameLayout\r\n                android:id=\"@+id/fl_my_account_img\"\r\n                android:layout_width=\"78dp\"\r\n                android:layout_height=\"78dp\"\r\n                android:background=\"@drawable/rounded_frame\"\r\n                android:clipToOutline=\"true\"\r\n                android:layout_gravity=\"center\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/user_image\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:scaleType=\"centerCrop\"\r\n                    />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/overlay_text\"\r\n                    android:layout_width=\"78dp\"\r\n                    android:layout_height=\"39dp\"\r\n                    android:layout_gravity=\"bottom\"\r\n                    android:gravity=\"center\"\r\n                    android:background=\"@drawable/rounded_text\"\r\n                    android:text=\"Sửa\"\r\n                    android:textColor=\"@android:color/white\"\r\n                    android:textSize=\"18sp\" />\r\n\r\n            </FrameLayout>\r\n        </LinearLayout>\r\n\r\n\r\n\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/my_user_name\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_name\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Tên\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_name_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n            <ImageView\r\n                android:id=\"@+id/my_profile_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/my_user_sex\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_sex\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Giới tính\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_sex_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n            <ImageView\r\n                android:id=\"@+id/user_sex_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/my_user_date_birth\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_date_birth\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Ngày sinh\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_date_birth_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n            <ImageView\r\n                android:id=\"@+id/my_date_birth_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/my_phone_number\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/my_phone_number_text1\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Điện thoại\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/my_phone_number_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/my_phone_number_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/my_email\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/email\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Email\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/email_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/my_email_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                 />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/change_password\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/change_password_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"2\"\r\n\r\n                android:text=\"Đổi mật khẩu\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/change_password_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n\r\n    </LinearLayout>\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_my_account.xml b/app/src/main/res/layout/activity_my_account.xml
---- a/app/src/main/res/layout/activity_my_account.xml	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-+++ b/app/src/main/res/layout/activity_my_account.xml	(date 1731393207553)
-@@ -12,37 +12,20 @@
-         android:orientation="vertical"
-         tools:ignore="MissingConstraints">
- 
--        <LinearLayout
-+        <androidx.appcompat.widget.Toolbar
-+            android:id="@+id/header_toolbar"
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
-+            android:background="@color/white"
-             android:paddingStart="12dp"
-             android:paddingEnd="12dp"
-             android:paddingTop="10dp"
-             android:paddingBottom="10dp"
--            android:background="@color/white"
--            android:orientation="horizontal">
-+            app:title="Tài khoản &amp; Bảo mật"
-+            app:titleTextColor="@color/black"
-+            app:titleTextAppearance="@style/TextAppearance.AppCompat.Large"
-+            app:navigationIcon="@drawable/chevron_left" />
- 
--            <ImageButton
--                android:id="@+id/btn_back"
--                android:layout_width="30dp"
--                android:layout_height="35dp"
--                android:src="@drawable/ic_left"
--                android:scaleType="fitCenter"
--                android:layout_marginStart="5dp"
--                android:layout_gravity="center_vertical"
--                android:background="@color/white" />
--
--            <TextView
--                android:id="@+id/textView1"
--                android:layout_width="0dp"
--                android:layout_height="35dp"
--                android:layout_weight="1"
--                android:gravity="start"
--                android:layout_marginStart="15dp"
--                android:text="Tài khoản &amp; Bảo mật"
--                android:textColor="@color/black"
--                android:textSize="11pt" />
--        </LinearLayout>
-         <View
-             android:layout_width="match_parent"
-             android:layout_height="5dp"
-Index: .idea/shelf/Uncommitted_changes_before_rebase__Changes_.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_rebase__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_rebase__Changes_.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_rebase__Changes_.xml	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-+++ /dev/null	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_rebase_[Changes]" date="1730829309579" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_rebase_[Changes]/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before rebase [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_11_6_2024_1_43_AM__Changes_1.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_6_2024_1_43_AM__Changes_1.xml b/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_6_2024_1_43_AM__Changes_1.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_6_2024_1_43_AM__Changes_1.xml	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-+++ /dev/null	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Checkout_at_11_6_2024_1_43_AM_[Changes]1" date="1730832274928" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_6_2024_1_43_AM_[Changes]1/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Checkout at 11/6/2024 1:43 AM [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Checkout_at_11_6_2024_1_43_AM_[Changes]1/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_6_2024_1_43_AM_[Changes]1/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_6_2024_1_43_AM_[Changes]1/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Checkout_at_11_6_2024_1_43_AM_[Changes]1/shelved.patch	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-+++ /dev/null	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-@@ -1,43 +0,0 @@
--Index: app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.example.agrimart.databinding.CategoryItemBinding;\r\nimport com.denzcoskun.imageslider.models.SlideModel;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class CategoryAdapter extends RecyclerView.Adapter<CategoryAdapter.MyViewHolder> {\r\n    private List<Category> categories;\r\n\r\n    private int position = -1;\r\n    public Category category;\r\n    public CategoryAdapter(List<Category> categories) {\r\n        this.categories = categories;\r\n    }\r\n\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        CategoryItemBinding binding = CategoryItemBinding.inflate(LayoutInflater.from(parent.getContext()), parent, false);\r\n        return new MyViewHolder(binding);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        holder.bindData(categories.get(position));\r\n\r\n        if (position == this.position) {\r\n            holder.binding.getRoot().setBackgroundResource(android.R.color.holo_green_light);\r\n        } else {\r\n            holder.binding.getRoot().setBackgroundResource(android.R.color.transparent);\r\n        }\r\n\r\n        holder.binding.getRoot().setOnClickListener(v -> {\r\n            category = categories.get(position);\r\n            int prePos=this.position;\r\n            this.position=position;\r\n            notifyItemChanged(prePos);\r\n            notifyItemChanged(position);\r\n\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return categories.size();\r\n    }\r\n\r\n    public static class MyViewHolder extends RecyclerView.ViewHolder {\r\n        CategoryItemBinding binding;\r\n\r\n        public MyViewHolder(@NonNull CategoryItemBinding binding) {\r\n            super(binding.getRoot());\r\n            this.binding = binding;\r\n        }\r\n\r\n        public void bindData(Category category) {\r\n            Glide.with(binding.getRoot())\r\n                    .load(category.getImg())\r\n                    .into(binding.imgCate);\r\n\r\n            binding.tvName.setText(category.getName());\r\n        }\r\n    }\r\n}\r\n\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java b/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java
----- a/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java	
--+++ b/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java	
--@@ -18,7 +18,7 @@
-- public class CategoryAdapter extends RecyclerView.Adapter<CategoryAdapter.MyViewHolder> {
--     private List<Category> categories;
-- 
---    private int position = -1;
--+    private int selectedPosition = -1;
--     public Category category;
--     public CategoryAdapter(List<Category> categories) {
--         this.categories = categories;
--@@ -36,18 +36,18 @@
--     public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {
--         holder.bindData(categories.get(position));
-- 
---        if (position == this.position) {
--+        if (holder.getAdapterPosition() == selectedPosition) {
--             holder.binding.getRoot().setBackgroundResource(android.R.color.holo_green_light);
--         } else {
--             holder.binding.getRoot().setBackgroundResource(android.R.color.transparent);
--         }
-- 
--         holder.binding.getRoot().setOnClickListener(v -> {
---            category = categories.get(position);
---            int prePos=this.position;
---            this.position=position;
--+            category = categories.get(holder.getAdapterPosition());
--+            int prePos=selectedPosition;
--+            selectedPosition=holder.getAdapterPosition();
--             notifyItemChanged(prePos);
---            notifyItemChanged(position);
--+            notifyItemChanged(holder.getAdapterPosition());
-- 
--         });
--     }
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-+++ /dev/null	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-@@ -1,1295 +0,0 @@
--Index: app/src/main/java/com/example/agrimart/data/model/Product.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.data.model;\r\n\r\npublic class Product {\r\n    private String image;\r\n    private String name;\r\n    private double price;\r\n    private String active;\r\n\r\n    public Product() {\r\n    }\r\n\r\n    public Product(String image, String name, double price) {\r\n        this.image = image;\r\n        this.name = name;\r\n        this.price = price;\r\n    }\r\n\r\n    public Product(String image, String name, double price, String active) {\r\n        this.image = image;\r\n        this.name = name;\r\n        this.price = price;\r\n        this.active = active;\r\n    }\r\n\r\n    public String getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image) {\r\n        this.image = image;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    public String getActive() {\r\n        return active;\r\n    }\r\n\r\n    public void setActive(String active) {\r\n        this.active = active;\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/data/model/Product.java b/app/src/main/java/com/example/agrimart/data/model/Product.java
----- a/app/src/main/java/com/example/agrimart/data/model/Product.java	
--+++ b/app/src/main/java/com/example/agrimart/data/model/Product.java	
--@@ -1,33 +1,57 @@
-- package com.example.agrimart.data.model;
-- 
---public class Product {
---    private String image;
--+import java.io.Serializable;
--+import java.util.Collections;
--+import java.util.List;
--+
--+public class Product implements Serializable {
--+    private String productId;
--     private String name;
--     private double price;
--     private String active;
--+    private String category;
--+    private String description;
--+    private int height;
--+    private List<String> images;
--+    private int length;
--+    private int quantity;
--+    private String storeId;
--+    private int weight;
--+    private int width;
--+    private int soldQuantity;
-- 
--     public Product() {
--     }
-- 
---    public Product(String image, String name, double price) {
---        this.image = image;
--+    public Product(String productId, String name, double price, String active, String category, String description, int height, List<String> images, int length, int quantity, String storeId, int weight, int width, int soldQuantity) {
--+        this.productId = productId;
--         this.name = name;
--         this.price = price;
--+        this.active = active;
--+        this.category = category;
--+        this.description = description;
--+        this.height = height;
--+        this.images = images;
--+        this.length = length;
--+        this.quantity = quantity;
--+        this.storeId = storeId;
--+        this.weight = weight;
--+        this.width = width;
--+        this.soldQuantity = soldQuantity;
--     }
-- 
---    public Product(String image, String name, double price, String active) {
---        this.image = image;
--+    public Product(String imageUrl, String name, double price) {
--+        this.images = Collections.singletonList(imageUrl);
--         this.name = name;
--         this.price = price;
---        this.active = active;
--     }
-- 
---    public String getImage() {
---        return image;
--+    public String getProductId() {
--+        return productId;
--     }
-- 
---    public void setImage(String image) {
---        this.image = image;
--+    public void setProductId(String productId) {
--+        this.productId = productId;
--     }
-- 
--     public String getName() {
--@@ -53,4 +77,84 @@
--     public void setActive(String active) {
--         this.active = active;
--     }
--+
--+    public String getCategory() {
--+        return category;
--+    }
--+
--+    public void setCategory(String category) {
--+        this.category = category;
--+    }
--+
--+    public String getDescription() {
--+        return description;
--+    }
--+
--+    public void setDescription(String description) {
--+        this.description = description;
--+    }
--+
--+    public int getHeight() {
--+        return height;
--+    }
--+
--+    public void setHeight(int height) {
--+        this.height = height;
--+    }
--+
--+    public List<String> getImages() {
--+        return images;
--+    }
--+
--+    public void setImages(List<String> images) {
--+        this.images = images;
--+    }
--+
--+    public int getLength() {
--+        return length;
--+    }
--+
--+    public void setLength(int length) {
--+        this.length = length;
--+    }
--+
--+    public int getQuantity() {
--+        return quantity;
--+    }
--+
--+    public void setQuantity(int quantity) {
--+        this.quantity = quantity;
--+    }
--+
--+    public String getStoreId() {
--+        return storeId;
--+    }
--+
--+    public void setStoreId(String storeId) {
--+        this.storeId = storeId;
--+    }
--+
--+    public int getWeight() {
--+        return weight;
--+    }
--+
--+    public void setWeight(int weight) {
--+        this.weight = weight;
--+    }
--+
--+    public int getWidth() {
--+        return width;
--+    }
--+
--+    public void setWidth(int width) {
--+        this.width = width;
--+    }
--+
--+    public int getSoldQuantity() {
--+        return soldQuantity;
--+    }
--+
--+    public void setSoldQuantity(int soldQuantity) {
--+        this.soldQuantity = soldQuantity;
--+    }
-- }
--\ No newline at end of file
--Index: app/src/main/res/layout/item_product.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n\r\n    <data>\r\n        <variable\r\n            name=\"product\"\r\n            type=\"com.example.agrimart.data.model.Product\" />\r\n    </data>\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"173dp\"\r\n        android:background=\"@drawable/bg_product\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"5dp\"\r\n        android:layout_marginTop=\"5dp\">\r\n\r\n        <FrameLayout\r\n            android:id=\"@+id/frame_layout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"124dp\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imgPro\"\r\n                android:layout_width=\"99dp\"\r\n                android:layout_height=\"79dp\"\r\n                android:scaleType=\"centerCrop\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/banana\" />\r\n        </FrameLayout>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvName\"\r\n            android:layout_width=\"129dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/frame_layout\"\r\n            android:layout_marginTop=\"12dp\"\r\n            android:textSize=\"16sp\"\r\n            android:textColor=\"#333333\"\r\n            android:letterSpacing=\"0.01\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:ellipsize=\"end\"\r\n            android:maxLines=\"1\"\r\n            android:textStyle=\"bold\"/>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvPrice\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/tvName\"\r\n            android:textSize=\"18sp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:textColor=\"#F44336\"\r\n            android:fontFamily=\"@font/gabarito\"\r\n            android:letterSpacing=\"0.01\"/>\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/imageButton\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@color/transparent\"\r\n            android:layout_below=\"@id/tvName\"\r\n            android:layout_alignParentEnd=\"true\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginEnd=\"16dp\"\r\n            android:layout_marginBottom=\"10dp\"\r\n            app:srcCompat=\"@drawable/ic_plus_1\" />\r\n\r\n    </RelativeLayout>\r\n</layout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/item_product.xml b/app/src/main/res/layout/item_product.xml
----- a/app/src/main/res/layout/item_product.xml	
--+++ b/app/src/main/res/layout/item_product.xml	
--@@ -22,10 +22,10 @@
-- 
--             <ImageView
--                 android:id="@+id/imgPro"
---                android:layout_width="99dp"
---                android:layout_height="79dp"
---                android:scaleType="centerCrop"
--+                android:layout_width="match_parent"
--+                android:layout_height="139dp"
--                 android:layout_gravity="center"
--+                android:scaleType="centerCrop"
--                 android:src="@drawable/banana" />
--         </FrameLayout>
-- 
--Index: app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.ui.Store;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.data.model.ProductRequest;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class StoreActivity extends AppCompatActivity {\r\n\r\n    private ImageView storeAvatar;\r\n    private TextView storeName, storeRating, storeAddress;\r\n    private RecyclerView rvProducts;\r\n    private ProductAdapter productAdapter;\r\n    private List<Product> productList;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_store);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.LOLLIPOP) {\r\n            Window window = getWindow();\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.setStatusBarColor(ContextCompat.getColor(this, R.color.green));\r\n        }\r\n\r\n        storeAvatar = findViewById(R.id.store_avatar);\r\n        storeName = findViewById(R.id.store_name);\r\n        storeRating = findViewById(R.id.store_rating);\r\n        storeAddress = findViewById(R.id.store_address);\r\n        rvProducts = findViewById(R.id.rvProducts);\r\n\r\n\r\n        productList = new ArrayList<>();\r\n\r\n\r\n        productAdapter = new ProductAdapter(productList, product -> {\r\n\r\n        });\r\n        rvProducts.setLayoutManager(new GridLayoutManager(this, 2));\r\n        rvProducts.setAdapter(productAdapter);\r\n        loadData();\r\n    }\r\n    private void loadData() {\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        if (user != null) {\r\n            String uid = user.getUid();\r\n\r\n            FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n            db.collection(\"products\")\r\n                    .whereEqualTo(\"storeId\", uid)\r\n                    .get()\r\n                    .addOnCompleteListener(task -> {\r\n                        if (task.isSuccessful()) {\r\n\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                ProductRequest product = document.toObject(ProductRequest.class);\r\n                                productList.add(\r\n                                        new Product(\r\n                                                product.getImageUrls().isEmpty() ? \"https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/notfound.jpg?alt=media&token=40e61714-5a10-4352-918c-7e5e2643a1fe\" : product.getImageUrls().get(0),\r\n                                                product.getName(),\r\n                                                product.getPrice()\r\n                                        )\r\n                                );\r\n                            }\r\n                            productAdapter.notifyDataSetChanged();\r\n                        }\r\n                    });\r\n\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java b/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java
----- a/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java	
--+++ b/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java	
--@@ -3,9 +3,9 @@
-- import android.os.Bundle;
-- import android.view.Window;
-- import android.view.WindowManager;
--+import android.widget.ImageButton;
-- import android.widget.ImageView;
-- import android.widget.TextView;
---
-- import androidx.activity.EdgeToEdge;
-- import androidx.appcompat.app.AppCompatActivity;
-- import androidx.core.content.ContextCompat;
--@@ -14,16 +14,14 @@
-- import androidx.core.view.WindowInsetsCompat;
-- import androidx.recyclerview.widget.GridLayoutManager;
-- import androidx.recyclerview.widget.RecyclerView;
---
--+import com.bumptech.glide.Glide;
-- import com.example.agrimart.R;
-- import com.example.agrimart.adapter.ProductAdapter;
-- import com.example.agrimart.data.model.Product;
-- import com.example.agrimart.data.model.ProductRequest;
---import com.google.firebase.auth.FirebaseAuth;
---import com.google.firebase.auth.FirebaseUser;
--+import com.example.agrimart.data.model.User;
-- import com.google.firebase.firestore.FirebaseFirestore;
-- import com.google.firebase.firestore.QueryDocumentSnapshot;
---
-- import java.util.ArrayList;
-- import java.util.List;
-- 
--@@ -40,6 +38,14 @@
--         super.onCreate(savedInstanceState);
--         EdgeToEdge.enable(this);
--         setContentView(R.layout.activity_store);
--+        setupWindowInsets();
--+
--+        initializeViews();
--+        setupRecyclerView();
--+        loadStoreData();
--+    }
--+
--+    private void setupWindowInsets() {
--         ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {
--             Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());
--             v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);
--@@ -51,50 +57,84 @@
--             window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);
--             window.setStatusBarColor(ContextCompat.getColor(this, R.color.green));
--         }
--+    }
-- 
--+    private void initializeViews() {
--         storeAvatar = findViewById(R.id.store_avatar);
--         storeName = findViewById(R.id.store_name);
--         storeRating = findViewById(R.id.store_rating);
--         storeAddress = findViewById(R.id.store_address);
--         rvProducts = findViewById(R.id.rvProducts);
--+    }
-- 
---
--+    private void setupRecyclerView() {
--         productList = new ArrayList<>();
---
---
--         productAdapter = new ProductAdapter(productList, product -> {
---
--+            // Xử lý khi nhấn vào sản phẩm (nếu cần)
--         });
--         rvProducts.setLayoutManager(new GridLayoutManager(this, 2));
--         rvProducts.setAdapter(productAdapter);
---        loadData();
--+    }
--+
--+    private void loadStoreData() {
--+        String storeId = getIntent().getStringExtra("storeId");
--+        if (storeId != null) {
--+            loadStoreInfo(storeId);
--+            loadProducts(storeId);
--+        }
--+    }
--+
--+    private void loadStoreInfo(String storeId) {
--+        FirebaseFirestore db = FirebaseFirestore.getInstance();
--+        db.collection("users")
--+                .document(storeId)
--+                .get()
--+                .addOnSuccessListener(documentSnapshot -> {
--+                    User store = documentSnapshot.toObject(User.class);
--+                    if (store != null) {
--+                        updateStoreInfo(store);
--+                    } else {
--+                        showError("Thông tin cửa hàng không hợp lệ.");
--+                    }
--+                })
--+                .addOnFailureListener(e -> {
--+                    showError("Không thể tải thông tin cửa hàng.");
--+                });
--+    }
--+
--+    private void updateStoreInfo(User store) {
--+        storeName.setText(store.getStoreName());
--+        storeAddress.setText(store.getStoreAddress() != null ? store.getStoreAddress().getStreet() : "Địa chỉ không khả dụng");
--+        Glide.with(this)
--+                .load(store.getStoreImage() != null && !store.getStoreImage().isEmpty() ? store.getStoreImage() : R.drawable.user)
--+                .placeholder(R.drawable.user)
--+                .error(R.drawable.user)
--+                .into(storeAvatar);
--     }
---    private void loadData() {
---        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();
---        if (user != null) {
---            String uid = user.getUid();
-- 
---            FirebaseFirestore db = FirebaseFirestore.getInstance();
---            db.collection("products")
---                    .whereEqualTo("storeId", uid)
---                    .get()
---                    .addOnCompleteListener(task -> {
---                        if (task.isSuccessful()) {
---
---                            for (QueryDocumentSnapshot document : task.getResult()) {
---                                ProductRequest product = document.toObject(ProductRequest.class);
---                                productList.add(
---                                        new Product(
---                                                product.getImageUrls().isEmpty() ? "https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/notfound.jpg?alt=media&token=40e61714-5a10-4352-918c-7e5e2643a1fe" : product.getImageUrls().get(0),
---                                                product.getName(),
---                                                product.getPrice()
---                                        )
---                                );
---                            }
---                            productAdapter.notifyDataSetChanged();
---                        }
---                    });
--+    private void loadProducts(String storeId) {
--+        FirebaseFirestore db = FirebaseFirestore.getInstance();
--+        db.collection("products")
--+                .whereEqualTo("storeId", storeId)
--+                .get()
--+                .addOnSuccessListener(queryDocumentSnapshots -> {
--+                    for (QueryDocumentSnapshot document : queryDocumentSnapshots) {
--+                        ProductRequest productRequest = document.toObject(ProductRequest.class);
--+                        String imageUrl = productRequest.getImageUrls().isEmpty()
--+                                ? "https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/notfound.jpg?alt=media&token=40e61714-5a10-4352-918c-7e5e2643a1fe"
--+                                : productRequest.getImageUrls().get(0);
--+                        productList.add(new Product(imageUrl, productRequest.getName(), productRequest.getPrice()));
--+                    }
--+                    productAdapter.notifyDataSetChanged();
--+                })
--+                .addOnFailureListener(e -> {
--+                    showError("Không thể tải sản phẩm.");
--+                });
--+    }
-- 
---        }
---    }
---}
--\ No newline at end of file
--+    private void showError(String message) {
--+        storeName.setText(message);
--+        storeAddress.setText("");
--+        storeAvatar.setImageResource(R.drawable.user);
--+    }
--+}
--Index: app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.ItemProductBinding;\r\n\r\nimport java.util.List;\r\n\r\npublic class ProductAdapter extends RecyclerView.Adapter<ProductAdapter.MyViewHolder> {\r\n    private List<Product> products;\r\n    private OnItemClickListener listener;\r\n\r\n    public ProductAdapter(List<Product> products, OnItemClickListener listener) {\r\n        this.products = products;\r\n        this.listener = listener;\r\n    }\r\n\r\n    public interface OnItemClickListener {\r\n        void onItemClick(Product product);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        ItemProductBinding binding = ItemProductBinding.inflate(LayoutInflater.from(parent.getContext()), parent, false);\r\n        return new MyViewHolder(binding);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        Product product = products.get(position);\r\n        holder.bindData(product);\r\n        holder.itemView.setOnClickListener(v -> listener.onItemClick(product));\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return products.size();\r\n    }\r\n\r\n    public static class MyViewHolder extends RecyclerView.ViewHolder {\r\n        private final ItemProductBinding binding;\r\n\r\n        public MyViewHolder(@NonNull ItemProductBinding binding) {\r\n            super(binding.getRoot());\r\n            this.binding = binding;\r\n        }\r\n\r\n        public void bindData(Product product) {\r\n            binding.tvName.setText(product.getName());\r\n            binding.tvPrice.setText(String.valueOf(product.getPrice()));\r\n            Glide.with(binding.getRoot().getContext())\r\n                    .load(product.getImage())\r\n                    .into(binding.imgPro);\r\n            binding.executePendingBindings();\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java b/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java
----- a/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java	
--+++ b/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java	
--@@ -10,7 +10,9 @@
-- import com.example.agrimart.data.model.Product;
-- import com.example.agrimart.databinding.ItemProductBinding;
-- 
--+import java.text.NumberFormat;
-- import java.util.List;
--+import java.util.Locale;
-- 
-- public class ProductAdapter extends RecyclerView.Adapter<ProductAdapter.MyViewHolder> {
--     private List<Product> products;
--@@ -54,10 +56,20 @@
-- 
--         public void bindData(Product product) {
--             binding.tvName.setText(product.getName());
---            binding.tvPrice.setText(String.valueOf(product.getPrice()));
---            Glide.with(binding.getRoot().getContext())
---                    .load(product.getImage())
---                    .into(binding.imgPro);
--+
--+            NumberFormat format = NumberFormat.getCurrencyInstance(new Locale("vi", "VN"));
--+            binding.tvPrice.setText(format.format(product.getPrice()));
--+
--+            if (product.getImages() != null && !product.getImages().isEmpty()) {
--+                Glide.with(binding.getRoot().getContext())
--+                        .load(product.getImages().get(0))
--+                        .into(binding.imgPro);
--+            } else if (product.getImages() != null) {
--+                Glide.with(binding.getRoot().getContext())
--+                        .load(product.getImages())
--+                        .into(binding.imgPro);
--+            }
--+
--             binding.executePendingBindings();
--         }
--     }
--Index: app/src/main/res/layout/activity_product_detail.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/main1\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.ProductPage.ProductDetailActivity\">\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:id=\"@+id/header\">\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/btn_back\"\r\n            android:layout_width=\"32dp\"\r\n            android:layout_height=\"32dp\"\r\n            android:layout_marginStart=\"24dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginBottom=\"8dp\"\r\n            android:background=\"@color/background_light\"\r\n            android:src=\"@drawable/chevron_left\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.0\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"\r\n            tools:ignore=\"MissingConstraints\"\r\n            android:backgroundTint=\"@color/white\"/>\r\n    </RelativeLayout>\r\n\r\n    <ScrollView\r\n        android:id=\"@+id/scrollView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"4dp\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/header\"\r\n        tools:layout_editor_absoluteX=\"0dp\"\r\n        android:layout_below=\"@id/header\"\r\n        android:scrollbars=\"none\"\r\n        android:layout_above=\"@id/footer\">\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/product_detail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n            <com.denzcoskun.imageslider.ImageSlider\r\n                android:id=\"@+id/product_image\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"250dp\"\r\n                android:background=\"@null\"\r\n                app:iss_auto_cycle=\"true\"\r\n                app:iss_period=\"1000\"\r\n                app:iss_title_background=\"@color/transparent\"/>\r\n\r\n            <TextView\r\n                android:id=\"@+id/product_name\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:layout_marginBottom=\"8dp\"\r\n                android:text=\"@string/product_name\"\r\n                android:layout_below=\"@+id/product_image\"\r\n                android:fontFamily=\"@font/gabarito\"\r\n                android:textSize=\"20sp\"\r\n                android:textAllCaps=\"true\"\r\n                android:textColor=\"@color/black\"/>\r\n\r\n            <TextView\r\n                android:id=\"@+id/product_price\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"24dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:layout_marginBottom=\"8dp\"\r\n                android:text=\"@string/price\"\r\n                android:layout_below=\"@+id/product_name\"\r\n                android:fontFamily=\"@font/gabarito\"\r\n                android:textSize=\"24sp\"\r\n                android:textColor=\"@android:color/holo_red_dark\"/>\r\n\r\n            <TextView\r\n                android:id=\"@+id/address\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"24dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:layout_marginBottom=\"16dp\"\r\n                android:text=\"@string/address\"\r\n                android:layout_below=\"@+id/product_price\"\r\n                android:fontFamily=\"@font/circular_std\"\r\n                android:textSize=\"16sp\"\r\n                android:drawableStart=\"@drawable/location\"/>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/quantity\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/address\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginBottom=\"10dp\">\r\n                <TextView\r\n                    android:id=\"@+id/btn_decrease\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"-\"\r\n                    android:textColor=\"#9E9E9E\"\r\n                    android:textSize=\"24sp\"\r\n                    android:padding=\"8dp\"\r\n                    android:gravity=\"center\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/tv_quantity\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_marginStart=\"8dp\"\r\n                    android:layout_marginEnd=\"8dp\"\r\n                    android:layout_marginBottom=\"8dp\"\r\n                    android:gravity=\"center\"\r\n                    android:text=\"1\"\r\n                    android:textSize=\"18sp\"\r\n                    android:textColor=\"#212121\"\r\n                    android:fontFamily=\"@font/gabarito\"\r\n                    android:background=\"@drawable/round_border\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/btn_increase\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"+\"\r\n                    android:textColor=\"#4CAF50\"\r\n                    android:textSize=\"24sp\"\r\n                    android:padding=\"8dp\"\r\n                    android:gravity=\"center\"/>\r\n            </LinearLayout>\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/product_description\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/quantity\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginEnd=\"16dp\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:text=\"@string/description\"\r\n                    android:textSize=\"16sp\"\r\n                    android:fontFamily=\"@font/gabarito\"\r\n                    android:id=\"@+id/description_title\"\r\n                    android:textColor=\"@color/black\"/>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:id=\"@+id/description\"\r\n                    android:layout_below=\"@+id/description_title\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginEnd=\"16dp\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:textSize=\"13sp\"\r\n                    android:text=\"@string/descriptions\"\r\n                    android:maxLines=\"3\"\r\n                    android:ellipsize=\"end\"/>\r\n\r\n                <ImageButton\r\n                    android:id=\"@+id/btn_expand\"\r\n                    android:layout_width=\"32dp\"\r\n                    android:layout_height=\"32dp\"\r\n                    android:layout_below=\"@+id/description\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:src=\"@drawable/down\"\r\n                    android:background=\"@color/transparent\"/>\r\n            </RelativeLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/shop_info\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/product_description\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <androidx.cardview.widget.CardView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_margin=\"8dp\"\r\n                    android:background=\"@color/background_light\"\r\n                    app:cardElevation=\"0dp\">\r\n\r\n                    <LinearLayout\r\n                        android:id=\"@+id/store\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:orientation=\"horizontal\"\r\n                        android:padding=\"16dp\">\r\n\r\n                        <de.hdodenhof.circleimageview.CircleImageView\r\n                            android:id=\"@+id/shop_avatar\"\r\n                            android:layout_width=\"40dp\"\r\n                            android:layout_height=\"40dp\"\r\n                            android:src=\"@drawable/user\"\r\n                            app:civ_border_width=\"2dp\"\r\n                            app:civ_border_color=\"#FF000000\"\r\n                            android:layout_marginEnd=\"16dp\"/>\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/shop_name\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Tên người bán\"\r\n                            android:textSize=\"16sp\"\r\n                            android:textStyle=\"bold\"\r\n                            android:textColor=\"#000000\"/>\r\n                    </LinearLayout>\r\n                </androidx.cardview.widget.CardView>\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/rating\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/shop_info\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:orientation=\"horizontal\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_gravity=\"center\"\r\n                    android:textSize=\"16sp\"\r\n                    android:text=\"Đánh giá sản phẩm\"\r\n                    android:fontFamily=\"@font/gabarito\"\r\n                    android:id=\"@+id/quantity_title\"\r\n                    android:textColor=\"@color/black\"/>\r\n\r\n                <RatingBar\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:rating=\"4.5\"\r\n                    style=\"?android:attr/ratingBarStyleIndicator\"\r\n                    android:progressTint=\"#FFCC01\"\r\n                    android:id=\"@+id/totalRating\"\r\n                    android:layout_marginStart=\"40dp\"/>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/reviews\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/rating\">\r\n\r\n                <de.hdodenhof.circleimageview.CircleImageView\r\n                    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n                    android:id=\"@+id/user_avatar\"\r\n                    android:layout_width=\"40dp\"\r\n                    android:layout_height=\"40dp\"\r\n                    android:src=\"@drawable/user\"\r\n                    app:civ_border_width=\"2dp\"\r\n                    app:civ_border_color=\"#FF000000\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginTop=\"16dp\"/>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\"\r\n                    android:layout_weight=\"1\"\r\n                    android:padding=\"10dp\"\r\n                    android:id=\"@+id/user_rv\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/user_name\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"User name\"\r\n                        android:textStyle=\"bold\"\r\n                        android:textSize=\"16sp\"\r\n                        android:textColor=\"#000000\" />\r\n\r\n                    <RatingBar\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:rating=\"3\"\r\n                        style=\"?android:attr/ratingBarStyleIndicator\"\r\n                        android:progressTint=\"#FFCC01\"\r\n                        android:id=\"@+id/userRating\"/>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/user_review\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"4dp\"\r\n                        android:text=\"@string/user_review\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textColor=\"#616161\" />\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_below=\"@id/reviews\"/>\r\n\r\n        </RelativeLayout>\r\n    </ScrollView>\r\n\r\n    <RelativeLayout\r\n        android:id=\"@+id/footer\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentBottom=\"true\">\r\n\r\n        <Button\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"60dp\"\r\n            android:layout_marginStart=\"48dp\"\r\n            android:layout_marginEnd=\"48dp\"\r\n            android:backgroundTint=\"@color/green\"\r\n            app:cornerRadius=\"24dp\"\r\n            android:text=\"@string/add_cart\"/>\r\n    </RelativeLayout>\r\n</RelativeLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_product_detail.xml b/app/src/main/res/layout/activity_product_detail.xml
----- a/app/src/main/res/layout/activity_product_detail.xml	
--+++ b/app/src/main/res/layout/activity_product_detail.xml	
--@@ -5,26 +5,23 @@
--     android:id="@+id/main1"
--     android:layout_width="match_parent"
--     android:layout_height="match_parent"
--+    android:padding="16dp"
--     tools:context=".ui.ProductPage.ProductDetailActivity">
--+
--     <RelativeLayout
--+        android:id="@+id/header"
--         android:layout_width="match_parent"
--         android:layout_height="wrap_content"
---        android:id="@+id/header">
--+        android:padding="8dp">
-- 
--         <ImageButton
--             android:id="@+id/btn_back"
--             android:layout_width="32dp"
--             android:layout_height="32dp"
---            android:layout_marginStart="24dp"
---            android:layout_marginTop="16dp"
---            android:layout_marginBottom="8dp"
--+            android:layout_marginStart="8dp"
--+            android:layout_marginTop="8dp"
--             android:background="@color/background_light"
--             android:src="@drawable/chevron_left"
---            app:layout_constraintEnd_toEndOf="parent"
---            app:layout_constraintHorizontal_bias="0.0"
---            app:layout_constraintStart_toStartOf="parent"
---            app:layout_constraintTop_toTopOf="parent"
---            tools:ignore="MissingConstraints"
--             android:backgroundTint="@color/white"/>
--     </RelativeLayout>
-- 
--@@ -32,12 +29,9 @@
--         android:id="@+id/scrollView"
--         android:layout_width="match_parent"
--         android:layout_height="wrap_content"
---        android:layout_marginTop="4dp"
---        app:layout_constraintTop_toBottomOf="@+id/header"
---        tools:layout_editor_absoluteX="0dp"
--         android:layout_below="@id/header"
---        android:scrollbars="none"
---        android:layout_above="@id/footer">
--+        android:layout_above="@id/footer"
--+        android:scrollbars="none">
-- 
--         <RelativeLayout
--             android:id="@+id/product_detail"
--@@ -53,14 +47,26 @@
--                 app:iss_period="1000"
--                 app:iss_title_background="@color/transparent"/>
-- 
--+            <TextView
--+                android:id="@+id/product_price"
--+                android:layout_width="wrap_content"
--+                android:layout_height="wrap_content"
--+                android:layout_marginStart="16dp"
--+                android:layout_marginEnd="16dp"
--+                android:layout_marginBottom="8dp"
--+                android:text="@string/price"
--+                android:layout_below="@+id/product_name"
--+                android:fontFamily="@font/gabarito"
--+                android:textSize="28sp"
--+                android:textColor="@android:color/holo_red_dark"/>
--+
--             <TextView
--                 android:id="@+id/product_name"
--                 android:layout_width="match_parent"
--                 android:layout_height="wrap_content"
---                android:layout_marginTop="10dp"
--+                android:layout_marginTop="15dp"
--                 android:layout_marginStart="16dp"
---                android:layout_marginEnd="24dp"
---                android:layout_marginBottom="8dp"
--+                android:layout_marginEnd="16dp"
--                 android:text="@string/product_name"
--                 android:layout_below="@+id/product_image"
--                 android:fontFamily="@font/gabarito"
--@@ -68,25 +74,12 @@
--                 android:textAllCaps="true"
--                 android:textColor="@color/black"/>
-- 
---            <TextView
---                android:id="@+id/product_price"
---                android:layout_width="wrap_content"
---                android:layout_height="wrap_content"
---                android:layout_marginStart="24dp"
---                android:layout_marginEnd="24dp"
---                android:layout_marginBottom="8dp"
---                android:text="@string/price"
---                android:layout_below="@+id/product_name"
---                android:fontFamily="@font/gabarito"
---                android:textSize="24sp"
---                android:textColor="@android:color/holo_red_dark"/>
---
--             <TextView
--                 android:id="@+id/address"
--                 android:layout_width="wrap_content"
--                 android:layout_height="wrap_content"
---                android:layout_marginStart="24dp"
---                android:layout_marginEnd="24dp"
--+                android:layout_marginStart="16dp"
--+                android:layout_marginEnd="16dp"
--                 android:layout_marginBottom="16dp"
--                 android:text="@string/address"
--                 android:layout_below="@+id/product_price"
--@@ -100,7 +93,9 @@
--                 android:layout_height="wrap_content"
--                 android:layout_below="@+id/address"
--                 android:layout_marginStart="16dp"
---                android:layout_marginBottom="10dp">
--+                android:layout_marginBottom="10dp"
--+                android:orientation="horizontal">
--+
--                 <TextView
--                     android:id="@+id/btn_decrease"
--                     android:layout_width="30dp"
--@@ -143,26 +138,26 @@
--                 android:layout_below="@+id/quantity">
-- 
--                 <TextView
--+                    android:id="@+id/description_title"
--                     android:layout_width="match_parent"
--                     android:layout_height="wrap_content"
---                    android:layout_marginStart="16dp"
--+                    android:layout_marginStart="15dp"
--                     android:layout_marginEnd="16dp"
--                     android:layout_marginTop="8dp"
--                     android:text="@string/description"
---                    android:textSize="16sp"
--+                    android:textSize="17sp"
--                     android:fontFamily="@font/gabarito"
---                    android:id="@+id/description_title"
--                     android:textColor="@color/black"/>
-- 
--                 <TextView
--+                    android:id="@+id/description"
--                     android:layout_width="match_parent"
--                     android:layout_height="wrap_content"
---                    android:id="@+id/description"
--                     android:layout_below="@+id/description_title"
--                     android:layout_marginStart="16dp"
--                     android:layout_marginEnd="16dp"
--                     android:layout_marginTop="8dp"
---                    android:textSize="13sp"
--+                    android:textSize="15sp"
--                     android:text="@string/descriptions"
--                     android:maxLines="3"
--                     android:ellipsize="end"/>
--@@ -183,7 +178,9 @@
--                 android:layout_width="match_parent"
--                 android:layout_height="wrap_content"
--                 android:layout_below="@+id/product_description"
--+                android:layout_margin="8dp"
--                 android:layout_marginTop="24dp"
--+                android:background="@color/transparent"
--                 android:orientation="vertical">
-- 
--                 <androidx.cardview.widget.CardView
--@@ -197,29 +194,27 @@
--                         android:id="@+id/store"
--                         android:layout_width="match_parent"
--                         android:layout_height="wrap_content"
---                        android:orientation="horizontal"
---                        android:padding="16dp">
--+                        android:orientation="horizontal">
-- 
--                         <de.hdodenhof.circleimageview.CircleImageView
---                            android:id="@+id/shop_avatar"
---                            android:layout_width="40dp"
---                            android:layout_height="40dp"
--+                            android:id="@+id/store_img"
--+                            android:layout_width="50dp"
--+                            android:layout_height="50dp"
--+                            android:layout_marginEnd="16dp"
--                             android:src="@drawable/user"
---                            app:civ_border_width="2dp"
--                             app:civ_border_color="#FF000000"
---                            android:layout_marginEnd="16dp"/>
--+                            app:civ_border_width="2dp" />
-- 
--                         <TextView
---                            android:id="@+id/shop_name"
--+                            android:id="@+id/store_name"
--                             android:layout_width="wrap_content"
--                             android:layout_height="wrap_content"
--                             android:text="Tên người bán"
---                            android:textSize="16sp"
---                            android:textStyle="bold"
---                            android:textColor="#000000"/>
--+                            android:textColor="#000000"
--+                            android:textSize="20sp"
--+                            android:textStyle="bold" />
--                     </LinearLayout>
--                 </androidx.cardview.widget.CardView>
---
--             </LinearLayout>
-- 
--             <LinearLayout
--@@ -228,8 +223,11 @@
--                 android:layout_height="wrap_content"
--                 android:layout_below="@+id/shop_info"
--                 android:layout_marginTop="24dp"
---                android:orientation="horizontal">
--+                android:orientation="horizontal"
--+                android:padding="8dp">
--+
--                 <TextView
--+                    android:id="@+id/quantity_title"
--                     android:layout_width="wrap_content"
--                     android:layout_height="wrap_content"
--                     android:layout_marginStart="16dp"
--@@ -237,16 +235,15 @@
--                     android:textSize="16sp"
--                     android:text="Đánh giá sản phẩm"
--                     android:fontFamily="@font/gabarito"
---                    android:id="@+id/quantity_title"
--                     android:textColor="@color/black"/>
-- 
--                 <RatingBar
--+                    android:id="@+id/totalRating"
--                     android:layout_width="wrap_content"
--                     android:layout_height="wrap_content"
--                     android:rating="4.5"
--                     style="?android:attr/ratingBarStyleIndicator"
--                     android:progressTint="#FFCC01"
---                    android:id="@+id/totalRating"
--                     android:layout_marginStart="40dp"/>
--             </LinearLayout>
-- 
--@@ -254,10 +251,10 @@
--                 android:id="@+id/reviews"
--                 android:layout_width="match_parent"
--                 android:layout_height="wrap_content"
---                android:layout_below="@+id/rating">
--+                android:layout_below="@+id/rating"
--+                android:padding="8dp">
-- 
--                 <de.hdodenhof.circleimageview.CircleImageView
---                    xmlns:app="http://schemas.android.com/apk/res-auto"
--                     android:id="@+id/user_avatar"
--                     android:layout_width="40dp"
--                     android:layout_height="40dp"
--@@ -268,12 +265,12 @@
--                     android:layout_marginTop="16dp"/>
-- 
--                 <LinearLayout
--+                    android:id="@+id/user_rv"
--                     android:layout_width="0dp"
--                     android:layout_height="wrap_content"
--                     android:orientation="vertical"
--                     android:layout_weight="1"
---                    android:padding="10dp"
---                    android:id="@+id/user_rv">
--+                    android:padding="10dp">
-- 
--                     <TextView
--                         android:id="@+id/user_name"
--@@ -285,12 +282,12 @@
--                         android:textColor="#000000" />
-- 
--                     <RatingBar
--+                        android:id="@+id/userRating"
--                         android:layout_width="wrap_content"
--                         android:layout_height="wrap_content"
--                         android:rating="3"
--                         style="?android:attr/ratingBarStyleIndicator"
---                        android:progressTint="#FFCC01"
---                        android:id="@+id/userRating"/>
--+                        android:progressTint="#FFCC01"/>
-- 
--                     <TextView
--                         android:id="@+id/user_review"
--@@ -302,12 +299,12 @@
--                         android:textColor="#616161" />
--                 </LinearLayout>
--             </LinearLayout>
--+
--             <androidx.recyclerview.widget.RecyclerView
--                 android:layout_width="match_parent"
--                 android:layout_height="wrap_content"
--                 android:layout_marginTop="16dp"
--                 android:layout_below="@id/reviews"/>
---
--         </RelativeLayout>
--     </ScrollView>
-- 
--@@ -315,7 +312,8 @@
--         android:id="@+id/footer"
--         android:layout_width="match_parent"
--         android:layout_height="wrap_content"
---        android:layout_alignParentBottom="true">
--+        android:layout_alignParentBottom="true"
--+        android:padding="16dp">
-- 
--         <Button
--             android:layout_width="match_parent"
--Index: app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.ui.Homepage;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.SpacesItemDecoration;\r\nimport com.example.agrimart.adapter.CategoryAdapter;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.FragmentHomeBinding;\r\nimport com.example.agrimart.ui.ProductPage.ProductDetailActivity;\r\nimport com.example.agrimart.viewmodel.HomeFragmentViewModel;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class HomeFragment extends Fragment {\r\n    ImageButton btnSearch;\r\n    TextView search;\r\n    HomeFragmentViewModel viewModel;\r\n    FragmentHomeBinding binding;\r\n\r\n    public HomeFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    public static HomeFragment newInstance() {\r\n        return new HomeFragment();\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        binding=DataBindingUtil.inflate(inflater,R.layout.fragment_home,container,false);\r\n        viewModel=new ViewModelProvider(this).get(HomeFragmentViewModel.class);\r\n\r\n        int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);\r\n        binding.setViewmodel(viewModel);\r\n        View view = binding.getRoot();\r\n\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\r\n            Window window = getActivity().getWindow();\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n        }\r\n\r\n//        if (getActivity() != null) {\r\n//            getActivity().getWindow().setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n//        }\r\n        viewModel.getData();\r\n        viewModel.categories.observe(getViewLifecycleOwner(), categories -> {\r\n            if (categories != null) {\r\n                CategoryAdapter categoryAdapter = new CategoryAdapter(categories);\r\n                binding.rvCategories.setAdapter(categoryAdapter);\r\n                binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));\r\n                Log.d(\"duy1\", \"onCreateView: \" + categories.size());\r\n            }\r\n        });\r\n\r\n\r\n        List<Product> products = new ArrayList<>();\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n\r\n        ProductAdapter productAdapter = new ProductAdapter(products, product -> {\r\n            Intent intent = new Intent(getContext(), ProductDetailActivity.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        binding.rvProducts.setLayoutManager(new GridLayoutManager(getContext(), 2));\r\n        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));\r\n        binding.rvProducts.setAdapter(productAdapter);\r\n\r\n        addControls(view);\r\n        addEvents();\r\n\r\n        return view;\r\n    }\r\n\r\n    private void addEvents() {\r\n        btnSearch.setOnClickListener(View -> {\r\n            Intent intent=new Intent(getActivity(), SearchActivity.class);\r\n            getActivity().startActivity(intent);\r\n        });\r\n\r\n        search.setOnClickListener(View -> {\r\n            Intent intent=new Intent(getContext(), SearchActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n\r\n    private void addControls(View view) {\r\n        btnSearch = view.findViewById(R.id.search_icon);\r\n        search = view.findViewById(R.id.search_input);\r\n    }\r\n\r\n    private void loadFragment(Fragment fragment) {\r\n        getActivity().getSupportFragmentManager().beginTransaction()\r\n                .replace(R.id.fragment_container, fragment)\r\n                .commit();\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
----- a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	
--+++ b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	
--@@ -3,15 +3,12 @@
-- import android.content.Intent;
-- import android.os.Build;
-- import android.os.Bundle;
---
-- import androidx.annotation.NonNull;
-- import androidx.core.content.ContextCompat;
-- import androidx.databinding.DataBindingUtil;
-- import androidx.fragment.app.Fragment;
-- import androidx.lifecycle.ViewModelProvider;
-- import androidx.recyclerview.widget.GridLayoutManager;
---import androidx.recyclerview.widget.RecyclerView;
---
-- import android.util.Log;
-- import android.view.LayoutInflater;
-- import android.view.View;
--@@ -25,23 +22,22 @@
-- import com.example.agrimart.SpacesItemDecoration;
-- import com.example.agrimart.adapter.CategoryAdapter;
-- import com.example.agrimart.adapter.ProductAdapter;
---import com.example.agrimart.data.model.Category;
-- import com.example.agrimart.data.model.Product;
-- import com.example.agrimart.databinding.FragmentHomeBinding;
-- import com.example.agrimart.ui.ProductPage.ProductDetailActivity;
-- import com.example.agrimart.viewmodel.HomeFragmentViewModel;
-- 
---import java.util.ArrayList;
-- import java.util.List;
-- 
-- public class HomeFragment extends Fragment {
--+    private static final String TAG = "HomeFragment";
--     ImageButton btnSearch;
--     TextView search;
--     HomeFragmentViewModel viewModel;
--     FragmentHomeBinding binding;
-- 
--     public HomeFragment() {
---        // Required empty public constructor
--+
--     }
-- 
--     public static HomeFragment newInstance() {
--@@ -54,10 +50,9 @@
--     }
-- 
--     @Override
---    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
---                             Bundle savedInstanceState) {
---        binding=DataBindingUtil.inflate(inflater,R.layout.fragment_home,container,false);
---        viewModel=new ViewModelProvider(this).get(HomeFragmentViewModel.class);
--+    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
--+        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_home, container, false);
--+        viewModel = new ViewModelProvider(this).get(HomeFragmentViewModel.class);
-- 
--         int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);
--         binding.setViewmodel(viewModel);
--@@ -69,36 +64,35 @@
--             window.setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));
--         }
-- 
---//        if (getActivity() != null) {
---//            getActivity().getWindow().setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));
---//        }
--         viewModel.getData();
--+        viewModel.getProducts();
--+
--         viewModel.categories.observe(getViewLifecycleOwner(), categories -> {
--             if (categories != null) {
--                 CategoryAdapter categoryAdapter = new CategoryAdapter(categories);
--                 binding.rvCategories.setAdapter(categoryAdapter);
--                 binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));
---                Log.d("duy1", "onCreateView: " + categories.size());
--+                Log.d(TAG, "Categories loaded: " + categories.size());
--             }
--         });
-- 
---
---        List<Product> products = new ArrayList<>();
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---
---        ProductAdapter productAdapter = new ProductAdapter(products, product -> {
---            Intent intent = new Intent(getContext(), ProductDetailActivity.class);
---            startActivity(intent);
---        });
--+        viewModel.products.observe(getViewLifecycleOwner(), products -> {
--+            if (products != null) {
--+                ProductAdapter productAdapter = new ProductAdapter(products, product -> {
--+                    try {
--+                        Intent intent = new Intent(getContext(), ProductDetailActivity.class);
--+                        intent.putExtra("product", product);
--+                        intent.putExtra("storeId", product.getStoreId());
--+                        startActivity(intent);
--+                    } catch (Exception e) {
-- 
---        binding.rvProducts.setLayoutManager(new GridLayoutManager(getContext(), 2));
---        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
---        binding.rvProducts.setAdapter(productAdapter);
--+                    }
--+                });
--+                binding.rvProducts.setLayoutManager(new GridLayoutManager(getContext(), 2));
--+                binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
--+                binding.rvProducts.setAdapter(productAdapter);
--+            }
--+        });
-- 
--         addControls(view);
--         addEvents();
--@@ -107,13 +101,13 @@
--     }
-- 
--     private void addEvents() {
---        btnSearch.setOnClickListener(View -> {
---            Intent intent=new Intent(getActivity(), SearchActivity.class);
--+        btnSearch.setOnClickListener(v -> {
--+            Intent intent = new Intent(getActivity(), SearchActivity.class);
--             getActivity().startActivity(intent);
--         });
-- 
---        search.setOnClickListener(View -> {
---            Intent intent=new Intent(getContext(), SearchActivity.class);
--+        search.setOnClickListener(v -> {
--+            Intent intent = new Intent(getContext(), SearchActivity.class);
--             startActivity(intent);
--         });
--     }
--Index: app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.ui.ProductPage;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.ImageButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\n\r\nimport com.denzcoskun.imageslider.ImageSlider;\r\nimport com.denzcoskun.imageslider.constants.ScaleTypes;\r\nimport com.denzcoskun.imageslider.models.SlideModel;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.ui.Store.StoreActivity;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class ProductDetailActivity extends AppCompatActivity {\r\n    ImageButton btn_back, btnExpand;\r\n    TextView description;\r\n    boolean isExpanded = false;\r\n    LinearLayout store;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_product_detail);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        description = findViewById(R.id.description);\r\n        btnExpand = findViewById(R.id.btn_expand);\r\n\r\n        btn_back = findViewById(R.id.btn_back);\r\n        btn_back.setOnClickListener(v -> finish());\r\n        store = findViewById(R.id.store);\r\n\r\n        ArrayList<SlideModel> imgList = new ArrayList<>();\r\n        imgList.add(new SlideModel(R.drawable.banana, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.apple, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.banana, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.apple, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.banana, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.apple, \"\", ScaleTypes.FIT));\r\n\r\n        ImageSlider imageSlider = findViewById(R.id.product_image);\r\n        imageSlider.setImageList(imgList, ScaleTypes.FIT);\r\n\r\n        btnExpand.setOnClickListener(v -> {\r\n            if (isExpanded) {\r\n                description.setMaxLines(3);\r\n                btnExpand.setImageResource(R.drawable.down);\r\n            } else {\r\n                description.setMaxLines(Integer.MAX_VALUE);\r\n                btnExpand.setImageResource(R.drawable.arrowhead_up);\r\n            }\r\n            isExpanded = !isExpanded;\r\n        });\r\n\r\n        store.setOnClickListener(v -> {\r\n            Intent intent = new Intent(ProductDetailActivity.this, StoreActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java b/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java
----- a/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java	
--+++ b/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java	
--@@ -3,28 +3,40 @@
-- import android.content.Intent;
-- import android.os.Bundle;
-- import android.widget.ImageButton;
--+import android.widget.ImageView;
-- import android.widget.LinearLayout;
-- import android.widget.TextView;
-- 
-- import androidx.activity.EdgeToEdge;
--+import androidx.annotation.NonNull;
-- import androidx.appcompat.app.AppCompatActivity;
-- import androidx.core.graphics.Insets;
-- import androidx.core.view.ViewCompat;
-- import androidx.core.view.WindowInsetsCompat;
--+import androidx.lifecycle.Observer;
--+import androidx.lifecycle.ViewModelProvider;
-- 
--+import com.bumptech.glide.Glide;
-- import com.denzcoskun.imageslider.ImageSlider;
-- import com.denzcoskun.imageslider.constants.ScaleTypes;
-- import com.denzcoskun.imageslider.models.SlideModel;
-- import com.example.agrimart.R;
--+import com.example.agrimart.data.model.Product;
--+import com.example.agrimart.data.model.Store;
-- import com.example.agrimart.ui.Store.StoreActivity;
--+import com.example.agrimart.viewmodel.ProductDetailViewModel;
--+
-- 
-- import java.util.ArrayList;
-- 
-- public class ProductDetailActivity extends AppCompatActivity {
---    ImageButton btn_back, btnExpand;
---    TextView description;
---    boolean isExpanded = false;
---    LinearLayout store;
--+    private static final String TAG = "ProductDetailActivity";
--+    private ImageButton btn_back, btnExpand;
--+    private TextView description, productName, productPrice, storeName, storeAddress, storePhoneNumber;
--+    private ImageView storeAvatar;
--+    private boolean isExpanded = false;
--+    private LinearLayout store;
--+    private ProductDetailViewModel viewModel;
-- 
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--@@ -37,24 +49,51 @@
--             return insets;
--         });
-- 
--+        viewModel = new ViewModelProvider(this).get(ProductDetailViewModel.class);
--+
--         description = findViewById(R.id.description);
--+        productName = findViewById(R.id.product_name);
--+        productPrice = findViewById(R.id.product_price);
--         btnExpand = findViewById(R.id.btn_expand);
---
--         btn_back = findViewById(R.id.btn_back);
---        btn_back.setOnClickListener(v -> finish());
--         store = findViewById(R.id.store);
--+        storeName = findViewById(R.id.store_name);
--+        storeAddress = findViewById(R.id.address);
--+        storeAvatar = findViewById(R.id.store_img);
--+
--+        btn_back.setOnClickListener(v -> finish());
--+
--+        Intent intent = getIntent();
--+        Product product = (Product) intent.getSerializableExtra("product");
--+
--+        if (product != null) {
--+            productName.setText(product.getName());
--+            productPrice.setText(String.format("%,.0f đ", product.getPrice()));
--+            description.setText(product.getDescription());
-- 
---        ArrayList<SlideModel> imgList = new ArrayList<>();
---        imgList.add(new SlideModel(R.drawable.banana, "", ScaleTypes.FIT));
---        imgList.add(new SlideModel(R.drawable.apple, "", ScaleTypes.FIT));
---        imgList.add(new SlideModel(R.drawable.banana, "", ScaleTypes.FIT));
---        imgList.add(new SlideModel(R.drawable.apple, "", ScaleTypes.FIT));
---        imgList.add(new SlideModel(R.drawable.banana, "", ScaleTypes.FIT));
---        imgList.add(new SlideModel(R.drawable.apple, "", ScaleTypes.FIT));
---
---        ImageSlider imageSlider = findViewById(R.id.product_image);
---        imageSlider.setImageList(imgList, ScaleTypes.FIT);
--+            ArrayList<SlideModel> imgList = new ArrayList<>();
--+            if (product.getImages() != null) {
--+                for (String url : product.getImages()) {
--+                    imgList.add(new SlideModel(url, "", ScaleTypes.FIT));
--+                }
--+            }
--+            ImageSlider imageSlider = findViewById(R.id.product_image);
--+            imageSlider.setImageList(imgList, ScaleTypes.FIT);
-- 
--+            viewModel.loadStoreInfo(product.getStoreId());
--+        }
--+
--+        viewModel.getStoreInfo().observe(this, new Observer<Store>() {
--+            @Override
--+            public void onChanged(Store storeInfo) {
--+                if (storeInfo != null) {
--+                    storeName.setText(storeInfo.getName());
--+                    storeAddress.setText(storeInfo.getFullAddress());
--+                    Glide.with(ProductDetailActivity.this).load(storeInfo.getAvatarUrl()).into(storeAvatar);
--+                }
--+            }
--+        });
--+
--         btnExpand.setOnClickListener(v -> {
--             if (isExpanded) {
--                 description.setMaxLines(3);
--@@ -67,8 +106,9 @@
--         });
-- 
--         store.setOnClickListener(v -> {
---            Intent intent = new Intent(ProductDetailActivity.this, StoreActivity.class);
---            startActivity(intent);
--+            Intent storeIntent = new Intent(ProductDetailActivity.this, StoreActivity.class);
--+            storeIntent.putExtra("storeId", product.getStoreId());
--+            startActivity(storeIntent);
--         });
--     }
---}
--\ No newline at end of file
--+}
--Index: app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.viewmodel;\r\n\r\nimport android.util.Log;\r\n\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.List;\r\n\r\npublic class HomeFragmentViewModel extends ViewModel {\r\n    public MutableLiveData<List<Category>> categories;\r\n\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    public HomeFragmentViewModel() {\r\n        categories = new MutableLiveData<>();\r\n    }\r\n\r\n    public void getData(){\r\n        db.collection(\"categories\")\r\n                .orderBy(\"id\")\r\n                .get().addOnCompleteListener(task -> {\r\n            if (task.isSuccessful()) {\r\n                List<Category> categoryList = task.getResult().toObjects(Category.class);\r\n                categories.setValue(categoryList);\r\n            } else {\r\n                Log.e(\"HomeFragmentViewModel\", \"Error getting documents: \", task.getException());\r\n            }\r\n        });\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java
----- a/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java	
--+++ b/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java	
--@@ -6,28 +6,47 @@
-- import androidx.lifecycle.ViewModel;
-- 
-- import com.example.agrimart.data.model.Category;
--+import com.example.agrimart.data.model.Product;
-- import com.google.firebase.firestore.FirebaseFirestore;
-- 
-- import java.util.List;
-- 
-- public class HomeFragmentViewModel extends ViewModel {
--     public MutableLiveData<List<Category>> categories;
--+    public MutableLiveData<List<Product>> products;
-- 
--     FirebaseFirestore db = FirebaseFirestore.getInstance();
--+
--     public HomeFragmentViewModel() {
--         categories = new MutableLiveData<>();
--+        products = new MutableLiveData<>();
--     }
-- 
---    public void getData(){
--+    public void getData() {
--         db.collection("categories")
--                 .orderBy("id")
---                .get().addOnCompleteListener(task -> {
---            if (task.isSuccessful()) {
---                List<Category> categoryList = task.getResult().toObjects(Category.class);
---                categories.setValue(categoryList);
---            } else {
---                Log.e("HomeFragmentViewModel", "Error getting documents: ", task.getException());
---            }
---        });
--+                .get()
--+                .addOnCompleteListener(task -> {
--+                    if (task.isSuccessful()) {
--+                        List<Category> categoryList = task.getResult().toObjects(Category.class);
--+                        categories.setValue(categoryList);
--+                    } else {
--+                        Log.e("HomeFragmentViewModel", "Error getting categories: ", task.getException());
--+                    }
--+                });
--+    }
--+
--+    public void getProducts() {
--+        db.collection("products")
--+                .orderBy("product_id")
--+                .get()
--+                .addOnCompleteListener(task -> {
--+                    if (task.isSuccessful()) {
--+                        List<Product> productList = task.getResult().toObjects(Product.class);
--+                        products.setValue(productList);
--+                    } else {
--+                        Log.e("HomeFragmentViewModel", "Error getting products: ", task.getException());
--+                    }
--+                });
--     }
---}
--\ No newline at end of file
--+}
--Index: app/src/main/java/com/example/agrimart/data/model/User.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.data.model;\r\n\r\nimport com.google.gson.annotations.SerializedName;\r\nimport java.io.Serializable;\r\nimport java.util.Date;\r\n\r\npublic class User implements Serializable {\r\n    @SerializedName(\"userId\")\r\n    private String userId;\r\n    @SerializedName(\"role\")\r\n    private String role;\r\n    @SerializedName(\"fullName\")\r\n    private String fullName;\r\n    @SerializedName(\"email\")\r\n    private String email;\r\n    @SerializedName(\"phoneNumber\")\r\n    private String phoneNumber;\r\n    @SerializedName(\"password\")\r\n    private String password;\r\n    @SerializedName(\"address\")\r\n    private Address address;\r\n    @SerializedName(\"storeName\")\r\n    private String storeName;\r\n    @SerializedName(\"storeAddress\")\r\n    private Address storeAddress;\r\n    @SerializedName(\"storeImage\")\r\n    private String storeImage;\r\n    @SerializedName(\"storeRating\")\r\n    private double storeRating;\r\n    @SerializedName(\"paymentAccount\")\r\n    private PaymentAccount paymentAccount;\r\n    @SerializedName(\"createdAt\")\r\n    private Date createdAt;\r\n    @SerializedName(\"updatedAt\")\r\n    private Date updatedAt;\r\n\r\n    public User(String userId, String role, String fullName, String email, String phoneNumber, String password, Address address, String storeName, Address storeAddress, String storeImage, double storeRating, PaymentAccount paymentAccount, Date createdAt, Date updatedAt) {\r\n        this.userId = userId;\r\n        this.role = role;\r\n        this.fullName = fullName;\r\n        this.email = email;\r\n        this.phoneNumber = phoneNumber;\r\n        this.password = password;\r\n        this.address = address;\r\n        this.storeName = storeName;\r\n        this.storeAddress = storeAddress;\r\n        this.storeImage = storeImage;\r\n        this.storeRating = storeRating;\r\n        this.paymentAccount = paymentAccount;\r\n        this.createdAt = createdAt;\r\n        this.updatedAt = updatedAt;\r\n    }\r\n\r\n    public String getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public void setUserId(String userId) {\r\n        this.userId = userId;\r\n    }\r\n\r\n    public String getRole() {\r\n        return role;\r\n    }\r\n\r\n    public void setRole(String role) {\r\n        this.role = role;\r\n    }\r\n\r\n    public String getFullName() {\r\n        return fullName;\r\n    }\r\n\r\n    public void setFullName(String fullName) {\r\n        this.fullName = fullName;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getPhoneNumber() {\r\n        return phoneNumber;\r\n    }\r\n\r\n    public void setPhoneNumber(String phoneNumber) {\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    public Address getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(Address address) {\r\n        this.address = address;\r\n    }\r\n\r\n    public String getStoreName() {\r\n        return storeName;\r\n    }\r\n\r\n    public void setStoreName(String storeName) {\r\n        this.storeName = storeName;\r\n    }\r\n\r\n    public Address getStoreAddress() {\r\n        return storeAddress;\r\n    }\r\n\r\n    public void setStoreAddress(Address storeAddress) {\r\n        this.storeAddress = storeAddress;\r\n    }\r\n\r\n    public String getStoreImage() {\r\n        return storeImage;\r\n    }\r\n\r\n    public void setStoreImage(String storeImage) {\r\n        this.storeImage = storeImage;\r\n    }\r\n\r\n    public double getStoreRating() {\r\n        return storeRating;\r\n    }\r\n\r\n    public void setStoreRating(double storeRating) {\r\n        this.storeRating = storeRating;\r\n    }\r\n\r\n    public PaymentAccount getPaymentAccount() {\r\n        return paymentAccount;\r\n    }\r\n\r\n    public void setPaymentAccount(PaymentAccount paymentAccount) {\r\n        this.paymentAccount = paymentAccount;\r\n    }\r\n\r\n    public Date getCreatedAt() {\r\n        return createdAt;\r\n    }\r\n\r\n    public void setCreatedAt(Date createdAt) {\r\n        this.createdAt = createdAt;\r\n    }\r\n\r\n    public Date getUpdatedAt() {\r\n        return updatedAt;\r\n    }\r\n\r\n    public void setUpdatedAt(Date updatedAt) {\r\n        this.updatedAt = updatedAt;\r\n    }\r\n\r\n//    public static class Address {\r\n//        @SerializedName(\"street\")\r\n//        private String street;\r\n//        @SerializedName(\"district\")\r\n//        private String district;\r\n//        @SerializedName(\"city\")\r\n//        private String city;\r\n//\r\n//        // Constructors, getters, and setters...\r\n//    }\r\n\r\n    public static class PaymentAccount {\r\n        @SerializedName(\"accountNumber\")\r\n        private String accountNumber;\r\n        @SerializedName(\"bankName\")\r\n        private String bankName;\r\n        @SerializedName(\"branchName\")\r\n        private String branchName;\r\n\r\n        // Constructors, getters, and setters...\r\n    }\r\n\r\n    // Getters and setters for User class fields\r\n    // ...\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/data/model/User.java b/app/src/main/java/com/example/agrimart/data/model/User.java
----- a/app/src/main/java/com/example/agrimart/data/model/User.java	
--+++ b/app/src/main/java/com/example/agrimart/data/model/User.java	
--@@ -1,3 +1,4 @@
--+// User.java
-- package com.example.agrimart.data.model;
-- 
-- import com.google.gson.annotations.SerializedName;
--@@ -34,6 +35,10 @@
--     @SerializedName("updatedAt")
--     private Date updatedAt;
-- 
--+    // No-argument constructor
--+    public User() {
--+    }
--+
--     public User(String userId, String role, String fullName, String email, String phoneNumber, String password, Address address, String storeName, Address storeAddress, String storeImage, double storeRating, PaymentAccount paymentAccount, Date createdAt, Date updatedAt) {
--         this.userId = userId;
--         this.role = role;
--@@ -163,16 +168,49 @@
--         this.updatedAt = updatedAt;
--     }
-- 
---//    public static class Address {
---//        @SerializedName("street")
---//        private String street;
---//        @SerializedName("district")
---//        private String district;
---//        @SerializedName("city")
---//        private String city;
---//
---//        // Constructors, getters, and setters...
---//    }
--+    public static class Address {
--+        @SerializedName("street")
--+        private String street;
--+        @SerializedName("district")
--+        private String district;
--+        @SerializedName("city")
--+        private String city;
--+
--+        public Address() {
--+        }
--+
--+        public Address(String street, String district, String city) {
--+            this.street = street;
--+            this.district = district;
--+            this.city = city;
--+        }
--+
--+        // Getters and setters...
--+
--+        public String getStreet() {
--+            return street;
--+        }
--+
--+        public void setStreet(String street) {
--+            this.street = street;
--+        }
--+
--+        public String getDistrict() {
--+            return district;
--+        }
--+
--+        public void setDistrict(String district) {
--+            this.district = district;
--+        }
--+
--+        public String getCity() {
--+            return city;
--+        }
--+
--+        public void setCity(String city) {
--+            this.city = city;
--+        }
--+    }
-- 
--     public static class PaymentAccount {
--         @SerializedName("accountNumber")
--@@ -182,9 +220,15 @@
--         @SerializedName("branchName")
--         private String branchName;
-- 
---        // Constructors, getters, and setters...
---    }
--+        public PaymentAccount() {
--+        }
--+
--+        public PaymentAccount(String accountNumber, String bankName, String branchName) {
--+            this.accountNumber = accountNumber;
--+            this.bankName = bankName;
--+            this.branchName = branchName;
--+        }
-- 
---    // Getters and setters for User class fields
---    // ...
--+        // Getters and setters...
--+    }
-- }
--\ No newline at end of file
--Index: app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java
--new file mode 100644
----- /dev/null	
--+++ b/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java	
--@@ -0,0 +1,56 @@
--+package com.example.agrimart.viewmodel;
--+
--+import androidx.lifecycle.LiveData;
--+import androidx.lifecycle.MutableLiveData;
--+import androidx.lifecycle.ViewModel;
--+
--+import com.example.agrimart.data.model.Store;
--+import com.google.firebase.firestore.DocumentSnapshot;
--+import com.google.firebase.firestore.FirebaseFirestore;
--+import com.google.firebase.firestore.ListenerRegistration;
--+
--+public class ProductDetailViewModel extends ViewModel {
--+    private final FirebaseFirestore db;
--+    private ListenerRegistration storeListener;
--+    private final MutableLiveData<Store> storeInfo = new MutableLiveData<>();
--+
--+    public ProductDetailViewModel() {
--+        db = FirebaseFirestore.getInstance();
--+    }
--+
--+    public LiveData<Store> getStoreInfo() {
--+        return storeInfo;
--+    }
--+
--+    public void loadStoreInfo(String storeId) {
--+        if (storeListener != null) {
--+            storeListener.remove();
--+        }
--+
--+        storeListener = db.collection("users").document(storeId)
--+                .addSnapshotListener((snapshot, e) -> {
--+                    if (e != null || snapshot == null || !snapshot.exists()) {
--+                        return;
--+                    }
--+                    String name = snapshot.getString("store_name");
--+                    String avatarUrl = snapshot.getString("userImage");
--+                    String street = snapshot.getString("store_address.street");
--+                    String ward = snapshot.getString("store_address.ward");
--+                    String district = snapshot.getString("store_address.district");
--+                    String city = snapshot.getString("store_address.city");
--+                    String phoneNumber = snapshot.getString("store_phone_number");
--+
--+                    Store info = new Store(name, avatarUrl, street, ward, district, city, phoneNumber);
--+                    storeInfo.setValue(info);
--+                });
--+    }
--+
--+    @Override
--+    protected void onCleared() {
--+        super.onCleared();
--+        if (storeListener != null) {
--+            storeListener.remove();
--+        }
--+    }
--+
--+}
--Index: app/src/main/java/com/example/agrimart/data/model/Store.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/data/model/Store.java b/app/src/main/java/com/example/agrimart/data/model/Store.java
--new file mode 100644
----- /dev/null	
--+++ b/app/src/main/java/com/example/agrimart/data/model/Store.java	
--@@ -0,0 +1,37 @@
--+package com.example.agrimart.data.model;
--+
--+public class Store {
--+    private final String name;
--+    private final String avatarUrl;
--+    private final String street;
--+    private final String ward;
--+    private final String district;
--+    private final String city;
--+    private final String phoneNumber;
--+
--+    public Store(String name, String avatarUrl, String street, String ward, String district, String city, String phoneNumber) {
--+        this.name = name;
--+        this.avatarUrl = avatarUrl;
--+        this.street = street;
--+        this.ward = ward;
--+        this.district = district;
--+        this.city = city;
--+        this.phoneNumber = phoneNumber;
--+    }
--+
--+    public String getName() {
--+        return name;
--+    }
--+
--+    public String getAvatarUrl() {
--+        return avatarUrl;
--+    }
--+
--+    public String getFullAddress() {
--+        return street + ", " + ward + ", " + district + ", " + city;
--+    }
--+
--+    public String getPhoneNumber() {
--+        return phoneNumber;
--+    }
--+}
--Index: app/src/main/java/com/example/agrimart/data/model/Address.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.data.model;\r\n\r\nimport com.google.gson.annotations.SerializedName;\r\n\r\npublic class Address {\r\n    @SerializedName(\"default\")\r\n    private boolean isDefault;\r\n    @SerializedName(\"detailedAddress\")\r\n    private String detailedAddress;\r\n    @SerializedName(\"name\")\r\n    private String name;\r\n    @SerializedName(\"phone\")\r\n    private String phone;\r\n    @SerializedName(\"street\")\r\n    private String street;\r\n\r\n    public String getAddressId() {\r\n        return this.AddressId;\r\n    }\r\n\r\n    public void setAddressId(String AddressId) {\r\n        this.AddressId = AddressId;\r\n    }\r\n\r\n    @SerializedName(\"AddressId\")\r\n    private String AddressId;\r\n    public Address() {\r\n\r\n    }\r\n    // Constructor\r\n    public Address(String AddressId,String name, String phone, String street, String detailedAddress, boolean isDefault) {\r\n        this.name = name;\r\n        this.phone = phone;\r\n        this.street = street;\r\n        this.detailedAddress = detailedAddress;\r\n        this.isDefault = isDefault;\r\n        this.AddressId = AddressId;\r\n    }\r\n\r\n    // Getters and Setters\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getPhone() {\r\n        return phone;\r\n    }\r\n\r\n    public void setPhone(String phone) {\r\n        this.phone = phone;\r\n    }\r\n\r\n    public String getStreet() {\r\n        return street;\r\n    }\r\n\r\n    public void setStreet(String street) {\r\n        this.street = street;\r\n    }\r\n\r\n    public String getDetailedAddress() {\r\n        return detailedAddress;\r\n    }\r\n\r\n    public void setDetailedAddress(String detailedAddress) {\r\n        this.detailedAddress = detailedAddress;\r\n    }\r\n\r\n    public boolean isDefault() {\r\n        return isDefault;\r\n    }\r\n\r\n    public void setDefault(boolean aDefault) {\r\n        isDefault = aDefault;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/data/model/Address.java b/app/src/main/java/com/example/agrimart/data/model/Address.java
----- a/app/src/main/java/com/example/agrimart/data/model/Address.java	
--+++ b/app/src/main/java/com/example/agrimart/data/model/Address.java	
--@@ -27,7 +27,7 @@
--     public Address() {
-- 
--     }
---    // Constructor
--+
--     public Address(String AddressId,String name, String phone, String street, String detailedAddress, boolean isDefault) {
--         this.name = name;
--         this.phone = phone;
-Index: .idea/shelf/Uncommitted_changes_before_rebase__Changes_1.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_rebase__Changes_1.xml b/.idea/shelf/Uncommitted_changes_before_rebase__Changes_1.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_rebase__Changes_1.xml	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-+++ /dev/null	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_rebase_[Changes]1" date="1730832353615" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_rebase_[Changes]1/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before rebase [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_rebase_[Changes]1/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_rebase_[Changes]1/shelved.patch b/.idea/shelf/Uncommitted_changes_before_rebase_[Changes]1/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_rebase_[Changes]1/shelved.patch	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-+++ /dev/null	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-@@ -1,54 +0,0 @@
--Index: app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.example.agrimart.databinding.CategoryItemBinding;\r\nimport com.denzcoskun.imageslider.models.SlideModel;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class CategoryAdapter extends RecyclerView.Adapter<CategoryAdapter.MyViewHolder> {\r\n    private List<Category> categories;\r\n\r\n    public Category category;\r\n    public CategoryAdapter(List<Category> categories) {\r\n        this.categories = categories;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        CategoryItemBinding binding = CategoryItemBinding.inflate(LayoutInflater.from(parent.getContext()), parent, false);\r\n        return new MyViewHolder(binding);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        holder.bindData(categories.get(position));\r\n        holder.binding.getRoot().setOnClickListener(v -> {\r\n            category = categories.get(position);\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return categories.size();\r\n    }\r\n\r\n    public static class MyViewHolder extends RecyclerView.ViewHolder {\r\n        CategoryItemBinding binding;\r\n\r\n        public MyViewHolder(@NonNull CategoryItemBinding binding) {\r\n            super(binding.getRoot());\r\n            this.binding = binding;\r\n        }\r\n\r\n        public void bindData(Category category) {\r\n            Glide.with(binding.getRoot())\r\n                    .load(category.getImg())\r\n                    .into(binding.imgCate);\r\n\r\n            binding.tvName.setText(category.getName());\r\n        }\r\n    }\r\n}\r\n\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java b/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java
----- a/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java	(revision aaeb065a8f3edd30a5ad853ed31ea946b99700eb)
--+++ b/app/src/main/java/com/example/agrimart/adapter/CategoryAdapter.java	(date 1730832274853)
--@@ -7,6 +7,7 @@
-- import androidx.recyclerview.widget.RecyclerView;
-- 
-- import com.bumptech.glide.Glide;
--+import com.example.agrimart.R;
-- import com.example.agrimart.data.model.Category;
-- import com.example.agrimart.databinding.CategoryItemBinding;
-- import com.denzcoskun.imageslider.models.SlideModel;
--@@ -17,11 +18,13 @@
-- public class CategoryAdapter extends RecyclerView.Adapter<CategoryAdapter.MyViewHolder> {
--     private List<Category> categories;
-- 
--+    private int selectedPosition = -1;
--     public Category category;
--     public CategoryAdapter(List<Category> categories) {
--         this.categories = categories;
--     }
-- 
--+
--     @NonNull
--     @Override
--     public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
--@@ -32,8 +35,20 @@
--     @Override
--     public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {
--         holder.bindData(categories.get(position));
--+
--+        if (holder.getAdapterPosition() == selectedPosition) {
--+            holder.binding.getRoot().setBackgroundResource(android.R.color.holo_green_light);
--+        } else {
--+            holder.binding.getRoot().setBackgroundResource(android.R.color.transparent);
--+        }
--+
--         holder.binding.getRoot().setOnClickListener(v -> {
---            category = categories.get(position);
--+            category = categories.get(holder.getAdapterPosition());
--+            int prePos=selectedPosition;
--+            selectedPosition=holder.getAdapterPosition();
--+            notifyItemChanged(prePos);
--+            notifyItemChanged(holder.getAdapterPosition());
--+
--         });
--     }
-- 
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-+++ /dev/null	(revision b12ffe68bdd14704b88b112981ae7e8f7ee39a3e)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1" date="1730802371626" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/5/2024 5:25 PM [Changes]" />
--</changelist>
-\ No newline at end of file
-diff --git a/.idea/shelf/Uncommitted_changes_before_rebase_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_rebase_[Changes]/shelved.patch
-deleted file mode 100644
Index: app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingDelivereyFragment.java
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingDelivereyFragment.java b/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingDelivereyFragment.java
deleted file mode 100644
--- a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingDelivereyFragment.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,66 +0,0 @@
-package com.example.agrimart.ui.MyProfile.PurchasedOrders;
-
-import android.os.Bundle;
-
-import androidx.fragment.app.Fragment;
-
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-
-import com.example.agrimart.R;
-
-/**
- * A simple {@link Fragment} subclass.
- * Use the {@link WaitingDelivereyFragment#newInstance} factory method to
- * create an instance of this fragment.
- */
-public class WaitingDelivereyFragment extends Fragment {
-
-    // TODO: Rename parameter arguments, choose names that match
-    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-    private static final String ARG_PARAM1 = "param1";
-    private static final String ARG_PARAM2 = "param2";
-
-    // TODO: Rename and change types of parameters
-    private String mParam1;
-    private String mParam2;
-
-    public WaitingDelivereyFragment() {
-        // Required empty public constructor
-    }
-
-    /**
-     * Use this factory method to create a new instance of
-     * this fragment using the provided parameters.
-     *
-     * @param param1 Parameter 1.
-     * @param param2 Parameter 2.
-     * @return A new instance of fragment DelivereyFragment.
-     */
-    // TODO: Rename and change types and number of parameters
-    public static WaitingDelivereyFragment newInstance(String param1, String param2) {
-        WaitingDelivereyFragment fragment = new WaitingDelivereyFragment();
-        Bundle args = new Bundle();
-        args.putString(ARG_PARAM1, param1);
-        args.putString(ARG_PARAM2, param2);
-        fragment.setArguments(args);
-        return fragment;
-    }
-
-    @Override
-    public void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-        if (getArguments() != null) {
-            mParam1 = getArguments().getString(ARG_PARAM1);
-            mParam2 = getArguments().getString(ARG_PARAM2);
-        }
-    }
-
-    @Override
-    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                             Bundle savedInstanceState) {
-        // Inflate the layout for this fragment
-        return inflater.inflate(R.layout.fragment_deliverey, container, false);
-    }
-}
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_08_AM_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_08_AM_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_08_AM_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_08_AM_[Changes]/shelved.patch	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,1532 +0,0 @@
-Index: app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.Cart;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.adapter.StoreCartAdapter;\r\nimport com.example.agrimart.data.model.Cart;\r\nimport com.example.agrimart.viewmodel.CartFragmentViewModel;\r\n\r\nimport java.util.List;\r\n\r\npublic class CartFragment extends Fragment {\r\n    private RecyclerView rvCarts;\r\n    private StoreCartAdapter storeCartAdapter;\r\n    private CartFragmentViewModel viewModel;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_cart, container, false);\r\n\r\n        // Cập nhật màu status bar\r\n        if (getActivity() != null) {\r\n            getActivity().getWindow().setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n        }\r\n\r\n        // Khởi tạo RecyclerView\r\n        rvCarts = view.findViewById(R.id.rv_cart);\r\n        rvCarts.setLayoutManager(new LinearLayoutManager(requireActivity()));\r\n\r\n        // Khởi tạo ViewModel\r\n        viewModel = new CartFragmentViewModel();\r\n\r\n\r\n\r\n        // Lấy dữ liệu từ Firestore và cập nhật RecyclerView\r\n        viewModel.getStoreCartsByUserId(new CartFragmentViewModel.OnDataFetchedListener() {\r\n            @Override\r\n            public void onDataFetched(List<Cart> storeCarts) {\r\n                // Cập nhật RecyclerView với danh sách StoreCart\r\n                storeCartAdapter = new StoreCartAdapter(storeCarts);\r\n                rvCarts.setAdapter(storeCartAdapter);\r\n            }\r\n\r\n            @Override\r\n            public void onError(String errorMessage) {\r\n                // Xử lý lỗi nếu không lấy được dữ liệu\r\n                Toast.makeText(getContext(), errorMessage, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        return view;\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java b/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java
---- a/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
-+++ b/app/src/main/java/com/example/agrimart/ui/Cart/CartFragment.java	(date 1731470593311)
-@@ -1,6 +1,7 @@
- package com.example.agrimart.ui.Cart;
- 
- import android.os.Bundle;
-+import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
-@@ -42,13 +43,13 @@
- 
- 
- 
--        // Lấy dữ liệu từ Firestore và cập nhật RecyclerView
-         viewModel.getStoreCartsByUserId(new CartFragmentViewModel.OnDataFetchedListener() {
-             @Override
-             public void onDataFetched(List<Cart> storeCarts) {
-                 // Cập nhật RecyclerView với danh sách StoreCart
-                 storeCartAdapter = new StoreCartAdapter(storeCarts);
-                 rvCarts.setAdapter(storeCartAdapter);
-+
-             }
- 
-             @Override
-@@ -58,6 +59,8 @@
-             }
-         });
- 
-+
-+
-         return view;
-     }
- }
-Index: app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.viewmodel;\r\n\r\nimport android.util.Log;\r\n\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.data.model.Cart;\r\nimport com.example.agrimart.data.model.ProductCart;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.WriteBatch;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\nimport java.util.Map;\r\n\r\npublic class CartFragmentViewModel extends ViewModel {\r\n    private final FirebaseAuth auth;\r\n    private final FirebaseFirestore firestore;\r\n    private String userId;\r\n\r\n    // Constructor\r\n    public CartFragmentViewModel() {\r\n        this.auth = FirebaseAuth.getInstance();\r\n        this.firestore = FirebaseFirestore.getInstance();\r\n    }\r\n\r\n    // Hàm để lấy danh sách các StoreCart theo userId, sắp xếp theo ngày\r\n    public void getStoreCartsByUserId(final OnDataFetchedListener listener) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId) // Tìm các StoreCart có userId trùng với tham số\r\n                .orderBy(\"updatedAt\", Query.Direction.DESCENDING) // Sắp xếp theo updatedAt giảm dần\r\n                .get() // Lấy dữ liệu\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        List<Cart> storeCartList = new ArrayList<>();\r\n                        for (DocumentSnapshot document : task.getResult()) {\r\n                            Cart storeCart = document.toObject(Cart.class);\r\n                            if (storeCart != null) {\r\n                                storeCartList.add(storeCart);\r\n                            }\r\n                        }\r\n                        // Sau khi lấy danh sách StoreCart, tiếp tục truy vấn thông tin sản phẩm tương ứng\r\n                        fetchProductDetailsAndStore(storeCartList, listener);\r\n                    } else {\r\n                        Log.e(\"CartFragmentViewModel\", \"Failed to fetch data:\" + task.getException().getMessage());\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    // Hàm để lấy thông tin sản phẩm từ productId\r\n    private void fetchProductDetailsAndStore(List<Cart> storeCartList, final OnDataFetchedListener listener) {\r\n        List<Cart> updatedStoreCartList = new ArrayList<>();\r\n        int[] remainingRequests = {storeCartList.size()}; // Đếm số yêu cầu cần xử lý\r\n\r\n        for (Cart storeCart : storeCartList) {\r\n            List<Product> products = storeCart.getProducts(); // Lấy danh sách sản phẩm hiện có trong storeCart\r\n            int[] productRequests = {products.size()}; // Đếm yêu cầu lấy thông tin cho từng sản phẩm\r\n\r\n            for (Product product : products) {\r\n                firestore.collection(\"products\")\r\n                        .document(product.getProduct_id())\r\n                        .get()\r\n                        .addOnCompleteListener(productTask -> {\r\n                            if (productTask.isSuccessful()) {\r\n                                DocumentSnapshot productDoc = productTask.getResult();\r\n                                if (productDoc.exists()) {\r\n                                    // Cập nhật thông tin trực tiếp vào đối tượng Product hiện có\r\n                                    product.setName(productDoc.getString(\"name\"));\r\n                                    product.setPrice(productDoc.getDouble(\"price\"));\r\n                                    product.setImages((List<String>) productDoc.get(\"images\"));\r\n                                }\r\n                            } else {\r\n                                listener.onError(\"Lấy thông tin sản phẩm thất bại: \" + productTask.getException().getMessage());\r\n                            }\r\n\r\n                            // Kiểm tra nếu tất cả sản phẩm đã được xử lý\r\n                            productRequests[0]--;\r\n                            if (productRequests[0] == 0) {\r\n                                // Khi tất cả sản phẩm đã được lấy, tiến hành lấy thông tin cửa hàng\r\n                                firestore.collection(\"users\")  // Collection \"users\" chứa thông tin cửa hàng\r\n                                        .document(storeCart.getStoreId())\r\n                                        .get()\r\n                                        .addOnCompleteListener(userTask -> {\r\n                                            if (userTask.isSuccessful()) {\r\n                                                DocumentSnapshot storeDoc = userTask.getResult();\r\n                                                if (storeDoc.exists()) {\r\n                                                    storeCart.setStore_name(storeDoc.getString(\"store_name\"));\r\n                                                }\r\n                                            } else {\r\n                                                listener.onError(\"Lấy thông tin cửa hàng thất bại: \" + userTask.getException().getMessage());\r\n                                            }\r\n\r\n                                            // Thêm storeCart đã cập nhật vào danh sách kết quả\r\n                                            updatedStoreCartList.add(storeCart);\r\n\r\n                                            // Giảm đếm remainingRequests và kiểm tra nếu tất cả storeCart đã hoàn thành\r\n                                            remainingRequests[0]--;\r\n                                            if (remainingRequests[0] == 0) {\r\n                                                listener.onDataFetched(updatedStoreCartList);\r\n                                            }\r\n                                        });\r\n                            }\r\n                        });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public void updateProductQuantityInFirebase(String productId, int newQuantity) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful() && !task.getResult().isEmpty()) {\r\n                        DocumentSnapshot document = task.getResult().getDocuments().get(0);\r\n                        Cart storeCart = document.toObject(Cart.class);\r\n\r\n                        if (storeCart != null) {\r\n                            List<ProductCart> updatedProductList = new ArrayList<>();\r\n                            boolean productFound = false;\r\n\r\n                            for (Product product : storeCart.getProducts()) {\r\n                                int quantity = product.getProduct_id().equals(productId) ? newQuantity : product.getQuantity();\r\n                                updatedProductList.add(new ProductCart(product.getProduct_id(), quantity));\r\n\r\n                                if (product.getProduct_id().equals(productId)) {\r\n                                    productFound = true;\r\n                                }\r\n                            }\r\n\r\n                            if (productFound) {\r\n                                storeCart.setProductCart(updatedProductList);\r\n\r\n                                firestore.collection(\"cart\")\r\n                                        .document(document.getId())\r\n                                        .update(\"products\", storeCart.getProductCart())\r\n                                        .addOnSuccessListener(aVoid -> Log.d(\"Firebase\", \"Giỏ hàng đã được cập nhật.\"))\r\n                                        .addOnFailureListener(e -> Log.e(\"Firebase\", \"Lỗi khi cập nhật giỏ hàng: \" + e.getMessage()));\r\n                            } else {\r\n                                Log.e(\"Firebase\", \"Không tìm thấy sản phẩm trong giỏ hàng.\");\r\n                            }\r\n                        }\r\n                    } else {\r\n                        Log.e(\"Firebase\", \"Không tìm thấy giỏ hàng hoặc có lỗi xảy ra: \" + (task.getException() != null ? task.getException().getMessage() : \"\"));\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n\r\n    public void addProductToCart(String storeId, Product productToAdd) {\r\n        userId = auth.getCurrentUser().getUid();\r\n\r\n        // Query the user's cart based on userId and storeId\r\n        firestore.collection(\"cart\")\r\n                .whereEqualTo(\"userId\", userId)\r\n                .whereEqualTo(\"storeId\", storeId)\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        if (!task.getResult().isEmpty()) {\r\n                            // Retrieve the existing cart if available\r\n                            DocumentSnapshot document = task.getResult().getDocuments().get(0);\r\n                            Cart storeCart = document.toObject(Cart.class);\r\n\r\n                            if (storeCart != null) {\r\n                                List<Product> products = storeCart.getProducts();\r\n                                List<ProductCart> productCarts = new ArrayList<>();\r\n\r\n                                if (products == null) {\r\n                                    products = new ArrayList<>(); // Initialize if null\r\n                                }\r\n\r\n                                // Check if the product already exists in the cart\r\n                                boolean productExists = false;\r\n                                for (Product product : products) {\r\n                                    ProductCart pro = new ProductCart();\r\n                                    pro.setProduct_id(product.getProduct_id());\r\n                                    pro.setQuantity(product.getQuantity());\r\n                                    if (product.getProduct_id().equals(productToAdd.getProduct_id())) {\r\n                                        productExists = true;\r\n                                        pro.setQuantity(product.getQuantity() + 1);\r\n                                    }\r\n                                    productCarts.add(pro);\r\n                                }\r\n\r\n                                // If the product doesn't exist, add it as a new product\r\n                                if (!productExists) {\r\n                                    ProductCart pro = new ProductCart();\r\n                                    pro.setProduct_id(productToAdd.getProduct_id());\r\n                                    pro.setQuantity(1);\r\n                                    productCarts.add(pro);\r\n                                }\r\n\r\n                                storeCart.setProduct(products); // Update the cart with the new product list\r\n                                String updatedAt = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.getDefault()).format(new Date());\r\n                                storeCart.setUpdatedAt(updatedAt); // Update the timestamp\r\n\r\n                                // Update Firestore\r\n                                firestore.collection(\"cart\")\r\n                                        .document(document.getId())\r\n                                        .update(\r\n                                                \"products\", productCarts,\r\n                                                \"updatedAt\", updatedAt\r\n                                        )\r\n                                        .addOnSuccessListener(aVoid -> Log.d(\"Firebase\", \"Product has been added to the cart.\"))\r\n                                        .addOnFailureListener(e -> Log.e(\"Firebase\", \"Error adding product to cart: \" + e.getMessage()));\r\n                            }\r\n                        } else {\r\n                            // Define a new cart\r\n                            Map<String, Object> newCart = new HashMap<>();\r\n                            newCart.put(\"userId\", userId);\r\n                            newCart.put(\"storeId\", storeId);\r\n                            String updatedAt = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.getDefault()).format(new Date());\r\n                            newCart.put(\"updatedAt\", updatedAt);\r\n\r\n                            // Create the initial list of products\r\n                            List<Map<String, Object>> productCarts = new ArrayList<>();\r\n                            Map<String, Object> productData = new HashMap<>();\r\n                            productData.put(\"product_id\", productToAdd.getProduct_id());\r\n                            productData.put(\"quantity\", 1);\r\n                            productCarts.add(productData);\r\n                            newCart.put(\"products\", productCarts);\r\n\r\n                            // Add the new cart to Firestore\r\n                            firestore.collection(\"cart\")\r\n                                    .add(newCart)\r\n                                    .addOnSuccessListener(documentReference -> Log.d(\"Firebase\", \"New cart has been created.\"))\r\n                                    .addOnFailureListener(e -> Log.e(\"Firebase\", \"Error creating new cart: \" + e.getMessage()));\r\n                        }\r\n                    } else {\r\n                        Log.e(\"Firebase\", \"Error retrieving cart: \" + task.getException());\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    // Listener để callback khi lấy dữ liệu xong\r\n    public interface OnDataFetchedListener {\r\n        void onDataFetched(List<Cart> storeCarts);\r\n\r\n        void onError(String errorMessage);\r\n    }\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java
---- a/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
-+++ b/app/src/main/java/com/example/agrimart/viewmodel/CartFragmentViewModel.java	(date 1731470889891)
-@@ -11,7 +11,6 @@
- import com.google.firebase.firestore.FirebaseFirestore;
- import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.Query;
--import com.google.firebase.firestore.WriteBatch;
- 
- import java.text.SimpleDateFormat;
- import java.util.ArrayList;
-@@ -20,6 +19,7 @@
- import java.util.List;
- import java.util.Locale;
- import java.util.Map;
-+import java.util.concurrent.atomic.AtomicInteger;
- 
- public class CartFragmentViewModel extends ViewModel {
-     private final FirebaseAuth auth;
-@@ -37,9 +37,9 @@
-         userId = auth.getCurrentUser().getUid();
- 
-         firestore.collection("cart")
--                .whereEqualTo("userId", userId) // Tìm các StoreCart có userId trùng với tham số
--                .orderBy("updatedAt", Query.Direction.DESCENDING) // Sắp xếp theo updatedAt giảm dần
--                .get() // Lấy dữ liệu
-+                .whereEqualTo("userId", userId)
-+                .orderBy("updatedAt", Query.Direction.DESCENDING)
-+                .get()
-                 .addOnCompleteListener(task -> {
-                     if (task.isSuccessful()) {
-                         List<Cart> storeCartList = new ArrayList<>();
-@@ -47,9 +47,10 @@
-                             Cart storeCart = document.toObject(Cart.class);
-                             if (storeCart != null) {
-                                 storeCartList.add(storeCart);
-+
-                             }
-                         }
--                        // Sau khi lấy danh sách StoreCart, tiếp tục truy vấn thông tin sản phẩm tương ứng
-+
-                         fetchProductDetailsAndStore(storeCartList, listener);
-                     } else {
-                         Log.e("CartFragmentViewModel", "Failed to fetch data:" + task.getException().getMessage());
-@@ -58,14 +59,16 @@
-     }
- 
- 
-+
-     // Hàm để lấy thông tin sản phẩm từ productId
-+
-     private void fetchProductDetailsAndStore(List<Cart> storeCartList, final OnDataFetchedListener listener) {
-         List<Cart> updatedStoreCartList = new ArrayList<>();
--        int[] remainingRequests = {storeCartList.size()}; // Đếm số yêu cầu cần xử lý
-+        AtomicInteger remainingRequests = new AtomicInteger(storeCartList.size());  // Use AtomicInteger to handle concurrency
- 
-         for (Cart storeCart : storeCartList) {
--            List<Product> products = storeCart.getProducts(); // Lấy danh sách sản phẩm hiện có trong storeCart
--            int[] productRequests = {products.size()}; // Đếm yêu cầu lấy thông tin cho từng sản phẩm
-+            List<Product> products = storeCart.getProducts();
-+            AtomicInteger productRequests = new AtomicInteger(products.size());  // Track product requests
- 
-             for (Product product : products) {
-                 firestore.collection("products")
-@@ -75,20 +78,18 @@
-                             if (productTask.isSuccessful()) {
-                                 DocumentSnapshot productDoc = productTask.getResult();
-                                 if (productDoc.exists()) {
--                                    // Cập nhật thông tin trực tiếp vào đối tượng Product hiện có
-                                     product.setName(productDoc.getString("name"));
-                                     product.setPrice(productDoc.getDouble("price"));
-                                     product.setImages((List<String>) productDoc.get("images"));
-+                                    product.setStoreId(productDoc.getString("storeId"));
-                                 }
-                             } else {
-                                 listener.onError("Lấy thông tin sản phẩm thất bại: " + productTask.getException().getMessage());
-                             }
- 
--                            // Kiểm tra nếu tất cả sản phẩm đã được xử lý
--                            productRequests[0]--;
--                            if (productRequests[0] == 0) {
--                                // Khi tất cả sản phẩm đã được lấy, tiến hành lấy thông tin cửa hàng
--                                firestore.collection("users")  // Collection "users" chứa thông tin cửa hàng
-+                            // Decrement product request counter
-+                            if (productRequests.decrementAndGet() == 0) {
-+                                firestore.collection("users")
-                                         .document(storeCart.getStoreId())
-                                         .get()
-                                         .addOnCompleteListener(userTask -> {
-@@ -101,12 +102,10 @@
-                                                 listener.onError("Lấy thông tin cửa hàng thất bại: " + userTask.getException().getMessage());
-                                             }
- 
--                                            // Thêm storeCart đã cập nhật vào danh sách kết quả
-                                             updatedStoreCartList.add(storeCart);
- 
--                                            // Giảm đếm remainingRequests và kiểm tra nếu tất cả storeCart đã hoàn thành
--                                            remainingRequests[0]--;
--                                            if (remainingRequests[0] == 0) {
-+                                            // Decrement the remaining request counter
-+                                            if (remainingRequests.decrementAndGet() == 0) {
-                                                 listener.onDataFetched(updatedStoreCartList);
-                                             }
-                                         });
-@@ -117,11 +116,14 @@
-     }
- 
- 
--    public void updateProductQuantityInFirebase(String productId, int newQuantity) {
-+
-+
-+    public void updateProductQuantityInFirebase(String productId, String storeId, int newQuantity) {
-         userId = auth.getCurrentUser().getUid();
- 
-         firestore.collection("cart")
-                 .whereEqualTo("userId", userId)
-+                .whereEqualTo("storeId", storeId)
-                 .get()
-                 .addOnCompleteListener(task -> {
-                     if (task.isSuccessful() && !task.getResult().isEmpty()) {
-Index: app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.adapter;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.lifecycle.ViewModel;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.data.model.Cart;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.viewmodel.CartFragmentViewModel;\r\nimport com.google.android.material.imageview.ShapeableImageView;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.List;\r\n\r\npublic class ProductCartAdapter extends RecyclerView.Adapter<ProductCartAdapter.ProductViewHolder> {\r\n\r\n    private List<Product> productList;\r\n\r\n    public ProductCartAdapter(List<Product> productList) {\r\n        this.productList = productList;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public ProductViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        View view = LayoutInflater.from(parent.getContext())\r\n                .inflate(R.layout.item_cart_product, parent, false);\r\n        return new ProductViewHolder(view);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull ProductViewHolder holder, int position) {\r\n        Product product = productList.get(position);\r\n        holder.tvProductName.setText(product.getName());\r\n        holder.quantity.setText(String.valueOf(product.getQuantity()));\r\n        holder.tvPrice.setText(String.format(\"%,.0f đ\", product.getPrice()));\r\n        CartFragmentViewModel viewModel = new CartFragmentViewModel();\r\n\r\n        Glide.with(holder.itemView.getContext())\r\n                .load(product.getImages().get(0))\r\n                .placeholder(R.drawable.placeholder_image)\r\n                .error(R.drawable.error_image)\r\n                .into(holder.img_product);\r\n\r\n        // Xử lý khi bấm nút giảm số lượng\r\n        holder.btn_decrease.setOnClickListener(v -> {\r\n            if (product.getQuantity() > 1) { // Đảm bảo số lượng không giảm dưới 1\r\n                product.setQuantity(product.getQuantity() - 1);\r\n                holder.quantity.setText(String.valueOf(product.getQuantity())); // Cập nhật hiển thị số lượng\r\n                viewModel.updateProductQuantityInFirebase(product.getProduct_id(), product.getQuantity());\r\n            }\r\n        });\r\n\r\n        // Xử lý khi bấm nút tăng số lượng\r\n        holder.btn_increase.setOnClickListener(v -> {\r\n            product.setQuantity(product.getQuantity() + 1);\r\n            holder.quantity.setText(String.valueOf(product.getQuantity())); // Cập nhật hiển thị số lượng\r\n            viewModel.updateProductQuantityInFirebase(product.getProduct_id(), product.getQuantity());\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return productList.size();\r\n    }\r\n\r\n    static class ProductViewHolder extends RecyclerView.ViewHolder {\r\n        TextView tvProductName, tvPrice, quantity;\r\n        ShapeableImageView img_product;\r\n        ImageView btn_decrease, btn_increase;\r\n\r\n        public ProductViewHolder(@NonNull View itemView) {\r\n            super(itemView);\r\n            tvProductName = itemView.findViewById(R.id.tv_product_name);\r\n            tvPrice = itemView.findViewById(R.id.price);\r\n            img_product = itemView.findViewById(R.id.img_product);\r\n            quantity = itemView.findViewById(R.id.cart_quantity_product);\r\n            btn_decrease = itemView.findViewById(R.id.btn_decrease);\r\n            btn_increase = itemView.findViewById(R.id.btn_increase);\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java b/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java
---- a/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
-+++ b/app/src/main/java/com/example/agrimart/adapter/ProductCartAdapter.java	(date 1731424512970)
-@@ -57,7 +57,7 @@
-             if (product.getQuantity() > 1) { // Đảm bảo số lượng không giảm dưới 1
-                 product.setQuantity(product.getQuantity() - 1);
-                 holder.quantity.setText(String.valueOf(product.getQuantity())); // Cập nhật hiển thị số lượng
--                viewModel.updateProductQuantityInFirebase(product.getProduct_id(), product.getQuantity());
-+                viewModel.updateProductQuantityInFirebase(product.getProduct_id(), product.getStoreId() ,product.getQuantity());
-             }
-         });
- 
-@@ -65,7 +65,7 @@
-         holder.btn_increase.setOnClickListener(v -> {
-             product.setQuantity(product.getQuantity() + 1);
-             holder.quantity.setText(String.valueOf(product.getQuantity())); // Cập nhật hiển thị số lượng
--            viewModel.updateProductQuantityInFirebase(product.getProduct_id(), product.getQuantity());
-+            viewModel.updateProductQuantityInFirebase(product.getProduct_id(),product.getStoreId(), product.getQuantity());
-         });
-     }
- 
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM__Changes_1.xml	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
-+++ /dev/null	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
-@@ -1,4 +0,0 @@
--<changelist name="Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1" date="1730802371626" recycled="true" deleted="true">
--  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch" />
--  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/5/2024 5:25 PM [Changes]" />
--</changelist>
-\ No newline at end of file
-Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch
-===================================================================
-diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch
-deleted file mode 100644
---- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_5_2024_5_25_PM_[Changes]1/shelved.patch	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
-+++ /dev/null	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
-@@ -1,1295 +0,0 @@
--Index: app/src/main/java/com/example/agrimart/data/model/Product.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.data.model;\r\n\r\npublic class Product {\r\n    private String image;\r\n    private String name;\r\n    private double price;\r\n    private String active;\r\n\r\n    public Product() {\r\n    }\r\n\r\n    public Product(String image, String name, double price) {\r\n        this.image = image;\r\n        this.name = name;\r\n        this.price = price;\r\n    }\r\n\r\n    public Product(String image, String name, double price, String active) {\r\n        this.image = image;\r\n        this.name = name;\r\n        this.price = price;\r\n        this.active = active;\r\n    }\r\n\r\n    public String getImage() {\r\n        return image;\r\n    }\r\n\r\n    public void setImage(String image) {\r\n        this.image = image;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    public String getActive() {\r\n        return active;\r\n    }\r\n\r\n    public void setActive(String active) {\r\n        this.active = active;\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/data/model/Product.java b/app/src/main/java/com/example/agrimart/data/model/Product.java
----- a/app/src/main/java/com/example/agrimart/data/model/Product.java	
--+++ b/app/src/main/java/com/example/agrimart/data/model/Product.java	
--@@ -1,33 +1,57 @@
-- package com.example.agrimart.data.model;
-- 
---public class Product {
---    private String image;
--+import java.io.Serializable;
--+import java.util.Collections;
--+import java.util.List;
--+
--+public class Product implements Serializable {
--+    private String productId;
--     private String name;
--     private double price;
--     private String active;
--+    private String category;
--+    private String description;
--+    private int height;
--+    private List<String> images;
--+    private int length;
--+    private int quantity;
--+    private String storeId;
--+    private int weight;
--+    private int width;
--+    private int soldQuantity;
-- 
--     public Product() {
--     }
-- 
---    public Product(String image, String name, double price) {
---        this.image = image;
--+    public Product(String productId, String name, double price, String active, String category, String description, int height, List<String> images, int length, int quantity, String storeId, int weight, int width, int soldQuantity) {
--+        this.productId = productId;
--         this.name = name;
--         this.price = price;
--+        this.active = active;
--+        this.category = category;
--+        this.description = description;
--+        this.height = height;
--+        this.images = images;
--+        this.length = length;
--+        this.quantity = quantity;
--+        this.storeId = storeId;
--+        this.weight = weight;
--+        this.width = width;
--+        this.soldQuantity = soldQuantity;
--     }
-- 
---    public Product(String image, String name, double price, String active) {
---        this.image = image;
--+    public Product(String imageUrl, String name, double price) {
--+        this.images = Collections.singletonList(imageUrl);
--         this.name = name;
--         this.price = price;
---        this.active = active;
--     }
-- 
---    public String getImage() {
---        return image;
--+    public String getProductId() {
--+        return productId;
--     }
-- 
---    public void setImage(String image) {
---        this.image = image;
--+    public void setProductId(String productId) {
--+        this.productId = productId;
--     }
-- 
--     public String getName() {
--@@ -53,4 +77,84 @@
--     public void setActive(String active) {
--         this.active = active;
--     }
--+
--+    public String getCategory() {
--+        return category;
--+    }
--+
--+    public void setCategory(String category) {
--+        this.category = category;
--+    }
--+
--+    public String getDescription() {
--+        return description;
--+    }
--+
--+    public void setDescription(String description) {
--+        this.description = description;
--+    }
--+
--+    public int getHeight() {
--+        return height;
--+    }
--+
--+    public void setHeight(int height) {
--+        this.height = height;
--+    }
--+
--+    public List<String> getImages() {
--+        return images;
--+    }
--+
--+    public void setImages(List<String> images) {
--+        this.images = images;
--+    }
--+
--+    public int getLength() {
--+        return length;
--+    }
--+
--+    public void setLength(int length) {
--+        this.length = length;
--+    }
--+
--+    public int getQuantity() {
--+        return quantity;
--+    }
--+
--+    public void setQuantity(int quantity) {
--+        this.quantity = quantity;
--+    }
--+
--+    public String getStoreId() {
--+        return storeId;
--+    }
--+
--+    public void setStoreId(String storeId) {
--+        this.storeId = storeId;
--+    }
--+
--+    public int getWeight() {
--+        return weight;
--+    }
--+
--+    public void setWeight(int weight) {
--+        this.weight = weight;
--+    }
--+
--+    public int getWidth() {
--+        return width;
--+    }
--+
--+    public void setWidth(int width) {
--+        this.width = width;
--+    }
--+
--+    public int getSoldQuantity() {
--+        return soldQuantity;
--+    }
--+
--+    public void setSoldQuantity(int soldQuantity) {
--+        this.soldQuantity = soldQuantity;
--+    }
-- }
--\ No newline at end of file
--Index: app/src/main/res/layout/item_product.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n\r\n    <data>\r\n        <variable\r\n            name=\"product\"\r\n            type=\"com.example.agrimart.data.model.Product\" />\r\n    </data>\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"173dp\"\r\n        android:background=\"@drawable/bg_product\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"5dp\"\r\n        android:layout_marginTop=\"5dp\">\r\n\r\n        <FrameLayout\r\n            android:id=\"@+id/frame_layout\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"124dp\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/imgPro\"\r\n                android:layout_width=\"99dp\"\r\n                android:layout_height=\"79dp\"\r\n                android:scaleType=\"centerCrop\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/banana\" />\r\n        </FrameLayout>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvName\"\r\n            android:layout_width=\"129dp\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/frame_layout\"\r\n            android:layout_marginTop=\"12dp\"\r\n            android:textSize=\"16sp\"\r\n            android:textColor=\"#333333\"\r\n            android:letterSpacing=\"0.01\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:ellipsize=\"end\"\r\n            android:maxLines=\"1\"\r\n            android:textStyle=\"bold\"/>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvPrice\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/tvName\"\r\n            android:textSize=\"18sp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:textColor=\"#F44336\"\r\n            android:fontFamily=\"@font/gabarito\"\r\n            android:letterSpacing=\"0.01\"/>\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/imageButton\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@color/transparent\"\r\n            android:layout_below=\"@id/tvName\"\r\n            android:layout_alignParentEnd=\"true\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:layout_marginEnd=\"16dp\"\r\n            android:layout_marginBottom=\"10dp\"\r\n            app:srcCompat=\"@drawable/ic_plus_1\" />\r\n\r\n    </RelativeLayout>\r\n</layout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/item_product.xml b/app/src/main/res/layout/item_product.xml
----- a/app/src/main/res/layout/item_product.xml	
--+++ b/app/src/main/res/layout/item_product.xml	
--@@ -22,10 +22,10 @@
-- 
--             <ImageView
--                 android:id="@+id/imgPro"
---                android:layout_width="99dp"
---                android:layout_height="79dp"
---                android:scaleType="centerCrop"
--+                android:layout_width="match_parent"
--+                android:layout_height="139dp"
--                 android:layout_gravity="center"
--+                android:scaleType="centerCrop"
--                 android:src="@drawable/banana" />
--         </FrameLayout>
-- 
--Index: app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.ui.Store;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.data.model.ProductRequest;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.QueryDocumentSnapshot;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class StoreActivity extends AppCompatActivity {\r\n\r\n    private ImageView storeAvatar;\r\n    private TextView storeName, storeRating, storeAddress;\r\n    private RecyclerView rvProducts;\r\n    private ProductAdapter productAdapter;\r\n    private List<Product> productList;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_store);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.LOLLIPOP) {\r\n            Window window = getWindow();\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.setStatusBarColor(ContextCompat.getColor(this, R.color.green));\r\n        }\r\n\r\n        storeAvatar = findViewById(R.id.store_avatar);\r\n        storeName = findViewById(R.id.store_name);\r\n        storeRating = findViewById(R.id.store_rating);\r\n        storeAddress = findViewById(R.id.store_address);\r\n        rvProducts = findViewById(R.id.rvProducts);\r\n\r\n\r\n        productList = new ArrayList<>();\r\n\r\n\r\n        productAdapter = new ProductAdapter(productList, product -> {\r\n\r\n        });\r\n        rvProducts.setLayoutManager(new GridLayoutManager(this, 2));\r\n        rvProducts.setAdapter(productAdapter);\r\n        loadData();\r\n    }\r\n    private void loadData() {\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        if (user != null) {\r\n            String uid = user.getUid();\r\n\r\n            FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n            db.collection(\"products\")\r\n                    .whereEqualTo(\"storeId\", uid)\r\n                    .get()\r\n                    .addOnCompleteListener(task -> {\r\n                        if (task.isSuccessful()) {\r\n\r\n                            for (QueryDocumentSnapshot document : task.getResult()) {\r\n                                ProductRequest product = document.toObject(ProductRequest.class);\r\n                                productList.add(\r\n                                        new Product(\r\n                                                product.getImageUrls().isEmpty() ? \"https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/notfound.jpg?alt=media&token=40e61714-5a10-4352-918c-7e5e2643a1fe\" : product.getImageUrls().get(0),\r\n                                                product.getName(),\r\n                                                product.getPrice()\r\n                                        )\r\n                                );\r\n                            }\r\n                            productAdapter.notifyDataSetChanged();\r\n                        }\r\n                    });\r\n\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java b/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java
----- a/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java	
--+++ b/app/src/main/java/com/example/agrimart/ui/Store/StoreActivity.java	
--@@ -3,9 +3,9 @@
-- import android.os.Bundle;
-- import android.view.Window;
-- import android.view.WindowManager;
--+import android.widget.ImageButton;
-- import android.widget.ImageView;
-- import android.widget.TextView;
---
-- import androidx.activity.EdgeToEdge;
-- import androidx.appcompat.app.AppCompatActivity;
-- import androidx.core.content.ContextCompat;
--@@ -14,16 +14,14 @@
-- import androidx.core.view.WindowInsetsCompat;
-- import androidx.recyclerview.widget.GridLayoutManager;
-- import androidx.recyclerview.widget.RecyclerView;
---
--+import com.bumptech.glide.Glide;
-- import com.example.agrimart.R;
-- import com.example.agrimart.adapter.ProductAdapter;
-- import com.example.agrimart.data.model.Product;
-- import com.example.agrimart.data.model.ProductRequest;
---import com.google.firebase.auth.FirebaseAuth;
---import com.google.firebase.auth.FirebaseUser;
--+import com.example.agrimart.data.model.User;
-- import com.google.firebase.firestore.FirebaseFirestore;
-- import com.google.firebase.firestore.QueryDocumentSnapshot;
---
-- import java.util.ArrayList;
-- import java.util.List;
-- 
--@@ -40,6 +38,14 @@
--         super.onCreate(savedInstanceState);
--         EdgeToEdge.enable(this);
--         setContentView(R.layout.activity_store);
--+        setupWindowInsets();
--+
--+        initializeViews();
--+        setupRecyclerView();
--+        loadStoreData();
--+    }
--+
--+    private void setupWindowInsets() {
--         ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {
--             Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());
--             v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);
--@@ -51,50 +57,84 @@
--             window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);
--             window.setStatusBarColor(ContextCompat.getColor(this, R.color.green));
--         }
--+    }
-- 
--+    private void initializeViews() {
--         storeAvatar = findViewById(R.id.store_avatar);
--         storeName = findViewById(R.id.store_name);
--         storeRating = findViewById(R.id.store_rating);
--         storeAddress = findViewById(R.id.store_address);
--         rvProducts = findViewById(R.id.rvProducts);
--+    }
-- 
---
--+    private void setupRecyclerView() {
--         productList = new ArrayList<>();
---
---
--         productAdapter = new ProductAdapter(productList, product -> {
---
--+            // Xử lý khi nhấn vào sản phẩm (nếu cần)
--         });
--         rvProducts.setLayoutManager(new GridLayoutManager(this, 2));
--         rvProducts.setAdapter(productAdapter);
---        loadData();
--+    }
--+
--+    private void loadStoreData() {
--+        String storeId = getIntent().getStringExtra("storeId");
--+        if (storeId != null) {
--+            loadStoreInfo(storeId);
--+            loadProducts(storeId);
--+        }
--+    }
--+
--+    private void loadStoreInfo(String storeId) {
--+        FirebaseFirestore db = FirebaseFirestore.getInstance();
--+        db.collection("users")
--+                .document(storeId)
--+                .get()
--+                .addOnSuccessListener(documentSnapshot -> {
--+                    User store = documentSnapshot.toObject(User.class);
--+                    if (store != null) {
--+                        updateStoreInfo(store);
--+                    } else {
--+                        showError("Thông tin cửa hàng không hợp lệ.");
--+                    }
--+                })
--+                .addOnFailureListener(e -> {
--+                    showError("Không thể tải thông tin cửa hàng.");
--+                });
--+    }
--+
--+    private void updateStoreInfo(User store) {
--+        storeName.setText(store.getStoreName());
--+        storeAddress.setText(store.getStoreAddress() != null ? store.getStoreAddress().getStreet() : "Địa chỉ không khả dụng");
--+        Glide.with(this)
--+                .load(store.getStoreImage() != null && !store.getStoreImage().isEmpty() ? store.getStoreImage() : R.drawable.user)
--+                .placeholder(R.drawable.user)
--+                .error(R.drawable.user)
--+                .into(storeAvatar);
--     }
---    private void loadData() {
---        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();
---        if (user != null) {
---            String uid = user.getUid();
-- 
---            FirebaseFirestore db = FirebaseFirestore.getInstance();
---            db.collection("products")
---                    .whereEqualTo("storeId", uid)
---                    .get()
---                    .addOnCompleteListener(task -> {
---                        if (task.isSuccessful()) {
---
---                            for (QueryDocumentSnapshot document : task.getResult()) {
---                                ProductRequest product = document.toObject(ProductRequest.class);
---                                productList.add(
---                                        new Product(
---                                                product.getImageUrls().isEmpty() ? "https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/notfound.jpg?alt=media&token=40e61714-5a10-4352-918c-7e5e2643a1fe" : product.getImageUrls().get(0),
---                                                product.getName(),
---                                                product.getPrice()
---                                        )
---                                );
---                            }
---                            productAdapter.notifyDataSetChanged();
---                        }
---                    });
--+    private void loadProducts(String storeId) {
--+        FirebaseFirestore db = FirebaseFirestore.getInstance();
--+        db.collection("products")
--+                .whereEqualTo("storeId", storeId)
--+                .get()
--+                .addOnSuccessListener(queryDocumentSnapshots -> {
--+                    for (QueryDocumentSnapshot document : queryDocumentSnapshots) {
--+                        ProductRequest productRequest = document.toObject(ProductRequest.class);
--+                        String imageUrl = productRequest.getImageUrls().isEmpty()
--+                                ? "https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/notfound.jpg?alt=media&token=40e61714-5a10-4352-918c-7e5e2643a1fe"
--+                                : productRequest.getImageUrls().get(0);
--+                        productList.add(new Product(imageUrl, productRequest.getName(), productRequest.getPrice()));
--+                    }
--+                    productAdapter.notifyDataSetChanged();
--+                })
--+                .addOnFailureListener(e -> {
--+                    showError("Không thể tải sản phẩm.");
--+                });
--+    }
-- 
---        }
---    }
---}
--\ No newline at end of file
--+    private void showError(String message) {
--+        storeName.setText(message);
--+        storeAddress.setText("");
--+        storeAvatar.setImageResource(R.drawable.user);
--+    }
--+}
--Index: app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.adapter;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.ViewGroup;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.ItemProductBinding;\r\n\r\nimport java.util.List;\r\n\r\npublic class ProductAdapter extends RecyclerView.Adapter<ProductAdapter.MyViewHolder> {\r\n    private List<Product> products;\r\n    private OnItemClickListener listener;\r\n\r\n    public ProductAdapter(List<Product> products, OnItemClickListener listener) {\r\n        this.products = products;\r\n        this.listener = listener;\r\n    }\r\n\r\n    public interface OnItemClickListener {\r\n        void onItemClick(Product product);\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        ItemProductBinding binding = ItemProductBinding.inflate(LayoutInflater.from(parent.getContext()), parent, false);\r\n        return new MyViewHolder(binding);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull MyViewHolder holder, int position) {\r\n        Product product = products.get(position);\r\n        holder.bindData(product);\r\n        holder.itemView.setOnClickListener(v -> listener.onItemClick(product));\r\n    }\r\n\r\n    @Override\r\n    public int getItemCount() {\r\n        return products.size();\r\n    }\r\n\r\n    public static class MyViewHolder extends RecyclerView.ViewHolder {\r\n        private final ItemProductBinding binding;\r\n\r\n        public MyViewHolder(@NonNull ItemProductBinding binding) {\r\n            super(binding.getRoot());\r\n            this.binding = binding;\r\n        }\r\n\r\n        public void bindData(Product product) {\r\n            binding.tvName.setText(product.getName());\r\n            binding.tvPrice.setText(String.valueOf(product.getPrice()));\r\n            Glide.with(binding.getRoot().getContext())\r\n                    .load(product.getImage())\r\n                    .into(binding.imgPro);\r\n            binding.executePendingBindings();\r\n        }\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java b/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java
----- a/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java	
--+++ b/app/src/main/java/com/example/agrimart/adapter/ProductAdapter.java	
--@@ -10,7 +10,9 @@
-- import com.example.agrimart.data.model.Product;
-- import com.example.agrimart.databinding.ItemProductBinding;
-- 
--+import java.text.NumberFormat;
-- import java.util.List;
--+import java.util.Locale;
-- 
-- public class ProductAdapter extends RecyclerView.Adapter<ProductAdapter.MyViewHolder> {
--     private List<Product> products;
--@@ -54,10 +56,20 @@
-- 
--         public void bindData(Product product) {
--             binding.tvName.setText(product.getName());
---            binding.tvPrice.setText(String.valueOf(product.getPrice()));
---            Glide.with(binding.getRoot().getContext())
---                    .load(product.getImage())
---                    .into(binding.imgPro);
--+
--+            NumberFormat format = NumberFormat.getCurrencyInstance(new Locale("vi", "VN"));
--+            binding.tvPrice.setText(format.format(product.getPrice()));
--+
--+            if (product.getImages() != null && !product.getImages().isEmpty()) {
--+                Glide.with(binding.getRoot().getContext())
--+                        .load(product.getImages().get(0))
--+                        .into(binding.imgPro);
--+            } else if (product.getImages() != null) {
--+                Glide.with(binding.getRoot().getContext())
--+                        .load(product.getImages())
--+                        .into(binding.imgPro);
--+            }
--+
--             binding.executePendingBindings();
--         }
--     }
--Index: app/src/main/res/layout/activity_product_detail.xml
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/main1\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.ProductPage.ProductDetailActivity\">\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:id=\"@+id/header\">\r\n\r\n        <ImageButton\r\n            android:id=\"@+id/btn_back\"\r\n            android:layout_width=\"32dp\"\r\n            android:layout_height=\"32dp\"\r\n            android:layout_marginStart=\"24dp\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:layout_marginBottom=\"8dp\"\r\n            android:background=\"@color/background_light\"\r\n            android:src=\"@drawable/chevron_left\"\r\n            app:layout_constraintEnd_toEndOf=\"parent\"\r\n            app:layout_constraintHorizontal_bias=\"0.0\"\r\n            app:layout_constraintStart_toStartOf=\"parent\"\r\n            app:layout_constraintTop_toTopOf=\"parent\"\r\n            tools:ignore=\"MissingConstraints\"\r\n            android:backgroundTint=\"@color/white\"/>\r\n    </RelativeLayout>\r\n\r\n    <ScrollView\r\n        android:id=\"@+id/scrollView\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"4dp\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/header\"\r\n        tools:layout_editor_absoluteX=\"0dp\"\r\n        android:layout_below=\"@id/header\"\r\n        android:scrollbars=\"none\"\r\n        android:layout_above=\"@id/footer\">\r\n\r\n        <RelativeLayout\r\n            android:id=\"@+id/product_detail\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\">\r\n\r\n            <com.denzcoskun.imageslider.ImageSlider\r\n                android:id=\"@+id/product_image\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"250dp\"\r\n                android:background=\"@null\"\r\n                app:iss_auto_cycle=\"true\"\r\n                app:iss_period=\"1000\"\r\n                app:iss_title_background=\"@color/transparent\"/>\r\n\r\n            <TextView\r\n                android:id=\"@+id/product_name\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"10dp\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:layout_marginBottom=\"8dp\"\r\n                android:text=\"@string/product_name\"\r\n                android:layout_below=\"@+id/product_image\"\r\n                android:fontFamily=\"@font/gabarito\"\r\n                android:textSize=\"20sp\"\r\n                android:textAllCaps=\"true\"\r\n                android:textColor=\"@color/black\"/>\r\n\r\n            <TextView\r\n                android:id=\"@+id/product_price\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"24dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:layout_marginBottom=\"8dp\"\r\n                android:text=\"@string/price\"\r\n                android:layout_below=\"@+id/product_name\"\r\n                android:fontFamily=\"@font/gabarito\"\r\n                android:textSize=\"24sp\"\r\n                android:textColor=\"@android:color/holo_red_dark\"/>\r\n\r\n            <TextView\r\n                android:id=\"@+id/address\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"24dp\"\r\n                android:layout_marginEnd=\"24dp\"\r\n                android:layout_marginBottom=\"16dp\"\r\n                android:text=\"@string/address\"\r\n                android:layout_below=\"@+id/product_price\"\r\n                android:fontFamily=\"@font/circular_std\"\r\n                android:textSize=\"16sp\"\r\n                android:drawableStart=\"@drawable/location\"/>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/quantity\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/address\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginBottom=\"10dp\">\r\n                <TextView\r\n                    android:id=\"@+id/btn_decrease\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"-\"\r\n                    android:textColor=\"#9E9E9E\"\r\n                    android:textSize=\"24sp\"\r\n                    android:padding=\"8dp\"\r\n                    android:gravity=\"center\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/tv_quantity\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"30dp\"\r\n                    android:layout_marginStart=\"8dp\"\r\n                    android:layout_marginEnd=\"8dp\"\r\n                    android:layout_marginBottom=\"8dp\"\r\n                    android:gravity=\"center\"\r\n                    android:text=\"1\"\r\n                    android:textSize=\"18sp\"\r\n                    android:textColor=\"#212121\"\r\n                    android:fontFamily=\"@font/gabarito\"\r\n                    android:background=\"@drawable/round_border\"/>\r\n\r\n                <TextView\r\n                    android:id=\"@+id/btn_increase\"\r\n                    android:layout_width=\"30dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"+\"\r\n                    android:textColor=\"#4CAF50\"\r\n                    android:textSize=\"24sp\"\r\n                    android:padding=\"8dp\"\r\n                    android:gravity=\"center\"/>\r\n            </LinearLayout>\r\n\r\n            <RelativeLayout\r\n                android:id=\"@+id/product_description\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/quantity\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginEnd=\"16dp\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:text=\"@string/description\"\r\n                    android:textSize=\"16sp\"\r\n                    android:fontFamily=\"@font/gabarito\"\r\n                    android:id=\"@+id/description_title\"\r\n                    android:textColor=\"@color/black\"/>\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:id=\"@+id/description\"\r\n                    android:layout_below=\"@+id/description_title\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginEnd=\"16dp\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:textSize=\"13sp\"\r\n                    android:text=\"@string/descriptions\"\r\n                    android:maxLines=\"3\"\r\n                    android:ellipsize=\"end\"/>\r\n\r\n                <ImageButton\r\n                    android:id=\"@+id/btn_expand\"\r\n                    android:layout_width=\"32dp\"\r\n                    android:layout_height=\"32dp\"\r\n                    android:layout_below=\"@+id/description\"\r\n                    android:layout_centerHorizontal=\"true\"\r\n                    android:layout_marginTop=\"8dp\"\r\n                    android:src=\"@drawable/down\"\r\n                    android:background=\"@color/transparent\"/>\r\n            </RelativeLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/shop_info\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/product_description\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:orientation=\"vertical\">\r\n\r\n                <androidx.cardview.widget.CardView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_margin=\"8dp\"\r\n                    android:background=\"@color/background_light\"\r\n                    app:cardElevation=\"0dp\">\r\n\r\n                    <LinearLayout\r\n                        android:id=\"@+id/store\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:orientation=\"horizontal\"\r\n                        android:padding=\"16dp\">\r\n\r\n                        <de.hdodenhof.circleimageview.CircleImageView\r\n                            android:id=\"@+id/shop_avatar\"\r\n                            android:layout_width=\"40dp\"\r\n                            android:layout_height=\"40dp\"\r\n                            android:src=\"@drawable/user\"\r\n                            app:civ_border_width=\"2dp\"\r\n                            app:civ_border_color=\"#FF000000\"\r\n                            android:layout_marginEnd=\"16dp\"/>\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/shop_name\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:text=\"Tên người bán\"\r\n                            android:textSize=\"16sp\"\r\n                            android:textStyle=\"bold\"\r\n                            android:textColor=\"#000000\"/>\r\n                    </LinearLayout>\r\n                </androidx.cardview.widget.CardView>\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/rating\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/shop_info\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:orientation=\"horizontal\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_gravity=\"center\"\r\n                    android:textSize=\"16sp\"\r\n                    android:text=\"Đánh giá sản phẩm\"\r\n                    android:fontFamily=\"@font/gabarito\"\r\n                    android:id=\"@+id/quantity_title\"\r\n                    android:textColor=\"@color/black\"/>\r\n\r\n                <RatingBar\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:rating=\"4.5\"\r\n                    style=\"?android:attr/ratingBarStyleIndicator\"\r\n                    android:progressTint=\"#FFCC01\"\r\n                    android:id=\"@+id/totalRating\"\r\n                    android:layout_marginStart=\"40dp\"/>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:id=\"@+id/reviews\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@+id/rating\">\r\n\r\n                <de.hdodenhof.circleimageview.CircleImageView\r\n                    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n                    android:id=\"@+id/user_avatar\"\r\n                    android:layout_width=\"40dp\"\r\n                    android:layout_height=\"40dp\"\r\n                    android:src=\"@drawable/user\"\r\n                    app:civ_border_width=\"2dp\"\r\n                    app:civ_border_color=\"#FF000000\"\r\n                    android:layout_marginStart=\"16dp\"\r\n                    android:layout_marginTop=\"16dp\"/>\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"0dp\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"vertical\"\r\n                    android:layout_weight=\"1\"\r\n                    android:padding=\"10dp\"\r\n                    android:id=\"@+id/user_rv\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/user_name\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:text=\"User name\"\r\n                        android:textStyle=\"bold\"\r\n                        android:textSize=\"16sp\"\r\n                        android:textColor=\"#000000\" />\r\n\r\n                    <RatingBar\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:rating=\"3\"\r\n                        style=\"?android:attr/ratingBarStyleIndicator\"\r\n                        android:progressTint=\"#FFCC01\"\r\n                        android:id=\"@+id/userRating\"/>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/user_review\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginTop=\"4dp\"\r\n                        android:text=\"@string/user_review\"\r\n                        android:textSize=\"14sp\"\r\n                        android:textColor=\"#616161\" />\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"16dp\"\r\n                android:layout_below=\"@id/reviews\"/>\r\n\r\n        </RelativeLayout>\r\n    </ScrollView>\r\n\r\n    <RelativeLayout\r\n        android:id=\"@+id/footer\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_alignParentBottom=\"true\">\r\n\r\n        <Button\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"60dp\"\r\n            android:layout_marginStart=\"48dp\"\r\n            android:layout_marginEnd=\"48dp\"\r\n            android:backgroundTint=\"@color/green\"\r\n            app:cornerRadius=\"24dp\"\r\n            android:text=\"@string/add_cart\"/>\r\n    </RelativeLayout>\r\n</RelativeLayout>
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/res/layout/activity_product_detail.xml b/app/src/main/res/layout/activity_product_detail.xml
----- a/app/src/main/res/layout/activity_product_detail.xml	
--+++ b/app/src/main/res/layout/activity_product_detail.xml	
--@@ -5,26 +5,23 @@
--     android:id="@+id/main1"
--     android:layout_width="match_parent"
--     android:layout_height="match_parent"
--+    android:padding="16dp"
--     tools:context=".ui.ProductPage.ProductDetailActivity">
--+
--     <RelativeLayout
--+        android:id="@+id/header"
--         android:layout_width="match_parent"
--         android:layout_height="wrap_content"
---        android:id="@+id/header">
--+        android:padding="8dp">
-- 
--         <ImageButton
--             android:id="@+id/btn_back"
--             android:layout_width="32dp"
--             android:layout_height="32dp"
---            android:layout_marginStart="24dp"
---            android:layout_marginTop="16dp"
---            android:layout_marginBottom="8dp"
--+            android:layout_marginStart="8dp"
--+            android:layout_marginTop="8dp"
--             android:background="@color/background_light"
--             android:src="@drawable/chevron_left"
---            app:layout_constraintEnd_toEndOf="parent"
---            app:layout_constraintHorizontal_bias="0.0"
---            app:layout_constraintStart_toStartOf="parent"
---            app:layout_constraintTop_toTopOf="parent"
---            tools:ignore="MissingConstraints"
--             android:backgroundTint="@color/white"/>
--     </RelativeLayout>
-- 
--@@ -32,12 +29,9 @@
--         android:id="@+id/scrollView"
--         android:layout_width="match_parent"
--         android:layout_height="wrap_content"
---        android:layout_marginTop="4dp"
---        app:layout_constraintTop_toBottomOf="@+id/header"
---        tools:layout_editor_absoluteX="0dp"
--         android:layout_below="@id/header"
---        android:scrollbars="none"
---        android:layout_above="@id/footer">
--+        android:layout_above="@id/footer"
--+        android:scrollbars="none">
-- 
--         <RelativeLayout
--             android:id="@+id/product_detail"
--@@ -53,14 +47,26 @@
--                 app:iss_period="1000"
--                 app:iss_title_background="@color/transparent"/>
-- 
--+            <TextView
--+                android:id="@+id/product_price"
--+                android:layout_width="wrap_content"
--+                android:layout_height="wrap_content"
--+                android:layout_marginStart="16dp"
--+                android:layout_marginEnd="16dp"
--+                android:layout_marginBottom="8dp"
--+                android:text="@string/price"
--+                android:layout_below="@+id/product_name"
--+                android:fontFamily="@font/gabarito"
--+                android:textSize="28sp"
--+                android:textColor="@android:color/holo_red_dark"/>
--+
--             <TextView
--                 android:id="@+id/product_name"
--                 android:layout_width="match_parent"
--                 android:layout_height="wrap_content"
---                android:layout_marginTop="10dp"
--+                android:layout_marginTop="15dp"
--                 android:layout_marginStart="16dp"
---                android:layout_marginEnd="24dp"
---                android:layout_marginBottom="8dp"
--+                android:layout_marginEnd="16dp"
--                 android:text="@string/product_name"
--                 android:layout_below="@+id/product_image"
--                 android:fontFamily="@font/gabarito"
--@@ -68,25 +74,12 @@
--                 android:textAllCaps="true"
--                 android:textColor="@color/black"/>
-- 
---            <TextView
---                android:id="@+id/product_price"
---                android:layout_width="wrap_content"
---                android:layout_height="wrap_content"
---                android:layout_marginStart="24dp"
---                android:layout_marginEnd="24dp"
---                android:layout_marginBottom="8dp"
---                android:text="@string/price"
---                android:layout_below="@+id/product_name"
---                android:fontFamily="@font/gabarito"
---                android:textSize="24sp"
---                android:textColor="@android:color/holo_red_dark"/>
---
--             <TextView
--                 android:id="@+id/address"
--                 android:layout_width="wrap_content"
--                 android:layout_height="wrap_content"
---                android:layout_marginStart="24dp"
---                android:layout_marginEnd="24dp"
--+                android:layout_marginStart="16dp"
--+                android:layout_marginEnd="16dp"
--                 android:layout_marginBottom="16dp"
--                 android:text="@string/address"
--                 android:layout_below="@+id/product_price"
--@@ -100,7 +93,9 @@
--                 android:layout_height="wrap_content"
--                 android:layout_below="@+id/address"
--                 android:layout_marginStart="16dp"
---                android:layout_marginBottom="10dp">
--+                android:layout_marginBottom="10dp"
--+                android:orientation="horizontal">
--+
--                 <TextView
--                     android:id="@+id/btn_decrease"
--                     android:layout_width="30dp"
--@@ -143,26 +138,26 @@
--                 android:layout_below="@+id/quantity">
-- 
--                 <TextView
--+                    android:id="@+id/description_title"
--                     android:layout_width="match_parent"
--                     android:layout_height="wrap_content"
---                    android:layout_marginStart="16dp"
--+                    android:layout_marginStart="15dp"
--                     android:layout_marginEnd="16dp"
--                     android:layout_marginTop="8dp"
--                     android:text="@string/description"
---                    android:textSize="16sp"
--+                    android:textSize="17sp"
--                     android:fontFamily="@font/gabarito"
---                    android:id="@+id/description_title"
--                     android:textColor="@color/black"/>
-- 
--                 <TextView
--+                    android:id="@+id/description"
--                     android:layout_width="match_parent"
--                     android:layout_height="wrap_content"
---                    android:id="@+id/description"
--                     android:layout_below="@+id/description_title"
--                     android:layout_marginStart="16dp"
--                     android:layout_marginEnd="16dp"
--                     android:layout_marginTop="8dp"
---                    android:textSize="13sp"
--+                    android:textSize="15sp"
--                     android:text="@string/descriptions"
--                     android:maxLines="3"
--                     android:ellipsize="end"/>
--@@ -183,7 +178,9 @@
--                 android:layout_width="match_parent"
--                 android:layout_height="wrap_content"
--                 android:layout_below="@+id/product_description"
--+                android:layout_margin="8dp"
--                 android:layout_marginTop="24dp"
--+                android:background="@color/transparent"
--                 android:orientation="vertical">
-- 
--                 <androidx.cardview.widget.CardView
--@@ -197,29 +194,27 @@
--                         android:id="@+id/store"
--                         android:layout_width="match_parent"
--                         android:layout_height="wrap_content"
---                        android:orientation="horizontal"
---                        android:padding="16dp">
--+                        android:orientation="horizontal">
-- 
--                         <de.hdodenhof.circleimageview.CircleImageView
---                            android:id="@+id/shop_avatar"
---                            android:layout_width="40dp"
---                            android:layout_height="40dp"
--+                            android:id="@+id/store_img"
--+                            android:layout_width="50dp"
--+                            android:layout_height="50dp"
--+                            android:layout_marginEnd="16dp"
--                             android:src="@drawable/user"
---                            app:civ_border_width="2dp"
--                             app:civ_border_color="#FF000000"
---                            android:layout_marginEnd="16dp"/>
--+                            app:civ_border_width="2dp" />
-- 
--                         <TextView
---                            android:id="@+id/shop_name"
--+                            android:id="@+id/store_name"
--                             android:layout_width="wrap_content"
--                             android:layout_height="wrap_content"
--                             android:text="Tên người bán"
---                            android:textSize="16sp"
---                            android:textStyle="bold"
---                            android:textColor="#000000"/>
--+                            android:textColor="#000000"
--+                            android:textSize="20sp"
--+                            android:textStyle="bold" />
--                     </LinearLayout>
--                 </androidx.cardview.widget.CardView>
---
--             </LinearLayout>
-- 
--             <LinearLayout
--@@ -228,8 +223,11 @@
--                 android:layout_height="wrap_content"
--                 android:layout_below="@+id/shop_info"
--                 android:layout_marginTop="24dp"
---                android:orientation="horizontal">
--+                android:orientation="horizontal"
--+                android:padding="8dp">
--+
--                 <TextView
--+                    android:id="@+id/quantity_title"
--                     android:layout_width="wrap_content"
--                     android:layout_height="wrap_content"
--                     android:layout_marginStart="16dp"
--@@ -237,16 +235,15 @@
--                     android:textSize="16sp"
--                     android:text="Đánh giá sản phẩm"
--                     android:fontFamily="@font/gabarito"
---                    android:id="@+id/quantity_title"
--                     android:textColor="@color/black"/>
-- 
--                 <RatingBar
--+                    android:id="@+id/totalRating"
--                     android:layout_width="wrap_content"
--                     android:layout_height="wrap_content"
--                     android:rating="4.5"
--                     style="?android:attr/ratingBarStyleIndicator"
--                     android:progressTint="#FFCC01"
---                    android:id="@+id/totalRating"
--                     android:layout_marginStart="40dp"/>
--             </LinearLayout>
-- 
--@@ -254,10 +251,10 @@
--                 android:id="@+id/reviews"
--                 android:layout_width="match_parent"
--                 android:layout_height="wrap_content"
---                android:layout_below="@+id/rating">
--+                android:layout_below="@+id/rating"
--+                android:padding="8dp">
-- 
--                 <de.hdodenhof.circleimageview.CircleImageView
---                    xmlns:app="http://schemas.android.com/apk/res-auto"
--                     android:id="@+id/user_avatar"
--                     android:layout_width="40dp"
--                     android:layout_height="40dp"
--@@ -268,12 +265,12 @@
--                     android:layout_marginTop="16dp"/>
-- 
--                 <LinearLayout
--+                    android:id="@+id/user_rv"
--                     android:layout_width="0dp"
--                     android:layout_height="wrap_content"
--                     android:orientation="vertical"
--                     android:layout_weight="1"
---                    android:padding="10dp"
---                    android:id="@+id/user_rv">
--+                    android:padding="10dp">
-- 
--                     <TextView
--                         android:id="@+id/user_name"
--@@ -285,12 +282,12 @@
--                         android:textColor="#000000" />
-- 
--                     <RatingBar
--+                        android:id="@+id/userRating"
--                         android:layout_width="wrap_content"
--                         android:layout_height="wrap_content"
--                         android:rating="3"
--                         style="?android:attr/ratingBarStyleIndicator"
---                        android:progressTint="#FFCC01"
---                        android:id="@+id/userRating"/>
--+                        android:progressTint="#FFCC01"/>
-- 
--                     <TextView
--                         android:id="@+id/user_review"
--@@ -302,12 +299,12 @@
--                         android:textColor="#616161" />
--                 </LinearLayout>
--             </LinearLayout>
--+
--             <androidx.recyclerview.widget.RecyclerView
--                 android:layout_width="match_parent"
--                 android:layout_height="wrap_content"
--                 android:layout_marginTop="16dp"
--                 android:layout_below="@id/reviews"/>
---
--         </RelativeLayout>
--     </ScrollView>
-- 
--@@ -315,7 +312,8 @@
--         android:id="@+id/footer"
--         android:layout_width="match_parent"
--         android:layout_height="wrap_content"
---        android:layout_alignParentBottom="true">
--+        android:layout_alignParentBottom="true"
--+        android:padding="16dp">
-- 
--         <Button
--             android:layout_width="match_parent"
--Index: app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.ui.Homepage;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.SpacesItemDecoration;\r\nimport com.example.agrimart.adapter.CategoryAdapter;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.FragmentHomeBinding;\r\nimport com.example.agrimart.ui.ProductPage.ProductDetailActivity;\r\nimport com.example.agrimart.viewmodel.HomeFragmentViewModel;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class HomeFragment extends Fragment {\r\n    ImageButton btnSearch;\r\n    TextView search;\r\n    HomeFragmentViewModel viewModel;\r\n    FragmentHomeBinding binding;\r\n\r\n    public HomeFragment() {\r\n        // Required empty public constructor\r\n    }\r\n\r\n    public static HomeFragment newInstance() {\r\n        return new HomeFragment();\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        binding=DataBindingUtil.inflate(inflater,R.layout.fragment_home,container,false);\r\n        viewModel=new ViewModelProvider(this).get(HomeFragmentViewModel.class);\r\n\r\n        int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);\r\n        binding.setViewmodel(viewModel);\r\n        View view = binding.getRoot();\r\n\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\r\n            Window window = getActivity().getWindow();\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n        }\r\n\r\n//        if (getActivity() != null) {\r\n//            getActivity().getWindow().setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n//        }\r\n        viewModel.getData();\r\n        viewModel.categories.observe(getViewLifecycleOwner(), categories -> {\r\n            if (categories != null) {\r\n                CategoryAdapter categoryAdapter = new CategoryAdapter(categories);\r\n                binding.rvCategories.setAdapter(categoryAdapter);\r\n                binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));\r\n                Log.d(\"duy1\", \"onCreateView: \" + categories.size());\r\n            }\r\n        });\r\n\r\n\r\n        List<Product> products = new ArrayList<>();\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n//        products.add(new Product(R.drawable.banana, \"Chuối nhà trồng\", \"45.000\"));\r\n\r\n        ProductAdapter productAdapter = new ProductAdapter(products, product -> {\r\n            Intent intent = new Intent(getContext(), ProductDetailActivity.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        binding.rvProducts.setLayoutManager(new GridLayoutManager(getContext(), 2));\r\n        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));\r\n        binding.rvProducts.setAdapter(productAdapter);\r\n\r\n        addControls(view);\r\n        addEvents();\r\n\r\n        return view;\r\n    }\r\n\r\n    private void addEvents() {\r\n        btnSearch.setOnClickListener(View -> {\r\n            Intent intent=new Intent(getActivity(), SearchActivity.class);\r\n            getActivity().startActivity(intent);\r\n        });\r\n\r\n        search.setOnClickListener(View -> {\r\n            Intent intent=new Intent(getContext(), SearchActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n\r\n    private void addControls(View view) {\r\n        btnSearch = view.findViewById(R.id.search_icon);\r\n        search = view.findViewById(R.id.search_input);\r\n    }\r\n\r\n    private void loadFragment(Fragment fragment) {\r\n        getActivity().getSupportFragmentManager().beginTransaction()\r\n                .replace(R.id.fragment_container, fragment)\r\n                .commit();\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
----- a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	
--+++ b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	
--@@ -3,15 +3,12 @@
-- import android.content.Intent;
-- import android.os.Build;
-- import android.os.Bundle;
---
-- import androidx.annotation.NonNull;
-- import androidx.core.content.ContextCompat;
-- import androidx.databinding.DataBindingUtil;
-- import androidx.fragment.app.Fragment;
-- import androidx.lifecycle.ViewModelProvider;
-- import androidx.recyclerview.widget.GridLayoutManager;
---import androidx.recyclerview.widget.RecyclerView;
---
-- import android.util.Log;
-- import android.view.LayoutInflater;
-- import android.view.View;
--@@ -25,23 +22,22 @@
-- import com.example.agrimart.SpacesItemDecoration;
-- import com.example.agrimart.adapter.CategoryAdapter;
-- import com.example.agrimart.adapter.ProductAdapter;
---import com.example.agrimart.data.model.Category;
-- import com.example.agrimart.data.model.Product;
-- import com.example.agrimart.databinding.FragmentHomeBinding;
-- import com.example.agrimart.ui.ProductPage.ProductDetailActivity;
-- import com.example.agrimart.viewmodel.HomeFragmentViewModel;
-- 
---import java.util.ArrayList;
-- import java.util.List;
-- 
-- public class HomeFragment extends Fragment {
--+    private static final String TAG = "HomeFragment";
--     ImageButton btnSearch;
--     TextView search;
--     HomeFragmentViewModel viewModel;
--     FragmentHomeBinding binding;
-- 
--     public HomeFragment() {
---        // Required empty public constructor
--+
--     }
-- 
--     public static HomeFragment newInstance() {
--@@ -54,10 +50,9 @@
--     }
-- 
--     @Override
---    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container,
---                             Bundle savedInstanceState) {
---        binding=DataBindingUtil.inflate(inflater,R.layout.fragment_home,container,false);
---        viewModel=new ViewModelProvider(this).get(HomeFragmentViewModel.class);
--+    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
--+        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_home, container, false);
--+        viewModel = new ViewModelProvider(this).get(HomeFragmentViewModel.class);
-- 
--         int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);
--         binding.setViewmodel(viewModel);
--@@ -69,36 +64,35 @@
--             window.setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));
--         }
-- 
---//        if (getActivity() != null) {
---//            getActivity().getWindow().setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));
---//        }
--         viewModel.getData();
--+        viewModel.getProducts();
--+
--         viewModel.categories.observe(getViewLifecycleOwner(), categories -> {
--             if (categories != null) {
--                 CategoryAdapter categoryAdapter = new CategoryAdapter(categories);
--                 binding.rvCategories.setAdapter(categoryAdapter);
--                 binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));
---                Log.d("duy1", "onCreateView: " + categories.size());
--+                Log.d(TAG, "Categories loaded: " + categories.size());
--             }
--         });
-- 
---
---        List<Product> products = new ArrayList<>();
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---//        products.add(new Product(R.drawable.banana, "Chuối nhà trồng", "45.000"));
---
---        ProductAdapter productAdapter = new ProductAdapter(products, product -> {
---            Intent intent = new Intent(getContext(), ProductDetailActivity.class);
---            startActivity(intent);
---        });
--+        viewModel.products.observe(getViewLifecycleOwner(), products -> {
--+            if (products != null) {
--+                ProductAdapter productAdapter = new ProductAdapter(products, product -> {
--+                    try {
--+                        Intent intent = new Intent(getContext(), ProductDetailActivity.class);
--+                        intent.putExtra("product", product);
--+                        intent.putExtra("storeId", product.getStoreId());
--+                        startActivity(intent);
--+                    } catch (Exception e) {
-- 
---        binding.rvProducts.setLayoutManager(new GridLayoutManager(getContext(), 2));
---        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
---        binding.rvProducts.setAdapter(productAdapter);
--+                    }
--+                });
--+                binding.rvProducts.setLayoutManager(new GridLayoutManager(getContext(), 2));
--+                binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
--+                binding.rvProducts.setAdapter(productAdapter);
--+            }
--+        });
-- 
--         addControls(view);
--         addEvents();
--@@ -107,13 +101,13 @@
--     }
-- 
--     private void addEvents() {
---        btnSearch.setOnClickListener(View -> {
---            Intent intent=new Intent(getActivity(), SearchActivity.class);
--+        btnSearch.setOnClickListener(v -> {
--+            Intent intent = new Intent(getActivity(), SearchActivity.class);
--             getActivity().startActivity(intent);
--         });
-- 
---        search.setOnClickListener(View -> {
---            Intent intent=new Intent(getContext(), SearchActivity.class);
--+        search.setOnClickListener(v -> {
--+            Intent intent = new Intent(getContext(), SearchActivity.class);
--             startActivity(intent);
--         });
--     }
--Index: app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.ui.ProductPage;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.ImageButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\n\r\nimport com.denzcoskun.imageslider.ImageSlider;\r\nimport com.denzcoskun.imageslider.constants.ScaleTypes;\r\nimport com.denzcoskun.imageslider.models.SlideModel;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.ui.Store.StoreActivity;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class ProductDetailActivity extends AppCompatActivity {\r\n    ImageButton btn_back, btnExpand;\r\n    TextView description;\r\n    boolean isExpanded = false;\r\n    LinearLayout store;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_product_detail);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        description = findViewById(R.id.description);\r\n        btnExpand = findViewById(R.id.btn_expand);\r\n\r\n        btn_back = findViewById(R.id.btn_back);\r\n        btn_back.setOnClickListener(v -> finish());\r\n        store = findViewById(R.id.store);\r\n\r\n        ArrayList<SlideModel> imgList = new ArrayList<>();\r\n        imgList.add(new SlideModel(R.drawable.banana, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.apple, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.banana, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.apple, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.banana, \"\", ScaleTypes.FIT));\r\n        imgList.add(new SlideModel(R.drawable.apple, \"\", ScaleTypes.FIT));\r\n\r\n        ImageSlider imageSlider = findViewById(R.id.product_image);\r\n        imageSlider.setImageList(imgList, ScaleTypes.FIT);\r\n\r\n        btnExpand.setOnClickListener(v -> {\r\n            if (isExpanded) {\r\n                description.setMaxLines(3);\r\n                btnExpand.setImageResource(R.drawable.down);\r\n            } else {\r\n                description.setMaxLines(Integer.MAX_VALUE);\r\n                btnExpand.setImageResource(R.drawable.arrowhead_up);\r\n            }\r\n            isExpanded = !isExpanded;\r\n        });\r\n\r\n        store.setOnClickListener(v -> {\r\n            Intent intent = new Intent(ProductDetailActivity.this, StoreActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java b/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java
----- a/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java	
--+++ b/app/src/main/java/com/example/agrimart/ui/ProductPage/ProductDetailActivity.java	
--@@ -3,28 +3,40 @@
-- import android.content.Intent;
-- import android.os.Bundle;
-- import android.widget.ImageButton;
--+import android.widget.ImageView;
-- import android.widget.LinearLayout;
-- import android.widget.TextView;
-- 
-- import androidx.activity.EdgeToEdge;
--+import androidx.annotation.NonNull;
-- import androidx.appcompat.app.AppCompatActivity;
-- import androidx.core.graphics.Insets;
-- import androidx.core.view.ViewCompat;
-- import androidx.core.view.WindowInsetsCompat;
--+import androidx.lifecycle.Observer;
--+import androidx.lifecycle.ViewModelProvider;
-- 
--+import com.bumptech.glide.Glide;
-- import com.denzcoskun.imageslider.ImageSlider;
-- import com.denzcoskun.imageslider.constants.ScaleTypes;
-- import com.denzcoskun.imageslider.models.SlideModel;
-- import com.example.agrimart.R;
--+import com.example.agrimart.data.model.Product;
--+import com.example.agrimart.data.model.Store;
-- import com.example.agrimart.ui.Store.StoreActivity;
--+import com.example.agrimart.viewmodel.ProductDetailViewModel;
--+
-- 
-- import java.util.ArrayList;
-- 
-- public class ProductDetailActivity extends AppCompatActivity {
---    ImageButton btn_back, btnExpand;
---    TextView description;
---    boolean isExpanded = false;
---    LinearLayout store;
--+    private static final String TAG = "ProductDetailActivity";
--+    private ImageButton btn_back, btnExpand;
--+    private TextView description, productName, productPrice, storeName, storeAddress, storePhoneNumber;
--+    private ImageView storeAvatar;
--+    private boolean isExpanded = false;
--+    private LinearLayout store;
--+    private ProductDetailViewModel viewModel;
-- 
--     @Override
--     protected void onCreate(Bundle savedInstanceState) {
--@@ -37,24 +49,51 @@
--             return insets;
--         });
-- 
--+        viewModel = new ViewModelProvider(this).get(ProductDetailViewModel.class);
--+
--         description = findViewById(R.id.description);
--+        productName = findViewById(R.id.product_name);
--+        productPrice = findViewById(R.id.product_price);
--         btnExpand = findViewById(R.id.btn_expand);
---
--         btn_back = findViewById(R.id.btn_back);
---        btn_back.setOnClickListener(v -> finish());
--         store = findViewById(R.id.store);
--+        storeName = findViewById(R.id.store_name);
--+        storeAddress = findViewById(R.id.address);
--+        storeAvatar = findViewById(R.id.store_img);
--+
--+        btn_back.setOnClickListener(v -> finish());
--+
--+        Intent intent = getIntent();
--+        Product product = (Product) intent.getSerializableExtra("product");
--+
--+        if (product != null) {
--+            productName.setText(product.getName());
--+            productPrice.setText(String.format("%,.0f đ", product.getPrice()));
--+            description.setText(product.getDescription());
-- 
---        ArrayList<SlideModel> imgList = new ArrayList<>();
---        imgList.add(new SlideModel(R.drawable.banana, "", ScaleTypes.FIT));
---        imgList.add(new SlideModel(R.drawable.apple, "", ScaleTypes.FIT));
---        imgList.add(new SlideModel(R.drawable.banana, "", ScaleTypes.FIT));
---        imgList.add(new SlideModel(R.drawable.apple, "", ScaleTypes.FIT));
---        imgList.add(new SlideModel(R.drawable.banana, "", ScaleTypes.FIT));
---        imgList.add(new SlideModel(R.drawable.apple, "", ScaleTypes.FIT));
---
---        ImageSlider imageSlider = findViewById(R.id.product_image);
---        imageSlider.setImageList(imgList, ScaleTypes.FIT);
--+            ArrayList<SlideModel> imgList = new ArrayList<>();
--+            if (product.getImages() != null) {
--+                for (String url : product.getImages()) {
--+                    imgList.add(new SlideModel(url, "", ScaleTypes.FIT));
--+                }
--+            }
--+            ImageSlider imageSlider = findViewById(R.id.product_image);
--+            imageSlider.setImageList(imgList, ScaleTypes.FIT);
-- 
--+            viewModel.loadStoreInfo(product.getStoreId());
--+        }
--+
--+        viewModel.getStoreInfo().observe(this, new Observer<Store>() {
--+            @Override
--+            public void onChanged(Store storeInfo) {
--+                if (storeInfo != null) {
--+                    storeName.setText(storeInfo.getName());
--+                    storeAddress.setText(storeInfo.getFullAddress());
--+                    Glide.with(ProductDetailActivity.this).load(storeInfo.getAvatarUrl()).into(storeAvatar);
--+                }
--+            }
--+        });
--+
--         btnExpand.setOnClickListener(v -> {
--             if (isExpanded) {
--                 description.setMaxLines(3);
--@@ -67,8 +106,9 @@
--         });
-- 
--         store.setOnClickListener(v -> {
---            Intent intent = new Intent(ProductDetailActivity.this, StoreActivity.class);
---            startActivity(intent);
--+            Intent storeIntent = new Intent(ProductDetailActivity.this, StoreActivity.class);
--+            storeIntent.putExtra("storeId", product.getStoreId());
--+            startActivity(storeIntent);
--         });
--     }
---}
--\ No newline at end of file
--+}
--Index: app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.viewmodel;\r\n\r\nimport android.util.Log;\r\n\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.List;\r\n\r\npublic class HomeFragmentViewModel extends ViewModel {\r\n    public MutableLiveData<List<Category>> categories;\r\n\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    public HomeFragmentViewModel() {\r\n        categories = new MutableLiveData<>();\r\n    }\r\n\r\n    public void getData(){\r\n        db.collection(\"categories\")\r\n                .orderBy(\"id\")\r\n                .get().addOnCompleteListener(task -> {\r\n            if (task.isSuccessful()) {\r\n                List<Category> categoryList = task.getResult().toObjects(Category.class);\r\n                categories.setValue(categoryList);\r\n            } else {\r\n                Log.e(\"HomeFragmentViewModel\", \"Error getting documents: \", task.getException());\r\n            }\r\n        });\r\n    }\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java
----- a/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java	
--+++ b/app/src/main/java/com/example/agrimart/viewmodel/HomeFragmentViewModel.java	
--@@ -6,28 +6,47 @@
-- import androidx.lifecycle.ViewModel;
-- 
-- import com.example.agrimart.data.model.Category;
--+import com.example.agrimart.data.model.Product;
-- import com.google.firebase.firestore.FirebaseFirestore;
-- 
-- import java.util.List;
-- 
-- public class HomeFragmentViewModel extends ViewModel {
--     public MutableLiveData<List<Category>> categories;
--+    public MutableLiveData<List<Product>> products;
-- 
--     FirebaseFirestore db = FirebaseFirestore.getInstance();
--+
--     public HomeFragmentViewModel() {
--         categories = new MutableLiveData<>();
--+        products = new MutableLiveData<>();
--     }
-- 
---    public void getData(){
--+    public void getData() {
--         db.collection("categories")
--                 .orderBy("id")
---                .get().addOnCompleteListener(task -> {
---            if (task.isSuccessful()) {
---                List<Category> categoryList = task.getResult().toObjects(Category.class);
---                categories.setValue(categoryList);
---            } else {
---                Log.e("HomeFragmentViewModel", "Error getting documents: ", task.getException());
---            }
---        });
--+                .get()
--+                .addOnCompleteListener(task -> {
--+                    if (task.isSuccessful()) {
--+                        List<Category> categoryList = task.getResult().toObjects(Category.class);
--+                        categories.setValue(categoryList);
--+                    } else {
--+                        Log.e("HomeFragmentViewModel", "Error getting categories: ", task.getException());
--+                    }
--+                });
--+    }
--+
--+    public void getProducts() {
--+        db.collection("products")
--+                .orderBy("product_id")
--+                .get()
--+                .addOnCompleteListener(task -> {
--+                    if (task.isSuccessful()) {
--+                        List<Product> productList = task.getResult().toObjects(Product.class);
--+                        products.setValue(productList);
--+                    } else {
--+                        Log.e("HomeFragmentViewModel", "Error getting products: ", task.getException());
--+                    }
--+                });
--     }
---}
--\ No newline at end of file
--+}
--Index: app/src/main/java/com/example/agrimart/data/model/User.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.data.model;\r\n\r\nimport com.google.gson.annotations.SerializedName;\r\nimport java.io.Serializable;\r\nimport java.util.Date;\r\n\r\npublic class User implements Serializable {\r\n    @SerializedName(\"userId\")\r\n    private String userId;\r\n    @SerializedName(\"role\")\r\n    private String role;\r\n    @SerializedName(\"fullName\")\r\n    private String fullName;\r\n    @SerializedName(\"email\")\r\n    private String email;\r\n    @SerializedName(\"phoneNumber\")\r\n    private String phoneNumber;\r\n    @SerializedName(\"password\")\r\n    private String password;\r\n    @SerializedName(\"address\")\r\n    private Address address;\r\n    @SerializedName(\"storeName\")\r\n    private String storeName;\r\n    @SerializedName(\"storeAddress\")\r\n    private Address storeAddress;\r\n    @SerializedName(\"storeImage\")\r\n    private String storeImage;\r\n    @SerializedName(\"storeRating\")\r\n    private double storeRating;\r\n    @SerializedName(\"paymentAccount\")\r\n    private PaymentAccount paymentAccount;\r\n    @SerializedName(\"createdAt\")\r\n    private Date createdAt;\r\n    @SerializedName(\"updatedAt\")\r\n    private Date updatedAt;\r\n\r\n    public User(String userId, String role, String fullName, String email, String phoneNumber, String password, Address address, String storeName, Address storeAddress, String storeImage, double storeRating, PaymentAccount paymentAccount, Date createdAt, Date updatedAt) {\r\n        this.userId = userId;\r\n        this.role = role;\r\n        this.fullName = fullName;\r\n        this.email = email;\r\n        this.phoneNumber = phoneNumber;\r\n        this.password = password;\r\n        this.address = address;\r\n        this.storeName = storeName;\r\n        this.storeAddress = storeAddress;\r\n        this.storeImage = storeImage;\r\n        this.storeRating = storeRating;\r\n        this.paymentAccount = paymentAccount;\r\n        this.createdAt = createdAt;\r\n        this.updatedAt = updatedAt;\r\n    }\r\n\r\n    public String getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public void setUserId(String userId) {\r\n        this.userId = userId;\r\n    }\r\n\r\n    public String getRole() {\r\n        return role;\r\n    }\r\n\r\n    public void setRole(String role) {\r\n        this.role = role;\r\n    }\r\n\r\n    public String getFullName() {\r\n        return fullName;\r\n    }\r\n\r\n    public void setFullName(String fullName) {\r\n        this.fullName = fullName;\r\n    }\r\n\r\n    public String getEmail() {\r\n        return email;\r\n    }\r\n\r\n    public void setEmail(String email) {\r\n        this.email = email;\r\n    }\r\n\r\n    public String getPhoneNumber() {\r\n        return phoneNumber;\r\n    }\r\n\r\n    public void setPhoneNumber(String phoneNumber) {\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n\r\n    public String getPassword() {\r\n        return password;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        this.password = password;\r\n    }\r\n\r\n    public Address getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(Address address) {\r\n        this.address = address;\r\n    }\r\n\r\n    public String getStoreName() {\r\n        return storeName;\r\n    }\r\n\r\n    public void setStoreName(String storeName) {\r\n        this.storeName = storeName;\r\n    }\r\n\r\n    public Address getStoreAddress() {\r\n        return storeAddress;\r\n    }\r\n\r\n    public void setStoreAddress(Address storeAddress) {\r\n        this.storeAddress = storeAddress;\r\n    }\r\n\r\n    public String getStoreImage() {\r\n        return storeImage;\r\n    }\r\n\r\n    public void setStoreImage(String storeImage) {\r\n        this.storeImage = storeImage;\r\n    }\r\n\r\n    public double getStoreRating() {\r\n        return storeRating;\r\n    }\r\n\r\n    public void setStoreRating(double storeRating) {\r\n        this.storeRating = storeRating;\r\n    }\r\n\r\n    public PaymentAccount getPaymentAccount() {\r\n        return paymentAccount;\r\n    }\r\n\r\n    public void setPaymentAccount(PaymentAccount paymentAccount) {\r\n        this.paymentAccount = paymentAccount;\r\n    }\r\n\r\n    public Date getCreatedAt() {\r\n        return createdAt;\r\n    }\r\n\r\n    public void setCreatedAt(Date createdAt) {\r\n        this.createdAt = createdAt;\r\n    }\r\n\r\n    public Date getUpdatedAt() {\r\n        return updatedAt;\r\n    }\r\n\r\n    public void setUpdatedAt(Date updatedAt) {\r\n        this.updatedAt = updatedAt;\r\n    }\r\n\r\n//    public static class Address {\r\n//        @SerializedName(\"street\")\r\n//        private String street;\r\n//        @SerializedName(\"district\")\r\n//        private String district;\r\n//        @SerializedName(\"city\")\r\n//        private String city;\r\n//\r\n//        // Constructors, getters, and setters...\r\n//    }\r\n\r\n    public static class PaymentAccount {\r\n        @SerializedName(\"accountNumber\")\r\n        private String accountNumber;\r\n        @SerializedName(\"bankName\")\r\n        private String bankName;\r\n        @SerializedName(\"branchName\")\r\n        private String branchName;\r\n\r\n        // Constructors, getters, and setters...\r\n    }\r\n\r\n    // Getters and setters for User class fields\r\n    // ...\r\n}
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/data/model/User.java b/app/src/main/java/com/example/agrimart/data/model/User.java
----- a/app/src/main/java/com/example/agrimart/data/model/User.java	
--+++ b/app/src/main/java/com/example/agrimart/data/model/User.java	
--@@ -1,3 +1,4 @@
--+// User.java
-- package com.example.agrimart.data.model;
-- 
-- import com.google.gson.annotations.SerializedName;
--@@ -34,6 +35,10 @@
--     @SerializedName("updatedAt")
--     private Date updatedAt;
-- 
--+    // No-argument constructor
--+    public User() {
--+    }
--+
--     public User(String userId, String role, String fullName, String email, String phoneNumber, String password, Address address, String storeName, Address storeAddress, String storeImage, double storeRating, PaymentAccount paymentAccount, Date createdAt, Date updatedAt) {
--         this.userId = userId;
--         this.role = role;
--@@ -163,16 +168,49 @@
--         this.updatedAt = updatedAt;
--     }
-- 
---//    public static class Address {
---//        @SerializedName("street")
---//        private String street;
---//        @SerializedName("district")
---//        private String district;
---//        @SerializedName("city")
---//        private String city;
---//
---//        // Constructors, getters, and setters...
---//    }
--+    public static class Address {
--+        @SerializedName("street")
--+        private String street;
--+        @SerializedName("district")
--+        private String district;
--+        @SerializedName("city")
--+        private String city;
--+
--+        public Address() {
--+        }
--+
--+        public Address(String street, String district, String city) {
--+            this.street = street;
--+            this.district = district;
--+            this.city = city;
--+        }
--+
--+        // Getters and setters...
--+
--+        public String getStreet() {
--+            return street;
--+        }
--+
--+        public void setStreet(String street) {
--+            this.street = street;
--+        }
--+
--+        public String getDistrict() {
--+            return district;
--+        }
--+
--+        public void setDistrict(String district) {
--+            this.district = district;
--+        }
--+
--+        public String getCity() {
--+            return city;
--+        }
--+
--+        public void setCity(String city) {
--+            this.city = city;
--+        }
--+    }
-- 
--     public static class PaymentAccount {
--         @SerializedName("accountNumber")
--@@ -182,9 +220,15 @@
--         @SerializedName("branchName")
--         private String branchName;
-- 
---        // Constructors, getters, and setters...
---    }
--+        public PaymentAccount() {
--+        }
--+
--+        public PaymentAccount(String accountNumber, String bankName, String branchName) {
--+            this.accountNumber = accountNumber;
--+            this.bankName = bankName;
--+            this.branchName = branchName;
--+        }
-- 
---    // Getters and setters for User class fields
---    // ...
--+        // Getters and setters...
--+    }
-- }
--\ No newline at end of file
--Index: app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java
--new file mode 100644
----- /dev/null	
--+++ b/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java	
--@@ -0,0 +1,56 @@
--+package com.example.agrimart.viewmodel;
--+
--+import androidx.lifecycle.LiveData;
--+import androidx.lifecycle.MutableLiveData;
--+import androidx.lifecycle.ViewModel;
--+
--+import com.example.agrimart.data.model.Store;
--+import com.google.firebase.firestore.DocumentSnapshot;
--+import com.google.firebase.firestore.FirebaseFirestore;
--+import com.google.firebase.firestore.ListenerRegistration;
--+
--+public class ProductDetailViewModel extends ViewModel {
--+    private final FirebaseFirestore db;
--+    private ListenerRegistration storeListener;
--+    private final MutableLiveData<Store> storeInfo = new MutableLiveData<>();
--+
--+    public ProductDetailViewModel() {
--+        db = FirebaseFirestore.getInstance();
--+    }
--+
--+    public LiveData<Store> getStoreInfo() {
--+        return storeInfo;
--+    }
--+
--+    public void loadStoreInfo(String storeId) {
--+        if (storeListener != null) {
--+            storeListener.remove();
--+        }
--+
--+        storeListener = db.collection("users").document(storeId)
--+                .addSnapshotListener((snapshot, e) -> {
--+                    if (e != null || snapshot == null || !snapshot.exists()) {
--+                        return;
--+                    }
--+                    String name = snapshot.getString("store_name");
--+                    String avatarUrl = snapshot.getString("userImage");
--+                    String street = snapshot.getString("store_address.street");
--+                    String ward = snapshot.getString("store_address.ward");
--+                    String district = snapshot.getString("store_address.district");
--+                    String city = snapshot.getString("store_address.city");
--+                    String phoneNumber = snapshot.getString("store_phone_number");
--+
--+                    Store info = new Store(name, avatarUrl, street, ward, district, city, phoneNumber);
--+                    storeInfo.setValue(info);
--+                });
--+    }
--+
--+    @Override
--+    protected void onCleared() {
--+        super.onCleared();
--+        if (storeListener != null) {
--+            storeListener.remove();
--+        }
--+    }
--+
--+}
--Index: app/src/main/java/com/example/agrimart/data/model/Store.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/data/model/Store.java b/app/src/main/java/com/example/agrimart/data/model/Store.java
--new file mode 100644
----- /dev/null	
--+++ b/app/src/main/java/com/example/agrimart/data/model/Store.java	
--@@ -0,0 +1,37 @@
--+package com.example.agrimart.data.model;
--+
--+public class Store {
--+    private final String name;
--+    private final String avatarUrl;
--+    private final String street;
--+    private final String ward;
--+    private final String district;
--+    private final String city;
--+    private final String phoneNumber;
--+
--+    public Store(String name, String avatarUrl, String street, String ward, String district, String city, String phoneNumber) {
--+        this.name = name;
--+        this.avatarUrl = avatarUrl;
--+        this.street = street;
--+        this.ward = ward;
--+        this.district = district;
--+        this.city = city;
--+        this.phoneNumber = phoneNumber;
--+    }
--+
--+    public String getName() {
--+        return name;
--+    }
--+
--+    public String getAvatarUrl() {
--+        return avatarUrl;
--+    }
--+
--+    public String getFullAddress() {
--+        return street + ", " + ward + ", " + district + ", " + city;
--+    }
--+
--+    public String getPhoneNumber() {
--+        return phoneNumber;
--+    }
--+}
--Index: app/src/main/java/com/example/agrimart/data/model/Address.java
--IDEA additional info:
--Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
--<+>package com.example.agrimart.data.model;\r\n\r\nimport com.google.gson.annotations.SerializedName;\r\n\r\npublic class Address {\r\n    @SerializedName(\"default\")\r\n    private boolean isDefault;\r\n    @SerializedName(\"detailedAddress\")\r\n    private String detailedAddress;\r\n    @SerializedName(\"name\")\r\n    private String name;\r\n    @SerializedName(\"phone\")\r\n    private String phone;\r\n    @SerializedName(\"street\")\r\n    private String street;\r\n\r\n    public String getAddressId() {\r\n        return this.AddressId;\r\n    }\r\n\r\n    public void setAddressId(String AddressId) {\r\n        this.AddressId = AddressId;\r\n    }\r\n\r\n    @SerializedName(\"AddressId\")\r\n    private String AddressId;\r\n    public Address() {\r\n\r\n    }\r\n    // Constructor\r\n    public Address(String AddressId,String name, String phone, String street, String detailedAddress, boolean isDefault) {\r\n        this.name = name;\r\n        this.phone = phone;\r\n        this.street = street;\r\n        this.detailedAddress = detailedAddress;\r\n        this.isDefault = isDefault;\r\n        this.AddressId = AddressId;\r\n    }\r\n\r\n    // Getters and Setters\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getPhone() {\r\n        return phone;\r\n    }\r\n\r\n    public void setPhone(String phone) {\r\n        this.phone = phone;\r\n    }\r\n\r\n    public String getStreet() {\r\n        return street;\r\n    }\r\n\r\n    public void setStreet(String street) {\r\n        this.street = street;\r\n    }\r\n\r\n    public String getDetailedAddress() {\r\n        return detailedAddress;\r\n    }\r\n\r\n    public void setDetailedAddress(String detailedAddress) {\r\n        this.detailedAddress = detailedAddress;\r\n    }\r\n\r\n    public boolean isDefault() {\r\n        return isDefault;\r\n    }\r\n\r\n    public void setDefault(boolean aDefault) {\r\n        isDefault = aDefault;\r\n    }\r\n}\r\n
--Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
--<+>UTF-8
--===================================================================
--diff --git a/app/src/main/java/com/example/agrimart/data/model/Address.java b/app/src/main/java/com/example/agrimart/data/model/Address.java
----- a/app/src/main/java/com/example/agrimart/data/model/Address.java	
--+++ b/app/src/main/java/com/example/agrimart/data/model/Address.java	
--@@ -27,7 +27,7 @@
--     public Address() {
-- 
--     }
---    // Constructor
--+
--     public Address(String AddressId,String name, String phone, String street, String detailedAddress, boolean isDefault) {
--         this.name = name;
--         this.phone = phone;
-Index: app/src/main/java/com/example/agrimart/data/model/Product.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.data.model;\r\n\r\nimport com.google.firebase.firestore.PropertyName;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class Product implements Serializable {\r\n\r\n    private String product_id;\r\n    private String name;\r\n    private double price;\r\n\r\n    @PropertyName(\"status\")\r\n    private String active;\r\n\r\n    @PropertyName(\"category_id\")\r\n    private String category;\r\n    private String description;\r\n    private int height;\r\n    private List<String> images;\r\n    private int length;\r\n    private int quantity;\r\n    private String storeId;\r\n    private int weight;\r\n    private int width;\r\n    private int soldQuantity;\r\n    private String created_at;\r\n\r\n\r\n    public Product() {\r\n    }\r\n\r\n    public Product(String name, double price, List<String> images) {\r\n        this.name = name;\r\n        this.price = price;\r\n        this.images = images;\r\n    }\r\n\r\n    public Product(String product_id, String name, double price, String active, String category, String description, int height, List<String> images, int length, int quantity, String storeId, int weight, int width, int soldQuantity) {\r\n        this.product_id = product_id;\r\n        this.name = name;\r\n        this.price = price;\r\n        this.active = active;\r\n        this.category = category;\r\n        this.description = description;\r\n        this.height = height;\r\n        this.images = images;\r\n        this.length = length;\r\n        this.quantity = quantity;\r\n        this.storeId = storeId;\r\n        this.weight = weight;\r\n        this.width = width;\r\n        this.soldQuantity = soldQuantity;\r\n    }\r\n\r\n    public String getCreated_at() {\r\n        return created_at;\r\n    }\r\n\r\n    public void setCreated_at(String created_at) {\r\n        this.created_at = created_at;\r\n    }\r\n\r\n    public String getProduct_id() {\r\n        return product_id;\r\n    }\r\n\r\n    public void setProduct_id(String product_id) {\r\n        this.product_id = product_id;\r\n    }\r\n\r\n\r\n    public static class Address {\r\n        private String city;\r\n        private String district;\r\n        private String street;\r\n        private String ward;\r\n\r\n        public String getCity() {\r\n            return city;\r\n        }\r\n\r\n        public void setCity(String city) {\r\n            this.city = city;\r\n        }\r\n\r\n        public String getDistrict() {\r\n            return district;\r\n        }\r\n\r\n        public void setDistrict(String district) {\r\n            this.district = district;\r\n        }\r\n\r\n        public String getStreet() {\r\n            return street;\r\n        }\r\n\r\n        public void setStreet(String street) {\r\n            this.street = street;\r\n        }\r\n\r\n        public String getWard() {\r\n            return ward;\r\n        }\r\n\r\n        public void setWard(String ward) {\r\n            this.ward = ward;\r\n        }\r\n    }\r\n\r\n    public Product(String imageUrl, String name, double price) {\r\n        this.images = Collections.singletonList(imageUrl);\r\n        this.name = name;\r\n        this.price = price;\r\n    }\r\n\r\n\r\n\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public double getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void setPrice(double price) {\r\n        this.price = price;\r\n    }\r\n\r\n    @PropertyName(\"status\")\r\n    public String getActive() {\r\n        return active;\r\n    }\r\n\r\n    @PropertyName(\"status\")\r\n    public void setActive(String active) {\r\n        this.active = active;\r\n    }\r\n\r\n    @PropertyName(\"category_id\")\r\n    public String getCategory() {\r\n        return category;\r\n    }\r\n\r\n    @PropertyName(\"category_id\")\r\n    public void setCategory(String category) {\r\n        this.category = category;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public int getHeight() {\r\n        return height;\r\n    }\r\n\r\n    public void setHeight(int height) {\r\n        this.height = height;\r\n    }\r\n\r\n    public List<String> getImages() {\r\n        return images;\r\n    }\r\n\r\n    public void setImages(List<String> images) {\r\n        this.images = images;\r\n    }\r\n\r\n    public int getLength() {\r\n        return length;\r\n    }\r\n\r\n    public void setLength(int length) {\r\n        this.length = length;\r\n    }\r\n\r\n    public int getQuantity() {\r\n        return quantity;\r\n    }\r\n\r\n    public void setQuantity(int quantity) {\r\n        this.quantity = quantity;\r\n    }\r\n\r\n    public String getStoreId() {\r\n        return storeId;\r\n    }\r\n\r\n    public void setStoreId(String storeId) {\r\n        this.storeId = storeId;\r\n    }\r\n\r\n    public int getWeight() {\r\n        return weight;\r\n    }\r\n\r\n    public void setWeight(int weight) {\r\n        this.weight = weight;\r\n    }\r\n\r\n    public int getWidth() {\r\n        return width;\r\n    }\r\n\r\n    public void setWidth(int width) {\r\n        this.width = width;\r\n    }\r\n\r\n    public int getSoldQuantity() {\r\n        return soldQuantity;\r\n    }\r\n\r\n    public void setSoldQuantity(int soldQuantity) {\r\n        this.soldQuantity = soldQuantity;\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/data/model/Product.java b/app/src/main/java/com/example/agrimart/data/model/Product.java
---- a/app/src/main/java/com/example/agrimart/data/model/Product.java	(revision eea9d4bf6f6c1c5c27e432e8d7149e77f8986ab7)
-+++ b/app/src/main/java/com/example/agrimart/data/model/Product.java	(date 1731425506949)
-@@ -11,10 +11,8 @@
-     private String product_id;
-     private String name;
-     private double price;
--
-     @PropertyName("status")
-     private String active;
--
-     @PropertyName("category_id")
-     private String category;
-     private String description;
Index: app/src/main/res/layout/fragment_return.xml
===================================================================
diff --git a/app/src/main/res/layout/fragment_return.xml b/app/src/main/res/layout/fragment_return.xml
deleted file mode 100644
--- a/app/src/main/res/layout/fragment_return.xml	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,14 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent"
-    tools:context=".ui.MyProfile.PurchasedOrders.ReturnFragment">
-
-    <!-- TODO: Update blank fragment layout -->
-    <TextView
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:text="@string/hello_blank_fragment" />
-
-</FrameLayout>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_delivered2.xml
===================================================================
diff --git a/app/src/main/res/layout/fragment_delivered2.xml b/app/src/main/res/layout/fragment_delivered2.xml
deleted file mode 100644
--- a/app/src/main/res/layout/fragment_delivered2.xml	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,13 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent"
-    tools:context=".ui.MyProfile.state_order.fragment.InTransitFragment" >
-
-    <androidx.recyclerview.widget.RecyclerView
-        android:id="@+id/rvOrder"
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        tools:listitem="@layout/item_order"/>
-</RelativeLayout>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_waiting.xml
===================================================================
diff --git a/app/src/main/res/layout/fragment_waiting.xml b/app/src/main/res/layout/fragment_waiting.xml
deleted file mode 100644
--- a/app/src/main/res/layout/fragment_waiting.xml	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,14 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent"
-    tools:context=".ui.MyProfile.PurchasedOrders.WaitingGoodsFragment">
-
-    <!-- TODO: Update blank fragment layout -->
-    <TextView
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:text="@string/hello_blank_fragment" />
-
-</FrameLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingConfirmFragment.java
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingConfirmFragment.java b/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingConfirmFragment.java
deleted file mode 100644
--- a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/WaitingConfirmFragment.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,66 +0,0 @@
-package com.example.agrimart.ui.MyProfile.PurchasedOrders;
-
-import android.os.Bundle;
-
-import androidx.fragment.app.Fragment;
-
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-
-import com.example.agrimart.R;
-
-/**
- * A simple {@link Fragment} subclass.
- * Use the {@link WaitingConfirmFragment#newInstance} factory method to
- * create an instance of this fragment.
- */
-public class WaitingConfirmFragment extends Fragment {
-
-    // TODO: Rename parameter arguments, choose names that match
-    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-    private static final String ARG_PARAM1 = "param1";
-    private static final String ARG_PARAM2 = "param2";
-
-    // TODO: Rename and change types of parameters
-    private String mParam1;
-    private String mParam2;
-
-    public WaitingConfirmFragment() {
-        // Required empty public constructor
-    }
-
-    /**
-     * Use this factory method to create a new instance of
-     * this fragment using the provided parameters.
-     *
-     * @param param1 Parameter 1.
-     * @param param2 Parameter 2.
-     * @return A new instance of fragment ConfirmFragment.
-     */
-    // TODO: Rename and change types and number of parameters
-    public static WaitingConfirmFragment newInstance(String param1, String param2) {
-        WaitingConfirmFragment fragment = new WaitingConfirmFragment();
-        Bundle args = new Bundle();
-        args.putString(ARG_PARAM1, param1);
-        args.putString(ARG_PARAM2, param2);
-        fragment.setArguments(args);
-        return fragment;
-    }
-
-    @Override
-    public void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-        if (getArguments() != null) {
-            mParam1 = getArguments().getString(ARG_PARAM1);
-            mParam2 = getArguments().getString(ARG_PARAM2);
-        }
-    }
-
-    @Override
-    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                             Bundle savedInstanceState) {
-        // Inflate the layout for this fragment
-        return inflater.inflate(R.layout.fragment_confirm, container, false);
-    }
-}
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_08_AM__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_08_AM__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_08_AM__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_08_AM__Changes_.xml	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_11_13_2024_11_08_AM_[Changes]" date="1731470924007" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_08_AM_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/13/2024 11:08 AM [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_11_AM__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_11_AM__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_11_AM__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_11_AM__Changes_.xml	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_11_13_2024_11_11_AM_[Changes]" date="1731471097165" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_11_11_AM_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/13/2024 11:11 AM [Changes]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_5_23_PM__Changes_1.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_5_23_PM__Changes_1.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_5_23_PM__Changes_1.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_5_23_PM__Changes_1.xml	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_11_13_2024_5_23_PM_[Changes]1" date="1731493428102" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_5_23_PM_[Changes]1/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/13/2024 5:23 PM [Changes]" />
-</changelist>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_confirm.xml
===================================================================
diff --git a/app/src/main/res/layout/fragment_confirm.xml b/app/src/main/res/layout/fragment_confirm.xml
deleted file mode 100644
--- a/app/src/main/res/layout/fragment_confirm.xml	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,14 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent"
-    tools:context=".ui.MyProfile.PurchasedOrders.WaitingConfirmFragment">
-
-    <!-- TODO: Update blank fragment layout -->
-    <TextView
-        android:layout_width="match_parent"
-        android:layout_height="match_parent"
-        android:text="@string/hello_blank_fragment" />
-
-</FrameLayout>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_5_23_PM_[Changes]1/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_5_23_PM_[Changes]1/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_5_23_PM_[Changes]1/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_13_2024_5_23_PM_[Changes]1/shelved.patch	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,230 +0,0 @@
-Index: app/src/main/java/com/example/agrimart/ui/MyProfile/MyAccount/MyAccountActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.MyProfile.MyAccount;\r\n\r\nimport android.app.DatePickerDialog;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.Typeface;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.view.Gravity;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.widget.CalendarView;\r\nimport android.widget.DatePicker;\r\nimport android.widget.FrameLayout;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport com.bumptech.glide.Glide;\r\nimport com.bumptech.glide.request.RequestOptions;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.viewmodel.MyAccountViewModel;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.UserInfo;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\nimport com.yalantis.ucrop.UCrop;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.Calendar;\r\n\r\npublic class MyAccountActivity extends AppCompatActivity {\r\n\r\n    TextView user_name_text, my_phone_number_text, email_text, user_sex_text, user_date_birth_text;\r\n    ImageButton btn_back;\r\n    ImageView user_image;\r\n    FrameLayout btn_account_img;\r\n    private static final int PICK_IMAGE_REQUEST = 1;\r\n    LinearLayout myUserSex, myUserDateBirth, myUserName, changePassword, myPhoneNumber;\r\n    String[] genderOptions = {\"Nam\", \"Nữ\", \"Khác\"};\r\n    private static final int EDIT_USER_REQUEST_CODE = 1;\r\n    private static final int EDIT_NUMBER_PHONE_REQUEST_CODE = 10;\r\n    private MyAccountViewModel viewModel;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_my_account);\r\n\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        addControl();\r\n\r\n\r\n\r\n        addLoadData();\r\n\r\n        addEvent();\r\n    }\r\n\r\n    void addControl() {\r\n        user_name_text = findViewById(R.id.user_name_text);\r\n        my_phone_number_text = findViewById(R.id.my_phone_number_text);\r\n        email_text = findViewById(R.id.email_text);\r\n        user_date_birth_text = findViewById(R.id.user_date_birth_text);\r\n        user_sex_text = findViewById(R.id.user_sex_text);\r\n        btn_back = findViewById(R.id.btn_back);\r\n        user_image = findViewById(R.id.user_image);\r\n        btn_account_img = findViewById(R.id.fl_my_account_img);\r\n        myUserSex = findViewById(R.id.my_user_sex);\r\n        myUserDateBirth = findViewById(R.id.my_user_date_birth);\r\n        myUserName = findViewById(R.id.my_user_name);\r\n        changePassword = findViewById(R.id.change_password);\r\n        myPhoneNumber = findViewById(R.id.my_phone_number);\r\n        viewModel = new ViewModelProvider(this).get(MyAccountViewModel.class);\r\n    }\r\n\r\n    void addLoadData()\r\n    {\r\n        // lấy thông tin user\r\n        viewModel.getUser().observe(this, user -> {\r\n\r\n            if (user != null) {\r\n                user_name_text.setText(user.getFullName());\r\n                my_phone_number_text.setText(user.getPhoneNumber());\r\n                email_text.setText(user.getEmail());\r\n                user_sex_text.setText(user.getSex());\r\n                user_date_birth_text.setText(user.getBirthDate());\r\n                viewModel.loadImage(MyAccountActivity.this, user_image);\r\n\r\n            }\r\n        });\r\n\r\n        // kiểm tra đăng nhập\r\n        viewModel.getIsChangePassword().observe(this, isChangePassword -> {\r\n            if(isChangePassword)\r\n            {\r\n                changePassword.setVisibility(View.GONE);\r\n            }\r\n        });\r\n    }\r\n\r\n    void addEvent() {\r\n        btn_back.setOnClickListener(v -> back());\r\n        btn_account_img.setOnClickListener(v -> openImageChooser()); // cập nhật ảnh user\r\n        myUserSex.setOnClickListener(v -> openGenderOptions()); // cập nhật giới tính\r\n        myUserDateBirth.setOnClickListener(v -> openDatePicker());\r\n        myUserName.setOnClickListener(v -> openEditUser());\r\n        changePassword.setOnClickListener(v -> openVerifyAccount());\r\n        myPhoneNumber.setOnClickListener(v -> openEditNumberPhone());\r\n    }\r\n\r\n    void openEditNumberPhone()\r\n    {\r\n        Intent intent = new Intent(MyAccountActivity.this, EditNumberPhoneActivity.class);\r\n        startActivityForResult(intent, EDIT_NUMBER_PHONE_REQUEST_CODE);\r\n    }\r\n\r\n    void back()\r\n    {\r\n        setResult(RESULT_OK); // Đặt kết quả trả về\r\n        finish();\r\n    }\r\n\r\n\r\n    private void openVerifyAccount()\r\n    {\r\n        Intent intent = new Intent(MyAccountActivity.this, VerifyWithPasswordActivity.class);\r\n        startActivity(intent);\r\n    }\r\n\r\n    private void openEditUser()\r\n    {\r\n        Intent intent = new Intent(MyAccountActivity.this, EditUserNameActivity.class);\r\n        startActivityForResult(intent, EDIT_USER_REQUEST_CODE);\r\n    }\r\n\r\n    private void openDatePicker() {\r\n        // Tạo AlertDialog\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n\r\n        // Inflate layout tùy chỉnh\r\n        LayoutInflater inflater = getLayoutInflater();\r\n        View dialogView = inflater.inflate(R.layout.dialog_calendar, null);\r\n        DatePicker datePicker = dialogView.findViewById(R.id.datePicker);\r\n\r\n        // Đặt ngày cho DatePicker\r\n        final Calendar calendar = Calendar.getInstance();\r\n        datePicker.init(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH), null);\r\n\r\n        builder.setView(dialogView)\r\n                .setPositiveButton(\"Hoàn thành\", (dialog, which) -> {\r\n                    // Lấy ngày đã chọn\r\n                    int day = datePicker.getDayOfMonth();\r\n                    int month = datePicker.getMonth() + 1; // Month is 0-based\r\n                    int year = datePicker.getYear();\r\n                    String selectedDate = day + \"/\" + month + \"/\" + year;\r\n\r\n                    // Cập nhật TextView với ngày đã chọn\r\n                    user_date_birth_text.setText(selectedDate);\r\n                    viewModel.saveBirthDateToFirestore(selectedDate);\r\n                })\r\n                .setNegativeButton(\"Hủy\", (dialog, which) -> dialog.dismiss());\r\n\r\n        // Giới hạn ngày phải bé hơn hoặc bằng ngày hiện hành\r\n        datePicker.setMaxDate(calendar.getTimeInMillis());\r\n\r\n        // Hiển thị AlertDialog\r\n        builder.show();\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    private void openGenderOptions() {\r\n        // Tạo một TextView cho tiêu đề và tùy chỉnh nó\r\n        TextView title = new TextView(this);\r\n        title.setText(\"Giới tính\");\r\n        title.setPadding(0, 30, 0, 30); // Khoảng cách trên và dưới\r\n        title.setGravity(Gravity.CENTER); // Căn giữa\r\n        title.setTextSize(20); // Kích thước chữ\r\n        title.setTypeface(null, Typeface.BOLD); // Đặt kiểu chữ đậm nếu cần\r\n\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n        builder.setCustomTitle(title); // Đặt tiêu đề tùy chỉnh\r\n\r\n        // Kiểm tra nếu genderOptions không null\r\n        if (genderOptions != null) {\r\n            // Thiết lập danh sách tùy chọn\r\n            builder.setItems(genderOptions, (dialog, which) -> {\r\n                user_sex_text.setText(genderOptions[which]);\r\n                // Gọi phương thức trong ViewModel để lưu giới tính\r\n                viewModel.saveGenderToFirestore(genderOptions[which]);\r\n            });\r\n        } else {\r\n            Toast.makeText(this, \"Không có tùy chọn giới tính\", Toast.LENGTH_SHORT).show();\r\n        }\r\n\r\n        // Hiển thị dialog\r\n        builder.show();\r\n    }\r\n\r\n\r\n    private void openImageChooser() {\r\n        Intent intent = new Intent();\r\n        intent.setType(\"image/*\");\r\n        intent.setAction(Intent.ACTION_GET_CONTENT);\r\n        startActivityForResult(Intent.createChooser(intent, \"Select Picture\"), PICK_IMAGE_REQUEST);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == EDIT_NUMBER_PHONE_REQUEST_CODE && resultCode == RESULT_OK) {\r\n            viewModel.loadUserInfo(); // Gọi phương thức để tải lại thông tin người dùng\r\n        }\r\n        // Kiểm tra nếu kết quả trả về từ EditUserActivity\r\n        if (requestCode == EDIT_USER_REQUEST_CODE && resultCode == RESULT_OK) {\r\n            viewModel.loadUserInfo(); // Gọi phương thức để tải lại thông tin người dùng\r\n        }\r\n\r\n        if (requestCode == PICK_IMAGE_REQUEST && resultCode == RESULT_OK && data != null && data.getData() != null) {\r\n            Uri imageUri = data.getData();\r\n\r\n            // Crop ảnh trước khi tải lên\r\n            Uri destinationUri = Uri.fromFile(new File(getCacheDir(), \"cropped_image.jpg\"));\r\n            UCrop.of(imageUri, destinationUri)\r\n                    .withAspectRatio(1, 1) // Tỉ lệ khung hình 1:1\r\n                    .withMaxResultSize(512, 512) // Kích thước tối đa\r\n                    .start(this);\r\n        }\r\n\r\n        if (requestCode == UCrop.REQUEST_CROP) {\r\n            final int resultCodeCrop = resultCode;\r\n            final Intent resultData = data;\r\n            if (resultCodeCrop == RESULT_OK) {\r\n                Uri croppedImageUri = UCrop.getOutput(resultData);\r\n\r\n                // Tải ảnh đã crop lên Firebase\r\n                viewModel.uploadImageToFirebase(MyAccountActivity.this, croppedImageUri, new MyAccountViewModel.ImageUploadCallback() {\r\n                    @Override\r\n                    public void onSuccess(String imageUrl) {\r\n                        // Gọi loadUserInfo và loadImage sau khi ảnh đã được tải lên thành công\r\n                        viewModel.loadUserInfo();\r\n                        viewModel.loadImage(MyAccountActivity.this, user_image);\r\n                    }\r\n\r\n                    @Override\r\n                    public void onFailure() {\r\n                        Toast.makeText(MyAccountActivity.this, \"Error uploading image\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                });\r\n\r\n            } else if (resultCodeCrop == UCrop.RESULT_ERROR) {\r\n                Toast.makeText(this, \"Error cropping image\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAccount/MyAccountActivity.java b/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAccount/MyAccountActivity.java
---- a/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAccount/MyAccountActivity.java	
-+++ b/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAccount/MyAccountActivity.java	
-@@ -22,6 +22,7 @@
- import androidx.activity.EdgeToEdge;
- import androidx.appcompat.app.AlertDialog;
- import androidx.appcompat.app.AppCompatActivity;
-+import androidx.appcompat.widget.Toolbar;
- import androidx.core.graphics.Insets;
- import androidx.core.view.ViewCompat;
- import androidx.core.view.WindowInsetsCompat;
-@@ -48,7 +49,7 @@
- public class MyAccountActivity extends AppCompatActivity {
- 
-     TextView user_name_text, my_phone_number_text, email_text, user_sex_text, user_date_birth_text;
--    ImageButton btn_back;
-+    //ImageButton btn_back;
-     ImageView user_image;
-     FrameLayout btn_account_img;
-     private static final int PICK_IMAGE_REQUEST = 1;
-@@ -57,6 +58,7 @@
-     private static final int EDIT_USER_REQUEST_CODE = 1;
-     private static final int EDIT_NUMBER_PHONE_REQUEST_CODE = 10;
-     private MyAccountViewModel viewModel;
-+    private Toolbar toolbar;
- 
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-@@ -85,7 +87,8 @@
-         email_text = findViewById(R.id.email_text);
-         user_date_birth_text = findViewById(R.id.user_date_birth_text);
-         user_sex_text = findViewById(R.id.user_sex_text);
--        btn_back = findViewById(R.id.btn_back);
-+        //btn_back = findViewById(R.id.btn_back);
-+        toolbar = findViewById(R.id.header_toolbar);
-         user_image = findViewById(R.id.user_image);
-         btn_account_img = findViewById(R.id.fl_my_account_img);
-         myUserSex = findViewById(R.id.my_user_sex);
-@@ -122,7 +125,8 @@
-     }
- 
-     void addEvent() {
--        btn_back.setOnClickListener(v -> back());
-+        //btn_back.setOnClickListener(v -> back());
-+        toolbar.setNavigationOnClickListener(v -> back());
-         btn_account_img.setOnClickListener(v -> openImageChooser()); // cập nhật ảnh user
-         myUserSex.setOnClickListener(v -> openGenderOptions()); // cập nhật giới tính
-         myUserDateBirth.setOnClickListener(v -> openDatePicker());
-Index: app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.viewmodel;\r\n\r\nimport android.util.Log;\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.data.model.Store;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.text.Normalizer;\r\nimport java.util.ArrayList;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class SearchViewModel extends ViewModel {\r\n\r\n    private MutableLiveData<List<Product>> filteredProducts = new MutableLiveData<>(new ArrayList<>());\r\n    private List<Product> originalProductList = new ArrayList<>();\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n\r\n    public LiveData<List<Product>> getFilteredProducts() {\r\n        return filteredProducts;\r\n    }\r\n\r\n    public void searchProductsByName(String query) {\r\n        db.collection(\"products\")\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        List<Product> products = task.getResult().toObjects(Product.class);\r\n                        List<Product> filteredList = new ArrayList<>();\r\n                        List<Product> remainingList = new ArrayList<>();\r\n\r\n                        for (Product product : products) {\r\n                            if (product.getName() != null) {\r\n                                String productName = product.getName().toLowerCase();\r\n                                String lowerCaseQuery = query.toLowerCase();\r\n                                if (productName.startsWith(lowerCaseQuery)) {\r\n                                    filteredList.add(product);\r\n                                } else if (productName.contains(lowerCaseQuery)) {\r\n                                    remainingList.add(product);\r\n                                }\r\n                            }\r\n                        }\r\n                        filteredList.addAll(remainingList);\r\n                        originalProductList = new ArrayList<>(filteredList);\r\n                        filteredProducts.setValue(filteredList);\r\n                    } else {\r\n                        filteredProducts.setValue(new ArrayList<>());\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void searchProductsByCategory(String categoryId) {\r\n        db.collection(\"products\")\r\n                .whereEqualTo(\"category_id\", categoryId)\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        List<Product> products = task.getResult().toObjects(Product.class);\r\n                        originalProductList = new ArrayList<>(products);\r\n                        filteredProducts.setValue(products);\r\n                    } else {\r\n                        filteredProducts.setValue(new ArrayList<>());\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void searchProductsByStoreName(String storeName) {\r\n        db.collection(\"users\")\r\n                .whereEqualTo(\"store_name\", storeName)\r\n                .get()\r\n                .addOnCompleteListener(storeTask -> {\r\n                    if (storeTask.isSuccessful() && !storeTask.getResult().isEmpty()) {\r\n                        String storeId = storeTask.getResult().getDocuments().get(0).getId();\r\n                        db.collection(\"products\")\r\n                                .whereEqualTo(\"storeId\", storeId)\r\n                                .get()\r\n                                .addOnCompleteListener(productTask -> {\r\n                                    if (productTask.isSuccessful()) {\r\n                                        List<Product> products = productTask.getResult().toObjects(Product.class);\r\n                                        originalProductList = new ArrayList<>(products);\r\n                                        filteredProducts.setValue(products);\r\n                                    } else {\r\n                                        filteredProducts.setValue(new ArrayList<>());\r\n                                    }\r\n                                });\r\n                    } else {\r\n                        filteredProducts.setValue(new ArrayList<>());\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void sortProducts(String sortBy) {\r\n        List<Product> currentProducts = filteredProducts.getValue() != null ? new ArrayList<>(filteredProducts.getValue()) : new ArrayList<>();\r\n\r\n        switch (sortBy) {\r\n            case \"Liên quan nhất\":\r\n                currentProducts = new ArrayList<>(originalProductList);\r\n                break;\r\n            case \"Mới nhất\":\r\n                Collections.sort(currentProducts, (p1, p2) -> p2.getCreated_at().compareTo(p1.getCreated_at()));\r\n                break;\r\n            case \"Cũ nhất\":\r\n                Collections.sort(currentProducts, (p1, p2) -> p1.getCreated_at().compareTo(p2.getCreated_at()));\r\n                break;\r\n            case \"Giá cao nhất\":\r\n                Collections.sort(currentProducts, (p1, p2) -> Double.compare(p2.getPrice(), p1.getPrice()));\r\n                break;\r\n            case \"Giá thấp nhất\":\r\n                Collections.sort(currentProducts, (p1, p2) -> Double.compare(p1.getPrice(), p2.getPrice()));\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        filteredProducts.setValue(currentProducts);\r\n    }\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java
---- a/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java	
-+++ b/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java	
-@@ -7,11 +7,8 @@
- import androidx.lifecycle.ViewModel;
- 
- import com.example.agrimart.data.model.Product;
--import com.example.agrimart.data.model.Store;
--import com.google.firebase.firestore.DocumentSnapshot;
- import com.google.firebase.firestore.FirebaseFirestore;
- 
--import java.text.Normalizer;
- import java.util.ArrayList;
- import java.util.Collections;
- import java.util.List;
-@@ -36,7 +33,7 @@
-                         List<Product> remainingList = new ArrayList<>();
- 
-                         for (Product product : products) {
--                            if (product.getName() != null) {
-+                            if (product.getName() != null && "available".equals(product.getActive())) {
-                                 String productName = product.getName().toLowerCase();
-                                 String lowerCaseQuery = query.toLowerCase();
-                                 if (productName.startsWith(lowerCaseQuery)) {
-@@ -62,8 +59,14 @@
-                 .addOnCompleteListener(task -> {
-                     if (task.isSuccessful()) {
-                         List<Product> products = task.getResult().toObjects(Product.class);
--                        originalProductList = new ArrayList<>(products);
--                        filteredProducts.setValue(products);
-+                        List<Product> availableProducts = new ArrayList<>();
-+                        for (Product product : products) {
-+                            if ("available".equals(product.getActive())) {
-+                                availableProducts.add(product);
-+                            }
-+                        }
-+                        originalProductList = new ArrayList<>(availableProducts);
-+                        filteredProducts.setValue(availableProducts);
-                     } else {
-                         filteredProducts.setValue(new ArrayList<>());
-                     }
-@@ -83,8 +86,14 @@
-                                 .addOnCompleteListener(productTask -> {
-                                     if (productTask.isSuccessful()) {
-                                         List<Product> products = productTask.getResult().toObjects(Product.class);
--                                        originalProductList = new ArrayList<>(products);
--                                        filteredProducts.setValue(products);
-+                                        List<Product> availableProducts = new ArrayList<>();
-+                                        for (Product product : products) {
-+                                            if ("available".equals(product.getActive())) {
-+                                                availableProducts.add(product);
-+                                            }
-+                                        }
-+                                        originalProductList = new ArrayList<>(availableProducts);
-+                                        filteredProducts.setValue(availableProducts);
-                                     } else {
-                                         filteredProducts.setValue(new ArrayList<>());
-                                     }
-@@ -121,4 +130,4 @@
-         filteredProducts.setValue(currentProducts);
-     }
- 
--}
-+}
-\ No newline at end of file
-Index: app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.Homepage;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\nimport androidx.viewpager2.widget.ViewPager2;\r\n\r\nimport android.os.Handler;\r\nimport android.os.Looper;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.SpacesItemDecoration;\r\nimport com.example.agrimart.adapter.CarouselAdapter;\r\nimport com.example.agrimart.adapter.CategoryAdapter;\r\nimport com.example.agrimart.adapter.EndlessRecyclerViewScrollListener;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.FragmentHomeBinding;\r\nimport com.example.agrimart.ui.Explore.ExploreFragment;\r\nimport com.example.agrimart.ui.ProductPage.ProductDetailActivity;\r\nimport com.example.agrimart.viewmodel.HomeFragmentViewModel;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class HomeFragment extends Fragment {\r\n    private static final String TAG = \"HomeFragment\";\r\n    ImageButton btnSearch;\r\n    TextView search;\r\n    HomeFragmentViewModel viewModel;\r\n    FragmentHomeBinding binding;\r\n    EndlessRecyclerViewScrollListener scrollListener;\r\n    private int totalPages;\r\n    private int currentPage = 1;\r\n    private List<Product> products=new ArrayList<>();\r\n    private DocumentSnapshot lastVisible;\r\n    ProductAdapter productAdapter;\r\n    private boolean isLoading = false;\r\n    private ViewPager2 carouselViewPager;\r\n    private CarouselAdapter carouselAdapter;\r\n    private Handler carouselHandler;\r\n    private Runnable carouselRunnable;\r\n\r\n    public HomeFragment() {\r\n\r\n    }\r\n\r\n    public static HomeFragment newInstance() {\r\n        return new HomeFragment();\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        db.collection(\"products\")\r\n                .whereEqualTo(\"status\", \"available\")\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        totalPages= (task.getResult().size()/10)+1;\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_home, container, false);\r\n        viewModel = new ViewModelProvider(this).get(HomeFragmentViewModel.class);\r\n\r\n        int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);\r\n        binding.setViewmodel(viewModel);\r\n        View view = binding.getRoot();\r\n\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\r\n            Window window = getActivity().getWindow();\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n        }\r\n\r\n        viewModel.getCategories();\r\n//        viewModel.getFirstProducts();\r\n\r\n        viewModel.categories.observe(getViewLifecycleOwner(), categories -> {\r\n            if (categories != null) {\r\n                CategoryAdapter categoryAdapter = new CategoryAdapter(categories, category -> {\r\n                    // Khi chọn một category, chuyển đến ExploreFragment và chọn mục category\r\n                    ExploreFragment newFragment = new ExploreFragment(category.getId());\r\n\r\n                    // Thay đổi mục đã chọn trong BottomNavigationView\r\n                    BottomNavigationView bottomNavigationView = getActivity().findViewById(R.id.bottomNavigation);\r\n                    if (bottomNavigationView != null) {\r\n                        bottomNavigationView.setSelectedItemId(R.id.category); // Chọn mục category\r\n                    }\r\n\r\n                    loadFragment(newFragment);\r\n                });\r\n\r\n                binding.rvCategories.setAdapter(categoryAdapter);\r\n                binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));\r\n                Log.d(TAG, \"Categories loaded: \" + categories.size());\r\n            }\r\n        });\r\n\r\n//        viewModel.products.observe(getViewLifecycleOwner(), products -> {\r\n//            if (products != null) {\r\n//                productAdapter = new ProductAdapter(products, product -> {\r\n//                    try {\r\n//                        Intent intent = new Intent(getContext(), ProductDetailActivity.class);\r\n//                        intent.putExtra(\"product\", product);\r\n//                        intent.putExtra(\"storeId\", product.getStoreId());\r\n//                        startActivity(intent);\r\n//                    } catch (Exception e) {\r\n//\r\n//                    }\r\n//                });\r\n//                GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n//                binding.rvProducts.setLayoutManager(gridLayoutManager);\r\n//                binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));\r\n//                binding.rvProducts.setAdapter(productAdapter);\r\n//\r\n//            }\r\n//        });\r\n        getFirstProducts();\r\n        productAdapter= new ProductAdapter(products, product -> {\r\n            try {\r\n                Intent intent = new Intent(getContext(), ProductDetailActivity.class);\r\n                intent.putExtra(\"product\", product);\r\n                intent.putExtra(\"storeId\", product.getStoreId());\r\n                startActivity(intent);\r\n            } catch (Exception e) {\r\n\r\n            }\r\n        });\r\n        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n        binding.rvProducts.setLayoutManager(gridLayoutManager);\r\n        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));\r\n        binding.rvProducts.setAdapter(productAdapter);\r\n\r\n\r\n\r\n\r\n\r\n\r\n        binding.scrollView.setOnScrollChangeListener(new View.OnScrollChangeListener() {\r\n            @Override\r\n            public void onScrollChange(View view, int scrollX, int scrollY, int oldScrollX, int oldScrollY) {\r\n                int scrollViewHeight = binding.scrollView.getChildAt(0).getMeasuredHeight();\r\n                int scrollViewVisibleHeight = binding.scrollView.getHeight();\r\n\r\n                if (scrollY + scrollViewVisibleHeight >= scrollViewHeight) {\r\n\r\n                    if (!isLoading) {\r\n                        isLoading = true;\r\n                        binding.seeAll1.setVisibility(View.VISIBLE);\r\n\r\n                        new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                getMoreProducts();\r\n                            }\r\n                        }, 2000);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        addControls(view);\r\n        addEvents();\r\n        setupCarousel();\r\n\r\n        return view;\r\n    }\r\n\r\n    private void setupCarousel() {\r\n        carouselViewPager = binding.carouselViewpager;\r\n        carouselAdapter = new CarouselAdapter(getCarouselItems());\r\n        carouselViewPager.setAdapter(carouselAdapter);\r\n\r\n        carouselHandler = new Handler(Looper.getMainLooper());\r\n        carouselRunnable = () -> {\r\n            int currentItem = carouselViewPager.getCurrentItem();\r\n            int nextItem = (currentItem + 1) % carouselAdapter.getItemCount();\r\n            carouselViewPager.setCurrentItem(nextItem, true);\r\n            carouselHandler.postDelayed(carouselRunnable, 10000);\r\n        };\r\n        carouselHandler.postDelayed(carouselRunnable, 10000);\r\n    }\r\n\r\n    private List<String> getCarouselItems() {\r\n        List<String> items = new ArrayList<>();\r\n        items.add(\"https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/categories%2Fgiavi.jpg?alt=media&token=3670aa28-c5ff-483c-bf9a-3325bf48ce9c\");\r\n        items.add(\"https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/categories%2Fgiavi.jpg?alt=media&token=3670aa28-c5ff-483c-bf9a-3325bf48ce9c\");\r\n        items.add(\"https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/categories%2Fgiavi.jpg?alt=media&token=3670aa28-c5ff-483c-bf9a-3325bf48ce9c\");\r\n        return items;\r\n    }\r\n\r\n    private void addEvents() {\r\n        btnSearch.setOnClickListener(v -> {\r\n            Intent intent = new Intent(getActivity(), SearchActivity.class);\r\n            getActivity().startActivity(intent);\r\n        });\r\n\r\n        search.setOnClickListener(v -> {\r\n            Intent intent = new Intent(getContext(), SearchActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n\r\n    private void addControls(View view) {\r\n        btnSearch = view.findViewById(R.id.search_icon);\r\n        search = view.findViewById(R.id.search_input);\r\n    }\r\n\r\n    private void loadFragment(Fragment fragment) {\r\n        getActivity().getSupportFragmentManager().beginTransaction()\r\n                .replace(R.id.fragment_container, fragment)\r\n                .commit();\r\n    }\r\n    public void getFirstProducts(){\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        Query first= db.collection(\"products\")\r\n                .whereEqualTo(\"status\", \"available\")\r\n                .limit(10);\r\n\r\n        first.get()\r\n                .addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n                        List<Product> productList = queryDocumentSnapshots.toObjects(Product.class);\r\n                        products.addAll(productList);\r\n                        productAdapter.notifyDataSetChanged();\r\n\r\n                        lastVisible=queryDocumentSnapshots.getDocuments()\r\n                                .get(queryDocumentSnapshots.size()-1);\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void getMoreProducts(){\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        Query next= db.collection(\"products\")\r\n                .whereEqualTo(\"status\", \"available\")\r\n                .startAfter(lastVisible)\r\n                .limit(10);\r\n\r\n        next.get()\r\n                .addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n\r\n                        List<Product> newList = queryDocumentSnapshots.toObjects(Product.class);\r\n\r\n                        products.addAll(newList);\r\n                        productAdapter.notifyDataSetChanged();\r\n                        isLoading=false;\r\n\r\n                        if(!newList.isEmpty()){\r\n                            lastVisible=queryDocumentSnapshots.getDocuments()\r\n                                    .get(queryDocumentSnapshots.size()-1);\r\n                        }\r\n                        currentPage+=1;\r\n                        if(currentPage==totalPages){\r\n                            binding.seeAll1.setVisibility(View.GONE);\r\n                        }\r\n                        binding.seeAll1.setVisibility(View.GONE);\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
---- a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	
-+++ b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	
-@@ -1,5 +1,6 @@
- package com.example.agrimart.ui.Homepage;
- 
-+import android.annotation.SuppressLint;
- import android.content.Intent;
- import android.os.Build;
- import android.os.Bundle;
-@@ -86,6 +87,7 @@
-     }
- 
- 
-+    @SuppressLint("NewApi")
-     @Override
-     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
-         binding = DataBindingUtil.inflate(inflater, R.layout.fragment_home, container, false);
-Index: app/build.gradle.kts
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>plugins {\r\n    id(\"com.android.application\")\r\n    id(\"com.google.gms.google-services\")\r\n}\r\n\r\nandroid {\r\n    namespace = \"com.example.agrimart\"\r\n    compileSdk = 34\r\n\r\n    defaultConfig {\r\n        applicationId = \"com.example.agrimart\"\r\n        minSdk = 30\r\n        targetSdk = 34\r\n        versionCode = 1\r\n        versionName = \"1.0\"\r\n\r\n        testInstrumentationRunner = \"androidx.test.runner.AndroidJUnitRunner\"\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(getDefaultProguardFile(\"proguard-android-optimize.txt\"), \"proguard-rules.pro\")\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_1_8\r\n        targetCompatibility = JavaVersion.VERSION_1_8\r\n    }\r\n    sourceSets {\r\n        getByName(\"main\") {\r\n            res {\r\n                srcDirs(\"src\\\\main\\\\res\", \"src\\\\main\\\\res\\\\animator\")\r\n            }\r\n        }\r\n    }\r\n    buildFeatures{\r\n        viewBinding=true;\r\n        dataBinding=true;\r\n    }\r\n}\r\ndependencies {\r\n    implementation(\"com.squareup.retrofit2:retrofit:2.9.0\")\r\n    implementation(\"com.squareup.retrofit2:converter-gson:2.9.0\")\r\n    implementation(\"com.google.code.gson:gson:2.10.1\")\r\n    implementation(\"com.github.yalantis:ucrop:2.2.6\")\r\n    implementation(\"androidx.core:core-ktx:1.12.0\")\r\n    implementation(\"org.jetbrains.kotlin:kotlin-stdlib:1.8.22\")\r\n    implementation(\"org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.8.22\")\r\n    implementation(\"androidx.viewpager:viewpager:1.0.0\")\r\n    implementation(\"androidx.appcompat:appcompat:1.6.1\")\r\n    implementation(\"androidx.constraintlayout:constraintlayout:2.1.4\")\r\n    implementation(\"androidx.activity:activity:1.9.1\")\r\n    implementation (\"com.github.denzcoskun:ImageSlideshow:0.1.2\")\r\n    implementation (\"de.hdodenhof:circleimageview:3.1.0\")\r\n    implementation (\"com.squareup.picasso:picasso:2.71828\")\r\n    implementation(\"androidx.lifecycle:lifecycle-livedata-ktx:2.8.7\")\r\n    implementation(\"androidx.lifecycle:lifecycle-viewmodel-ktx:2.8.7\")\r\n    implementation(\"androidx.recyclerview:recyclerview:1.3.2\")\r\n    implementation (\"com.google.android.material:material:1.12.0\")\r\n    implementation(\"com.google.firebase:firebase-firestore:25.1.1\")\r\n    implementation(\"com.google.firebase:firebase-auth:23.1.0\")\r\n    implementation(\"com.google.firebase:firebase-storage:21.0.1\")\r\n    implementation(\"com.google.firebase:firebase-messaging:24.0.3\")\r\n    implementation(\"com.google.firebase:firebase-inappmessaging-display:21.0.1\")\r\n    implementation(\"androidx.navigation:navigation-fragment:2.8.3\")\r\n    implementation(\"androidx.navigation:navigation-ui:2.8.3\")\r\n    testImplementation(\"junit:junit:4.13.2\")\r\n    androidTestImplementation(\"androidx.test.ext:junit:1.2.1\")\r\n    androidTestImplementation(\"androidx.test.espresso:espresso-core:3.6.1\")\r\n    implementation(\"com.google.android.gms:play-services-auth:21.2.0\")\r\n    implementation(platform(\"com.google.firebase:firebase-bom:33.5.1\"))\r\n    implementation (\"com.github.bumptech.glide:glide:4.16.0\")\r\n    implementation (\"com.github.dhaval2404:imagepicker:2.1\")\r\n//  implementation (\"io.github.ParkSangGwon:tedimagepicker:1.6.1\")\r\n    // ViewModel\r\n//    implementation(\"androidx.lifecycle:lifecycle-viewmodel:2.8.5\")\r\n    implementation (\"com.facebook.android:facebook-login:latest.release\")\r\n    implementation(\"androidx.browser:browser:1.8.0\")\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/build.gradle.kts b/app/build.gradle.kts
---- a/app/build.gradle.kts	
-+++ b/app/build.gradle.kts	
-@@ -65,6 +65,12 @@
-     implementation("com.google.firebase:firebase-inappmessaging-display:21.0.1")
-     implementation("androidx.navigation:navigation-fragment:2.8.3")
-     implementation("androidx.navigation:navigation-ui:2.8.3")
-+    //ZaloPay
-+    implementation(fileTree(mapOf(
-+        "dir" to "D:\\Data\\Android\\DoAn\\ZaloPay",
-+        "include" to listOf("*.aar", "*.jar"),
-+        "exclude" to listOf("")
-+    )))
-     testImplementation("junit:junit:4.13.2")
-     androidTestImplementation("androidx.test.ext:junit:1.2.1")
-     androidTestImplementation("androidx.test.espresso:espresso-core:3.6.1")
-Index: app/src/main/res/layout/activity_my_account.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/main\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.MyProfile.MyAccount.MyAccountActivity\">\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:orientation=\"vertical\"\r\n        tools:ignore=\"MissingConstraints\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:paddingStart=\"12dp\"\r\n            android:paddingEnd=\"12dp\"\r\n            android:paddingTop=\"10dp\"\r\n            android:paddingBottom=\"10dp\"\r\n            android:background=\"@color/white\"\r\n            android:orientation=\"horizontal\">\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/btn_back\"\r\n                android:layout_width=\"30dp\"\r\n                android:layout_height=\"35dp\"\r\n                android:src=\"@drawable/ic_left\"\r\n                android:scaleType=\"fitCenter\"\r\n                android:layout_marginStart=\"5dp\"\r\n                android:layout_gravity=\"center_vertical\"\r\n                android:background=\"@color/white\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView1\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"35dp\"\r\n                android:layout_weight=\"1\"\r\n                android:gravity=\"start\"\r\n                android:layout_marginStart=\"15dp\"\r\n                android:text=\"Tài khoản &amp; Bảo mật\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"11pt\" />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"5dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/ll_my_account\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"140dp\"\r\n            android:background=\"@color/green\"\r\n            android:gravity=\"center_vertical\"\r\n            android:orientation=\"vertical\"\r\n            android:padding=\"16dp\">\r\n\r\n            <FrameLayout\r\n                android:id=\"@+id/fl_my_account_img\"\r\n                android:layout_width=\"78dp\"\r\n                android:layout_height=\"78dp\"\r\n                android:background=\"@drawable/rounded_frame\"\r\n                android:clipToOutline=\"true\"\r\n                android:layout_gravity=\"center\">\r\n\r\n                <ImageView\r\n                    android:id=\"@+id/user_image\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:scaleType=\"centerCrop\"\r\n                    />\r\n\r\n                <TextView\r\n                    android:id=\"@+id/overlay_text\"\r\n                    android:layout_width=\"78dp\"\r\n                    android:layout_height=\"39dp\"\r\n                    android:layout_gravity=\"bottom\"\r\n                    android:gravity=\"center\"\r\n                    android:background=\"@drawable/rounded_text\"\r\n                    android:text=\"Sửa\"\r\n                    android:textColor=\"@android:color/white\"\r\n                    android:textSize=\"18sp\" />\r\n\r\n            </FrameLayout>\r\n        </LinearLayout>\r\n\r\n\r\n\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/my_user_name\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_name\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Tên\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_name_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n            <ImageView\r\n                android:id=\"@+id/my_profile_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/my_user_sex\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_sex\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Giới tính\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_sex_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n            <ImageView\r\n                android:id=\"@+id/user_sex_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/my_user_date_birth\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_date_birth\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Ngày sinh\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/user_date_birth_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n            <ImageView\r\n                android:id=\"@+id/my_date_birth_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/my_phone_number\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/my_phone_number_text1\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Điện thoại\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/my_phone_number_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/my_phone_number_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"2dp\"\r\n            android:layout_marginStart=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/my_email\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/email\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"1\"\r\n                android:text=\"Email\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/email_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:gravity=\"end\"\r\n                android:layout_weight=\"1\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/my_email_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                 />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"15dp\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n        <LinearLayout\r\n            android:id=\"@+id/change_password\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"50dp\"\r\n            android:orientation=\"horizontal\"\r\n            android:paddingTop=\"10dp\"\r\n            android:layout_marginStart=\"20dp\"\r\n            android:paddingBottom=\"10dp\">\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/change_password_text\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_weight=\"2\"\r\n\r\n                android:text=\"Đổi mật khẩu\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"8pt\" />\r\n\r\n            <ImageView\r\n                android:id=\"@+id/change_password_next\"\r\n                android:layout_width=\"40dp\"\r\n                android:layout_height=\"20dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:src=\"@drawable/next\" />\r\n        </LinearLayout>\r\n        <View\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:background=\"@color/background_light_blur_1\" />\r\n\r\n    </LinearLayout>\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_my_account.xml b/app/src/main/res/layout/activity_my_account.xml
---- a/app/src/main/res/layout/activity_my_account.xml	
-+++ b/app/src/main/res/layout/activity_my_account.xml	
-@@ -12,37 +12,20 @@
-         android:orientation="vertical"
-         tools:ignore="MissingConstraints">
- 
--        <LinearLayout
-+        <androidx.appcompat.widget.Toolbar
-+            android:id="@+id/header_toolbar"
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
-+            android:background="@color/white"
-             android:paddingStart="12dp"
-             android:paddingEnd="12dp"
-             android:paddingTop="10dp"
-             android:paddingBottom="10dp"
--            android:background="@color/white"
--            android:orientation="horizontal">
-+            app:title="Tài khoản &amp; Bảo mật"
-+            app:titleTextColor="@color/black"
-+            app:titleTextAppearance="@style/TextAppearance.AppCompat.Large"
-+            app:navigationIcon="@drawable/chevron_left" />
- 
--            <ImageButton
--                android:id="@+id/btn_back"
--                android:layout_width="30dp"
--                android:layout_height="35dp"
--                android:src="@drawable/ic_left"
--                android:scaleType="fitCenter"
--                android:layout_marginStart="5dp"
--                android:layout_gravity="center_vertical"
--                android:background="@color/white" />
--
--            <TextView
--                android:id="@+id/textView1"
--                android:layout_width="0dp"
--                android:layout_height="35dp"
--                android:layout_weight="1"
--                android:gravity="start"
--                android:layout_marginStart="15dp"
--                android:text="Tài khoản &amp; Bảo mật"
--                android:textColor="@color/black"
--                android:textSize="11pt" />
--        </LinearLayout>
-         <View
-             android:layout_width="match_parent"
-             android:layout_height="5dp"
Index: app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/ReturnFragment.java
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/ReturnFragment.java b/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/ReturnFragment.java
deleted file mode 100644
--- a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/ReturnFragment.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,66 +0,0 @@
-package com.example.agrimart.ui.MyProfile.PurchasedOrders;
-
-import android.os.Bundle;
-
-import androidx.fragment.app.Fragment;
-
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-
-import com.example.agrimart.R;
-
-/**
- * A simple {@link Fragment} subclass.
- * Use the {@link ReturnFragment#newInstance} factory method to
- * create an instance of this fragment.
- */
-public class ReturnFragment extends Fragment {
-
-    // TODO: Rename parameter arguments, choose names that match
-    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-    private static final String ARG_PARAM1 = "param1";
-    private static final String ARG_PARAM2 = "param2";
-
-    // TODO: Rename and change types of parameters
-    private String mParam1;
-    private String mParam2;
-
-    public ReturnFragment() {
-        // Required empty public constructor
-    }
-
-    /**
-     * Use this factory method to create a new instance of
-     * this fragment using the provided parameters.
-     *
-     * @param param1 Parameter 1.
-     * @param param2 Parameter 2.
-     * @return A new instance of fragment ReturnFragment.
-     */
-    // TODO: Rename and change types and number of parameters
-    public static ReturnFragment newInstance(String param1, String param2) {
-        ReturnFragment fragment = new ReturnFragment();
-        Bundle args = new Bundle();
-        args.putString(ARG_PARAM1, param1);
-        args.putString(ARG_PARAM2, param2);
-        fragment.setArguments(args);
-        return fragment;
-    }
-
-    @Override
-    public void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-        if (getArguments() != null) {
-            mParam1 = getArguments().getString(ARG_PARAM1);
-            mParam2 = getArguments().getString(ARG_PARAM2);
-        }
-    }
-
-    @Override
-    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                             Bundle savedInstanceState) {
-        // Inflate the layout for this fragment
-        return inflater.inflate(R.layout.fragment_return, container, false);
-    }
-}
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/DeliveredFragment.java
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/DeliveredFragment.java b/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/DeliveredFragment.java
deleted file mode 100644
--- a/app/src/main/java/com/example/agrimart/ui/MyProfile/PurchasedOrders/DeliveredFragment.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ /dev/null	(revision 9957bda51f2baad613096b803a384183006af48a)
@@ -1,66 +0,0 @@
-package com.example.agrimart.ui.MyProfile.PurchasedOrders;
-
-import android.os.Bundle;
-
-import androidx.fragment.app.Fragment;
-
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-
-import com.example.agrimart.R;
-
-/**
- * A simple {@link Fragment} subclass.
- * Use the {@link DeliveredFragment#newInstance} factory method to
- * create an instance of this fragment.
- */
-public class DeliveredFragment extends Fragment {
-
-    // TODO: Rename parameter arguments, choose names that match
-    // the fragment initialization parameters, e.g. ARG_ITEM_NUMBER
-    private static final String ARG_PARAM1 = "param1";
-    private static final String ARG_PARAM2 = "param2";
-
-    // TODO: Rename and change types of parameters
-    private String mParam1;
-    private String mParam2;
-
-    public DeliveredFragment() {
-        // Required empty public constructor
-    }
-
-    /**
-     * Use this factory method to create a new instance of
-     * this fragment using the provided parameters.
-     *
-     * @param param1 Parameter 1.
-     * @param param2 Parameter 2.
-     * @return A new instance of fragment DeliveredFragment.
-     */
-    // TODO: Rename and change types and number of parameters
-    public static DeliveredFragment newInstance(String param1, String param2) {
-        DeliveredFragment fragment = new DeliveredFragment();
-        Bundle args = new Bundle();
-        args.putString(ARG_PARAM1, param1);
-        args.putString(ARG_PARAM2, param2);
-        fragment.setArguments(args);
-        return fragment;
-    }
-
-    @Override
-    public void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-        if (getArguments() != null) {
-            mParam1 = getArguments().getString(ARG_PARAM1);
-            mParam2 = getArguments().getString(ARG_PARAM2);
-        }
-    }
-
-    @Override
-    public View onCreateView(LayoutInflater inflater, ViewGroup container,
-                             Bundle savedInstanceState) {
-        // Inflate the layout for this fragment
-        return inflater.inflate(R.layout.fragment_delivered, container, false);
-    }
-}
\ No newline at end of file
Index: app/src/main/res/drawable/rounded_edittext_order.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/drawable/rounded_edittext_order.xml b/app/src/main/res/drawable/rounded_edittext_order.xml
new file mode 100644
--- /dev/null	(date 1732077805999)
+++ b/app/src/main/res/drawable/rounded_edittext_order.xml	(date 1732077805999)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="utf-8"?>
+<shape xmlns:android="http://schemas.android.com/apk/res/android">
+    <solid android:color="#FFFFFF"/> <!-- Màu nền -->
+    <corners android:radius="10dp"/> <!-- Bán kính bo tròn -->
+    <stroke android:width="1dp" android:color="@color/green"/> <!-- Đường viền -->
+</shape>
Index: app/src/main/res/layout/item_order_store.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/item_order_store.xml b/app/src/main/res/layout/item_order_store.xml
new file mode 100644
--- /dev/null	(date 1732095714796)
+++ b/app/src/main/res/layout/item_order_store.xml	(date 1732095714796)
@@ -0,0 +1,94 @@
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content"
+    android:orientation="vertical">
+
+    <View
+        android:layout_width="match_parent"
+        android:layout_height="10dp"
+        android:background="@color/background_light_blur" />
+
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:layout_marginTop="10dp"
+        android:padding="10dp">
+
+
+        <ImageView
+            android:id="@+id/imageView9"
+            android:layout_width="20dp"
+            android:layout_height="20dp"
+            android:layout_gravity="center"
+            android:layout_weight="0"
+            app:srcCompat="@drawable/cart_store" />
+
+        <TextView
+            android:id="@+id/tv_store_name"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_gravity="center"
+            android:layout_marginStart="10dp"
+            android:text="@string/store_name"
+            android:textColor="@android:color/black"
+            android:textSize="18sp"
+            android:textStyle="bold" />
+
+        <TextView
+            android:id="@+id/status"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:gravity="end"
+            android:layout_weight="1"
+            android:textColor="@color/green"
+            android:text="Đã hủy"
+            android:textSize="18sp" />
+
+    </LinearLayout>
+
+    <View
+        android:layout_width="match_parent"
+        android:layout_height="1dp"
+        android:background="@color/background_light_blur" />
+
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/recycler"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:paddingStart="10dp" />
+
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:layout_marginTop="10dp"
+        android:layout_marginEnd="10dp"
+        android:layout_marginBottom="10dp"
+        android:orientation="vertical">
+
+        <TextView
+            android:id="@+id/total_price"
+            android:layout_width="match_parent"
+            android:layout_height="wrap_content"
+            android:layout_weight="1"
+            android:gravity="end"
+            android:textSize="16sp"
+            android:textColor="@color/black"
+            android:text="Tổng số tiền: 100000" />
+
+        <androidx.appcompat.widget.AppCompatButton
+            android:id="@+id/btn_buyBack"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_marginTop="10dp"
+            android:layout_weight="1"
+            android:layout_gravity="end"
+            android:background="@drawable/rounded_edittext_order"
+            android:text="Mua lại"
+            android:textAllCaps="false"
+            android:textColor="@color/green"
+            android:textSize="16sp" />
+    </LinearLayout>
+
+</LinearLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/data/model/Order.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.data.model;\r\n\r\nimport com.google.firebase.firestore.PropertyName;\r\n\r\nimport java.io.Serializable;\r\nimport java.util.List;\r\n\r\npublic class Order implements Serializable {\r\n\r\n    @PropertyName(\"orderId\")\r\n    private String orderId;\r\n\r\n    @PropertyName(\"products\")\r\n    private List<Product> products;\r\n\r\n    @PropertyName(\"status\")\r\n    private String status;\r\n\r\n    @PropertyName(\"total_price\")\r\n    private int totalPrice;\r\n\r\n    @PropertyName(\"userId\")\r\n    private String userId;\r\n\r\n    @PropertyName(\"storeId\")\r\n    private String sellerId;\r\n\r\n    @PropertyName(\"order_code\")\r\n    private String orderCode;\r\n\r\n    @PropertyName(\"address\")\r\n    private String address;\r\n\r\n    private String statusDelivery;\r\n\r\n    public Order() {\r\n    }\r\n\r\n    public Order(String orderId, String status, int totalPrice) {\r\n        this.orderId = orderId;\r\n        this.status = status;\r\n        this.totalPrice = totalPrice;\r\n    }\r\n\r\n    @PropertyName(\"orderId\")\r\n    public String getOrderId() {\r\n        return orderId;\r\n    }\r\n\r\n    @PropertyName(\"orderId\")\r\n    public void setOrderId(String orderId) {\r\n        this.orderId = orderId;\r\n    }\r\n\r\n    @PropertyName(\"status\")\r\n    public String getStatus() {\r\n        return status;\r\n    }\r\n\r\n    @PropertyName(\"status\")\r\n    public void setStatus(String status) {\r\n        this.status = status;\r\n    }\r\n\r\n    @PropertyName(\"total_price\")\r\n    public int getTotalPrice() {\r\n        return totalPrice;\r\n    }\r\n\r\n    @PropertyName(\"total_price\")\r\n    public void setTotalPrice(int totalPrice) {\r\n        this.totalPrice = totalPrice;\r\n    }\r\n\r\n    @PropertyName(\"userId\")\r\n    public String getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    @PropertyName(\"userId\")\r\n    public void setUserId(String userId) {\r\n        this.userId = userId;\r\n    }\r\n\r\n    @PropertyName(\"order_code\")\r\n    public String getOrderCode() {\r\n        return orderCode;\r\n    }\r\n\r\n    @PropertyName(\"order_code\")\r\n    public void setOrderCode(String orderCode) {\r\n        this.orderCode = orderCode;\r\n    }\r\n\r\n    public String getStatusDelivery() {\r\n        return statusDelivery;\r\n    }\r\n\r\n    public void setStatusDelivery(String statusDelivery) {\r\n        this.statusDelivery = statusDelivery;\r\n    }\r\n\r\n    @PropertyName(\"address\")\r\n    public String getAddress() {\r\n        return address;\r\n    }\r\n\r\n    @PropertyName(\"address\")\r\n    public void setAddress(String address) {\r\n        this.address = address;\r\n    }\r\n\r\n    @PropertyName(\"storeId\")\r\n    public String getSellerId() {\r\n        return sellerId;\r\n    }\r\n\r\n    @PropertyName(\"storeId\")\r\n    public void setSellerId(String sellerId) {\r\n        this.sellerId = sellerId;\r\n    }\r\n\r\n    public List<Product> getProducts() {\r\n        return products;\r\n    }\r\n\r\n    public void setProducts(List<Product> products) {\r\n        this.products = products;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/data/model/Order.java b/app/src/main/java/com/example/agrimart/data/model/Order.java
--- a/app/src/main/java/com/example/agrimart/data/model/Order.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ b/app/src/main/java/com/example/agrimart/data/model/Order.java	(date 1732097306855)
@@ -33,6 +33,8 @@
 
     private String statusDelivery;
 
+    private String storeName;
+
     public Order() {
     }
 
@@ -127,4 +129,12 @@
     public void setProducts(List<Product> products) {
         this.products = products;
     }
+
+    public String getStoreName() {
+        return storeName;
+    }
+
+    public void setStoreName(String storeName) {
+        this.storeName = storeName;
+    }
 }
Index: app/src/main/res/layout/item_order_product.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/item_order_product.xml b/app/src/main/res/layout/item_order_product.xml
new file mode 100644
--- /dev/null	(date 1732077156881)
+++ b/app/src/main/res/layout/item_order_product.xml	(date 1732077156881)
@@ -0,0 +1,90 @@
+<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    xmlns:tools="http://schemas.android.com/tools"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content"
+    app:cardBackgroundColor="@android:color/white"
+    >
+
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:layout_marginTop="5dp"
+        android:layout_marginBottom="5dp"
+        android:padding="10dp">
+
+
+        <com.google.android.material.imageview.ShapeableImageView
+            android:id="@+id/img_product"
+            android:layout_width="90dp"
+            android:layout_height="90dp"
+            android:background="@drawable/round_border"
+            android:scaleType="centerCrop" />
+
+        <LinearLayout
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
+            android:orientation="vertical">
+
+            <TextView
+                android:id="@+id/tv_product_name"
+                android:layout_width="wrap_content"
+                android:layout_height="wrap_content"
+                android:layout_marginStart="16dp"
+                android:textColor="@android:color/black"
+                android:text="Sạc nhanh"
+                android:textSize="18sp" />
+
+            <LinearLayout
+                android:layout_width="match_parent"
+                android:layout_height="match_parent"
+                android:orientation="horizontal">
+
+                <TextView
+                    android:id="@+id/unit"
+                    android:layout_width="120dp"
+                    android:layout_height="wrap_content"
+                    android:layout_marginStart="16dp"
+                    android:layout_weight="1"
+                    android:gravity="top"
+                    android:text="cái"
+                    android:textColor="@color/black"
+                    android:textSize="8pt" />
+
+                <LinearLayout
+                    android:layout_width="match_parent"
+                    android:layout_height="match_parent"
+                    android:layout_weight="1"
+                    android:orientation="vertical">
+
+                    <TextView
+                        android:id="@+id/quantity"
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:layout_gravity="bottom|end"
+                        android:gravity="top"
+                        android:layout_marginStart="16dp"
+                        android:text="x1"
+                        android:layout_weight="1"
+                        android:textColor="@color/black"
+                        android:textSize="8pt" />
+
+                    <TextView
+                        android:id="@+id/price"
+                        android:layout_width="wrap_content"
+                        android:layout_height="wrap_content"
+                        android:layout_gravity="bottom|end"
+                        android:gravity="bottom"
+                        android:layout_marginStart="16dp"
+                        android:text="90.000"
+                        android:layout_weight="1"
+                        android:textColor="@color/black"
+                        android:textSize="9pt" />
+                </LinearLayout>
+
+            </LinearLayout>
+
+        </LinearLayout>
+
+    </LinearLayout>
+</androidx.cardview.widget.CardView>
Index: app/src/main/java/com/example/agrimart/viewmodel/PurchasedOrdersViewModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/viewmodel/PurchasedOrdersViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/PurchasedOrdersViewModel.java
new file mode 100644
--- /dev/null	(date 1732092257298)
+++ b/app/src/main/java/com/example/agrimart/viewmodel/PurchasedOrdersViewModel.java	(date 1732092257298)
@@ -0,0 +1,49 @@
+package com.example.agrimart.viewmodel;
+
+import androidx.lifecycle.LiveData;
+import androidx.lifecycle.MutableLiveData;
+
+import com.example.agrimart.data.model.Category;
+import com.example.agrimart.data.model.Order;
+import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.firestore.FirebaseFirestore;
+import com.google.firebase.firestore.Query;
+
+import java.util.List;
+
+public class PurchasedOrdersViewModel {
+
+    private final FirebaseFirestore firestore;
+    private final FirebaseAuth auth;
+    private String userId;
+    private final MutableLiveData<List<Order>> orders = new MutableLiveData<>();
+
+    public LiveData<List<Order>> getOrders() {
+        return orders;
+    }
+
+    public PurchasedOrdersViewModel() {
+        this.auth = FirebaseAuth.getInstance();
+        this.firestore = FirebaseFirestore.getInstance();
+    }
+
+
+
+    public void getData(String status) {
+        userId = auth.getCurrentUser().getUid();
+
+        firestore.collection("orders")
+                .whereEqualTo("userId", userId)
+                .whereEqualTo("status", status)
+                .orderBy("created_at")
+                .get().addOnCompleteListener(task -> {
+                    if (task.isSuccessful()) {
+                        List<Order> orderList = task.getResult().toObjects(Order.class);
+                        orders.setValue(orderList);
+                    } else {
+
+                    }
+                });
+    }
+
+}
Index: app/src/main/java/com/example/agrimart/ui/MyProfile/MyAddress/EditAddressActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.ui.MyProfile.MyAddress;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.data.model.Address;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\npublic class EditAddressActivity extends AppCompatActivity {\r\n    public static final int REQUEST_CODE_EDIT_ADDRESS = 12;\r\n    private EditText edtHoTen, edtSDT, edtTenDuong;\r\n    private Switch switchDefault;\r\n    private String AddressId; // Biến lưu trữ ID của địa chỉ\r\n    private FirebaseFirestore firestore;\r\n    private FirebaseAuth auth;\r\n    private LinearLayout save_address, delete_address, getAddress;\r\n    private String detailedAddressID;\r\n    private TextView edtTinh;\r\n    ImageButton btnBack;\r\n\r\n\r\n    @SuppressLint(\"MissingInflatedId\")\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_edit_address);\r\n\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n\r\n        // Khởi tạo Firestore và FirebaseAuth\r\n        firestore = FirebaseFirestore.getInstance();\r\n        auth = FirebaseAuth.getInstance();\r\n        addControl();\r\n\r\n        // Nhận AddressId từ Intent\r\n        Intent intent = getIntent();\r\n        AddressId = intent.getStringExtra(\"addressId\");\r\n\r\n        // Tải thông tin địa chỉ\r\n        loadAddressDetails();\r\n\r\n\r\n        addEvent();\r\n\r\n    }\r\n\r\n    void addControl() {\r\n        // Khởi tạo các EditText và Switch\r\n        edtHoTen = findViewById(R.id.edtHoTen);\r\n        edtSDT = findViewById(R.id.edtSDT);\r\n        edtTinh = findViewById(R.id.edtTinh);\r\n        edtTenDuong = findViewById(R.id.edtTenDuong);\r\n        switchDefault = findViewById(R.id.switch2);\r\n        getAddress = findViewById(R.id.get_address);\r\n        save_address = findViewById(R.id.id_save_address);\r\n        delete_address = findViewById(R.id.id_delete_address);\r\n        btnBack = findViewById(R.id.btn_back);\r\n    }\r\n\r\n    void addEvent() {\r\n        save_address.setOnClickListener(v -> saveAddress());\r\n\r\n        delete_address.setOnClickListener(v -> deleteAddress());\r\n\r\n        btnBack.setOnClickListener(v -> onBackPressed());\r\n\r\n        getAddress.setOnClickListener(v -> openAddressAPI());\r\n    }\r\n\r\n    private void openAddressAPI() {\r\n        Intent intent = new Intent(EditAddressActivity.this, GetAddressActivity.class);\r\n\r\n        if (detailedAddressID != null && !detailedAddressID.isEmpty()) {\r\n            intent.putExtra(\"detailedAddressID\", detailedAddressID);\r\n        }\r\n\r\n        startActivityForResult(intent, REQUEST_CODE_EDIT_ADDRESS);\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == REQUEST_CODE_EDIT_ADDRESS && resultCode == RESULT_OK) {\r\n            if (data != null) {\r\n                // Nhận chuỗi từ Intent\r\n                String addressString = data.getStringExtra(\"address\");\r\n                detailedAddressID = data.getStringExtra(\"detailedAddressID\");\r\n                // Xử lý chuỗi nhận được ở đây (ví dụ: hiển thị trong một TextView hoặc sử dụng nó theo cách khác)\r\n                edtTinh.setText(addressString);\r\n            }\r\n        }\r\n    }\r\n\r\n    private void loadAddressDetails() {\r\n        String userId = auth.getCurrentUser().getUid();\r\n\r\n        // Lấy thông tin địa chỉ bằng AddressId\r\n        firestore.collection(\"users\").document(userId).get()\r\n                .addOnSuccessListener(documentSnapshot -> {\r\n                    if (documentSnapshot.exists() && documentSnapshot.contains(\"addresses\")) {\r\n                        List<Map<String, Object>> addressList = (List<Map<String, Object>>) documentSnapshot.get(\"addresses\");\r\n\r\n                        // Tìm địa chỉ theo AddressId\r\n                        for (Map<String, Object> address : addressList) {\r\n                            if (AddressId.equals(address.get(\"addressId\"))) {\r\n                                edtHoTen.setText((String) address.get(\"name\"));\r\n                                edtSDT.setText((String) address.get(\"phone\"));\r\n                                edtTenDuong.setText((String) address.get(\"street\"));\r\n                                edtTinh.setText((String) address.get(\"province\"));\r\n                                detailedAddressID = (String) address.get(\"detailedAddressID\");\r\n\r\n                                Boolean isDefault = (Boolean) address.get(\"default\");\r\n                                switchDefault.setChecked(isDefault != null ? isDefault : false);\r\n                                return; // Dừng việc tìm kiếm khi đã tìm thấy địa chỉ\r\n                            }\r\n                        }\r\n                        Log.d(\"EditAddressActivity\", \"Address not found with ID: \" + AddressId);\r\n                    } else {\r\n                        Log.d(\"EditAddressActivity\", \"No addresses field in document.\");\r\n                    }\r\n                })\r\n                .addOnFailureListener(e -> Toast.makeText(this, \"Lỗi khi tải địa chỉ: \" + e.getMessage(), Toast.LENGTH_SHORT).show());\r\n    }\r\n\r\n    private void saveAddress() {\r\n        String name = edtHoTen.getText().toString();\r\n        String phone = edtSDT.getText().toString();\r\n        String street = edtTenDuong.getText().toString();\r\n        String detailedAddress = edtTinh.getText().toString();\r\n        boolean isDefault = switchDefault.isChecked();\r\n\r\n        Map<String, Object> updatedAddress = new HashMap<>();\r\n        updatedAddress.put(\"addressId\", AddressId);\r\n        updatedAddress.put(\"street\", street);\r\n        updatedAddress.put(\"phone\", phone);\r\n        updatedAddress.put(\"detailedAddress\", detailedAddress);\r\n        updatedAddress.put(\"detailedAddressID\", detailedAddressID);\r\n        updatedAddress.put(\"name\", name);\r\n        updatedAddress.put(\"default\", isDefault);\r\n\r\n        String userId = auth.getCurrentUser().getUid();\r\n\r\n        firestore.collection(\"users\")\r\n                .document(userId)\r\n                .get()\r\n                .addOnSuccessListener(documentSnapshot -> {\r\n                    if (documentSnapshot.exists() && documentSnapshot.contains(\"addresses\")) {\r\n                        List<Map<String, Object>> addressList = (List<Map<String, Object>>) documentSnapshot.get(\"addresses\");\r\n\r\n                        // Ensure we update only the matching address\r\n                        boolean addressFound = false;\r\n\r\n                        if (isDefault) {\r\n                            // Reset default flag for all addresses\r\n                            for (Map<String, Object> address : addressList) {\r\n                                if (address.containsKey(\"default\") && (Boolean) address.get(\"default\")) {\r\n                                    address.put(\"default\", false);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        // Update the existing address\r\n                        for (int i = 0; i < addressList.size(); i++) {\r\n                            if (AddressId.equals(addressList.get(i).get(\"addressId\"))) {\r\n                                addressList.set(i, updatedAddress);\r\n                                addressFound = true;\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        if (addressFound) {\r\n                            // Update Firestore with modified address list\r\n                            firestore.collection(\"users\")\r\n                                    .document(userId)\r\n                                    .update(\"addresses\", addressList)\r\n                                    .addOnSuccessListener(aVoid -> {\r\n                                        setResult(RESULT_OK);\r\n                                        Toast.makeText(this, \"Địa chỉ đã được lưu\", Toast.LENGTH_SHORT).show();\r\n                                        finish();\r\n                                    })\r\n                                    .addOnFailureListener(e -> Toast.makeText(this, \"Lỗi khi lưu địa chỉ: \" + e.getMessage(), Toast.LENGTH_SHORT).show());\r\n                        } else {\r\n                            Toast.makeText(this, \"Không tìm thấy địa chỉ để cập nhật.\", Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    }\r\n                })\r\n                .addOnFailureListener(e -> Toast.makeText(this, \"Lỗi khi tải danh sách địa chỉ: \" + e.getMessage(), Toast.LENGTH_SHORT).show());\r\n    }\r\n\r\n\r\n    private void deleteAddress() {\r\n        String userId = auth.getCurrentUser().getUid();\r\n\r\n        firestore.collection(\"users\")\r\n                .document(userId)\r\n                .get()\r\n                .addOnSuccessListener(documentSnapshot -> {\r\n                    if (documentSnapshot.exists() && documentSnapshot.contains(\"addresses\")) {\r\n                        List<Map<String, Object>> addressList = (List<Map<String, Object>>) documentSnapshot.get(\"addresses\");\r\n\r\n                        for (int i = 0; i < addressList.size(); i++) {\r\n                            if (AddressId.equals(addressList.get(i).get(\"addressId\"))) {\r\n                                addressList.remove(i);\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        firestore.collection(\"users\")\r\n                                .document(userId)\r\n                                .update(\"addresses\", addressList)\r\n                                .addOnSuccessListener(aVoid -> {\r\n                                    setResult(RESULT_OK);\r\n                                    Toast.makeText(this, \"Địa chỉ đã được xóa\", Toast.LENGTH_SHORT).show();\r\n                                    finish();\r\n                                })\r\n                                .addOnFailureListener(e -> Toast.makeText(this, \"Lỗi khi xóa địa chỉ: \" + e.getMessage(), Toast.LENGTH_SHORT).show());\r\n                    }\r\n                })\r\n                .addOnFailureListener(e -> Toast.makeText(this, \"Lỗi khi tải danh sách địa chỉ: \" + e.getMessage(), Toast.LENGTH_SHORT).show());\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAddress/EditAddressActivity.java b/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAddress/EditAddressActivity.java
--- a/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAddress/EditAddressActivity.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ b/app/src/main/java/com/example/agrimart/ui/MyProfile/MyAddress/EditAddressActivity.java	(date 1732073554451)
@@ -36,7 +36,11 @@
     private LinearLayout save_address, delete_address, getAddress;
     private String detailedAddressID;
     private TextView edtTinh;
-    ImageButton btnBack;
+    private ImageButton btnBack;
+    private String province;
+    private String district;
+    private String commune;
+
 
 
     @SuppressLint("MissingInflatedId")
@@ -133,7 +137,11 @@
                                 edtHoTen.setText((String) address.get("name"));
                                 edtSDT.setText((String) address.get("phone"));
                                 edtTenDuong.setText((String) address.get("street"));
-                                edtTinh.setText((String) address.get("province"));
+                                province = (String) address.get("province");
+                                district = (String) address.get("district");
+                                commune = (String) address.get("commune");
+
+                                edtTinh.setText(commune + ", " + district + ", " + province);
                                 detailedAddressID = (String) address.get("detailedAddressID");
 
                                 Boolean isDefault = (Boolean) address.get("default");
@@ -153,14 +161,15 @@
         String name = edtHoTen.getText().toString();
         String phone = edtSDT.getText().toString();
         String street = edtTenDuong.getText().toString();
-        String detailedAddress = edtTinh.getText().toString();
         boolean isDefault = switchDefault.isChecked();
 
         Map<String, Object> updatedAddress = new HashMap<>();
         updatedAddress.put("addressId", AddressId);
         updatedAddress.put("street", street);
         updatedAddress.put("phone", phone);
-        updatedAddress.put("detailedAddress", detailedAddress);
+        updatedAddress.put("province", province);
+        updatedAddress.put("district", district);
+        updatedAddress.put("commune", commune);
         updatedAddress.put("detailedAddressID", detailedAddressID);
         updatedAddress.put("name", name);
         updatedAddress.put("default", isDefault);
Index: app/src/main/res/layout/fragment_cancelled.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_cancelled.xml b/app/src/main/res/layout/fragment_order_status.xml
rename from app/src/main/res/layout/fragment_cancelled.xml
rename to app/src/main/res/layout/fragment_order_status.xml
--- a/app/src/main/res/layout/fragment_cancelled.xml	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ b/app/src/main/res/layout/fragment_order_status.xml	(date 1732095800132)
@@ -3,12 +3,12 @@
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
-    tools:context=".ui.MyProfile.PurchasedOrders.CancelledFragment">
+    tools:context=".ui.MyProfile.PurchasedOrders.OrderStatusFragment">
 
-    <!-- TODO: Update blank fragment layout -->
-    <TextView
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/recyclerViewOrders"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
-        android:text="@string/hello_blank_fragment" />
-
+        android:padding="4dp"
+        android:clipToPadding="false" />
 </FrameLayout>
\ No newline at end of file
Index: .idea/deploymentTargetSelector.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetSelector\">\r\n    <selectionStates>\r\n      <SelectionState runConfigName=\"app\">\r\n        <option name=\"selectionMode\" value=\"DROPDOWN\" />\r\n      </SelectionState>\r\n    </selectionStates>\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/deploymentTargetSelector.xml b/.idea/deploymentTargetSelector.xml
--- a/.idea/deploymentTargetSelector.xml	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ b/.idea/deploymentTargetSelector.xml	(date 1732103691477)
@@ -2,7 +2,7 @@
 <project version="4">
   <component name="deploymentTargetSelector">
     <selectionStates>
-      <SelectionState runConfigName="app">
+      <SelectionState runConfigName="SignInActivity">
         <option name="selectionMode" value="DROPDOWN" />
       </SelectionState>
     </selectionStates>
Index: app/src/main/java/com/example/agrimart/adapter/ProductOrderAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/adapter/ProductOrderAdapter.java b/app/src/main/java/com/example/agrimart/adapter/ProductOrderAdapter.java
new file mode 100644
--- /dev/null	(date 1732098587579)
+++ b/app/src/main/java/com/example/agrimart/adapter/ProductOrderAdapter.java	(date 1732098587579)
@@ -0,0 +1,72 @@
+package com.example.agrimart.adapter;
+
+import android.content.Context;
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.TextView;
+
+import androidx.annotation.NonNull;
+import androidx.recyclerview.widget.RecyclerView;
+
+import com.bumptech.glide.Glide;
+import com.example.agrimart.R;
+import com.example.agrimart.data.model.Product;
+import com.google.android.material.imageview.ShapeableImageView;
+
+import java.util.List;
+
+public class ProductOrderAdapter extends RecyclerView.Adapter<ProductOrderAdapter.ProductOrderViewHolder> {
+
+    private Context context;
+    private List<Product> productOrderList;
+
+    public ProductOrderAdapter(Context context, List<Product> productOrderList) {
+        this.context = context;
+        this.productOrderList = productOrderList;
+    }
+
+    @NonNull
+    @Override
+    public ProductOrderViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
+        // Inflate the layout for each item
+        View view = LayoutInflater.from(context).inflate(R.layout.item_order_product, parent, false);
+        return new ProductOrderViewHolder(view);
+    }
+
+    @Override
+    public void onBindViewHolder(@NonNull ProductOrderViewHolder holder, int position) {
+        // Get the product order at the current position
+        Product productOrder = productOrderList.get(position);
+
+        // Set data to views
+        holder.tvProductName.setText(productOrder.getName());
+        holder.tvUnit.setText(productOrder.getUnit());
+        holder.tvQuantity.setText("x" + productOrder.getQuantity());
+        holder.tvPrice.setText(String.format("%,.0f", productOrder.getPrice()) + " VND");
+
+
+    }
+
+    @Override
+    public int getItemCount() {
+        return productOrderList.size();
+    }
+
+    public static class ProductOrderViewHolder extends RecyclerView.ViewHolder {
+
+        ShapeableImageView imgProduct;
+        TextView tvProductName, tvUnit, tvQuantity, tvPrice;
+
+        public ProductOrderViewHolder(View itemView) {
+            super(itemView);
+
+            // Bind views from layout
+            imgProduct = itemView.findViewById(R.id.img_product);
+            tvProductName = itemView.findViewById(R.id.tv_product_name);
+            tvUnit = itemView.findViewById(R.id.unit);
+            tvQuantity = itemView.findViewById(R.id.quantity);
+            tvPrice = itemView.findViewById(R.id.price);
+        }
+    }
+}
Index: app/src/main/java/com/example/agrimart/viewmodel/OrderStatusFragmentViewModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/viewmodel/OrderStatusFragmentViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/OrderStatusFragmentViewModel.java
new file mode 100644
--- /dev/null	(date 1732105072109)
+++ b/app/src/main/java/com/example/agrimart/viewmodel/OrderStatusFragmentViewModel.java	(date 1732105072109)
@@ -0,0 +1,61 @@
+package com.example.agrimart.viewmodel;
+
+import android.util.Log;
+
+import androidx.lifecycle.LiveData;
+import androidx.lifecycle.MutableLiveData;
+import androidx.lifecycle.ViewModel;
+
+import com.example.agrimart.data.model.Order;
+import com.example.agrimart.data.model.Product;
+import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.firestore.DocumentSnapshot;
+import com.google.firebase.firestore.FirebaseFirestore;
+
+import java.util.ArrayList;
+import java.util.List;
+import java.util.concurrent.atomic.AtomicInteger;
+
+public class OrderStatusFragmentViewModel extends ViewModel {
+    private final FirebaseFirestore firestore;
+    private final FirebaseAuth auth;
+    private String userId;
+    private final MutableLiveData<List<Order>> orders = new MutableLiveData<>();
+
+    public LiveData<List<Order>> getOrders() {
+        return orders;
+    }
+
+    public OrderStatusFragmentViewModel() {
+        this.auth = FirebaseAuth.getInstance();
+        this.firestore = FirebaseFirestore.getInstance();
+    }
+
+    public void getData(String status) {
+        Log.d("OrderStatusFragmentViewModel", "Fetching data for status: " + status);
+        userId = auth.getCurrentUser().getUid();
+        firestore.collection("orders")
+                .whereEqualTo("userId", userId)
+                .whereEqualTo("status", status)
+                .get()
+                .addOnCompleteListener(task -> {
+                    if (task.isSuccessful() && task.getResult() != null) {
+                        Log.d("OrderStatusFragmentViewModel", "Data fetched successfully");
+                        List<Order> orderList = task.getResult().toObjects(Order.class);
+                        if (!orderList.isEmpty()) {
+                            orders.setValue(orderList);
+                            Log.d("OrderStatusFragmentViewModel", "Orders set to LiveData: " + orderList.size());
+                        } else {
+                            orders.setValue(new ArrayList<>());
+                            Log.d("OrderStatusFragmentViewModel", "No orders found");
+                        }
+                    } else {
+                        Log.d("OrderStatusFragmentViewModel", "Error fetching data");
+                        orders.setValue(new ArrayList<>());
+                    }
+                });
+    }
+
+
+
+}
Index: app/src/main/java/com/example/agrimart/ui/Explore/ExploreFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.ui.Explore;\r\n\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.MenuInflater;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageButton;\r\nimport android.widget.PopupMenu;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.viewpager2.widget.ViewPager2;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.adapter.ViewPagerAdapter;\r\nimport com.example.agrimart.databinding.FragmentExploreBinding;\r\nimport com.example.agrimart.ui.Cart.CartFragment;\r\nimport com.example.agrimart.ui.Homepage.HomeFragment;\r\nimport com.example.agrimart.ui.MyProfile.MyProfileFragment;\r\nimport com.example.agrimart.ui.Notification.NotificationFragment;\r\nimport com.example.agrimart.viewmodel.CategoryViewModel;\r\nimport com.example.agrimart.viewmodel.ExploreFragmentViewModel;\r\nimport com.example.agrimart.viewmodel.SharedViewModel;\r\nimport com.google.android.material.tabs.TabLayout;\r\nimport com.google.android.material.tabs.TabLayoutMediator;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class ExploreFragment extends Fragment {\r\n    private TabLayout tabLayout;\r\n    private ViewPager2 viewPager;\r\n    private ImageButton filterIcon;\r\n    private FragmentExploreBinding binding;\r\n    private ExploreFragmentViewModel viewModel;\r\n    private String categoryID;\r\n    private SharedViewModel sharedViewModel;\r\n\r\n    public ExploreFragment(String categoryID) {\r\n        this.categoryID = categoryID;\r\n    }\r\n    public ExploreFragment() {\r\n\r\n    }\r\n\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_explore, container, false);\r\n        viewModel = new ViewModelProvider(this).get(ExploreFragmentViewModel.class);\r\n        binding.setViewmodel(viewModel);\r\n        View view = binding.getRoot();\r\n\r\n        tabLayout = view.findViewById(R.id.tabLayout);\r\n        viewPager = view.findViewById(R.id.viewPager);\r\n        filterIcon = view.findViewById(R.id.filter_icon);\r\n\r\n        viewModel.getData();\r\n        sharedViewModel = new ViewModelProvider(requireActivity()).get(SharedViewModel.class);\r\n        viewModel.categories.observe(getViewLifecycleOwner(), categories -> {\r\n            List<Fragment> fragments = new ArrayList<>();\r\n            List<String> titles = new ArrayList<>();\r\n            int selectedCategoryIndex = -1; // Lưu chỉ số category được chọn (nếu có)\r\n\r\n            // Kiểm tra nếu có categoryID và chọn category tương ứng\r\n            if (categoryID != null && !categoryID.isEmpty()) {\r\n                for (int i = 0; i < categories.size(); i++) {\r\n                    if (categories.get(i).getId().equals(categoryID)) {\r\n                        selectedCategoryIndex = i;  // Ghi nhận chỉ số category được chọn\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Thêm các fragment cho tất cả các category vào ViewPager\r\n            for (int i = 0; i < categories.size(); i++) {\r\n                fragments.add(new CategoryFragment(categories.get(i).getId()));\r\n                titles.add(categories.get(i).getName());\r\n            }\r\n\r\n            ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(requireActivity(), fragments, titles);\r\n            viewPager.setAdapter(viewPagerAdapter);\r\n\r\n            // Nếu có categoryID, chọn tab tương ứng\r\n            if (selectedCategoryIndex != -1) {\r\n                viewPager.setCurrentItem(selectedCategoryIndex);  // Chọn category tương ứng trong ViewPager\r\n            }\r\n\r\n            new TabLayoutMediator(tabLayout, viewPager, (tab, pos) -> tab.setText(titles.get(pos))).attach();\r\n\r\n            filterIcon.setOnClickListener(this::showFilterMenu);\r\n        });\r\n\r\n        return view;\r\n    }\r\n\r\n\r\n    private void showFilterMenu(View v) {\r\n        PopupMenu popup = new PopupMenu(getContext(), v);\r\n        MenuInflater inflater = popup.getMenuInflater();\r\n        inflater.inflate(R.menu.filter_menu, popup.getMenu());\r\n        popup.setOnMenuItemClickListener(this::filterMenuItemSelected);\r\n        popup.show();\r\n    }\r\n\r\n    private boolean filterMenuItemSelected(MenuItem item) {\r\n        String sortOrder = null;\r\n        if (item.getItemId() == R.id.filter_lowest_price) {\r\n            sortOrder = \"lowest_price\";\r\n            Log.d(\"ExploreFragment\", \"Sort order set to: \" + sortOrder);\r\n        } else if (item.getItemId() == R.id.filter_highest_price) {\r\n            sortOrder = \"highest_price\";\r\n        } else if (item.getItemId() == R.id.filter_latest) {\r\n            sortOrder = \"latest\";\r\n        } else if (item.getItemId() == R.id.filter_oldest) {\r\n            sortOrder = \"oldest\";\r\n        } else {\r\n            return false;\r\n        }\r\n        sharedViewModel.setSortOrder(sortOrder);\r\n        return true;\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/Explore/ExploreFragment.java b/app/src/main/java/com/example/agrimart/ui/Explore/ExploreFragment.java
--- a/app/src/main/java/com/example/agrimart/ui/Explore/ExploreFragment.java	(revision 9957bda51f2baad613096b803a384183006af48a)
+++ b/app/src/main/java/com/example/agrimart/ui/Explore/ExploreFragment.java	(date 1732092257293)
@@ -65,6 +65,7 @@
 
         viewModel.getData();
         sharedViewModel = new ViewModelProvider(requireActivity()).get(SharedViewModel.class);
+
         viewModel.categories.observe(getViewLifecycleOwner(), categories -> {
             List<Fragment> fragments = new ArrayList<>();
             List<String> titles = new ArrayList<>();
Index: app/src/main/java/com/example/agrimart/adapter/OrderStoreAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/adapter/OrderStoreAdapter.java b/app/src/main/java/com/example/agrimart/adapter/OrderStoreAdapter.java
new file mode 100644
--- /dev/null	(date 1732103751878)
+++ b/app/src/main/java/com/example/agrimart/adapter/OrderStoreAdapter.java	(date 1732103751878)
@@ -0,0 +1,83 @@
+package com.example.agrimart.adapter;
+
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.ImageView;
+import android.widget.TextView;
+
+import androidx.annotation.NonNull;
+import androidx.recyclerview.widget.RecyclerView;
+
+import com.bumptech.glide.Glide;
+import com.example.agrimart.R;
+import com.example.agrimart.data.model.Order;
+
+import java.util.ArrayList;
+import java.util.List;
+
+public class OrderStoreAdapter extends RecyclerView.Adapter<OrderStoreAdapter.OrderStoreViewHolder> {
+    private final List<Order> orderStoreList = new ArrayList<>();
+
+    // Constructor
+    public OrderStoreAdapter(List<Order> orderStoreList) {
+        this.orderStoreList.addAll(orderStoreList);
+    }
+
+    // Update orders when data changes
+    public void updateOrders(List<Order> newOrders) {
+        orderStoreList.clear();
+        orderStoreList.addAll(newOrders);
+        notifyDataSetChanged();
+    }
+
+    @NonNull
+    @Override
+    public OrderStoreViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
+        // Inflate the layout for each item
+        View view = LayoutInflater.from(parent.getContext())
+                .inflate(R.layout.item_order_store, parent, false);
+        return new OrderStoreViewHolder(view);
+    }
+
+    @Override
+    public void onBindViewHolder(@NonNull OrderStoreViewHolder holder, int position) {
+        // Get the current OrderStore
+        Order orderStore = orderStoreList.get(position);
+
+        // Set text data
+        holder.tvStoreName.setText(orderStore.getStoreName());
+        holder.tvStatus.setText(orderStore.getStatus());
+        holder.tvTotalPrice.setText("Tổng số tiền: " + orderStore.getTotalPrice() + " VND");
+
+        // Set the status color based on its value
+        if ("Đã hủy".equals(orderStore.getStatus())) {
+            holder.tvStatus.setTextColor(holder.itemView.getContext().getResources().getColor(R.color.red));
+        } else {
+            holder.tvStatus.setTextColor(holder.itemView.getContext().getResources().getColor(R.color.green));
+        }
+
+        // Load product/store image (you can modify this depending on your image URL or resource)
+
+    }
+
+    @Override
+    public int getItemCount() {
+        return orderStoreList.size();
+    }
+
+    // ViewHolder class
+    static class OrderStoreViewHolder extends RecyclerView.ViewHolder {
+
+        TextView tvStoreName, tvStatus, tvTotalPrice;
+        ImageView imageView;
+
+        public OrderStoreViewHolder(@NonNull View itemView) {
+            super(itemView);
+            tvStoreName = itemView.findViewById(R.id.tv_store_name);
+            tvStatus = itemView.findViewById(R.id.status);
+            tvTotalPrice = itemView.findViewById(R.id.total_price);
+            imageView = itemView.findViewById(R.id.imageView9);
+        }
+    }
+}
