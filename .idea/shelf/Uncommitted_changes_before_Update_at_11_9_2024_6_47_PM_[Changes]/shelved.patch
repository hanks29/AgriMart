Index: app/src/main/java/com/example/agrimart/data/model/Store.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.data.model;\r\n\r\npublic class Store {\r\n    private String name;\r\n    private String avatarUrl;\r\n    private String street;\r\n    private String ward;\r\n    private String district;\r\n    private String city;\r\n    private String phoneNumber;\r\n\r\n    public Store() {\r\n    }\r\n\r\n    public Store(String name, String avatarUrl, String street, String ward, String district, String city, String phoneNumber) {\r\n        this.name = name;\r\n        this.avatarUrl = avatarUrl;\r\n        this.street = street;\r\n        this.ward = ward;\r\n        this.district = district;\r\n        this.city = city;\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public String getAvatarUrl() {\r\n        return avatarUrl;\r\n    }\r\n\r\n    public String getFullAddress() {\r\n        return street + \", \" + ward + \", \" + district + \", \" + city;\r\n    }\r\n\r\n    public String getPhoneNumber() {\r\n        return phoneNumber;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/data/model/Store.java b/app/src/main/java/com/example/agrimart/data/model/Store.java
--- a/app/src/main/java/com/example/agrimart/data/model/Store.java	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ b/app/src/main/java/com/example/agrimart/data/model/Store.java	(date 1731057706441)
@@ -1,6 +1,9 @@
 package com.example.agrimart.data.model;
 
+import java.util.List;
+
 public class Store {
+    private String id;
     private String name;
     private String avatarUrl;
     private String street;
@@ -8,11 +11,14 @@
     private String district;
     private String city;
     private String phoneNumber;
+    private String userId;
+    private List<Product> products;
 
     public Store() {
     }
 
-    public Store(String name, String avatarUrl, String street, String ward, String district, String city, String phoneNumber) {
+    public Store(String id, String name, String avatarUrl, String street, String ward, String district, String city, String phoneNumber) {
+        this.id = id;
         this.name = name;
         this.avatarUrl = avatarUrl;
         this.street = street;
@@ -22,19 +28,88 @@
         this.phoneNumber = phoneNumber;
     }
 
+    // Getters and setters for all fields
+    public String getId() {
+        return id;
+    }
+
+    public void setId(String id) {
+        this.id = id;
+    }
+
     public String getName() {
         return name;
     }
 
+    public void setName(String name) {
+        this.name = name;
+    }
+
     public String getAvatarUrl() {
         return avatarUrl;
     }
 
+    public void setAvatarUrl(String avatarUrl) {
+        this.avatarUrl = avatarUrl;
+    }
+
+    public String getStreet() {
+        return street;
+    }
+
+    public void setStreet(String street) {
+        this.street = street;
+    }
+
+    public String getWard() {
+        return ward;
+    }
+
+    public void setWard(String ward) {
+        this.ward = ward;
+    }
+
+    public String getDistrict() {
+        return district;
+    }
+
+    public void setDistrict(String district) {
+        this.district = district;
+    }
+
+    public String getCity() {
+        return city;
+    }
+
+    public void setCity(String city) {
+        this.city = city;
+    }
+
+    public String getPhoneNumber() {
+        return phoneNumber;
+    }
+
+    public void setPhoneNumber(String phoneNumber) {
+        this.phoneNumber = phoneNumber;
+    }
+
+    public String getUserId() {
+        return userId;
+    }
+
+    public void setUserId(String userId) {
+        this.userId = userId;
+    }
+
+    public List<Product> getProducts() {
+        return products;
+    }
+
+    public void setProducts(List<Product> products) {
+        this.products = products;
+    }
+
     public String getFullAddress() {
         return street + ", " + ward + ", " + district + ", " + city;
     }
-
-    public String getPhoneNumber() {
-        return phoneNumber;
-    }
-}
+}
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.viewmodel;\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Store;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.ListenerRegistration;\r\n\r\npublic class ProductDetailViewModel extends ViewModel {\r\n    private final FirebaseFirestore db;\r\n    private ListenerRegistration storeListener;\r\n    private final MutableLiveData<Store> storeInfo = new MutableLiveData<>();\r\n\r\n    public ProductDetailViewModel() {\r\n        db = FirebaseFirestore.getInstance();\r\n    }\r\n\r\n    public LiveData<Store> getStoreInfo() {\r\n        return storeInfo;\r\n    }\r\n\r\n    public void loadStoreInfo(String storeId) {\r\n        if (storeListener != null) {\r\n            storeListener.remove();\r\n        }\r\n\r\n        storeListener = db.collection(\"users\").document(storeId)\r\n                .addSnapshotListener((snapshot, e) -> {\r\n                    if (e != null || snapshot == null || !snapshot.exists()) {\r\n                        return;\r\n                    }\r\n                    String name = snapshot.getString(\"store_name\");\r\n                    String avatarUrl = snapshot.getString(\"store_avatar\");\r\n                    String street = snapshot.getString(\"store_address.street\");\r\n                    String ward = snapshot.getString(\"store_address.ward\");\r\n                    String district = snapshot.getString(\"store_address.district\");\r\n                    String city = snapshot.getString(\"store_address.city\");\r\n                    String phoneNumber = snapshot.getString(\"store_phone_number\");\r\n\r\n                    Store info = new Store(name, avatarUrl, street, ward, district, city, phoneNumber);\r\n                    storeInfo.setValue(info);\r\n                });\r\n    }\r\n\r\n    @Override\r\n    protected void onCleared() {\r\n        super.onCleared();\r\n        if (storeListener != null) {\r\n            storeListener.remove();\r\n        }\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java
--- a/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ b/app/src/main/java/com/example/agrimart/viewmodel/ProductDetailViewModel.java	(date 1731055914569)
@@ -22,7 +22,7 @@
         return storeInfo;
     }
 
-    public void loadStoreInfo(String storeId) {
+   public void loadStoreInfo(String storeId) {
         if (storeListener != null) {
             storeListener.remove();
         }
@@ -40,11 +40,10 @@
                     String city = snapshot.getString("store_address.city");
                     String phoneNumber = snapshot.getString("store_phone_number");
 
-                    Store info = new Store(name, avatarUrl, street, ward, district, city, phoneNumber);
+                    Store info = new Store(storeId, name, avatarUrl, street, ward, district, city, phoneNumber);
                     storeInfo.setValue(info);
                 });
     }
-
     @Override
     protected void onCleared() {
         super.onCleared();
Index: app/src/main/res/layout/activity_search.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<layout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\">\r\n\r\n    <data>\r\n        <import type=\"android.view.View\"/>\r\n        <variable\r\n            name=\"search\"\r\n            type=\"com.example.agrimart.viewmodel.SearchViewModel\" />\r\n    </data>\r\n\r\n\r\n    <RelativeLayout\r\n\r\n        android:id=\"@+id/main1\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/header\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@color/green\"\r\n            android:orientation=\"horizontal\"\r\n            android:padding=\"16dp\">\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/btnBack\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"40dp\"\r\n                android:layout_marginEnd=\"10dp\"\r\n                android:background=\"@null\"\r\n                android:layout_gravity=\"center_vertical\"\r\n                android:src=\"@drawable/chevron_left\" />\r\n\r\n            <androidx.cardview.widget.CardView\r\n                android:id=\"@+id/search_card\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_weight=\"1\"\r\n                app:cardCornerRadius=\"8dp\"\r\n                app:cardElevation=\"4dp\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"horizontal\"\r\n                    android:padding=\"8dp\"\r\n                    android:id=\"@+id/search_bar\">\r\n\r\n                    <ImageButton\r\n                        android:id=\"@+id/search_icon\"\r\n                        android:layout_width=\"32dp\"\r\n                        android:layout_height=\"32dp\"\r\n                        android:src=\"@drawable/ic_search\"\r\n                        android:tint=\"@color/black\"\r\n                        android:layout_gravity=\"center_vertical\"\r\n                        android:layout_marginEnd=\"8dp\"\r\n                        android:background=\"@color/white\"/>\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/search_input\"\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_weight=\"1\"\r\n                        android:hint=\"@string/search\"\r\n                        android:background=\"@null\"\r\n                        android:padding=\"8dp\"\r\n                        android:textColor=\"@android:color/black\"\r\n                        android:textColorHint=\"@android:color/darker_gray\" />\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/filter_icon\"\r\n                android:layout_width=\"32dp\"\r\n                android:layout_height=\"32dp\"\r\n                android:layout_gravity=\"center_vertical\"\r\n                android:layout_marginStart=\"10dp\"\r\n                android:layout_marginEnd=\"4dp\"\r\n                android:background=\"@color/green\"\r\n                android:src=\"@drawable/filter\"\r\n                app:tint=\"@color/black\" />\r\n\r\n        </LinearLayout>\r\n\r\n        <LinearLayout\r\n            android:id=\"@+id/ln1\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/header\"\r\n            android:layout_marginTop=\"16dp\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/textView3\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:textSize=\"20sp\"\r\n                android:layout_marginStart=\"24dp\"\r\n                android:textStyle=\"bold\"\r\n                android:textColor=\"#272727\"\r\n                android:fontFamily=\"@font/circular_std\"\r\n                android:text=\"@string/t_m_theo_danh_m_c\" />\r\n\r\n            <ScrollView\r\n                android:id=\"@+id/sc\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_marginTop=\"8dp\"\r\n                android:layout_height=\"wrap_content\">\r\n\r\n                <androidx.recyclerview.widget.RecyclerView\r\n                    android:id=\"@+id/rvCategories\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    >\r\n\r\n                </androidx.recyclerview.widget.RecyclerView>\r\n            </ScrollView>\r\n        </LinearLayout>\r\n\r\n        <ScrollView\r\n            android:id=\"@+id/sc2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_marginTop=\"24dp\"\r\n            android:layout_below=\"@id/ln1\"\r\n            android:visibility=\"@{search.isProductsEmpty() ? View.VISIBLE : View.GONE}\">\r\n\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:id=\"@+id/rvProducts\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n            />\r\n        </ScrollView>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tvNotFound\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/sc2\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:layout_marginTop=\"20dp\"\r\n            android:visibility=\"@{search.isProductsEmpty() ? View.VISIBLE : View.GONE}\"\r\n            android:text=\"Không tìm thấy kết quả đã nhập\" />\r\n\r\n\r\n    </RelativeLayout>\r\n</layout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/activity_search.xml b/app/src/main/res/layout/activity_search.xml
--- a/app/src/main/res/layout/activity_search.xml	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ b/app/src/main/res/layout/activity_search.xml	(date 1731061603486)
@@ -1,151 +1,118 @@
 <?xml version="1.0" encoding="utf-8"?>
-<layout
-    xmlns:android="http://schemas.android.com/apk/res/android"
+<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
-    xmlns:tools="http://schemas.android.com/tools">
-
-    <data>
-        <import type="android.view.View"/>
-        <variable
-            name="search"
-            type="com.example.agrimart.viewmodel.SearchViewModel" />
-    </data>
-
-
-    <RelativeLayout
-
-        android:id="@+id/main1"
-        android:layout_width="match_parent"
-        android:layout_height="match_parent">
+    android:id="@+id/main1"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent">
 
-        <LinearLayout
-            android:id="@+id/header"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:background="@color/green"
-            android:orientation="horizontal"
-            android:padding="16dp">
+    <LinearLayout
+        android:id="@+id/header"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:background="@color/green"
+        android:orientation="horizontal"
+        android:padding="16dp">
 
-            <ImageButton
-                android:id="@+id/btnBack"
-                android:layout_width="wrap_content"
-                android:layout_height="40dp"
-                android:layout_marginEnd="10dp"
-                android:background="@null"
-                android:layout_gravity="center_vertical"
-                android:src="@drawable/chevron_left" />
+        <ImageButton
+            android:id="@+id/btnBack"
+            android:layout_width="wrap_content"
+            android:layout_height="40dp"
+            android:layout_marginEnd="10dp"
+            android:background="@null"
+            android:layout_gravity="center_vertical"
+            android:src="@drawable/chevron_left" />
 
-            <androidx.cardview.widget.CardView
-                android:id="@+id/search_card"
-                android:layout_width="0dp"
-                android:layout_height="wrap_content"
-                android:layout_weight="1"
-                app:cardCornerRadius="8dp"
-                app:cardElevation="4dp">
+        <androidx.cardview.widget.CardView
+            android:id="@+id/search_card"
+            android:layout_width="0dp"
+            android:layout_height="wrap_content"
+            android:layout_weight="1"
+            app:cardCornerRadius="8dp"
+            app:cardElevation="4dp">
 
-                <LinearLayout
-                    android:layout_width="match_parent"
-                    android:layout_height="wrap_content"
-                    android:orientation="horizontal"
-                    android:padding="8dp"
-                    android:id="@+id/search_bar">
+            <LinearLayout
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"
+                android:orientation="horizontal"
+                android:id="@+id/search_bar">
 
-                    <ImageButton
-                        android:id="@+id/search_icon"
-                        android:layout_width="32dp"
-                        android:layout_height="32dp"
-                        android:src="@drawable/ic_search"
-                        android:tint="@color/black"
-                        android:layout_gravity="center_vertical"
-                        android:layout_marginEnd="8dp"
-                        android:background="@color/white"/>
-
-                    <EditText
-                        android:id="@+id/search_input"
-                        android:layout_width="0dp"
-                        android:layout_height="wrap_content"
-                        android:layout_weight="1"
-                        android:hint="@string/search"
-                        android:background="@null"
-                        android:padding="8dp"
-                        android:textColor="@android:color/black"
-                        android:textColorHint="@android:color/darker_gray" />
-                </LinearLayout>
-            </androidx.cardview.widget.CardView>
+                <androidx.appcompat.widget.SearchView
+                    android:id="@+id/search_input"
+                    android:layout_width="match_parent"
+                    android:layout_height="wrap_content"
+                    android:background="@drawable/search_view_bg"
+                    app:iconifiedByDefault="false"
+                    app:queryHint="Tìm kiếm sản phẩm, cửa hàng"/>
+            </LinearLayout>
+        </androidx.cardview.widget.CardView>
 
-            <ImageButton
-                android:id="@+id/filter_icon"
-                android:layout_width="32dp"
-                android:layout_height="32dp"
-                android:layout_gravity="center_vertical"
-                android:layout_marginStart="10dp"
-                android:layout_marginEnd="4dp"
-                android:background="@color/green"
-                android:src="@drawable/filter"
-                app:tint="@color/black" />
-
-        </LinearLayout>
+        <!-- Filter Button -->
+        <ImageButton
+            android:id="@+id/filter_icon"
+            android:layout_width="32dp"
+            android:layout_height="32dp"
+            android:layout_gravity="center_vertical"
+            android:layout_marginStart="10dp"
+            android:layout_marginEnd="4dp"
+            android:background="@color/green"
+            android:src="@drawable/filter"
+            app:tint="@color/black" />
+    </LinearLayout>
 
-        <LinearLayout
-            android:id="@+id/ln1"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:layout_below="@id/header"
-            android:layout_marginTop="16dp"
-            android:orientation="vertical">
+    <TextView
+        android:layout_width="wrap_content"
+        android:layout_height="wrap_content"
+        android:id="@+id/tvNoResult"
+        android:layout_centerInParent="true"
+        android:text="@string/no_reslut"
+        android:visibility="gone"
+        android:textSize="20sp"/>
+
+    <LinearLayout
+        android:id="@+id/ln1"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:layout_below="@id/header"
+        android:layout_marginTop="16dp"
+        android:orientation="vertical">
 
-            <TextView
-                android:id="@+id/textView3"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:textSize="20sp"
-                android:layout_marginStart="24dp"
-                android:textStyle="bold"
-                android:textColor="#272727"
-                android:fontFamily="@font/circular_std"
-                android:text="@string/t_m_theo_danh_m_c" />
+        <TextView
+            android:id="@+id/textView3"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:textSize="20sp"
+            android:layout_marginStart="24dp"
+            android:textStyle="bold"
+            android:textColor="#272727"
+            android:fontFamily="@font/circular_std"
+            android:text="@string/t_m_theo_danh_m_c" />
 
-            <ScrollView
-                android:id="@+id/sc"
-                android:layout_width="match_parent"
-                android:layout_marginTop="8dp"
-                android:layout_height="wrap_content">
+        <ScrollView
+            android:id="@+id/sc"
+            android:layout_width="match_parent"
+            android:layout_marginTop="8dp"
+            android:layout_height="wrap_content">
 
-                <androidx.recyclerview.widget.RecyclerView
-                    android:id="@+id/rvCategories"
-                    android:layout_width="match_parent"
-                    android:layout_height="wrap_content"
-                    >
-
-                </androidx.recyclerview.widget.RecyclerView>
-            </ScrollView>
-        </LinearLayout>
+            <androidx.recyclerview.widget.RecyclerView
+                android:id="@+id/rvCategories"
+                android:layout_width="match_parent"
+                android:layout_height="wrap_content"/>
+        </ScrollView>
+
+    </LinearLayout>
 
-        <ScrollView
-            android:id="@+id/sc2"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:layout_marginTop="24dp"
-            android:layout_below="@id/ln1"
-            android:visibility="@{search.isProductsEmpty() ? View.VISIBLE : View.GONE}">
-
-            <androidx.recyclerview.widget.RecyclerView
-                android:id="@+id/rvProducts"
-                android:layout_width="match_parent"
-                android:layout_height="wrap_content"
-            />
-        </ScrollView>
+    <!-- Products Section -->
+    <ScrollView
+        android:id="@+id/sc2"
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:layout_marginTop="24dp"
+        android:layout_below="@id/header"
+        android:visibility="gone">
+        <androidx.recyclerview.widget.RecyclerView
+            android:id="@+id/rvProducts"
+            android:layout_width="match_parent"
+            android:layout_height="0dp" />
+    </ScrollView>
 
-        <TextView
-            android:id="@+id/tvNotFound"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content"
-            android:layout_below="@id/sc2"
-            android:layout_centerHorizontal="true"
-            android:layout_marginTop="20dp"
-            android:visibility="@{search.isProductsEmpty() ? View.VISIBLE : View.GONE}"
-            android:text="Không tìm thấy kết quả đã nhập" />
-
-
-    </RelativeLayout>
-</layout>
\ No newline at end of file
+</RelativeLayout>
Index: app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.viewmodel;\r\n\r\nimport androidx.lifecycle.LiveData;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.Transformations;\r\nimport androidx.lifecycle.ViewModel;\r\n\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.example.agrimart.data.model.Product;\r\n\r\nimport java.util.List;\r\n\r\npublic class SearchViewModel extends ViewModel {\r\n    private String inputText;\r\n    private MutableLiveData<List<Category>> categories;\r\n    private MutableLiveData<List<Product>> products=new MutableLiveData<>();\r\n\r\n    public void setCategories(List<Category> categories) {\r\n        this.categories.setValue(categories);\r\n    }\r\n\r\n    public void setProducts(List<Product> products) {\r\n        this.products.setValue(products);\r\n    }\r\n\r\n    public LiveData<Boolean> isProductsEmpty(){\r\n        return Transformations.map(products, List::isEmpty);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java
--- a/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ b/app/src/main/java/com/example/agrimart/viewmodel/SearchViewModel.java	(date 1731152693410)
@@ -1,29 +1,83 @@
 package com.example.agrimart.viewmodel;
 
+import android.util.Log;
+
 import androidx.lifecycle.LiveData;
 import androidx.lifecycle.MutableLiveData;
-import androidx.lifecycle.Transformations;
 import androidx.lifecycle.ViewModel;
 
-import com.example.agrimart.data.model.Category;
 import com.example.agrimart.data.model.Product;
+import com.example.agrimart.data.model.Store;
+import com.google.firebase.firestore.FirebaseFirestore;
 
+import java.text.Normalizer;
+import java.util.ArrayList;
 import java.util.List;
 
 public class SearchViewModel extends ViewModel {
-    private String inputText;
-    private MutableLiveData<List<Category>> categories;
-    private MutableLiveData<List<Product>> products=new MutableLiveData<>();
+
+    private MutableLiveData<List<Product>> filteredProducts = new MutableLiveData<>(new ArrayList<>());
+    private MutableLiveData<List<Store>> filteredStores = new MutableLiveData<>(new ArrayList<>());
+
+    public LiveData<List<Product>> getFilteredProducts() {
+        return filteredProducts;
+    }
 
-    public void setCategories(List<Category> categories) {
-        this.categories.setValue(categories);
+    public LiveData<List<Store>> getFilteredStores() {
+        return filteredStores;
     }
 
-    public void setProducts(List<Product> products) {
-        this.products.setValue(products);
+    private String normalizeString(String input) {
+        String normalized = Normalizer.normalize(input, Normalizer.Form.NFD);
+        return normalized.replaceAll("[\\p{InCombiningDiacriticalMarks}]", "").toLowerCase();
     }
 
-    public LiveData<Boolean> isProductsEmpty(){
-        return Transformations.map(products, List::isEmpty);
+
+    public void searchProductsByName(String query) {
+        FirebaseFirestore db = FirebaseFirestore.getInstance();
+        String normalizedQuery = normalizeString(query);
+        db.collection("products")
+                .orderBy("normalizedName")
+                .startAt(normalizedQuery)
+                .endAt(normalizedQuery + "\uf8ff")
+                .get()
+                .addOnCompleteListener(task -> {
+                    if (task.isSuccessful()) {
+                        List<Product> products = task.getResult().toObjects(Product.class);
+                        if (!products.isEmpty()) {
+                            filteredProducts.setValue(products);
+                        } else {
+                            filteredProducts.setValue(new ArrayList<>());
+                        }
+                    } else {
+                        filteredProducts.setValue(new ArrayList<>());
+                    }
+                });
     }
-}
+
+    public void searchStoresByProductName(String query) {
+        FirebaseFirestore db = FirebaseFirestore.getInstance();
+        db.collection("users")
+                .orderBy("store_name")
+                .startAt(query)
+                .endAt(query + "\uf8ff")
+                .get()
+                .addOnCompleteListener(task -> {
+                    if (task.isSuccessful()) {
+                        List<Store> stores = task.getResult().toObjects(Store.class);
+                        if (!stores.isEmpty()) {
+                            filteredStores.setValue(stores);
+                        } else {
+                            filteredStores.setValue(new ArrayList<>());
+                        }
+                    } else {
+                        filteredStores.setValue(new ArrayList<>());
+                    }
+                });
+    }
+
+    public void searchAll(String query) {
+        searchProductsByName(query);
+        searchStoresByProductName(query);
+    }
+}
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/ui/Homepage/SearchActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.ui.Homepage;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.SpacesItemDecoration;\r\nimport com.example.agrimart.adapter.CategoryAdapter;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Category;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.ActivitySearchBinding;\r\nimport com.example.agrimart.ui.ProductPage.ProductDetailActivity;\r\nimport com.example.agrimart.viewmodel.SearchViewModel;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class SearchActivity extends AppCompatActivity {\r\n\r\n    SearchViewModel searchViewModel;\r\n    ActivitySearchBinding binding;\r\n    List<Category> categories = new ArrayList<>();\r\n    CategoryAdapter categoryAdapter;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        searchViewModel = new ViewModelProvider(this).get(SearchViewModel.class);\r\n        binding = DataBindingUtil.setContentView(this, R.layout.activity_search);\r\n        binding.setSearch(searchViewModel);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(binding.getRoot());\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.LOLLIPOP) {\r\n            Window window = getWindow();\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.setStatusBarColor(ContextCompat.getColor(this, R.color.green));\r\n        }\r\n\r\n        categoryAdapter = new CategoryAdapter(categories);\r\n        binding.rvCategories.setLayoutManager(new GridLayoutManager(this, 4));\r\n        binding.rvCategories.setAdapter(categoryAdapter);\r\n        getCategories();\r\n\r\n        List<Product> products = new ArrayList<>();\r\n        int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);\r\n        binding.rvProducts.setLayoutManager(new GridLayoutManager(this, 2));\r\n        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));\r\n\r\n        ProductAdapter productAdapter = new ProductAdapter(products, product -> {\r\n            Intent intent = new Intent(this, ProductDetailActivity.class);\r\n            startActivity(intent);\r\n        });\r\n        binding.rvProducts.setAdapter(productAdapter);\r\n        searchViewModel.setProducts(products);\r\n    }\r\n\r\n    private void getCategories() {\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        List<Category> categories = new ArrayList<>();\r\n        db.collection(\"categories\")\r\n                .get().addOnCompleteListener(task -> {\r\n            if (task.isSuccessful()) {\r\n                categories.addAll(task.getResult().toObjects(Category.class));\r\n                this.categories.addAll(categories);\r\n                categoryAdapter.notifyDataSetChanged();\r\n            }\r\n        });\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/Homepage/SearchActivity.java b/app/src/main/java/com/example/agrimart/ui/Homepage/SearchActivity.java
--- a/app/src/main/java/com/example/agrimart/ui/Homepage/SearchActivity.java	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ b/app/src/main/java/com/example/agrimart/ui/Homepage/SearchActivity.java	(date 1731152665428)
@@ -1,20 +1,22 @@
 package com.example.agrimart.ui.Homepage;
 
+import android.content.Context;
 import android.content.Intent;
 import android.os.Bundle;
-import android.util.Log;
+import android.view.View;
 import android.view.Window;
 import android.view.WindowManager;
+import android.view.inputmethod.InputMethodManager;
+import android.widget.ImageButton;
+import android.widget.LinearLayout;
+import android.widget.ScrollView;
+import android.widget.TextView;
 
-import androidx.activity.EdgeToEdge;
 import androidx.appcompat.app.AppCompatActivity;
 import androidx.core.content.ContextCompat;
-import androidx.core.graphics.Insets;
-import androidx.core.view.ViewCompat;
-import androidx.core.view.WindowInsetsCompat;
-import androidx.databinding.DataBindingUtil;
 import androidx.lifecycle.ViewModelProvider;
 import androidx.recyclerview.widget.GridLayoutManager;
+import androidx.recyclerview.widget.RecyclerView;
 
 import com.example.agrimart.R;
 import com.example.agrimart.SpacesItemDecoration;
@@ -22,7 +24,6 @@
 import com.example.agrimart.adapter.ProductAdapter;
 import com.example.agrimart.data.model.Category;
 import com.example.agrimart.data.model.Product;
-import com.example.agrimart.databinding.ActivitySearchBinding;
 import com.example.agrimart.ui.ProductPage.ProductDetailActivity;
 import com.example.agrimart.viewmodel.SearchViewModel;
 import com.google.firebase.firestore.FirebaseFirestore;
@@ -32,24 +33,32 @@
 
 public class SearchActivity extends AppCompatActivity {
 
-    SearchViewModel searchViewModel;
-    ActivitySearchBinding binding;
-    List<Category> categories = new ArrayList<>();
-    CategoryAdapter categoryAdapter;
+    private SearchViewModel searchViewModel;
+    private ProductAdapter productAdapter;
+    private List<Category> categories = new ArrayList<>();
+    private CategoryAdapter categoryAdapter;
+    private List<Product> products = new ArrayList<>();
+    private RecyclerView rvCategories, rvProducts;
+    private androidx.appcompat.widget.SearchView searchInput;
+    private TextView tvNoReslut;
+    private LinearLayout ln1;
+    private ScrollView sc2;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
-        searchViewModel = new ViewModelProvider(this).get(SearchViewModel.class);
-        binding = DataBindingUtil.setContentView(this, R.layout.activity_search);
-        binding.setSearch(searchViewModel);
-        EdgeToEdge.enable(this);
-        setContentView(binding.getRoot());
-        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {
-            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());
-            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);
-            return insets;
-        });
+        setContentView(R.layout.activity_search);
+
+        ImageButton btnBack = findViewById(R.id.btnBack);
+        tvNoReslut = findViewById(R.id.tvNoResult);
+        tvNoReslut.setVisibility(View.GONE);
+        rvCategories = findViewById(R.id.rvCategories);
+        rvProducts = findViewById(R.id.rvProducts);
+        searchInput = findViewById(R.id.search_input);
+        ln1 = findViewById(R.id.ln1);
+        sc2 = findViewById(R.id.sc2);
+
+        tvNoReslut.setVisibility(View.GONE);
 
         if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.LOLLIPOP) {
             Window window = getWindow();
@@ -58,33 +67,76 @@
         }
 
         categoryAdapter = new CategoryAdapter(categories);
-        binding.rvCategories.setLayoutManager(new GridLayoutManager(this, 4));
-        binding.rvCategories.setAdapter(categoryAdapter);
+        rvCategories.setLayoutManager(new GridLayoutManager(this, 4));
+        rvCategories.setAdapter(categoryAdapter);
         getCategories();
 
-        List<Product> products = new ArrayList<>();
+        searchViewModel = new ViewModelProvider(this).get(SearchViewModel.class);
+
         int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);
-        binding.rvProducts.setLayoutManager(new GridLayoutManager(this, 2));
-        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
+        rvProducts.setLayoutManager(new GridLayoutManager(this, 2));
+        rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
 
-        ProductAdapter productAdapter = new ProductAdapter(products, product -> {
-            Intent intent = new Intent(this, ProductDetailActivity.class);
-            startActivity(intent);
+        productAdapter = new ProductAdapter(products, product -> {
+            try {
+                Intent intent = new Intent(SearchActivity.this, ProductDetailActivity.class);
+                intent.putExtra("product", product);
+                intent.putExtra("storeId", product.getStoreId());
+                startActivity(intent);
+            } catch (Exception e) {
+                e.printStackTrace();
+            }
+        });
+        rvProducts.setAdapter(productAdapter);
+
+        searchViewModel.getFilteredProducts().observe(this, filteredProducts -> {
+            if (searchInput.getQuery().length() > 0) {
+                if (filteredProducts != null && !filteredProducts.isEmpty()) {
+
+                    products.clear();
+                    products.addAll(filteredProducts);
+                    productAdapter.notifyDataSetChanged();
+
+                    tvNoReslut.setVisibility(View.GONE);
+                    rvProducts.setVisibility(View.VISIBLE);
+                } else {
+                    rvProducts.setVisibility(View.GONE);
+                    tvNoReslut.setVisibility(View.VISIBLE);
+                }
+            } else {
+                tvNoReslut.setVisibility(View.GONE);
+                rvProducts.setVisibility(View.GONE);
+            }
         });
-        binding.rvProducts.setAdapter(productAdapter);
-        searchViewModel.setProducts(products);
+
+        searchInput.setOnQueryTextListener(new androidx.appcompat.widget.SearchView.OnQueryTextListener() {
+            @Override
+            public boolean onQueryTextSubmit(String query) {
+                searchViewModel.searchProductsByName(query);
+                ln1.setVisibility(View.GONE);
+                sc2.setVisibility(View.VISIBLE);
+                tvNoReslut.setVisibility(View.GONE);
+                return true;
+            }
+
+            @Override
+            public boolean onQueryTextChange(String newText) {
+                return false;
+            }
+        });
+
+        btnBack.setOnClickListener(v -> finish());
     }
 
     private void getCategories() {
         FirebaseFirestore db = FirebaseFirestore.getInstance();
-        List<Category> categories = new ArrayList<>();
         db.collection("categories")
+                .orderBy("id")
                 .get().addOnCompleteListener(task -> {
-            if (task.isSuccessful()) {
-                categories.addAll(task.getResult().toObjects(Category.class));
-                this.categories.addAll(categories);
-                categoryAdapter.notifyDataSetChanged();
-            }
-        });
+                    if (task.isSuccessful()) {
+                        categories.addAll(task.getResult().toObjects(Category.class));
+                        categoryAdapter.notifyDataSetChanged();
+                    }
+                });
     }
 }
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM_[Changes]/shelved.patch
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM_[Changes]/shelved.patch b/.idea/shelf/Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM_[Changes]/shelved.patch
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM_[Changes]/shelved.patch	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ /dev/null	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
@@ -1,736 +0,0 @@
-Index: app/src/main/java/com/example/agrimart/viewmodel/SignUpViewModel.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.viewmodel;\r\n\r\nimport android.app.Application;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.lifecycle.AndroidViewModel;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\nimport java.util.Date;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class SignUpViewModel extends AndroidViewModel {\r\n    private FirebaseAuth mAuth;\r\n    private FirebaseFirestore firestore;\r\n    private MutableLiveData<Boolean> signUpSuccess;\r\n    private MutableLiveData<Boolean> emailVerificationSent;\r\n\r\n    public SignUpViewModel(@NonNull Application application) {\r\n        super(application);\r\n        mAuth = FirebaseAuth.getInstance();\r\n        firestore = FirebaseFirestore.getInstance();\r\n        signUpSuccess = new MutableLiveData<>();\r\n        emailVerificationSent = new MutableLiveData<>();\r\n    }\r\n\r\n    public MutableLiveData<Boolean> getSignUpSuccess() {\r\n        return signUpSuccess;\r\n    }\r\n\r\n    public MutableLiveData<Boolean> getEmailVerificationSent() {\r\n        return emailVerificationSent;\r\n    }\r\n\r\n    public void signUpWithEmail(String email, String password) {\r\n        mAuth.createUserWithEmailAndPassword(email, password)\r\n            .addOnCompleteListener(task -> {\r\n                if (task.isSuccessful()) {\r\n                    FirebaseUser user = mAuth.getCurrentUser();\r\n                    if (user != null) {\r\n                        sendEmailVerification(user);\r\n                    }\r\n                    signUpSuccess.setValue(true);\r\n                } else {\r\n                    signUpSuccess.setValue(false);\r\n                }\r\n            });\r\n    }\r\n\r\n    public void sendEmailVerification(FirebaseUser user) { // Changed to public\r\n        user.sendEmailVerification()\r\n            .addOnCompleteListener(task -> {\r\n                if (task.isSuccessful()) {\r\n                    emailVerificationSent.setValue(true);\r\n                } else {\r\n                    emailVerificationSent.setValue(false);\r\n                }\r\n            });\r\n    }\r\n\r\n    public void saveUserToFirestore(FirebaseUser firebaseUser) {\r\n        firestore.collection(\"users\").document(firebaseUser.getUid())\r\n            .get()\r\n            .addOnSuccessListener(documentSnapshot -> {\r\n                String role = \"customer\";\r\n                if (documentSnapshot.exists() && documentSnapshot.contains(\"role\")) {\r\n                    role = documentSnapshot.getString(\"role\");\r\n                }\r\n\r\n                Map<String, Object> userMap = new HashMap<>();\r\n                userMap.put(\"userId\", firebaseUser.getUid());\r\n                userMap.put(\"role\", role);\r\n                if (firebaseUser.getDisplayName() != null) {\r\n                    userMap.put(\"fullName\", firebaseUser.getDisplayName());\r\n                }\r\n                if (firebaseUser.getEmail() != null) {\r\n                    userMap.put(\"email\", firebaseUser.getEmail());\r\n                }\r\n                if (firebaseUser.getPhoneNumber() != null) {\r\n                    userMap.put(\"phoneNumber\", firebaseUser.getPhoneNumber());\r\n                }\r\n                userMap.put(\"createdAt\", new Date());\r\n                userMap.put(\"updatedAt\", new Date());\r\n\r\n                firestore.collection(\"users\").document(firebaseUser.getUid())\r\n                    .set(userMap)\r\n                    .addOnSuccessListener(aVoid -> {\r\n                    })\r\n                    .addOnFailureListener(e -> {\r\n                    });\r\n            })\r\n            .addOnFailureListener(e -> {\r\n            });\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/viewmodel/SignUpViewModel.java b/app/src/main/java/com/example/agrimart/viewmodel/SignUpViewModel.java
---- a/app/src/main/java/com/example/agrimart/viewmodel/SignUpViewModel.java	(revision 6a809528d747061069ce0672a9c8a28c130149ba)
-+++ b/app/src/main/java/com/example/agrimart/viewmodel/SignUpViewModel.java	(date 1730453351683)
-@@ -1,10 +1,13 @@
- package com.example.agrimart.viewmodel;
- 
- import android.app.Application;
-+import android.widget.Toast;
-+
- import androidx.annotation.NonNull;
- import androidx.lifecycle.AndroidViewModel;
- import androidx.lifecycle.MutableLiveData;
- import com.google.firebase.auth.FirebaseAuth;
-+import com.google.firebase.auth.FirebaseAuthUserCollisionException;
- import com.google.firebase.auth.FirebaseUser;
- import com.google.firebase.firestore.FirebaseFirestore;
- 
-@@ -34,64 +37,68 @@
-         return emailVerificationSent;
-     }
- 
--    public void signUpWithEmail(String email, String password) {
-+    public void signUpWithEmail(String email, String password, String fullName) {
-         mAuth.createUserWithEmailAndPassword(email, password)
--            .addOnCompleteListener(task -> {
--                if (task.isSuccessful()) {
--                    FirebaseUser user = mAuth.getCurrentUser();
--                    if (user != null) {
--                        sendEmailVerification(user);
--                    }
--                    signUpSuccess.setValue(true);
--                } else {
--                    signUpSuccess.setValue(false);
--                }
--            });
-+                .addOnCompleteListener(task -> {
-+                    if (task.isSuccessful()) {
-+                        FirebaseUser user = mAuth.getCurrentUser();
-+                        if (user != null) {
-+                            sendEmailVerification(user);
-+                            saveUserToFirestore(user, fullName);
-+                        }
-+                        signUpSuccess.setValue(true);
-+                    } else {
-+                        if (task.getException() instanceof FirebaseAuthUserCollisionException) {
-+                            Toast.makeText(getApplication(), "Email đã tồn tại", Toast.LENGTH_SHORT).show();
-+                        } else {
-+                            signUpSuccess.setValue(false);
-+                        }
-+                    }
-+                });
-     }
- 
--    public void sendEmailVerification(FirebaseUser user) { // Changed to public
-+    public void sendEmailVerification(FirebaseUser user) {
-         user.sendEmailVerification()
--            .addOnCompleteListener(task -> {
--                if (task.isSuccessful()) {
--                    emailVerificationSent.setValue(true);
--                } else {
--                    emailVerificationSent.setValue(false);
--                }
--            });
-+                .addOnCompleteListener(task -> {
-+                    if (task.isSuccessful()) {
-+                        emailVerificationSent.setValue(true);
-+                    } else {
-+                        emailVerificationSent.setValue(false);
-+                    }
-+                });
-     }
- 
--    public void saveUserToFirestore(FirebaseUser firebaseUser) {
-+    public void saveUserToFirestore(FirebaseUser firebaseUser, String fullName) {
-         firestore.collection("users").document(firebaseUser.getUid())
--            .get()
--            .addOnSuccessListener(documentSnapshot -> {
--                String role = "customer";
--                if (documentSnapshot.exists() && documentSnapshot.contains("role")) {
--                    role = documentSnapshot.getString("role");
--                }
-+                .get()
-+                .addOnSuccessListener(documentSnapshot -> {
-+                    String role = "customer";
-+                    if (documentSnapshot.exists() && documentSnapshot.contains("role")) {
-+                        role = documentSnapshot.getString("role");
-+                    }
- 
--                Map<String, Object> userMap = new HashMap<>();
--                userMap.put("userId", firebaseUser.getUid());
--                userMap.put("role", role);
--                if (firebaseUser.getDisplayName() != null) {
--                    userMap.put("fullName", firebaseUser.getDisplayName());
--                }
--                if (firebaseUser.getEmail() != null) {
--                    userMap.put("email", firebaseUser.getEmail());
--                }
--                if (firebaseUser.getPhoneNumber() != null) {
--                    userMap.put("phoneNumber", firebaseUser.getPhoneNumber());
--                }
--                userMap.put("createdAt", new Date());
--                userMap.put("updatedAt", new Date());
-+                    Map<String, Object> userMap = new HashMap<>();
-+                    userMap.put("userId", firebaseUser.getUid());
-+                    userMap.put("role", role);
-+                    userMap.put("fullName", fullName);
-+                    if (firebaseUser.getEmail() != null) {
-+                        userMap.put("email", firebaseUser.getEmail());
-+                    }
-+                    if (firebaseUser.getPhoneNumber() != null) {
-+                        userMap.put("phoneNumber", firebaseUser.getPhoneNumber());
-+                    }
-+                    userMap.put("createdAt", new Date());
-+                    userMap.put("updatedAt", new Date());
- 
--                firestore.collection("users").document(firebaseUser.getUid())
--                    .set(userMap)
--                    .addOnSuccessListener(aVoid -> {
--                    })
--                    .addOnFailureListener(e -> {
--                    });
--            })
--            .addOnFailureListener(e -> {
--            });
-+                    firestore.collection("users").document(firebaseUser.getUid())
-+                            .set(userMap)
-+                            .addOnSuccessListener(aVoid -> {
-+                            })
-+                            .addOnFailureListener(e -> {
-+                            });
-+                })
-+                .addOnFailureListener(e -> {
-+                });
-     }
-+
- }
-\ No newline at end of file
-Index: app/src/main/java/com/example/agrimart/utils/Valid.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.utils;\r\n\r\nimport android.widget.TextView;\r\nimport android.util.Patterns;\r\n\r\npublic class Valid {\r\n    public static boolean isValidEmail(String email) {\r\n        return !email.isEmpty() && Patterns.EMAIL_ADDRESS.matcher(email).matches();\r\n    }\r\n\r\n    public static boolean isValidPassword(String password) {\r\n        return !password.isEmpty() && password.length() >= 8 && password.matches(\".*[A-Z].*\") && password.matches(\".*\\\\d.*\");\r\n    }\r\n\r\n    public static boolean isValidName(String name) {\r\n        return !name.isEmpty() && name.length() >= 3 && !name.matches(\".*\\\\d.*\");\r\n    }\r\n\r\n    public static boolean validateInputs(String email, String password, String name, TextView tvEmailError, TextView tvPasswordError, TextView tvNameError) {\r\n        boolean isValid = true;\r\n\r\n        if (!isValidEmail(email)) {\r\n            tvEmailError.setText(\"Email không hợp lệ\");\r\n            isValid = false;\r\n        } else {\r\n            tvEmailError.setText(\"\");\r\n        }\r\n\r\n        if (!isValidPassword(password)) {\r\n            tvPasswordError.setText(\"Mật khẩu phải có ít nhất 8 ký tự, bao gồm chữ hoa và số\");\r\n            isValid = false;\r\n        } else {\r\n            tvPasswordError.setText(\"\");\r\n        }\r\n\r\n        if (!isValidName(name)) {\r\n            tvNameError.setText(\"Tên phải có ít nhất 3 ký tự và không được chứa số\");\r\n            isValid = false;\r\n        } else {\r\n            tvNameError.setText(\"\");\r\n        }\r\n\r\n        return isValid;\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/utils/Valid.java b/app/src/main/java/com/example/agrimart/utils/Valid.java
---- a/app/src/main/java/com/example/agrimart/utils/Valid.java	(revision 6a809528d747061069ce0672a9c8a28c130149ba)
-+++ b/app/src/main/java/com/example/agrimart/utils/Valid.java	(date 1730455032461)
-@@ -16,30 +16,7 @@
-         return !name.isEmpty() && name.length() >= 3 && !name.matches(".*\\d.*");
-     }
- 
--    public static boolean validateInputs(String email, String password, String name, TextView tvEmailError, TextView tvPasswordError, TextView tvNameError) {
--        boolean isValid = true;
--
--        if (!isValidEmail(email)) {
--            tvEmailError.setText("Email không hợp lệ");
--            isValid = false;
--        } else {
--            tvEmailError.setText("");
--        }
--
--        if (!isValidPassword(password)) {
--            tvPasswordError.setText("Mật khẩu phải có ít nhất 8 ký tự, bao gồm chữ hoa và số");
--            isValid = false;
--        } else {
--            tvPasswordError.setText("");
--        }
--
--        if (!isValidName(name)) {
--            tvNameError.setText("Tên phải có ít nhất 3 ký tự và không được chứa số");
--            isValid = false;
--        } else {
--            tvNameError.setText("");
--        }
--
--        return isValid;
--    }
--}
-\ No newline at end of file
-+    public static boolean isPasswordMatching(String password, String confirmPassword) {
-+        return password.equals(confirmPassword);
-+    }
-+}
-Index: app/src/main/res/layout/activity_forgot_password.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/main1\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"@color/white\"\r\n    tools:context=\".ui.Account.ForgotPasswordActivity\">\r\n\r\n    <ImageButton\r\n        android:id=\"@+id/btn_back\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"32dp\"\r\n        android:background=\"@color/white\"\r\n        android:src=\"@drawable/chevron_left\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.077\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        tools:ignore=\"MissingConstraints\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/textView2\"\r\n        style=\"@style/title\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"96dp\"\r\n        android:fontFamily=\"@font/gabarito\"\r\n        android:text=\"Đặt lại mật khẩu\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.15\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <com.google.android.material.textfield.TextInputLayout\r\n        android:id=\"@+id/textInputLayout2\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginStart=\"24dp\"\r\n        android:layout_marginTop=\"30dp\"\r\n        android:layout_marginEnd=\"24dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textView2\"\r\n        app:boxBackgroundColor=\"@color/white\"\r\n        app:startIconDrawable=\"@drawable/telephone\"\r\n        app:boxBackgroundMode=\"outline\">\r\n\r\n        <com.google.android.material.textfield.TextInputEditText\r\n            android:id=\"@+id/edtPhoneNumber\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:background=\"@null\"\r\n            android:hint=\"Nhập số điện thoại của bạn\"\r\n            android:inputType=\"phone\" />\r\n    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n    <Button\r\n        android:id=\"@+id/btn_continue\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"36dp\"\r\n        android:backgroundTint=\"@color/green\"\r\n        android:text=\"Tiếp tục\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintHorizontal_bias=\"0.905\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:cornerRadius=\"24dp\"\r\n        app:layout_constraintTop_toBottomOf=\"@+id/textInputLayout2\" />\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_forgot_password.xml b/app/src/main/res/layout/activity_forgot_password.xml
---- a/app/src/main/res/layout/activity_forgot_password.xml	(revision 6a809528d747061069ce0672a9c8a28c130149ba)
-+++ b/app/src/main/res/layout/activity_forgot_password.xml	(date 1730450605012)
-@@ -45,16 +45,16 @@
-         app:layout_constraintStart_toStartOf="parent"
-         app:layout_constraintTop_toBottomOf="@+id/textView2"
-         app:boxBackgroundColor="@color/white"
--        app:startIconDrawable="@drawable/telephone"
-+        app:startIconDrawable="@drawable/email"
-         app:boxBackgroundMode="outline">
- 
-         <com.google.android.material.textfield.TextInputEditText
--            android:id="@+id/edtPhoneNumber"
-+            android:id="@+id/edtEmail"
-             android:layout_width="match_parent"
-             android:layout_height="wrap_content"
-             android:background="@null"
--            android:hint="Nhập số điện thoại của bạn"
--            android:inputType="phone" />
-+            android:hint="Nhập email của bạn"
-+            android:inputType="textEmailAddress" />
-     </com.google.android.material.textfield.TextInputLayout>
- 
-     <Button
-Index: app/src/main/java/com/example/agrimart/ui/Account/ForgotPasswordActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.Account;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.ImageButton;\r\n\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\n\r\nimport com.example.agrimart.R;\r\n\r\npublic class ForgotPasswordActivity extends AppCompatActivity {\r\n    Button btnContinue;\r\n    ImageButton btnBack;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_forgot_password);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n        addControls();\r\n        addEvents();\r\n    }\r\n\r\n    public void addControls() {\r\n        btnContinue = findViewById(R.id.btn_continue);\r\n        btnBack = findViewById(R.id.btn_back);\r\n    }\r\n\r\n    public void addEvents() {\r\n        btnContinue.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(ForgotPasswordActivity.this, EnterOTPActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        btnBack.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                finish();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/Account/ForgotPasswordActivity.java b/app/src/main/java/com/example/agrimart/ui/Account/ForgotPasswordActivity.java
---- a/app/src/main/java/com/example/agrimart/ui/Account/ForgotPasswordActivity.java	(revision 6a809528d747061069ce0672a9c8a28c130149ba)
-+++ b/app/src/main/java/com/example/agrimart/ui/Account/ForgotPasswordActivity.java	(date 1730438788971)
-@@ -4,7 +4,9 @@
- import android.os.Bundle;
- import android.view.View;
- import android.widget.Button;
-+import android.widget.EditText;
- import android.widget.ImageButton;
-+import android.widget.Toast;
- 
- import androidx.activity.EdgeToEdge;
- import androidx.appcompat.app.AppCompatActivity;
-@@ -13,10 +15,13 @@
- import androidx.core.view.WindowInsetsCompat;
- 
- import com.example.agrimart.R;
-+import com.google.firebase.auth.FirebaseAuth;
- 
- public class ForgotPasswordActivity extends AppCompatActivity {
-     Button btnContinue;
-     ImageButton btnBack;
-+    EditText edtEmail;
-+    private FirebaseAuth mAuth;
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-         super.onCreate(savedInstanceState);
-@@ -27,7 +32,7 @@
-             v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);
-             return insets;
-         });
--
-+        mAuth = FirebaseAuth.getInstance();
-     }
- 
-     @Override
-@@ -40,14 +45,20 @@
-     public void addControls() {
-         btnContinue = findViewById(R.id.btn_continue);
-         btnBack = findViewById(R.id.btn_back);
-+        edtEmail = findViewById(R.id.edtEmail);
-     }
- 
-     public void addEvents() {
-         btnContinue.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
--                Intent intent = new Intent(ForgotPasswordActivity.this, EnterOTPActivity.class);
--                startActivity(intent);
-+                String email = edtEmail.getText().toString().trim();
-+                if (email.isEmpty()) {
-+                    Toast.makeText(ForgotPasswordActivity.this, "Hãy nhập email của bạn", Toast.LENGTH_SHORT).show();
-+                } else {
-+                    sendPasswordResetEmail(email);
-+                    finish();
-+                }
-             }
-         });
-         btnBack.setOnClickListener(new View.OnClickListener() {
-@@ -59,5 +70,15 @@
- 
-     }
- 
-+    private void sendPasswordResetEmail(String email) {
-+        mAuth.sendPasswordResetEmail(email)
-+                .addOnCompleteListener(task -> {
-+                    if (task.isSuccessful()) {
-+                        Toast.makeText(ForgotPasswordActivity.this, "Email đặt lại mật khẩu đã được gửi", Toast.LENGTH_SHORT).show();
-+                    } else {
-+                        Toast.makeText(ForgotPasswordActivity.this, "Gửi email thất bại", Toast.LENGTH_SHORT).show();
-+                    }
-+                });
-+    }
- 
- }
-\ No newline at end of file
-Index: app/src/main/java/com/example/agrimart/ui/Account/SignUpActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.Account;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ProgressBar;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.utils.Valid;\r\nimport com.example.agrimart.viewmodel.SignUpViewModel;\r\n\r\npublic class SignUpActivity extends AppCompatActivity {\r\n    private EditText edtEmail, edtPassword, edtName;\r\n    private TextView tvEmailError, tvPasswordError, tvNameError;\r\n    private Button btnSignUp;\r\n    private ImageButton btnBack;\r\n    private TextView tvHaveAccount;\r\n    private ProgressBar progressBar;\r\n\r\n    private SignUpViewModel viewModel;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_sign_up);\r\n\r\n        initViews();\r\n        initViewModel();\r\n    }\r\n\r\n    private void initViews() {\r\n        edtEmail = findViewById(R.id.edtEmail);\r\n        edtPassword = findViewById(R.id.edtPassword);\r\n        edtName = findViewById(R.id.edtUsername);\r\n        tvEmailError = findViewById(R.id.tvEmailError);\r\n        tvPasswordError = findViewById(R.id.tvPasswordError);\r\n        tvNameError = findViewById(R.id.tvNameError);\r\n        btnSignUp = findViewById(R.id.btn_signin);\r\n        btnBack = findViewById(R.id.btn_back);\r\n        tvHaveAccount = findViewById(R.id.haveAccount);\r\n        progressBar = findViewById(R.id.progressBar);\r\n    }\r\n\r\n    private void initViewModel() {\r\n        viewModel = new ViewModelProvider(this).get(SignUpViewModel.class);\r\n\r\n        viewModel.getSignUpSuccess().observe(this, success -> {\r\n            if (success) {\r\n                Toast.makeText(this, \"Đăng ký thành công. Vui lòng kiểm tra email để xác nhận tài khoản.\", Toast.LENGTH_SHORT).show();\r\n                startActivity(new Intent(SignUpActivity.this, VerifyActivity.class));\r\n                finish();\r\n            } else {\r\n                Toast.makeText(this, \"Lỗi khi đăng ký\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        viewModel.getEmailVerificationSent().observe(this, sent -> {\r\n            if (sent) {\r\n                Toast.makeText(this, \"Mail xác nhận đã được gửi đến email của bạn\", Toast.LENGTH_SHORT).show();\r\n            } else {\r\n                Toast.makeText(this, \"Lỗi khi gửi mail\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        btnSignUp.setOnClickListener(v -> {\r\n            String email = edtEmail.getText().toString().trim();\r\n            String password = edtPassword.getText().toString().trim();\r\n            String name = edtName.getText().toString().trim();\r\n            if (Valid.validateInputs(email, password, name, tvEmailError, tvPasswordError, tvNameError)) {\r\n                viewModel.signUpWithEmail(email, password);\r\n            } else {\r\n                Toast.makeText(this, \"Thông tin không hợp lệ\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        tvHaveAccount.setOnClickListener(v -> {\r\n            Intent intent = new Intent(SignUpActivity.this, SignInActivity.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        btnBack.setOnClickListener(v -> finish());\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/Account/SignUpActivity.java b/app/src/main/java/com/example/agrimart/ui/Account/SignUpActivity.java
---- a/app/src/main/java/com/example/agrimart/ui/Account/SignUpActivity.java	(revision 6a809528d747061069ce0672a9c8a28c130149ba)
-+++ b/app/src/main/java/com/example/agrimart/ui/Account/SignUpActivity.java	(date 1730455099523)
-@@ -2,6 +2,8 @@
- 
- import android.content.Intent;
- import android.os.Bundle;
-+import android.util.Patterns;
-+import android.view.View;
- import android.widget.Button;
- import android.widget.EditText;
- import android.widget.ImageButton;
-@@ -17,8 +19,8 @@
- import com.example.agrimart.viewmodel.SignUpViewModel;
- 
- public class SignUpActivity extends AppCompatActivity {
--    private EditText edtEmail, edtPassword, edtName;
--    private TextView tvEmailError, tvPasswordError, tvNameError;
-+    private EditText edtEmail, edtPassword, edtName, edtConfirmPassword;
-+    private TextView tvEmailError, tvPasswordError, tvNameError, tvConfirmPasswordError;
-     private Button btnSignUp;
-     private ImageButton btnBack;
-     private TextView tvHaveAccount;
-@@ -31,24 +33,26 @@
-         super.onCreate(savedInstanceState);
-         setContentView(R.layout.activity_sign_up);
- 
--        initViews();
--        initViewModel();
-+        addControls();
-+        addEvents();
-     }
- 
--    private void initViews() {
-+    private void addControls() {
-         edtEmail = findViewById(R.id.edtEmail);
-         edtPassword = findViewById(R.id.edtPassword);
-         edtName = findViewById(R.id.edtUsername);
-+        edtConfirmPassword = findViewById(R.id.edtConfirmPassword);
-         tvEmailError = findViewById(R.id.tvEmailError);
-         tvPasswordError = findViewById(R.id.tvPasswordError);
-         tvNameError = findViewById(R.id.tvNameError);
-+        tvConfirmPasswordError = findViewById(R.id.tvConfirmPasswordError);
-         btnSignUp = findViewById(R.id.btn_signin);
-         btnBack = findViewById(R.id.btn_back);
-         tvHaveAccount = findViewById(R.id.haveAccount);
-         progressBar = findViewById(R.id.progressBar);
-     }
- 
--    private void initViewModel() {
-+    private void addEvents() {
-         viewModel = new ViewModelProvider(this).get(SignUpViewModel.class);
- 
-         viewModel.getSignUpSuccess().observe(this, success -> {
-@@ -61,20 +65,14 @@
-             }
-         });
- 
--        viewModel.getEmailVerificationSent().observe(this, sent -> {
--            if (sent) {
--                Toast.makeText(this, "Mail xác nhận đã được gửi đến email của bạn", Toast.LENGTH_SHORT).show();
--            } else {
--                Toast.makeText(this, "Lỗi khi gửi mail", Toast.LENGTH_SHORT).show();
--            }
--        });
--
-         btnSignUp.setOnClickListener(v -> {
--            String email = edtEmail.getText().toString().trim();
--            String password = edtPassword.getText().toString().trim();
--            String name = edtName.getText().toString().trim();
--            if (Valid.validateInputs(email, password, name, tvEmailError, tvPasswordError, tvNameError)) {
--                viewModel.signUpWithEmail(email, password);
-+            if (validateInputs()) {
-+                progressBar.setVisibility(View.VISIBLE);
-+                String email = edtEmail.getText().toString().trim();
-+                String password = edtPassword.getText().toString().trim();
-+                String name = edtName.getText().toString().trim();
-+
-+                viewModel.signUpWithEmail(email, password, name);
-             } else {
-                 Toast.makeText(this, "Thông tin không hợp lệ", Toast.LENGTH_SHORT).show();
-             }
-@@ -87,4 +85,61 @@
- 
-         btnBack.setOnClickListener(v -> finish());
-     }
-+
-+    private boolean validateInputs() {
-+        boolean isValid = true;
-+
-+        tvEmailError.setVisibility(View.GONE);
-+        tvPasswordError.setVisibility(View.GONE);
-+        tvNameError.setVisibility(View.GONE);
-+        tvConfirmPasswordError.setVisibility(View.GONE);
-+
-+        String email = edtEmail.getText().toString().trim();
-+        String password = edtPassword.getText().toString().trim();
-+        String confirmPassword = edtConfirmPassword.getText().toString().trim();
-+        String name = edtName.getText().toString().trim();
-+
-+        if (email.isEmpty()) {
-+            tvEmailError.setText("Email không được để trống");
-+            tvEmailError.setVisibility(View.VISIBLE);
-+            isValid = false;
-+        } else if (!Patterns.EMAIL_ADDRESS.matcher(email).matches()) {
-+            tvEmailError.setText("Email không hợp lệ");
-+            tvEmailError.setVisibility(View.VISIBLE);
-+            isValid = false;
-+        }
-+
-+        if (password.isEmpty()) {
-+            tvPasswordError.setText("Mật khẩu không được để trống");
-+            tvPasswordError.setVisibility(View.VISIBLE);
-+            isValid = false;
-+        } else if (password.length() < 8 || !password.matches(".*[A-Z].*") || !password.matches(".*\\d.*")) {
-+            tvPasswordError.setText("Mật khẩu phải có ít nhất 8 ký tự, bao gồm chữ hoa và số");
-+            tvPasswordError.setVisibility(View.VISIBLE);
-+            isValid = false;
-+        }
-+
-+        if (confirmPassword.isEmpty()) {
-+            tvConfirmPasswordError.setText("Không được để trống");
-+            tvConfirmPasswordError.setVisibility(View.VISIBLE);
-+            isValid = false;
-+        } else if (!confirmPassword.equals(password)) {
-+            tvConfirmPasswordError.setText("Mật khẩu xác nhận không khớp");
-+            tvConfirmPasswordError.setVisibility(View.VISIBLE);
-+            isValid = false;
-+        }
-+
-+        if (name.isEmpty()) {
-+            tvNameError.setText("Tên không được để trống");
-+            tvNameError.setVisibility(View.VISIBLE);
-+            isValid = false;
-+        } else if (name.length() < 3 || name.matches(".*\\d.*")) {
-+            tvNameError.setText("Tên phải có ít nhất 3 ký tự và không được chứa số");
-+            tvNameError.setVisibility(View.VISIBLE);
-+            isValid = false;
-+        }
-+
-+        return isValid;
-+    }
-+
- }
-Index: app/src/main/java/com/example/agrimart/ui/Account/SignInActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.Account;\r\n\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.ui.MainActivity;\r\nimport com.example.agrimart.viewmodel.SignInViewModel;\r\nimport com.facebook.AccessToken;\r\nimport com.facebook.CallbackManager;\r\nimport com.facebook.FacebookCallback;\r\nimport com.facebook.FacebookException;\r\nimport com.facebook.FacebookSdk;\r\nimport com.facebook.login.LoginManager;\r\nimport com.facebook.login.LoginResult;\r\nimport com.facebook.login.widget.LoginButton;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignIn;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInAccount;\r\nimport com.google.android.gms.auth.api.signin.GoogleSignInOptions;\r\nimport com.google.android.gms.common.api.ApiException;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthCredential;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.auth.FacebookAuthProvider;\r\nimport com.google.firebase.auth.GoogleAuthProvider;\r\n\r\npublic class SignInActivity extends AppCompatActivity {\r\n    private static final String TAG = \"SignInActivity\";\r\n    private SignInViewModel signInViewModel;\r\n    private ActivityResultLauncher<Intent> googleSignInLauncher;\r\n    private GoogleSignInOptions gso;\r\n    private SharedPreferences sharedPreferences;\r\n    private FirebaseAuth mAuth;\r\n    private CallbackManager callbackManager;\r\n\r\n    private TextView tvDonthaveAccount;\r\n    private TextView forgotPass;\r\n    private Button btnSignIn;\r\n    private Button btnSignInGoogle, btnSignInFacebook;\r\n    private TextView edtEmail, edtPassword;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_sign_in);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);\r\n            return insets;\r\n        });\r\n\r\n        sharedPreferences = getSharedPreferences(\"user_prefs\", MODE_PRIVATE);\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n        if (sharedPreferences.getBoolean(\"is_logged_in\", false)) {\r\n            FirebaseUser currentUser = mAuth.getCurrentUser();\r\n            if (currentUser != null) {\r\n                navigateToMain();\r\n                return;\r\n            }\r\n        }\r\n\r\n        signInViewModel = new ViewModelProvider(this).get(SignInViewModel.class);\r\n\r\n        gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)\r\n            .requestIdToken(getString(R.string.default_web_client_id))\r\n            .requestEmail()\r\n            .build();\r\n\r\n        googleSignInLauncher = registerForActivityResult(\r\n            new ActivityResultContracts.StartActivityForResult(),\r\n            result -> {\r\n                if (result.getResultCode() == RESULT_OK) {\r\n                    Intent data = result.getData();\r\n                    Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);\r\n                    try {\r\n                        GoogleSignInAccount account = task.getResult(ApiException.class);\r\n                        handleGoogleAccessToken(account);\r\n                    } catch (ApiException e) {\r\n                        Toast.makeText(this, \"Đăng nhập thất bại\", Toast.LENGTH_SHORT).show();\r\n                    }\r\n                } else {\r\n                    Toast.makeText(this, \"Đăng nhập bị từ chối\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n\r\n        FacebookSdk.sdkInitialize(getApplicationContext());\r\n        callbackManager = CallbackManager.Factory.create();\r\n\r\n        addControls();\r\n        addEvents();\r\n    }\r\n\r\n    public void addControls() {\r\n        tvDonthaveAccount = findViewById(R.id.dontHaveAccount);\r\n        forgotPass = findViewById(R.id.forgotPassword);\r\n        btnSignIn = findViewById(R.id.btnSignIn);\r\n        btnSignInGoogle = findViewById(R.id.btnSignInGoogle);\r\n        edtEmail = findViewById(R.id.edtEmail);\r\n        edtPassword = findViewById(R.id.edtPassword);\r\n        btnSignInFacebook = findViewById(R.id.btnSignInFacebook);\r\n    }\r\n\r\n    public void addEvents() {\r\n        tvDonthaveAccount.setOnClickListener(v -> {\r\n            Intent intent = new Intent(SignInActivity.this, SignUpActivity.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        forgotPass.setOnClickListener(v -> {\r\n            Intent intent = new Intent(SignInActivity.this, ForgotPasswordActivity.class);\r\n            startActivity(intent);\r\n        });\r\n\r\n        btnSignIn.setOnClickListener(v -> {\r\n            String email = edtEmail.getText().toString().trim();\r\n            String password = edtPassword.getText().toString().trim();\r\n            if (!email.isEmpty() && !password.isEmpty()) {\r\n                signInViewModel.signInWithEmail(email, password, this::navigateToMain);\r\n            } else {\r\n                Toast.makeText(SignInActivity.this, \"Email hoặc mật khẩu không hợp lệ\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        btnSignInGoogle.setOnClickListener(v -> {\r\n            Intent signInIntent = GoogleSignIn.getClient(this, gso).getSignInIntent();\r\n            googleSignInLauncher.launch(signInIntent);\r\n        });\r\n\r\n        btnSignInFacebook.setOnClickListener(v -> {\r\n            LoginButton loginButton = new LoginButton(this);\r\n            loginButton.setPermissions(\"email\", \"public_profile\");\r\n            loginButton.registerCallback(callbackManager, new FacebookCallback<LoginResult>() {\r\n                @Override\r\n                public void onSuccess(LoginResult loginResult) {\r\n                    handleFacebookAccessToken(loginResult.getAccessToken());\r\n                }\r\n\r\n                @Override\r\n                public void onCancel() {\r\n                    Toast.makeText(SignInActivity.this, \"Facebook login canceled\", Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n                @Override\r\n                public void onError(FacebookException error) {\r\n                    Toast.makeText(SignInActivity.this, \"Facebook login failed\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n            loginButton.performClick();\r\n        });\r\n    }\r\n\r\n    private boolean isUserDataExists() {\r\n        String email = sharedPreferences.getString(\"user_email\", null);\r\n        return email != null;\r\n    }\r\n\r\n    private void saveUserData(FirebaseUser user) {\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putString(\"user_email\", user.getEmail());\r\n        editor.putString(\"user_name\", user.getDisplayName());\r\n        editor.apply();\r\n    }\r\n\r\n    private void handleGoogleAccessToken(GoogleSignInAccount account) {\r\n        AuthCredential credential = GoogleAuthProvider.getCredential(account.getIdToken(), null);\r\n        signInViewModel.signInWithGoogle(credential, () -> {\r\n            FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n            if (user != null) {\r\n                if (!isUserDataExists()) {\r\n                    saveUserData(user);\r\n                }\r\n                setLoginState(true);\r\n            } else {\r\n            }\r\n            navigateToMain();\r\n        });\r\n    }\r\n\r\nprivate void handleFacebookAccessToken(AccessToken token) {\r\n    AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());\r\n    signInViewModel.signInWithFacebook(credential, () -> {\r\n        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\r\n        if (user != null) {\r\n            if (!isUserDataExists()) {\r\n                saveUserData(user);\r\n            }\r\n            setLoginState(true);\r\n        } else {\r\n            Log.w(TAG, \"Facebook login successful but user is null\");\r\n        }\r\n        navigateToMain();\r\n    });\r\n}\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        callbackManager.onActivityResult(requestCode, resultCode, data);\r\n    }\r\n\r\n    private void navigateToMain() {\r\n        Intent intent = new Intent(SignInActivity.this, MainActivity.class);\r\n        startActivity(intent);\r\n        finish();\r\n    }\r\n\r\n    public void signOutFromFacebook() {\r\n    LoginManager.getInstance().logOut();\r\n    FirebaseAuth.getInstance().signOut();\r\n    setLoginState(false);\r\n    navigateToSignIn();\r\n}\r\n\r\n    private void navigateToSignIn() {\r\n        Intent intent = new Intent(SignInActivity.this, SignInActivity.class);\r\n        startActivity(intent);\r\n        finish();\r\n    }\r\n\r\n    private void setLoginState(boolean isLoggedIn) {\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putBoolean(\"is_logged_in\", isLoggedIn);\r\n        editor.apply();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/Account/SignInActivity.java b/app/src/main/java/com/example/agrimart/ui/Account/SignInActivity.java
---- a/app/src/main/java/com/example/agrimart/ui/Account/SignInActivity.java	(revision 6a809528d747061069ce0672a9c8a28c130149ba)
-+++ b/app/src/main/java/com/example/agrimart/ui/Account/SignInActivity.java	(date 1730455530347)
-@@ -77,26 +77,26 @@
-         signInViewModel = new ViewModelProvider(this).get(SignInViewModel.class);
- 
-         gso = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
--            .requestIdToken(getString(R.string.default_web_client_id))
--            .requestEmail()
--            .build();
-+                .requestIdToken(getString(R.string.default_web_client_id))
-+                .requestEmail()
-+                .build();
- 
-         googleSignInLauncher = registerForActivityResult(
--            new ActivityResultContracts.StartActivityForResult(),
--            result -> {
--                if (result.getResultCode() == RESULT_OK) {
--                    Intent data = result.getData();
--                    Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);
--                    try {
--                        GoogleSignInAccount account = task.getResult(ApiException.class);
--                        handleGoogleAccessToken(account);
--                    } catch (ApiException e) {
--                        Toast.makeText(this, "Đăng nhập thất bại", Toast.LENGTH_SHORT).show();
--                    }
--                } else {
--                    Toast.makeText(this, "Đăng nhập bị từ chối", Toast.LENGTH_SHORT).show();
--                }
--            });
-+                new ActivityResultContracts.StartActivityForResult(),
-+                result -> {
-+                    if (result.getResultCode() == RESULT_OK) {
-+                        Intent data = result.getData();
-+                        Task<GoogleSignInAccount> task = GoogleSignIn.getSignedInAccountFromIntent(data);
-+                        try {
-+                            GoogleSignInAccount account = task.getResult(ApiException.class);
-+                            handleGoogleAccessToken(account);
-+                        } catch (ApiException e) {
-+                            Toast.makeText(this, "Đăng nhập thất bại", Toast.LENGTH_SHORT).show();
-+                        }
-+                    } else {
-+                        Toast.makeText(this, "Đăng nhập bị từ chối", Toast.LENGTH_SHORT).show();
-+                    }
-+                });
- 
-         FacebookSdk.sdkInitialize(getApplicationContext());
-         callbackManager = CallbackManager.Factory.create();
-@@ -130,7 +130,7 @@
-             String email = edtEmail.getText().toString().trim();
-             String password = edtPassword.getText().toString().trim();
-             if (!email.isEmpty() && !password.isEmpty()) {
--                signInViewModel.signInWithEmail(email, password, this::navigateToMain);
-+                signInViewModel.signInWithEmail(email, password, () -> checkEmailVerification(true));
-             } else {
-                 Toast.makeText(SignInActivity.this, "Email hoặc mật khẩu không hợp lệ", Toast.LENGTH_SHORT).show();
-             }
-@@ -148,22 +148,40 @@
-                 @Override
-                 public void onSuccess(LoginResult loginResult) {
-                     handleFacebookAccessToken(loginResult.getAccessToken());
-+                    Toast.makeText(SignInActivity.this, "Đăng nhập thành công", Toast.LENGTH_SHORT).show();
-                 }
- 
-                 @Override
-                 public void onCancel() {
--                    Toast.makeText(SignInActivity.this, "Facebook login canceled", Toast.LENGTH_SHORT).show();
-+                    Toast.makeText(SignInActivity.this, "Đăng nhập thất bại", Toast.LENGTH_SHORT).show();
-                 }
- 
-                 @Override
-                 public void onError(FacebookException error) {
--                    Toast.makeText(SignInActivity.this, "Facebook login failed", Toast.LENGTH_SHORT).show();
-+                    Toast.makeText(SignInActivity.this, "Đăng nhập thất bại", Toast.LENGTH_SHORT).show();
-                 }
-             });
-             loginButton.performClick();
-         });
-     }
- 
-+    private void checkEmailVerification(boolean isEmailSignIn) {
-+        FirebaseUser user = mAuth.getCurrentUser();
-+        if (user != null) {
-+            if (!isEmailSignIn || user.isEmailVerified()) {
-+                navigateToMain();
-+            } else {
-+                Toast.makeText(SignInActivity.this, "Vui lòng xác thực email của bạn trước khi đăng nhập", Toast.LENGTH_SHORT).show();
-+                signOut();
-+            }
-+        }
-+    }
-+
-+    private void signOut() {
-+        mAuth.signOut();
-+        setLoginState(false);
-+    }
-+
-     private boolean isUserDataExists() {
-         String email = sharedPreferences.getString("user_email", null);
-         return email != null;
-@@ -183,29 +201,30 @@
-             if (user != null) {
-                 if (!isUserDataExists()) {
-                     saveUserData(user);
-+                    Toast.makeText(this, "Đăng nhập thành công", Toast.LENGTH_SHORT).show();
-                 }
--                setLoginState(true);
-+                checkEmailVerification(false);
-             } else {
-+                Toast.makeText(this, "Đăng nhập thất bại", Toast.LENGTH_SHORT).show();
-             }
--            navigateToMain();
-         });
-     }
- 
--private void handleFacebookAccessToken(AccessToken token) {
--    AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());
--    signInViewModel.signInWithFacebook(credential, () -> {
--        FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();
--        if (user != null) {
--            if (!isUserDataExists()) {
--                saveUserData(user);
--            }
--            setLoginState(true);
--        } else {
--            Log.w(TAG, "Facebook login successful but user is null");
--        }
--        navigateToMain();
--    });
--}
-+    private void handleFacebookAccessToken(AccessToken token) {
-+        AuthCredential credential = FacebookAuthProvider.getCredential(token.getToken());
-+        signInViewModel.signInWithFacebook(credential, () -> {
-+            FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();
-+            if (user != null) {
-+                if (!isUserDataExists()) {
-+                    saveUserData(user);
-+                    Toast.makeText(this, "Đăng nhập thành công", Toast.LENGTH_SHORT).show();
-+                }
-+                checkEmailVerification(false);
-+            } else {
-+                Toast.makeText(this, "Đăng nhập thất bại", Toast.LENGTH_SHORT).show();
-+            }
-+        });
-+    }
- 
-     @Override
-     protected void onActivityResult(int requestCode, int resultCode, Intent data) {
-@@ -218,23 +237,10 @@
-         startActivity(intent);
-         finish();
-     }
--
--    public void signOutFromFacebook() {
--    LoginManager.getInstance().logOut();
--    FirebaseAuth.getInstance().signOut();
--    setLoginState(false);
--    navigateToSignIn();
--}
--
--    private void navigateToSignIn() {
--        Intent intent = new Intent(SignInActivity.this, SignInActivity.class);
--        startActivity(intent);
--        finish();
--    }
- 
-     private void setLoginState(boolean isLoggedIn) {
-         SharedPreferences.Editor editor = sharedPreferences.edit();
-         editor.putBoolean("is_logged_in", isLoggedIn);
-         editor.apply();
-     }
--}
-\ No newline at end of file
-+}
-Index: app/src/main/java/com/example/agrimart/ui/Account/VerifyActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui.Account;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.widget.Button;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.lifecycle.ViewModelProvider;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.ui.MainActivity;\r\nimport com.example.agrimart.viewmodel.SignUpViewModel;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\n\r\npublic class VerifyActivity extends AppCompatActivity {\r\n    private SignUpViewModel viewModel;\r\n    private FirebaseAuth mAuth;\r\n    private Handler handler;\r\n    private Runnable checkEmailVerifiedRunnable;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_verify);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        viewModel = new ViewModelProvider(this).get(SignUpViewModel.class);\r\n        handler = new Handler();\r\n\r\n        Button btnResendEmail = findViewById(R.id.btnResendEmail);\r\n        Button btnBackToLogin = findViewById(R.id.btnBackToLogin);\r\n\r\n        btnResendEmail.setOnClickListener(v -> {\r\n            FirebaseUser user = mAuth.getCurrentUser();\r\n            if (user != null) {\r\n                viewModel.sendEmailVerification(user);\r\n                Toast.makeText(this, \"Email xác nhận đã được gửi lại\", Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n\r\n        btnBackToLogin.setOnClickListener(v -> {\r\n            startActivity(new Intent(VerifyActivity.this, SignInActivity.class));\r\n            finish();\r\n        });\r\n\r\n        checkEmailVerification();\r\n    }\r\n\r\n    private void checkEmailVerification() {\r\n        checkEmailVerifiedRunnable = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                FirebaseUser user = mAuth.getCurrentUser();\r\n                if (user != null) {\r\n                    user.reload().addOnCompleteListener(task -> {\r\n                        if (user.isEmailVerified()) {\r\n                            viewModel.saveUserToFirestore(user);\r\n                            Toast.makeText(VerifyActivity.this, \"Đăng kí thành công\", Toast.LENGTH_SHORT).show();\r\n                            startActivity(new Intent(VerifyActivity.this, MainActivity.class));\r\n                            finish();\r\n                        } else {\r\n                            handler.postDelayed(checkEmailVerifiedRunnable, 3000);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        handler.post(checkEmailVerifiedRunnable);\r\n    }\r\n\r\n    @Override\r\n    protected void onDestroy() {\r\n        super.onDestroy();\r\n        handler.removeCallbacks(checkEmailVerifiedRunnable);\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/Account/VerifyActivity.java b/app/src/main/java/com/example/agrimart/ui/Account/VerifyActivity.java
---- a/app/src/main/java/com/example/agrimart/ui/Account/VerifyActivity.java	(revision 6a809528d747061069ce0672a9c8a28c130149ba)
-+++ b/app/src/main/java/com/example/agrimart/ui/Account/VerifyActivity.java	(date 1730452246225)
-@@ -20,6 +20,7 @@
-     private FirebaseAuth mAuth;
-     private Handler handler;
-     private Runnable checkEmailVerifiedRunnable;
-+    private String fullname;
- 
-     @Override
-     protected void onCreate(Bundle savedInstanceState) {
-@@ -33,6 +34,8 @@
-         Button btnResendEmail = findViewById(R.id.btnResendEmail);
-         Button btnBackToLogin = findViewById(R.id.btnBackToLogin);
- 
-+        fullname = getIntent().getStringExtra("fullname");
-+
-         btnResendEmail.setOnClickListener(v -> {
-             FirebaseUser user = mAuth.getCurrentUser();
-             if (user != null) {
-@@ -57,7 +60,7 @@
-                 if (user != null) {
-                     user.reload().addOnCompleteListener(task -> {
-                         if (user.isEmailVerified()) {
--                            viewModel.saveUserToFirestore(user);
-+                            viewModel.saveUserToFirestore(user, fullname);
-                             Toast.makeText(VerifyActivity.this, "Đăng kí thành công", Toast.LENGTH_SHORT).show();
-                             startActivity(new Intent(VerifyActivity.this, MainActivity.class));
-                             finish();
-Index: app/src/main/java/com/example/agrimart/ui/MainActivity.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.agrimart.ui;\r\n\r\nimport android.content.Intent;\r\nimport android.content.SharedPreferences;\r\nimport android.os.Bundle;\r\nimport android.view.MenuItem;\r\nimport androidx.activity.EdgeToEdge;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.graphics.Insets;\r\nimport androidx.core.view.ViewCompat;\r\nimport androidx.core.view.WindowInsetsCompat;\r\nimport androidx.fragment.app.Fragment;\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.ui.Account.SignInActivity;\r\nimport com.example.agrimart.ui.Cart.CartFragment;\r\nimport com.example.agrimart.ui.Explore.ExploreFragment;\r\nimport com.example.agrimart.ui.Homepage.HomeFragment;\r\nimport com.example.agrimart.ui.MyProfile.MyProfileFragment;\r\nimport com.example.agrimart.ui.Notification.NotificationFragment;\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.firestore.DocumentReference;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private SharedPreferences sharedPreferences;\r\n    private FirebaseAuth mAuth;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        EdgeToEdge.enable(this);\r\n        setContentView(R.layout.activity_main);\r\n        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main1), (v, insets) -> {\r\n            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());\r\n            v.setPadding(systemBars.left, systemBars.top, systemBars.right, 0);\r\n            return insets;\r\n        });\r\n\r\n        sharedPreferences = getSharedPreferences(\"user_prefs\", MODE_PRIVATE);\r\n        mAuth = FirebaseAuth.getInstance();\r\n\r\n        if (sharedPreferences.getBoolean(\"is_logged_in\", false)) {\r\n            FirebaseUser currentUser = mAuth.getCurrentUser();\r\n            if (currentUser != null) {\r\n                navigateToHome();\r\n                fetchUserRoleAndSave(currentUser);\r\n            } else {\r\n                clearLoginState();\r\n                navigateToLogin();\r\n            }\r\n        } else {\r\n            navigateToLogin();\r\n        }\r\n\r\n        BottomNavigationView bottomNavigationView = findViewById(R.id.bottomNavigation);\r\n        bottomNavigationView.setOnNavigationItemSelectedListener(this::onNavigationItemSelected);\r\n\r\n        if (savedInstanceState == null) {\r\n            loadFragment(new HomeFragment());\r\n            bottomNavigationView.setSelectedItemId(R.id.home);\r\n        }\r\n    }\r\n\r\n    private void navigateToHome() {\r\n        loadFragment(new HomeFragment());\r\n    }\r\n\r\n    private void navigateToLogin() {\r\n        Intent intent = new Intent(MainActivity.this, SignInActivity.class);\r\n        startActivity(intent);\r\n        finish();\r\n    }\r\n\r\n    private void clearLoginState() {\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.clear();\r\n        editor.apply();\r\n    }\r\n\r\n    private void loadFragment(Fragment fragment) {\r\n        getSupportFragmentManager().beginTransaction()\r\n                .replace(R.id.fragment_container, fragment)\r\n                .commit();\r\n    }\r\n\r\n    private boolean onNavigationItemSelected(MenuItem item) {\r\n        Fragment selectedFragment = null;\r\n\r\n        if (item.getItemId() == R.id.home) {\r\n            selectedFragment = new HomeFragment();\r\n        } else if (item.getItemId() == R.id.category) {\r\n            selectedFragment = new ExploreFragment();\r\n        } else if (item.getItemId() == R.id.notification) {\r\n            selectedFragment = new NotificationFragment();\r\n        } else if (item.getItemId() == R.id.profile) {\r\n            selectedFragment = new MyProfileFragment();\r\n        } else if (item.getItemId() == R.id.cart) {\r\n            selectedFragment = new CartFragment();\r\n        } else {\r\n            return false;\r\n        }\r\n\r\n        if (selectedFragment != null) {\r\n            loadFragment(selectedFragment);\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private void fetchUserRoleAndSave(FirebaseUser user) {\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        DocumentReference docRef = db.collection(\"users\").document(user.getUid());\r\n        docRef.get().addOnSuccessListener(documentSnapshot -> {\r\n            if (documentSnapshot.exists()) {\r\n                String role = documentSnapshot.getString(\"role\");\r\n                if (role != null) {\r\n                    saveUserToSharedPreferences(role);\r\n                }\r\n            }\r\n        }).addOnFailureListener(e -> {\r\n        });\r\n    }\r\n\r\n    private void saveUserToSharedPreferences(String role) {\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putString(\"user_role\", role);\r\n        editor.apply();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/java/com/example/agrimart/ui/MainActivity.java b/app/src/main/java/com/example/agrimart/ui/MainActivity.java
---- a/app/src/main/java/com/example/agrimart/ui/MainActivity.java	(revision 6a809528d747061069ce0672a9c8a28c130149ba)
-+++ b/app/src/main/java/com/example/agrimart/ui/MainActivity.java	(date 1730377522637)
-@@ -46,7 +46,7 @@
-             FirebaseUser currentUser = mAuth.getCurrentUser();
-             if (currentUser != null) {
-                 navigateToHome();
--                fetchUserRoleAndSave(currentUser);
-+                getUserRole(currentUser);
-             } else {
-                 clearLoginState();
-                 navigateToLogin();
-@@ -110,7 +110,7 @@
-         return true;
-     }
- 
--    private void fetchUserRoleAndSave(FirebaseUser user) {
-+    private void getUserRole(FirebaseUser user) {
-         FirebaseFirestore db = FirebaseFirestore.getInstance();
-         DocumentReference docRef = db.collection("users").document(user.getUid());
-         docRef.get().addOnSuccessListener(documentSnapshot -> {
-Index: app/src/main/res/values/strings.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><resources>\r\n    <string name=\"app_name\">AgriMart</string>\r\n    <string name=\"categories\">Danh mục sản phẩm</string>\r\n    <string name=\"see_all\">Xem thêm</string>\r\n    <string name=\"top_selling\">Bán chạy nhất</string>\r\n    <string name=\"home\">Trang chủ</string>\r\n    <string name=\"profile\">Tôi</string>\r\n    <string name=\"order\">Order</string>\r\n    <string name=\"newsfeed\">Tin mới</string>\r\n    <string name=\"post\">Đăng bài</string>\r\n    <string name=\"cart\">Giỏ hàng</string>\r\n    <string name=\"ng_b_n\">Đăng bán</string>\r\n    <string name=\"cho\">Chợ</string>\r\n    <string name=\"search_hint\">tim kiem san pham</string>\r\n    <string name=\"search\">Tìm kiếm sản phẩm</string>\r\n    <string name=\"ng_nh_p\">Đăng nhập</string>\r\n    <string name=\"ch_a_c_t_i_kho_n\"><u>Chưa có tài khoản?</u></string>\r\n    <string name=\"m_t_kh_u\">Mật khẩu</string>\r\n    <string name=\"continue_with_google\"> Đăng nhập bằng Google</string>\r\n    <string name=\"dang_ky\">Chưa có tài khoản? <b>Đăng ký</b></string>\r\n    <string name=\"c_t_i_kho_n\"><u>Đã có tài khoản?</u></string>\r\n    <string name=\"ng_k_b_ng_s_i_n_tho_i\">Đăng ký bằng số điện thoại</string>\r\n    <string name=\"ng_k_b_ng_email\">Đăng ký bằng email</string>\r\n    <string name=\"qu_n_m_t_kh_u\">Quên mật khẩu?</string>\r\n    <string name=\"nh_p_email_ho_c_s_i_n_tho_i\">Nhập email hoặc số điện thoại</string>\r\n    <string name=\"sodienthoai\">Số điện thoại</string>\r\n    <string name=\"g_i_l_i\"><u>Gửi lại</u></string>\r\n\r\n\r\n    <!-- PostProduct -->\r\n    <string name=\"nh_p_s_l_ng_c_n_b_n\">Your desired text here</string>\r\n    <string name=\"desc_vegetable\">Rau củ quả</string>\r\n    <string name=\"desc_fruit\">Trái cây</string>\r\n    <string name=\"desc_meat_eggs\">Trứng, thịt</string>\r\n    <string name=\"desc_milk\">Sữa, bơ, phô mai</string>\r\n    <string name=\"desc_sweets\">Bánh kẹo</string>\r\n    <string name=\"nh_s_n_ph_m_th_c_t\">Ảnh sản phẩm thực tế</string>\r\n    <string name=\"th_m_nh\">Thêm ảnh</string>\r\n    <string name=\"todo\">TODO</string>\r\n    <string name=\"t_n_s_n_ph_m\">Tên sản phẩm</string>\r\n    <string name=\"c_i_t_n_n_i_l_n_t_t_c_s_gi_p_ch_r_t_nhi_u_y\">Cái tên nói lên tất cả sẽ giúp ích rất nhiều đấy</string>\r\n    <string name=\"m_t_s_n_ph_m\">Mô tả sản phẩm</string>\r\n    <string name=\"m_t_o_n_v_n_m_t_y_s_gi_p_s_n_ph_m_c_a_b_n_b_n_d_h_n\">Một đoạn văn mô tả đầy đủ sẽ giúp sản phẩm của bạn bán dễ hơn</string>\r\n    <string name=\"ph_n_lo_i_s_n_ph_m\">Phân loại sản phẩm</string>\r\n    <string name=\"rau_c\">Rau củ</string>\r\n    <string name=\"tr_i_c_y\">Trái cây</string>\r\n    <string name=\"th_t_tr_ng\">Thịt, Trứng</string>\r\n    <string name=\"s_a_b_ph_mai\">Sữa, bơ, phô mai</string>\r\n    <string name=\"ng_t\">Đồ ngọt</string>\r\n    <string name=\"ti_p_t_c\">Tiếp tục</string>\r\n    <string name=\"gi_b_n\">Giá bán</string>\r\n    <string name=\"n_v\">Đơn vị </string>\r\n    <string name=\"hi_n_c\">Hiện có</string>\r\n    <string name=\"nh_p_gi_b_n\">Nhập giá bán</string>\r\n    <string name=\"nh_p_n_v_kg_ch_c_c_i\">Nhập đơn vị (kg, chục, cái)</string>\r\n    <string name=\"_200kg\">200kg</string>\r\n    <string name=\"s_u_ri_ng_lan_t_a\">Sầu riêng lan tỏa</string>\r\n    <string name=\"_20_ng_i_ang_h_i\">20 người đang hỏi</string>\r\n    <string name=\"dang_san_pham\">ĐĂNG SẢN PHẨM</string>\r\n    <string name=\"frash_fruits_vegetable\"><![CDATA[Frash Fruits & Vegetable]]></string>\r\n    <string name=\"add_cart\">Thêm vào giỏ hàng</string>\r\n    <string name=\"product_name\">Tên sản phẩm</string>\r\n    <string name=\"price\">50.000đ</string>\r\n    <string name=\"address\">123 Lê Trọng Tấn, Quận Tân Phú, TP.HCM</string>\r\n    <string name=\"description\">Mô tả chi tiết</string>\r\n    <string name=\"descriptions\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</string>\r\n    <string name=\"user_review\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</string>\r\n    <string name=\"my_cart\">Giỏ hàng</string>\r\n    <string name=\"notification_time\">1 phút trước</string>\r\n    <string name=\"notification_message\">Khánh vừa đặt mua sản phẩm của bạn: Chuối nhà trồng...</string>\r\n    <string name=\"cate\">Gian hàng</string>\r\n    <string name=\"t_m_theo_danh_m_c\">Tìm theo danh mục</string>\r\n    <string name=\"thong_bao\">Thông báo</string>\r\n    <string name=\"n_h_ng\">Đơn hàng</string>\r\n    <string name=\"_0\">0</string>\r\n    <string name=\"ch_l_y_h_ng\">Chờ lấy hàng</string>\r\n    <string name=\"n_h_y\">Đơn hủy</string>\r\n    <string name=\"tr_h_ng_ho_n_ti_n\">Trả hàng/Hoàn tiền</string>\r\n\r\n    <string-array name=\"filter_options\">\r\n        <item>Sort by Price</item>\r\n        <item>Newest</item>\r\n        <item>Oldest</item>\r\n    </string-array>\r\n\r\n    <style name=\"TabTextAppearance\" parent=\"TextAppearance.Design.Tab\">\r\n        <item name=\"android:textSize\">16sp</item>\r\n        <item name=\"android:textColor\">@color/black</item>\r\n        <item name=\"android:textStyle\">bold</item>\r\n    </style>\r\n\r\n    <string name=\"default_web_client_id\">689266518488-dggpokj3cbc4t7hoa53j2vsa6vt59qi4.apps.googleusercontent.com</string>\r\n    <!-- TODO: Remove or change this placeholder text -->\r\n    <string name=\"hello_blank_fragment\">Hello blank fragment</string>\r\n    <string name=\"email\">Email</string>\r\n\r\n    //facebook\r\n    <string name=\"loginwithfacebook\">Đăng nhập bằng Facebook</string>\r\n    <string name=\"facebook_app_id\">456355280794721</string>\r\n    <string name=\"fb_login_protocol_scheme\">fb456355280794721</string>\r\n    <string name=\"facebook_client_token\">fbc7722b3ad7a34dbf443766e81403c1</string>\r\n    <string name=\"facebook_app_secret\">239308944b7f4f13d8ed33f56b79c7cc</string>\r\n    <!-- Strings used for fragments for navigation -->\r\n    <string name=\"first_fragment_label\">First Fragment</string>\r\n    <string name=\"second_fragment_label\">Second Fragment</string>\r\n    <string name=\"next\">Next</string>\r\n    <string name=\"previous\">Previous</string>\r\n\r\n    <string name=\"lorem_ipsum\">\r\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam in scelerisque sem. Mauris\r\n        volutpat, dolor id interdum ullamcorper, risus dolor egestas lectus, sit amet mattis purus\r\n        dui nec risus. Maecenas non sodales nisi, vel dictum dolor. Class aptent taciti sociosqu ad\r\n        litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse blandit eleifend\r\n        diam, vel rutrum tellus vulputate quis. Aliquam eget libero aliquet, imperdiet nisl a,\r\n        ornare ex. Sed rhoncus est ut libero porta lobortis. Fusce in dictum tellus.\\n\\n\r\n        Suspendisse interdum ornare ante. Aliquam nec cursus lorem. Morbi id magna felis. Vivamus\r\n        egestas, est a condimentum egestas, turpis nisl iaculis ipsum, in dictum tellus dolor sed\r\n        neque. Morbi tellus erat, dapibus ut sem a, iaculis tincidunt dui. Interdum et malesuada\r\n        fames ac ante ipsum primis in faucibus. Curabitur et eros porttitor, ultricies urna vitae,\r\n        molestie nibh. Phasellus at commodo eros, non aliquet metus. Sed maximus nisl nec dolor\r\n        bibendum, vel congue leo egestas.\\n\\n\r\n        Sed interdum tortor nibh, in sagittis risus mollis quis. Curabitur mi odio, condimentum sit\r\n        amet auctor at, mollis non turpis. Nullam pretium libero vestibulum, finibus orci vel,\r\n        molestie quam. Fusce blandit tincidunt nulla, quis sollicitudin libero facilisis et. Integer\r\n        interdum nunc ligula, et fermentum metus hendrerit id. Vestibulum lectus felis, dictum at\r\n        lacinia sit amet, tristique id quam. Cras eu consequat dui. Suspendisse sodales nunc ligula,\r\n        in lobortis sem porta sed. Integer id ultrices magna, in luctus elit. Sed a pellentesque\r\n        est.\\n\\n\r\n        Aenean nunc velit, lacinia sed dolor sed, ultrices viverra nulla. Etiam a venenatis nibh.\r\n        Morbi laoreet, tortor sed facilisis varius, nibh orci rhoncus nulla, id elementum leo dui\r\n        non lorem. Nam mollis ipsum quis auctor varius. Quisque elementum eu libero sed commodo. In\r\n        eros nisl, imperdiet vel imperdiet et, scelerisque a mauris. Pellentesque varius ex nunc,\r\n        quis imperdiet eros placerat ac. Duis finibus orci et est auctor tincidunt. Sed non viverra\r\n        ipsum. Nunc quis augue egestas, cursus lorem at, molestie sem. Morbi a consectetur ipsum, a\r\n        placerat diam. Etiam vulputate dignissim convallis. Integer faucibus mauris sit amet finibus\r\n        convallis.\\n\\n\r\n        Phasellus in aliquet mi. Pellentesque habitant morbi tristique senectus et netus et\r\n        malesuada fames ac turpis egestas. In volutpat arcu ut felis sagittis, in finibus massa\r\n        gravida. Pellentesque id tellus orci. Integer dictum, lorem sed efficitur ullamcorper,\r\n        libero justo consectetur ipsum, in mollis nisl ex sed nisl. Donec maximus ullamcorper\r\n        sodales. Praesent bibendum rhoncus tellus nec feugiat. In a ornare nulla. Donec rhoncus\r\n        libero vel nunc consequat, quis tincidunt nisl eleifend. Cras bibendum enim a justo luctus\r\n        vestibulum. Fusce dictum libero quis erat maximus, vitae volutpat diam dignissim.\r\n    </string>\r\n</resources>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
---- a/app/src/main/res/values/strings.xml	(revision 6a809528d747061069ce0672a9c8a28c130149ba)
-+++ b/app/src/main/res/values/strings.xml	(date 1730448311644)
-@@ -142,4 +142,5 @@
-         libero vel nunc consequat, quis tincidunt nisl eleifend. Cras bibendum enim a justo luctus
-         vestibulum. Fusce dictum libero quis erat maximus, vitae volutpat diam dignissim.
-     </string>
-+    <string name="verify">Email xác nhận đã được gửi đến địa chỉ email của bạn. Vui lòng kiểm tra email và nhấn vào liên kết xác nhận để hoàn tất đăng ký.</string>
- </resources>
-\ No newline at end of file
-Index: app/src/main/res/layout/activity_verify.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:id=\"@+id/main\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".ui.Account.VerifyActivity\">\r\n\r\n    <TextView\r\n        android:id=\"@+id/tvVerifyTitle\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"32dp\"\r\n        android:text=\"Xác nhận Email\"\r\n        android:textSize=\"24sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/tvVerifyMessage\"\r\n        android:layout_width=\"0dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"16dp\"\r\n        android:layout_marginStart=\"24dp\"\r\n        android:layout_marginEnd=\"24dp\"\r\n        android:text=\"Một email xác nhận đã được gửi đến địa chỉ email của bạn. Vui lòng kiểm tra email và nhấn vào liên kết xác nhận để hoàn tất đăng ký.\"\r\n        android:textSize=\"16sp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@id/tvVerifyTitle\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/btnResendEmail\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"24dp\"\r\n        android:text=\"Gửi lại email\"\r\n        android:backgroundTint=\"@color/green\"\r\n        app:cornerRadius=\"24dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@id/tvVerifyMessage\" />\r\n\r\n    <Button\r\n        android:id=\"@+id/btnBackToLogin\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"12dp\"\r\n        android:backgroundTint=\"@color/green\"\r\n        android:text=\"Quay lại đăng nhập\"\r\n        app:cornerRadius=\"24dp\"\r\n        app:layout_constraintEnd_toEndOf=\"parent\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toBottomOf=\"@id/btnResendEmail\" />\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
-diff --git a/app/src/main/res/layout/activity_verify.xml b/app/src/main/res/layout/activity_verify.xml
---- a/app/src/main/res/layout/activity_verify.xml	(revision 6a809528d747061069ce0672a9c8a28c130149ba)
-+++ b/app/src/main/res/layout/activity_verify.xml	(date 1730448311653)
-@@ -26,7 +26,7 @@
-         android:layout_marginTop="16dp"
-         android:layout_marginStart="24dp"
-         android:layout_marginEnd="24dp"
--        android:text="Một email xác nhận đã được gửi đến địa chỉ email của bạn. Vui lòng kiểm tra email và nhấn vào liên kết xác nhận để hoàn tất đăng ký."
-+        android:text="@string/verify"
-         android:textSize="16sp"
-         app:layout_constraintEnd_toEndOf="parent"
-         app:layout_constraintStart_toStartOf="parent"
Index: app/src/main/res/layout/fragment_search.xml
===================================================================
diff --git a/app/src/main/res/layout/fragment_search.xml b/app/src/main/res/layout/fragment_search.xml
deleted file mode 100644
--- a/app/src/main/res/layout/fragment_search.xml	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ /dev/null	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
@@ -1,25 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    android:layout_width="match_parent"
-    android:layout_height="match_parent"
-    tools:context=".ui.Homepage.SearchActivity" >
-
-
-    <ScrollView
-        android:id="@+id/sc"
-        android:layout_width="match_parent"
-        android:layout_height="900dp"
-        android:layout_marginTop="25dp">
-
-        <androidx.recyclerview.widget.RecyclerView
-            android:id="@+id/rvCategories"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-        >
-
-        </androidx.recyclerview.widget.RecyclerView>
-    </ScrollView>
-
-
-</RelativeLayout>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM__Changes_.xml
===================================================================
diff --git a/.idea/shelf/Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM__Changes_.xml b/.idea/shelf/Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM__Changes_.xml
deleted file mode 100644
--- a/.idea/shelf/Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM__Changes_.xml	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ /dev/null	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
@@ -1,9 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM_[Changes]" date="1730455722172" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM_[Changes]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 11/1/2024 5:08 PM [Changes]" />
-  <binary>
-    <option name="BEFORE_PATH" />
-    <option name="AFTER_PATH" value="app/src/main/res/drawable/email.png" />
-    <option name="SHELVED_PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_11_1_2024_5_08_PM_[Changes]/email.png" />
-  </binary>
-</changelist>
\ No newline at end of file
Index: app/src/main/res/layout/item_product.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n\r\n    <data>\r\n        <variable\r\n            name=\"product\"\r\n            type=\"com.example.agrimart.data.model.Product\" />\r\n    </data>\r\n\r\n    <androidx.cardview.widget.CardView\r\n        android:layout_width=\"173dp\"\r\n        android:layout_height=\"wrap_content\"\r\n        app:cardCornerRadius=\"8dp\"\r\n        app:cardElevation=\"4dp\"\r\n        android:layout_margin=\"8dp\"\r\n        android:clipToPadding=\"false\">\r\n\r\n        <ImageView\r\n            android:id=\"@+id/imgPro\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"146dp\"\r\n            android:scaleType=\"centerCrop\"\r\n            android:src=\"@drawable/banana\" />\r\n\r\n        <RelativeLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/imgPro\"\r\n            android:padding=\"8dp\"\r\n            android:layout_marginTop=\"146dp\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvName\"\r\n                android:layout_width=\"129dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"12dp\"\r\n                android:textSize=\"20sp\"\r\n                android:textColor=\"#333333\"\r\n                android:letterSpacing=\"0.01\"\r\n                android:layout_marginStart=\"15dp\"\r\n                android:ellipsize=\"end\"\r\n                android:maxLines=\"1\"\r\n                android:textStyle=\"bold\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvPrice\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_below=\"@id/tvName\"\r\n                android:textSize=\"18sp\"\r\n                android:layout_marginStart=\"15dp\"\r\n                android:layout_marginTop=\"8dp\"\r\n                android:textColor=\"#F44336\"\r\n                android:fontFamily=\"@font/gabarito\"\r\n                android:letterSpacing=\"0.01\" />\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/imageButton\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:background=\"@color/transparent\"\r\n                android:layout_below=\"@id/tvName\"\r\n                android:layout_alignParentEnd=\"true\"\r\n                android:layout_marginTop=\"8dp\"\r\n                android:layout_marginEnd=\"16dp\"\r\n                app:srcCompat=\"@drawable/ic_plus_1\" />\r\n\r\n        </RelativeLayout>\r\n\r\n    </androidx.cardview.widget.CardView>\r\n</layout>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/item_product.xml b/app/src/main/res/layout/item_product.xml
--- a/app/src/main/res/layout/item_product.xml	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ b/app/src/main/res/layout/item_product.xml	(date 1730999241288)
@@ -9,11 +9,9 @@
     </data>
 
     <androidx.cardview.widget.CardView
-        android:layout_width="173dp"
+        android:layout_width="190dp"
         android:layout_height="wrap_content"
-        app:cardCornerRadius="8dp"
-        app:cardElevation="4dp"
-        android:layout_margin="8dp"
+        app:cardCornerRadius="5dp"
         android:clipToPadding="false">
 
         <ImageView
@@ -38,10 +36,9 @@
                 android:textSize="20sp"
                 android:textColor="#333333"
                 android:letterSpacing="0.01"
-                android:layout_marginStart="15dp"
+                android:layout_marginStart="5dp"
                 android:ellipsize="end"
-                android:maxLines="1"
-                android:textStyle="bold" />
+                android:maxLines="1"/>
 
             <TextView
                 android:id="@+id/tvPrice"
@@ -49,23 +46,12 @@
                 android:layout_height="wrap_content"
                 android:layout_below="@id/tvName"
                 android:textSize="18sp"
-                android:layout_marginStart="15dp"
+                android:layout_marginStart="8dp"
                 android:layout_marginTop="8dp"
                 android:textColor="#F44336"
                 android:fontFamily="@font/gabarito"
                 android:letterSpacing="0.01" />
 
-            <ImageButton
-                android:id="@+id/imageButton"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:background="@color/transparent"
-                android:layout_below="@id/tvName"
-                android:layout_alignParentEnd="true"
-                android:layout_marginTop="8dp"
-                android:layout_marginEnd="16dp"
-                app:srcCompat="@drawable/ic_plus_1" />
-
         </RelativeLayout>
 
     </androidx.cardview.widget.CardView>
Index: app/src/main/res/layout/carousel_item.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/carousel_item.xml b/app/src/main/res/layout/carousel_item.xml
new file mode 100644
--- /dev/null	(date 1730996897074)
+++ b/app/src/main/res/layout/carousel_item.xml	(date 1730996897074)
@@ -0,0 +1,20 @@
+<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    xmlns:app="http://schemas.android.com/apk/res-auto"
+    android:layout_margin="10dp">
+
+    <androidx.cardview.widget.CardView
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        app:cardCornerRadius="16dp"
+        app:cardElevation="8dp"
+        android:layout_gravity="center">
+
+        <ImageView
+            android:id="@+id/carousel_image"
+            android:layout_width="match_parent"
+            android:layout_height="match_parent"
+            android:scaleType="centerCrop"/>
+    </androidx.cardview.widget.CardView>
+</FrameLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/adapter/CarouselAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/adapter/CarouselAdapter.java b/app/src/main/java/com/example/agrimart/adapter/CarouselAdapter.java
new file mode 100644
--- /dev/null	(date 1730995639109)
+++ b/app/src/main/java/com/example/agrimart/adapter/CarouselAdapter.java	(date 1730995639109)
@@ -0,0 +1,51 @@
+package com.example.agrimart.adapter;
+
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.ImageView;
+
+import androidx.annotation.NonNull;
+import androidx.recyclerview.widget.RecyclerView;
+
+import com.bumptech.glide.Glide;
+import com.example.agrimart.R;
+
+import java.util.List;
+
+public class CarouselAdapter extends RecyclerView.Adapter<CarouselAdapter.CarouselViewHolder> {
+    private List<String> carouselItems;
+
+    public CarouselAdapter(List<String> carouselItems) {
+        this.carouselItems = carouselItems;
+    }
+
+    @NonNull
+    @Override
+    public CarouselViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
+        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.carousel_item, parent, false);
+        return new CarouselViewHolder(view);
+    }
+
+    @Override
+    public void onBindViewHolder(@NonNull CarouselViewHolder holder, int position) {
+        String imageUrl = carouselItems.get(position);
+        Glide.with(holder.itemView.getContext())
+                .load(imageUrl)
+                .into(holder.imageView);
+    }
+
+    @Override
+    public int getItemCount() {
+        return carouselItems.size();
+    }
+
+    static class CarouselViewHolder extends RecyclerView.ViewHolder {
+        ImageView imageView;
+
+        public CarouselViewHolder(@NonNull View itemView) {
+            super(itemView);
+            imageView = itemView.findViewById(R.id.carousel_image);
+        }
+    }
+}
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.agrimart.ui.Homepage;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport androidx.annotation.NonNull;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.lifecycle.MutableLiveData;\r\nimport androidx.lifecycle.ViewModelProvider;\r\nimport androidx.recyclerview.widget.GridLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.os.Handler;\r\nimport android.os.Looper;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.view.Window;\r\nimport android.view.WindowManager;\r\nimport android.widget.ImageButton;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.agrimart.R;\r\nimport com.example.agrimart.SpacesItemDecoration;\r\nimport com.example.agrimart.adapter.CategoryAdapter;\r\nimport com.example.agrimart.adapter.EndlessRecyclerViewScrollListener;\r\nimport com.example.agrimart.adapter.ProductAdapter;\r\nimport com.example.agrimart.data.model.Product;\r\nimport com.example.agrimart.databinding.FragmentHomeBinding;\r\nimport com.example.agrimart.ui.ProductPage.ProductDetailActivity;\r\nimport com.example.agrimart.viewmodel.HomeFragmentViewModel;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.google.firebase.firestore.Query;\r\nimport com.google.firebase.firestore.QuerySnapshot;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class HomeFragment extends Fragment {\r\n    private static final String TAG = \"HomeFragment\";\r\n    ImageButton btnSearch;\r\n    TextView search;\r\n    HomeFragmentViewModel viewModel;\r\n    FragmentHomeBinding binding;\r\n    EndlessRecyclerViewScrollListener scrollListener;\r\n    private int totalPages;\r\n    private int currentPage = 1;\r\n    private List<Product> products=new ArrayList<>();\r\n    private DocumentSnapshot lastVisible;\r\n    ProductAdapter productAdapter;\r\n    private boolean isLoading = false;\r\n\r\n    public HomeFragment() {\r\n\r\n    }\r\n\r\n    public static HomeFragment newInstance() {\r\n        return new HomeFragment();\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        db.collection(\"products\")\r\n                .get()\r\n                .addOnCompleteListener(task -> {\r\n                    if (task.isSuccessful()) {\r\n                        totalPages= (task.getResult().size()/10)+1;\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_home, container, false);\r\n        viewModel = new ViewModelProvider(this).get(HomeFragmentViewModel.class);\r\n\r\n        int spacingInPixels = getResources().getDimensionPixelSize(R.dimen.spacing);\r\n        binding.setViewmodel(viewModel);\r\n        View view = binding.getRoot();\r\n\r\n        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\r\n            Window window = getActivity().getWindow();\r\n            window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\r\n            window.setStatusBarColor(ContextCompat.getColor(getActivity(), R.color.green));\r\n        }\r\n\r\n        viewModel.getData();\r\n        viewModel.getFirstProducts();\r\n\r\n        viewModel.categories.observe(getViewLifecycleOwner(), categories -> {\r\n            if (categories != null) {\r\n                CategoryAdapter categoryAdapter = new CategoryAdapter(categories);\r\n                binding.rvCategories.setAdapter(categoryAdapter);\r\n                binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));\r\n                Log.d(TAG, \"Categories loaded: \" + categories.size());\r\n            }\r\n        });\r\n\r\n//        viewModel.products.observe(getViewLifecycleOwner(), products -> {\r\n//            if (products != null) {\r\n//                productAdapter = new ProductAdapter(products, product -> {\r\n//                    try {\r\n//                        Intent intent = new Intent(getContext(), ProductDetailActivity.class);\r\n//                        intent.putExtra(\"product\", product);\r\n//                        intent.putExtra(\"storeId\", product.getStoreId());\r\n//                        startActivity(intent);\r\n//                    } catch (Exception e) {\r\n//\r\n//                    }\r\n//                });\r\n//                GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n//                binding.rvProducts.setLayoutManager(gridLayoutManager);\r\n//                binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));\r\n//                binding.rvProducts.setAdapter(productAdapter);\r\n//\r\n//            }\r\n//        });\r\n        getFirstProducts();\r\n        productAdapter= new ProductAdapter(products, product -> {\r\n            try {\r\n                Intent intent = new Intent(getContext(), ProductDetailActivity.class);\r\n                intent.putExtra(\"product\", product);\r\n                intent.putExtra(\"storeId\", product.getStoreId());\r\n                startActivity(intent);\r\n            } catch (Exception e) {\r\n\r\n            }\r\n        });\r\n        GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);\r\n        binding.rvProducts.setLayoutManager(gridLayoutManager);\r\n        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));\r\n        binding.rvProducts.setAdapter(productAdapter);\r\n\r\n\r\n        binding.seeAll1.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                getMoreProducts();\r\n            }\r\n        });\r\n\r\n\r\n\r\n        binding.scrollView.setOnScrollChangeListener(new View.OnScrollChangeListener() {\r\n            @Override\r\n            public void onScrollChange(View view, int scrollX, int scrollY, int oldScrollX, int oldScrollY) {\r\n                int scrollViewHeight = binding.scrollView.getChildAt(0).getMeasuredHeight();\r\n                int scrollViewVisibleHeight = binding.scrollView.getHeight();\r\n\r\n                if (scrollY + scrollViewVisibleHeight >= scrollViewHeight) {\r\n\r\n                    if (!isLoading) {\r\n                        isLoading = true;\r\n                        binding.seeAll1.setVisibility(View.VISIBLE);\r\n\r\n                        new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                getMoreProducts();\r\n                            }\r\n                        }, 2000);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        addControls(view);\r\n        addEvents();\r\n\r\n\r\n        return view;\r\n    }\r\n\r\n    private void addEvents() {\r\n        btnSearch.setOnClickListener(v -> {\r\n            Intent intent = new Intent(getActivity(), SearchActivity.class);\r\n            getActivity().startActivity(intent);\r\n        });\r\n\r\n        search.setOnClickListener(v -> {\r\n            Intent intent = new Intent(getContext(), SearchActivity.class);\r\n            startActivity(intent);\r\n        });\r\n    }\r\n\r\n    private void addControls(View view) {\r\n        btnSearch = view.findViewById(R.id.search_icon);\r\n        search = view.findViewById(R.id.search_input);\r\n    }\r\n\r\n    private void loadFragment(Fragment fragment) {\r\n        getActivity().getSupportFragmentManager().beginTransaction()\r\n                .replace(R.id.fragment_container, fragment)\r\n                .commit();\r\n    }\r\n    public void getFirstProducts(){\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        Query first= db.collection(\"products\")\r\n                .orderBy(\"product_id\")\r\n                .limit(10);\r\n\r\n        first.get()\r\n                .addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n                        List<Product> productList = queryDocumentSnapshots.toObjects(Product.class);\r\n                        products.addAll(productList);\r\n                        productAdapter.notifyDataSetChanged();\r\n\r\n                        lastVisible=queryDocumentSnapshots.getDocuments()\r\n                                .get(queryDocumentSnapshots.size()-1);\r\n                    }\r\n                });\r\n    }\r\n\r\n    public void getMoreProducts(){\r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n        Query next= db.collection(\"products\")\r\n                .orderBy(\"product_id\")\r\n                .startAfter(lastVisible)\r\n                .limit(10);\r\n\r\n        next.get()\r\n                .addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n\r\n                        List<Product> newList = queryDocumentSnapshots.toObjects(Product.class);\r\n\r\n                        products.addAll(newList);\r\n                        productAdapter.notifyDataSetChanged();\r\n                        isLoading=false;\r\n\r\n                        if(!newList.isEmpty()){\r\n                            lastVisible=queryDocumentSnapshots.getDocuments()\r\n                                    .get(queryDocumentSnapshots.size()-1);\r\n                        }\r\n                        currentPage+=1;\r\n                        if(currentPage==totalPages){\r\n                            binding.seeAll1.setVisibility(View.GONE);\r\n                        }\r\n\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java
--- a/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ b/app/src/main/java/com/example/agrimart/ui/Homepage/HomeFragment.java	(date 1730998129768)
@@ -5,16 +5,17 @@
 import android.os.Bundle;
 import androidx.annotation.NonNull;
 import androidx.core.content.ContextCompat;
+import androidx.core.widget.NestedScrollView;
 import androidx.databinding.DataBindingUtil;
 import androidx.fragment.app.Fragment;
-import androidx.lifecycle.MutableLiveData;
 import androidx.lifecycle.ViewModelProvider;
 import androidx.recyclerview.widget.GridLayoutManager;
+import androidx.recyclerview.widget.LinearLayoutManager;
 import androidx.recyclerview.widget.RecyclerView;
+import androidx.viewpager2.widget.ViewPager2;
 
 import android.os.Handler;
 import android.os.Looper;
-import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
@@ -25,18 +26,16 @@
 
 import com.example.agrimart.R;
 import com.example.agrimart.SpacesItemDecoration;
+import com.example.agrimart.adapter.CarouselAdapter;
 import com.example.agrimart.adapter.CategoryAdapter;
-import com.example.agrimart.adapter.EndlessRecyclerViewScrollListener;
 import com.example.agrimart.adapter.ProductAdapter;
 import com.example.agrimart.data.model.Product;
 import com.example.agrimart.databinding.FragmentHomeBinding;
 import com.example.agrimart.ui.ProductPage.ProductDetailActivity;
 import com.example.agrimart.viewmodel.HomeFragmentViewModel;
-import com.google.android.gms.tasks.OnSuccessListener;
 import com.google.firebase.firestore.DocumentSnapshot;
 import com.google.firebase.firestore.FirebaseFirestore;
 import com.google.firebase.firestore.Query;
-import com.google.firebase.firestore.QuerySnapshot;
 
 import java.util.ArrayList;
 import java.util.List;
@@ -47,35 +46,17 @@
     TextView search;
     HomeFragmentViewModel viewModel;
     FragmentHomeBinding binding;
-    EndlessRecyclerViewScrollListener scrollListener;
     private int totalPages;
     private int currentPage = 1;
-    private List<Product> products=new ArrayList<>();
+    private List<Product> products = new ArrayList<>();
     private DocumentSnapshot lastVisible;
-    ProductAdapter productAdapter;
     private boolean isLoading = false;
-
-    public HomeFragment() {
-
-    }
-
-    public static HomeFragment newInstance() {
-        return new HomeFragment();
-    }
-
-    @Override
-    public void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-        FirebaseFirestore db = FirebaseFirestore.getInstance();
-        db.collection("products")
-                .get()
-                .addOnCompleteListener(task -> {
-                    if (task.isSuccessful()) {
-                        totalPages= (task.getResult().size()/10)+1;
-                    }
-                });
-    }
-
+    private ViewPager2 carouselViewPager;
+    private CarouselAdapter carouselAdapter;
+    private Handler carouselHandler;
+    private Runnable carouselRunnable;
+    private RecyclerView rvProducts;
+    private ProductAdapter productAdapter;
 
     @Override
     public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
@@ -99,85 +80,73 @@
             if (categories != null) {
                 CategoryAdapter categoryAdapter = new CategoryAdapter(categories);
                 binding.rvCategories.setAdapter(categoryAdapter);
-                binding.rvCategories.setLayoutManager(new GridLayoutManager(getContext(), 4));
-                Log.d(TAG, "Categories loaded: " + categories.size());
+                LinearLayoutManager layoutManager = new LinearLayoutManager(getContext(), LinearLayoutManager.HORIZONTAL, false);
+                binding.rvCategories.setLayoutManager(layoutManager);
             }
         });
 
-//        viewModel.products.observe(getViewLifecycleOwner(), products -> {
-//            if (products != null) {
-//                productAdapter = new ProductAdapter(products, product -> {
-//                    try {
-//                        Intent intent = new Intent(getContext(), ProductDetailActivity.class);
-//                        intent.putExtra("product", product);
-//                        intent.putExtra("storeId", product.getStoreId());
-//                        startActivity(intent);
-//                    } catch (Exception e) {
-//
-//                    }
-//                });
-//                GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-//                binding.rvProducts.setLayoutManager(gridLayoutManager);
-//                binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
-//                binding.rvProducts.setAdapter(productAdapter);
-//
-//            }
-//        });
+        carouselViewPager = view.findViewById(R.id.carousel_viewpager);
+        carouselAdapter = new CarouselAdapter(getCarouselItems());
+        carouselViewPager.setAdapter(carouselAdapter);
+
+        carouselHandler = new Handler(Looper.getMainLooper());
+        carouselRunnable = new Runnable() {
+            @Override
+            public void run() {
+                int currentItem = carouselViewPager.getCurrentItem();
+                int nextItem = (currentItem + 1) % carouselAdapter.getItemCount();
+                carouselViewPager.setCurrentItem(nextItem, true);
+                carouselHandler.postDelayed(this, 10000); // 10 seconds delay
+            }
+        };
+        carouselHandler.postDelayed(carouselRunnable, 10000);
+
         getFirstProducts();
-        productAdapter= new ProductAdapter(products, product -> {
+        productAdapter = new ProductAdapter(products, product -> {
             try {
                 Intent intent = new Intent(getContext(), ProductDetailActivity.class);
                 intent.putExtra("product", product);
                 intent.putExtra("storeId", product.getStoreId());
                 startActivity(intent);
             } catch (Exception e) {
-
+                e.printStackTrace();
             }
         });
+        rvProducts = view.findViewById(R.id.rvProducts);
         GridLayoutManager gridLayoutManager = new GridLayoutManager(getContext(), 2);
-        binding.rvProducts.setLayoutManager(gridLayoutManager);
-        binding.rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
-        binding.rvProducts.setAdapter(productAdapter);
-
+        rvProducts.setLayoutManager(gridLayoutManager);
+        rvProducts.addItemDecoration(new SpacesItemDecoration(spacingInPixels));
+        rvProducts.setAdapter(productAdapter);
 
-        binding.seeAll1.setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View view) {
-                getMoreProducts();
-            }
-        });
+        binding.seeAll1.setOnClickListener(view1 -> getMoreProducts());
 
-
-
-        binding.scrollView.setOnScrollChangeListener(new View.OnScrollChangeListener() {
-            @Override
-            public void onScrollChange(View view, int scrollX, int scrollY, int oldScrollX, int oldScrollY) {
-                int scrollViewHeight = binding.scrollView.getChildAt(0).getMeasuredHeight();
-                int scrollViewVisibleHeight = binding.scrollView.getHeight();
+        binding.scrollView.setOnScrollChangeListener((NestedScrollView.OnScrollChangeListener) (view12, scrollX, scrollY, oldScrollX, oldScrollY) -> {
+            int scrollViewHeight = binding.scrollView.getChildAt(0).getMeasuredHeight();
+            int scrollViewVisibleHeight = binding.scrollView.getHeight();
 
-                if (scrollY + scrollViewVisibleHeight >= scrollViewHeight) {
-
-                    if (!isLoading) {
-                        isLoading = true;
-                        binding.seeAll1.setVisibility(View.VISIBLE);
+            if (scrollY + scrollViewVisibleHeight >= scrollViewHeight) {
+                if (!isLoading) {
+                    isLoading = true;
+                    binding.seeAll1.setVisibility(View.VISIBLE);
 
-                        new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {
-                            @Override
-                            public void run() {
-                                getMoreProducts();
-                            }
-                        }, 2000);
-                    }
+                    new Handler(Looper.getMainLooper()).postDelayed(this::getMoreProducts, 2000);
                 }
             }
         });
         addControls(view);
         addEvents();
 
-
         return view;
     }
 
+    private List<String> getCarouselItems() {
+        List<String> items = new ArrayList<>();
+        items.add("https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/categories%2Fgiavi.jpg?alt=media&token=3670aa28-c5ff-483c-bf9a-3325bf48ce9c");
+        items.add("https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/categories%2Fgiavi.jpg?alt=media&token=3670aa28-c5ff-483c-bf9a-3325bf48ce9c");
+        items.add("https://firebasestorage.googleapis.com/v0/b/agri-mart-2342e.appspot.com/o/categories%2Fgiavi.jpg?alt=media&token=3670aa28-c5ff-483c-bf9a-3325bf48ce9c");
+        return items;
+    }
+
     private void addEvents() {
         btnSearch.setOnClickListener(v -> {
             Intent intent = new Intent(getActivity(), SearchActivity.class);
@@ -200,56 +169,47 @@
                 .replace(R.id.fragment_container, fragment)
                 .commit();
     }
-    public void getFirstProducts(){
+
+    public void getFirstProducts() {
         FirebaseFirestore db = FirebaseFirestore.getInstance();
-        Query first= db.collection("products")
+        Query first = db.collection("products")
                 .orderBy("product_id")
                 .limit(10);
 
         first.get()
-                .addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {
-                    @Override
-                    public void onSuccess(QuerySnapshot queryDocumentSnapshots) {
-                        List<Product> productList = queryDocumentSnapshots.toObjects(Product.class);
-                        products.addAll(productList);
-                        productAdapter.notifyDataSetChanged();
+                .addOnSuccessListener(queryDocumentSnapshots -> {
+                    List<Product> productList = queryDocumentSnapshots.toObjects(Product.class);
+                    products.addAll(productList);
+                    productAdapter.notifyDataSetChanged();
 
-                        lastVisible=queryDocumentSnapshots.getDocuments()
-                                .get(queryDocumentSnapshots.size()-1);
-                    }
+                    lastVisible = queryDocumentSnapshots.getDocuments()
+                            .get(queryDocumentSnapshots.size() - 1);
                 });
     }
 
-    public void getMoreProducts(){
+    public void getMoreProducts() {
         FirebaseFirestore db = FirebaseFirestore.getInstance();
-        Query next= db.collection("products")
+        Query next = db.collection("products")
                 .orderBy("product_id")
                 .startAfter(lastVisible)
                 .limit(10);
 
         next.get()
-                .addOnSuccessListener(new OnSuccessListener<QuerySnapshot>() {
-                    @Override
-                    public void onSuccess(QuerySnapshot queryDocumentSnapshots) {
-
-                        List<Product> newList = queryDocumentSnapshots.toObjects(Product.class);
+                .addOnSuccessListener(queryDocumentSnapshots -> {
+                    List<Product> newList = queryDocumentSnapshots.toObjects(Product.class);
 
-                        products.addAll(newList);
-                        productAdapter.notifyDataSetChanged();
-                        isLoading=false;
+                    products.addAll(newList);
+                    productAdapter.notifyDataSetChanged();
+                    isLoading = false;
 
-                        if(!newList.isEmpty()){
-                            lastVisible=queryDocumentSnapshots.getDocuments()
-                                    .get(queryDocumentSnapshots.size()-1);
-                        }
-                        currentPage+=1;
-                        if(currentPage==totalPages){
-                            binding.seeAll1.setVisibility(View.GONE);
-                        }
-
+                    if (!newList.isEmpty()) {
+                        lastVisible = queryDocumentSnapshots.getDocuments()
+                                .get(queryDocumentSnapshots.size() - 1);
+                    }
+                    currentPage += 1;
+                    if (currentPage == totalPages) {
+                        binding.seeAll1.setVisibility(View.GONE);
                     }
                 });
     }
-
-
 }
\ No newline at end of file
Index: app/src/main/res/values/strings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources>\r\n    <string name=\"app_name\">AgriMart</string>\r\n    <string name=\"categories\">Danh mục sản phẩm</string>\r\n    <string name=\"see_all\">Xem thêm</string>\r\n    <string name=\"top_selling\">Bán chạy nhất</string>\r\n    <string name=\"home\">Trang chủ</string>\r\n    <string name=\"profile\">Tôi</string>\r\n    <string name=\"order\">Order</string>\r\n    <string name=\"newsfeed\">Tin mới</string>\r\n    <string name=\"post\">Đăng bài</string>\r\n    <string name=\"cart\">Giỏ hàng</string>\r\n    <string name=\"ng_b_n\">Đăng bán</string>\r\n    <string name=\"cho\">Chợ</string>\r\n    <string name=\"search_hint\">tim kiem san pham</string>\r\n    <string name=\"search\">Tìm kiếm sản phẩm</string>\r\n    <string name=\"ng_nh_p\">Đăng nhập</string>\r\n    <string name=\"ch_a_c_t_i_kho_n\"><u>Chưa có tài khoản?</u></string>\r\n    <string name=\"m_t_kh_u\">Mật khẩu</string>\r\n    <string name=\"continue_with_google\"> Đăng nhập bằng Google</string>\r\n    <string name=\"dang_ky\">Chưa có tài khoản? <b>Đăng ký</b></string>\r\n    <string name=\"c_t_i_kho_n\"><u>Đã có tài khoản?</u></string>\r\n    <string name=\"ng_k_b_ng_s_i_n_tho_i\">Đăng ký bằng số điện thoại</string>\r\n    <string name=\"ng_k_b_ng_email\">Đăng ký bằng email</string>\r\n    <string name=\"qu_n_m_t_kh_u\">Quên mật khẩu?</string>\r\n    <string name=\"nh_p_email_ho_c_s_i_n_tho_i\">Nhập email hoặc số điện thoại</string>\r\n    <string name=\"sodienthoai\">Số điện thoại</string>\r\n    <string name=\"g_i_l_i\"><u>Gửi lại</u></string>\r\n\r\n\r\n    <!-- PostProduct -->\r\n    <string name=\"nh_p_s_l_ng_c_n_b_n\">Your desired text here</string>\r\n    <string name=\"desc_vegetable\">Rau củ quả</string>\r\n    <string name=\"desc_fruit\">Trái cây</string>\r\n    <string name=\"desc_meat_eggs\">Trứng, thịt</string>\r\n    <string name=\"desc_milk\">Sữa, bơ, phô mai</string>\r\n    <string name=\"desc_sweets\">Bánh kẹo</string>\r\n    <string name=\"nh_s_n_ph_m_th_c_t\">Ảnh sản phẩm thực tế</string>\r\n    <string name=\"th_m_nh\">Thêm ảnh</string>\r\n    <string name=\"todo\">TODO</string>\r\n    <string name=\"t_n_s_n_ph_m\">Tên sản phẩm</string>\r\n    <string name=\"c_i_t_n_n_i_l_n_t_t_c_s_gi_p_ch_r_t_nhi_u_y\">Cái tên nói lên tất cả sẽ giúp ích rất nhiều đấy</string>\r\n    <string name=\"m_t_s_n_ph_m\">Mô tả sản phẩm</string>\r\n    <string name=\"m_t_o_n_v_n_m_t_y_s_gi_p_s_n_ph_m_c_a_b_n_b_n_d_h_n\">Một đoạn văn mô tả đầy đủ sẽ giúp sản phẩm của bạn bán dễ hơn</string>\r\n    <string name=\"ph_n_lo_i_s_n_ph_m\">Phân loại sản phẩm</string>\r\n    <string name=\"rau_c\">Rau củ</string>\r\n    <string name=\"tr_i_c_y\">Trái cây</string>\r\n    <string name=\"th_t_tr_ng\">Thịt, Trứng</string>\r\n    <string name=\"s_a_b_ph_mai\">Sữa, bơ, phô mai</string>\r\n    <string name=\"ng_t\">Đồ ngọt</string>\r\n    <string name=\"ti_p_t_c\">Tiếp tục</string>\r\n    <string name=\"gi_b_n\">Giá bán</string>\r\n    <string name=\"n_v\">Đơn vị </string>\r\n    <string name=\"hi_n_c\">Hiện có</string>\r\n    <string name=\"nh_p_gi_b_n\">Nhập giá bán</string>\r\n    <string name=\"nh_p_n_v_kg_ch_c_c_i\">Nhập đơn vị (kg, chục, cái)</string>\r\n    <string name=\"_200kg\">200kg</string>\r\n    <string name=\"s_u_ri_ng_lan_t_a\">Sầu riêng lan tỏa</string>\r\n    <string name=\"_20_ng_i_ang_h_i\">20 người đang hỏi</string>\r\n    <string name=\"dang_san_pham\">ĐĂNG SẢN PHẨM</string>\r\n    <string name=\"frash_fruits_vegetable\"><![CDATA[Frash Fruits & Vegetable]]></string>\r\n    <string name=\"add_cart\">Thêm vào giỏ hàng</string>\r\n    <string name=\"product_name\">Tên sản phẩm</string>\r\n    <string name=\"price\">50.000đ</string>\r\n    <string name=\"address\">123 Lê Trọng Tấn, Quận Tân Phú, TP.HCM</string>\r\n    <string name=\"description\">Mô tả chi tiết</string>\r\n    <string name=\"descriptions\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</string>\r\n    <string name=\"user_review\">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</string>\r\n    <string name=\"my_cart\">Giỏ hàng</string>\r\n    <string name=\"notification_time\">1 phút trước</string>\r\n    <string name=\"notification_message\">Khánh vừa đặt mua sản phẩm của bạn: Chuối nhà trồng...</string>\r\n    <string name=\"cate\">Gian hàng</string>\r\n    <string name=\"t_m_theo_danh_m_c\">Tìm theo danh mục</string>\r\n    <string name=\"thong_bao\">Thông báo</string>\r\n    <string name=\"n_h_ng\">Đơn hàng</string>\r\n    <string name=\"_0\">0</string>\r\n    <string name=\"ch_l_y_h_ng\">Chờ lấy hàng</string>\r\n    <string name=\"n_h_y\">Đơn hủy</string>\r\n    <string name=\"tr_h_ng_ho_n_ti_n\">Trả hàng/Hoàn tiền</string>\r\n\r\n    <string-array name=\"filter_options\">\r\n        <item>Sort by Price</item>\r\n        <item>Newest</item>\r\n        <item>Oldest</item>\r\n    </string-array>\r\n\r\n    <style name=\"TabTextAppearance\" parent=\"TextAppearance.Design.Tab\">\r\n        <item name=\"android:textSize\">16sp</item>\r\n        <item name=\"android:textColor\">@color/black</item>\r\n        <item name=\"android:textStyle\">bold</item>\r\n    </style>\r\n\r\n    <string name=\"default_web_client_id\">689266518488-dggpokj3cbc4t7hoa53j2vsa6vt59qi4.apps.googleusercontent.com</string>\r\n    <!-- TODO: Remove or change this placeholder text -->\r\n    <string name=\"hello_blank_fragment\">Hello blank fragment</string>\r\n    <string name=\"email\">Email</string>\r\n\r\n    //facebook\r\n    <string name=\"loginwithfacebook\">Đăng nhập bằng Facebook</string>\r\n    <string name=\"facebook_app_id\">456355280794721</string>\r\n    <string name=\"fb_login_protocol_scheme\">fb456355280794721</string>\r\n    <string name=\"facebook_client_token\">fbc7722b3ad7a34dbf443766e81403c1</string>\r\n    <string name=\"facebook_app_secret\">239308944b7f4f13d8ed33f56b79c7cc</string>\r\n    <!-- Strings used for fragments for navigation -->\r\n    <string name=\"first_fragment_label\">First Fragment</string>\r\n    <string name=\"second_fragment_label\">Second Fragment</string>\r\n    <string name=\"next\">Next</string>\r\n    <string name=\"previous\">Previous</string>\r\n\r\n    <string name=\"lorem_ipsum\">\r\n        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam in scelerisque sem. Mauris\r\n        volutpat, dolor id interdum ullamcorper, risus dolor egestas lectus, sit amet mattis purus\r\n        dui nec risus. Maecenas non sodales nisi, vel dictum dolor. Class aptent taciti sociosqu ad\r\n        litora torquent per conubia nostra, per inceptos himenaeos. Suspendisse blandit eleifend\r\n        diam, vel rutrum tellus vulputate quis. Aliquam eget libero aliquet, imperdiet nisl a,\r\n        ornare ex. Sed rhoncus est ut libero porta lobortis. Fusce in dictum tellus.\\n\\n\r\n        Suspendisse interdum ornare ante. Aliquam nec cursus lorem. Morbi id magna felis. Vivamus\r\n        egestas, est a condimentum egestas, turpis nisl iaculis ipsum, in dictum tellus dolor sed\r\n        neque. Morbi tellus erat, dapibus ut sem a, iaculis tincidunt dui. Interdum et malesuada\r\n        fames ac ante ipsum primis in faucibus. Curabitur et eros porttitor, ultricies urna vitae,\r\n        molestie nibh. Phasellus at commodo eros, non aliquet metus. Sed maximus nisl nec dolor\r\n        bibendum, vel congue leo egestas.\\n\\n\r\n        Sed interdum tortor nibh, in sagittis risus mollis quis. Curabitur mi odio, condimentum sit\r\n        amet auctor at, mollis non turpis. Nullam pretium libero vestibulum, finibus orci vel,\r\n        molestie quam. Fusce blandit tincidunt nulla, quis sollicitudin libero facilisis et. Integer\r\n        interdum nunc ligula, et fermentum metus hendrerit id. Vestibulum lectus felis, dictum at\r\n        lacinia sit amet, tristique id quam. Cras eu consequat dui. Suspendisse sodales nunc ligula,\r\n        in lobortis sem porta sed. Integer id ultrices magna, in luctus elit. Sed a pellentesque\r\n        est.\\n\\n\r\n        Aenean nunc velit, lacinia sed dolor sed, ultrices viverra nulla. Etiam a venenatis nibh.\r\n        Morbi laoreet, tortor sed facilisis varius, nibh orci rhoncus nulla, id elementum leo dui\r\n        non lorem. Nam mollis ipsum quis auctor varius. Quisque elementum eu libero sed commodo. In\r\n        eros nisl, imperdiet vel imperdiet et, scelerisque a mauris. Pellentesque varius ex nunc,\r\n        quis imperdiet eros placerat ac. Duis finibus orci et est auctor tincidunt. Sed non viverra\r\n        ipsum. Nunc quis augue egestas, cursus lorem at, molestie sem. Morbi a consectetur ipsum, a\r\n        placerat diam. Etiam vulputate dignissim convallis. Integer faucibus mauris sit amet finibus\r\n        convallis.\\n\\n\r\n        Phasellus in aliquet mi. Pellentesque habitant morbi tristique senectus et netus et\r\n        malesuada fames ac turpis egestas. In volutpat arcu ut felis sagittis, in finibus massa\r\n        gravida. Pellentesque id tellus orci. Integer dictum, lorem sed efficitur ullamcorper,\r\n        libero justo consectetur ipsum, in mollis nisl ex sed nisl. Donec maximus ullamcorper\r\n        sodales. Praesent bibendum rhoncus tellus nec feugiat. In a ornare nulla. Donec rhoncus\r\n        libero vel nunc consequat, quis tincidunt nisl eleifend. Cras bibendum enim a justo luctus\r\n        vestibulum. Fusce dictum libero quis erat maximus, vitae volutpat diam dignissim.\r\n    </string>\r\n    <string name=\"verify\">Email xác nhận đã được gửi đến địa chỉ email của bạn. Vui lòng kiểm tra email và nhấn vào liên kết xác nhận để hoàn tất đăng ký.</string>\r\n    <string name=\"new_product\">Mới nhất</string>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
--- a/app/src/main/res/values/strings.xml	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ b/app/src/main/res/values/strings.xml	(date 1731060991275)
@@ -144,4 +144,6 @@
     </string>
     <string name="verify">Email xác nhận đã được gửi đến địa chỉ email của bạn. Vui lòng kiểm tra email và nhấn vào liên kết xác nhận để hoàn tất đăng ký.</string>
     <string name="new_product">Mới nhất</string>
+    <string name="goi_y">Gợi ý cho bạn</string>
+    <string name="no_reslut">Không tìm thấy kết quả đã nhập</string>
 </resources>
\ No newline at end of file
Index: app/src/main/res/layout/item_store.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/item_store.xml b/app/src/main/res/layout/item_store.xml
new file mode 100644
--- /dev/null	(date 1731057112469)
+++ b/app/src/main/res/layout/item_store.xml	(date 1731057112469)
@@ -0,0 +1,38 @@
+<?xml version="1.0" encoding="utf-8"?>
+<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    android:layout_width="match_parent"
+    android:layout_height="wrap_content"
+    android:orientation="vertical"
+    android:padding="16dp">
+
+    <!-- Store information -->
+    <LinearLayout
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:orientation="horizontal"
+        android:gravity="center_vertical">
+
+        <ImageView
+            android:id="@+id/store_image"
+            android:layout_width="40dp"
+            android:layout_height="40dp"
+            android:layout_marginEnd="12dp"
+            android:src="@drawable/user"
+            android:scaleType="centerCrop"/>
+
+        <TextView
+            android:id="@+id/store_name"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:textSize="18sp"
+            android:textColor="@android:color/black"
+            android:text="Store Name" />
+    </LinearLayout>
+
+    <androidx.recyclerview.widget.RecyclerView
+        android:id="@+id/rv_products"
+        android:layout_width="match_parent"
+        android:layout_height="wrap_content"
+        android:layout_marginTop="8dp"/>
+
+</LinearLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/agrimart/adapter/StoreAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/agrimart/adapter/StoreAdapter.java b/app/src/main/java/com/example/agrimart/adapter/StoreAdapter.java
new file mode 100644
--- /dev/null	(date 1731057259677)
+++ b/app/src/main/java/com/example/agrimart/adapter/StoreAdapter.java	(date 1731057259677)
@@ -0,0 +1,66 @@
+package com.example.agrimart.adapter;
+
+import android.view.LayoutInflater;
+import android.view.View;
+import android.view.ViewGroup;
+import android.widget.TextView;
+
+import androidx.annotation.NonNull;
+import androidx.recyclerview.widget.LinearLayoutManager;
+import androidx.recyclerview.widget.RecyclerView;
+
+import com.example.agrimart.R;
+import com.example.agrimart.data.model.Store;
+
+import java.util.List;
+
+public class StoreAdapter extends RecyclerView.Adapter<StoreAdapter.StoreViewHolder> {
+
+    private List<Store> stores;
+    private OnStoreClickListener onStoreClickListener;
+
+    public StoreAdapter(List<Store> stores, OnStoreClickListener onStoreClickListener) {
+        this.stores = stores;
+        this.onStoreClickListener = onStoreClickListener;
+    }
+
+    @NonNull
+    @Override
+    public StoreViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
+        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.item_store, parent, false);
+        return new StoreViewHolder(view);
+    }
+
+    @Override
+    public void onBindViewHolder(@NonNull StoreViewHolder holder, int position) {
+        Store store = stores.get(position);
+        holder.storeName.setText(store.getName());
+        holder.itemView.setOnClickListener(v -> onStoreClickListener.onStoreClick(store));
+
+        ProductAdapter productAdapter = new ProductAdapter(store.getProducts(), product -> {
+
+        });
+        holder.rvProducts.setLayoutManager(new LinearLayoutManager(holder.itemView.getContext(), LinearLayoutManager.HORIZONTAL, false));
+        holder.rvProducts.setAdapter(productAdapter);
+    }
+
+    @Override
+    public int getItemCount() {
+        return stores.size();
+    }
+
+    public interface OnStoreClickListener {
+        void onStoreClick(Store store);
+    }
+
+    static class StoreViewHolder extends RecyclerView.ViewHolder {
+        TextView storeName;
+        RecyclerView rvProducts;
+
+        StoreViewHolder(@NonNull View itemView) {
+            super(itemView);
+            storeName = itemView.findViewById(R.id.store_name);
+            rvProducts = itemView.findViewById(R.id.rv_products);
+        }
+    }
+}
\ No newline at end of file
Index: app/src/main/res/layout/category_item_1.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:layout_width=\"173dp\"\r\n    android:layout_height=\"189dp\"\r\n    android:background=\"@drawable/bg_category_1\">\r\n\r\n    <ImageView\r\n        android:id=\"@+id/imgCate\"\r\n        android:layout_width=\"111dp\"\r\n        android:layout_height=\"74dp\"\r\n        android:scaleType=\"centerCrop\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginTop=\"28dp\"\r\n        app:srcCompat=\"@drawable/frash_fruits\" />\r\n\r\n    <TextView\r\n        android:id=\"@+id/tvName\"\r\n        android:layout_width=\"93dp\"\r\n        android:layout_height=\"44dp\"\r\n        android:layout_below=\"@id/imgCate\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginTop=\"27dp\"\r\n        android:ellipsize=\"end\"\r\n        android:gravity=\"center\"\r\n        android:textColor=\"#181725\"\r\n        android:textSize=\"16sp\"\r\n        android:letterSpacing=\"0.01\"\r\n        android:text=\"@string/frash_fruits_vegetable\" />\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/category_item_1.xml b/app/src/main/res/layout/category_item_1.xml
--- a/app/src/main/res/layout/category_item_1.xml	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ b/app/src/main/res/layout/category_item_1.xml	(date 1730995327100)
@@ -1,30 +1,37 @@
-<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:layout_width="173dp"
-    android:layout_height="189dp"
-    android:background="@drawable/bg_category_1">
+    android:layout_width="100dp"
+    android:layout_height="120dp">
+
 
-    <ImageView
-        android:id="@+id/imgCate"
-        android:layout_width="111dp"
-        android:layout_height="74dp"
-        android:scaleType="centerCrop"
-        android:layout_centerHorizontal="true"
-        android:layout_marginTop="28dp"
-        app:srcCompat="@drawable/frash_fruits" />
+    <RelativeLayout
+        android:layout_width="match_parent"
+        android:layout_height="match_parent"
+        android:padding="8dp"
+        android:layout_margin="1dp"
+        android:background="@color/white">
+
+        <de.hdodenhof.circleimageview.CircleImageView
+            android:id="@+id/imgCate"
+            android:layout_width="60dp"
+            android:layout_height="60dp"
+            android:layout_marginTop="8dp"
+            android:scaleType="centerCrop"
+            android:src="@drawable/vegetable"
+            android:layout_centerHorizontal="true"
+            app:civ_circle_background_color="@color/white" />
 
-    <TextView
-        android:id="@+id/tvName"
-        android:layout_width="93dp"
-        android:layout_height="44dp"
-        android:layout_below="@id/imgCate"
-        android:layout_centerHorizontal="true"
-        android:layout_marginTop="27dp"
-        android:ellipsize="end"
-        android:gravity="center"
-        android:textColor="#181725"
-        android:textSize="16sp"
-        android:letterSpacing="0.01"
-        android:text="@string/frash_fruits_vegetable" />
+        <TextView
+            android:id="@+id/tvName"
+            android:layout_width="wrap_content"
+            android:layout_height="wrap_content"
+            android:layout_marginTop="4dp"
+            android:text="@string/rau_c"
+            android:textColor="#181725"
+            android:layout_centerHorizontal="true"
+            android:textSize="14sp"
+            android:layout_below="@id/imgCate"
+            android:textStyle="bold" />
+    </RelativeLayout>
+
 </RelativeLayout>
\ No newline at end of file
Index: app/src/main/res/layout/fragment_home.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<layout xmlns:tools=\"http://schemas.android.com/tools\"\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\">\r\n\r\n    <data>\r\n        <variable\r\n            name=\"viewmodel\"\r\n            type=\"com.example.agrimart.viewmodel.HomeFragmentViewModel\" />\r\n    </data>\r\n    <RelativeLayout\r\n        android:id=\"@+id/main1\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n\r\n        tools:context=\".ui.Homepage.HomeFragment\">\r\n\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:id=\"@+id/header\"\r\n            android:background=\"@color/green\"\r\n            android:orientation=\"horizontal\"\r\n            android:padding=\"16dp\">\r\n            <RelativeLayout\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:id=\"@+id/top\">\r\n\r\n            </RelativeLayout>\r\n\r\n            <androidx.cardview.widget.CardView\r\n                android:id=\"@+id/search_card\"\r\n                android:layout_width=\"0dp\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_weight=\"1\"\r\n                app:cardCornerRadius=\"8dp\"\r\n                app:cardElevation=\"4dp\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:orientation=\"horizontal\"\r\n                    android:padding=\"8dp\"\r\n                    android:id=\"@+id/search_bar\">\r\n\r\n                    <ImageButton\r\n                        android:id=\"@+id/search_icon\"\r\n                        android:layout_width=\"32dp\"\r\n                        android:layout_height=\"32dp\"\r\n                        android:src=\"@drawable/ic_search\"\r\n                        android:tint=\"@color/black\"\r\n                        android:layout_gravity=\"center_vertical\"\r\n                        android:layout_marginEnd=\"8dp\"\r\n                        android:background=\"@color/white\"/>\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/search_input\"\r\n                        android:layout_width=\"0dp\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_weight=\"1\"\r\n                        android:hint=\"@string/search\"\r\n                        android:background=\"@null\"\r\n                        android:padding=\"8dp\"\r\n                        android:textColor=\"@android:color/black\"\r\n                        android:textColorHint=\"@android:color/darker_gray\" />\r\n                </LinearLayout>\r\n            </androidx.cardview.widget.CardView>\r\n\r\n            <ImageButton\r\n                android:id=\"@+id/notification_icon\"\r\n                android:layout_width=\"32dp\"\r\n                android:layout_height=\"32dp\"\r\n                android:layout_gravity=\"center_vertical\"\r\n                android:layout_marginStart=\"10dp\"\r\n                android:layout_marginEnd=\"4dp\"\r\n                android:background=\"@color/green\"\r\n                android:src=\"@drawable/message\"\r\n                android:tint=\"@color/black\" />\r\n        </LinearLayout>\r\n\r\n        <androidx.core.widget.NestedScrollView\r\n            android:id=\"@+id/scroll_view\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_below=\"@id/header\">\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:orientation=\"vertical\"\r\n                android:layout_marginTop=\"10dp\">\r\n\r\n                <RelativeLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\">\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/categories\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginStart=\"24dp\"\r\n                        android:fontFamily=\"@font/circular_std\"\r\n                        android:text=\"@string/categories\"\r\n                        android:textColor=\"#272727\"\r\n                        android:textSize=\"20sp\"\r\n                        android:textStyle=\"bold\" />\r\n\r\n                    <TextView\r\n                        android:id=\"@+id/see_all\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_alignParentEnd=\"true\"\r\n                        android:layout_marginEnd=\"23dp\"\r\n                        android:fontFamily=\"@font/circular_std\"\r\n                        android:text=\"@string/see_all\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"14sp\" />\r\n                </RelativeLayout>\r\n\r\n                <androidx.recyclerview.widget.RecyclerView\r\n                    android:id=\"@+id/rvCategories\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:padding=\"8dp\"\r\n                    android:clipToPadding=\"false\" />\r\n                <RelativeLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\">\r\n                    <TextView\r\n                        android:id=\"@+id/top_selling\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:textSize=\"20sp\"\r\n                        android:text=\"@string/new_product\"\r\n                        android:layout_marginTop=\"24dp\"\r\n                        android:textColor=\"#272727\"\r\n                        android:fontFamily=\"@font/gabarito\"\r\n                        android:layout_marginStart=\"24dp\" />\r\n\r\n\r\n                </RelativeLayout>\r\n\r\n                <androidx.recyclerview.widget.RecyclerView\r\n                    android:id=\"@+id/rvProducts\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"10dp\"\r\n                    android:nestedScrollingEnabled=\"false\"\r\n                    android:padding=\"10dp\"/>\r\n                <TextView\r\n                    android:id=\"@+id/see_all1\"\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:textSize=\"14sp\"\r\n                    android:layout_marginTop=\"16dp\"\r\n                    android:fontFamily=\"@font/circular_std\"\r\n                    android:text=\"Đang tải...\"\r\n                    android:layout_gravity=\"center\"\r\n                    android:padding=\"8dp\"\r\n                    android:textColor=\"@color/black\" />\r\n\r\n            </LinearLayout>\r\n        </androidx.core.widget.NestedScrollView>\r\n    </RelativeLayout>\r\n</layout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_home.xml b/app/src/main/res/layout/fragment_home.xml
--- a/app/src/main/res/layout/fragment_home.xml	(revision ce0170f819d965cecddf9d194d0b2e9db7a32c7f)
+++ b/app/src/main/res/layout/fragment_home.xml	(date 1730998742605)
@@ -12,7 +12,6 @@
         android:id="@+id/main1"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
-
         tools:context=".ui.Homepage.HomeFragment">
 
         <LinearLayout
@@ -26,7 +25,6 @@
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:id="@+id/top">
-
             </RelativeLayout>
 
             <androidx.cardview.widget.CardView
@@ -88,12 +86,18 @@
             <LinearLayout
                 android:layout_width="match_parent"
                 android:layout_height="wrap_content"
-                android:orientation="vertical"
-                android:layout_marginTop="10dp">
+                android:orientation="vertical">
+
+                <androidx.viewpager2.widget.ViewPager2
+                    android:id="@+id/carousel_viewpager"
+                    android:layout_width="match_parent"
+                    android:layout_height="200dp"
+                    android:layout_below="@id/header"/>
 
                 <RelativeLayout
                     android:layout_width="match_parent"
-                    android:layout_height="wrap_content">
+                    android:layout_height="wrap_content"
+                    android:layout_marginTop="10dp">
 
                     <TextView
                         android:id="@+id/categories"
@@ -105,17 +109,6 @@
                         android:textColor="#272727"
                         android:textSize="20sp"
                         android:textStyle="bold" />
-
-                    <TextView
-                        android:id="@+id/see_all"
-                        android:layout_width="wrap_content"
-                        android:layout_height="wrap_content"
-                        android:layout_alignParentEnd="true"
-                        android:layout_marginEnd="23dp"
-                        android:fontFamily="@font/circular_std"
-                        android:text="@string/see_all"
-                        android:textColor="@color/black"
-                        android:textSize="14sp" />
                 </RelativeLayout>
 
                 <androidx.recyclerview.widget.RecyclerView
@@ -125,6 +118,7 @@
                     android:layout_marginTop="10dp"
                     android:padding="8dp"
                     android:clipToPadding="false" />
+
                 <RelativeLayout
                     android:layout_width="match_parent"
                     android:layout_height="wrap_content">
@@ -133,7 +127,7 @@
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         android:textSize="20sp"
-                        android:text="@string/new_product"
+                        android:text="Dành riêng cho bạn"
                         android:layout_marginTop="24dp"
                         android:textColor="#272727"
                         android:fontFamily="@font/gabarito"
